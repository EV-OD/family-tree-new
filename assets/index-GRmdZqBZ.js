var u9=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var jj=u9((Zj,b0)=>{function d9(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function __(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var b_={exports:{}},Gd={},w_={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gl=Symbol.for("react.element"),f9=Symbol.for("react.portal"),h9=Symbol.for("react.fragment"),p9=Symbol.for("react.strict_mode"),m9=Symbol.for("react.profiler"),g9=Symbol.for("react.provider"),v9=Symbol.for("react.context"),y9=Symbol.for("react.forward_ref"),_9=Symbol.for("react.suspense"),b9=Symbol.for("react.memo"),w9=Symbol.for("react.lazy"),zv=Symbol.iterator;function x9(t){return t===null||typeof t!="object"?null:(t=zv&&t[zv]||t["@@iterator"],typeof t=="function"?t:null)}var x_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E_=Object.assign,S_={};function la(t,e,n){this.props=t,this.context=e,this.refs=S_,this.updater=n||x_}la.prototype.isReactComponent={};la.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};la.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function I_(){}I_.prototype=la.prototype;function w0(t,e,n){this.props=t,this.context=e,this.refs=S_,this.updater=n||x_}var x0=w0.prototype=new I_;x0.constructor=w0;E_(x0,la.prototype);x0.isPureReactComponent=!0;var Hv=Array.isArray,C_=Object.prototype.hasOwnProperty,E0={current:null},A_={key:!0,ref:!0,__self:!0,__source:!0};function T_(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)C_.call(e,r)&&!A_.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Gl,type:t,key:o,ref:s,props:i,_owner:E0.current}}function E9(t,e){return{$$typeof:Gl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function S0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Gl}function S9(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var qv=/\/+/g;function bh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?S9(""+t.key):e.toString(36)}function du(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Gl:case f9:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+bh(s,0):r,Hv(i)?(n="",t!=null&&(n=t.replace(qv,"$&/")+"/"),du(i,e,n,"",function(d){return d})):i!=null&&(S0(i)&&(i=E9(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(qv,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Hv(t))for(var l=0;l<t.length;l++){o=t[l];var c=r+bh(o,l);s+=du(o,e,n,c,i)}else if(c=x9(t),typeof c=="function")for(t=c.call(t),l=0;!(o=t.next()).done;)o=o.value,c=r+bh(o,l++),s+=du(o,e,n,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Rc(t,e,n){if(t==null)return t;var r=[],i=0;return du(t,r,"","",function(o){return e.call(n,o,i++)}),r}function I9(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pn={current:null},fu={transition:null},C9={ReactCurrentDispatcher:pn,ReactCurrentBatchConfig:fu,ReactCurrentOwner:E0};function k_(){throw Error("act(...) is not supported in production builds of React.")}Re.Children={map:Rc,forEach:function(t,e,n){Rc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Rc(t,function(){e++}),e},toArray:function(t){return Rc(t,function(e){return e})||[]},only:function(t){if(!S0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Re.Component=la;Re.Fragment=h9;Re.Profiler=m9;Re.PureComponent=w0;Re.StrictMode=p9;Re.Suspense=_9;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C9;Re.act=k_;Re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=E_({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=E0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)C_.call(e,c)&&!A_.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Gl,type:t.type,key:i,ref:o,props:r,_owner:s}};Re.createContext=function(t){return t={$$typeof:v9,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:g9,_context:t},t.Consumer=t};Re.createElement=T_;Re.createFactory=function(t){var e=T_.bind(null,t);return e.type=t,e};Re.createRef=function(){return{current:null}};Re.forwardRef=function(t){return{$$typeof:y9,render:t}};Re.isValidElement=S0;Re.lazy=function(t){return{$$typeof:w9,_payload:{_status:-1,_result:t},_init:I9}};Re.memo=function(t,e){return{$$typeof:b9,type:t,compare:e===void 0?null:e}};Re.startTransition=function(t){var e=fu.transition;fu.transition={};try{t()}finally{fu.transition=e}};Re.unstable_act=k_;Re.useCallback=function(t,e){return pn.current.useCallback(t,e)};Re.useContext=function(t){return pn.current.useContext(t)};Re.useDebugValue=function(){};Re.useDeferredValue=function(t){return pn.current.useDeferredValue(t)};Re.useEffect=function(t,e){return pn.current.useEffect(t,e)};Re.useId=function(){return pn.current.useId()};Re.useImperativeHandle=function(t,e,n){return pn.current.useImperativeHandle(t,e,n)};Re.useInsertionEffect=function(t,e){return pn.current.useInsertionEffect(t,e)};Re.useLayoutEffect=function(t,e){return pn.current.useLayoutEffect(t,e)};Re.useMemo=function(t,e){return pn.current.useMemo(t,e)};Re.useReducer=function(t,e,n){return pn.current.useReducer(t,e,n)};Re.useRef=function(t){return pn.current.useRef(t)};Re.useState=function(t){return pn.current.useState(t)};Re.useSyncExternalStore=function(t,e,n){return pn.current.useSyncExternalStore(t,e,n)};Re.useTransition=function(){return pn.current.useTransition()};Re.version="18.3.1";w_.exports=Re;var M=w_.exports;const _r=__(M),Tp=d9({__proto__:null,default:_r},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A9=M,T9=Symbol.for("react.element"),k9=Symbol.for("react.fragment"),R9=Object.prototype.hasOwnProperty,N9=A9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,P9={key:!0,ref:!0,__self:!0,__source:!0};function R_(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)R9.call(e,r)&&!P9.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:T9,type:t,key:o,ref:s,props:i,_owner:N9.current}}Gd.Fragment=k9;Gd.jsx=R_;Gd.jsxs=R_;b_.exports=Gd;var F=b_.exports,N_={exports:{}},jn={},P_={exports:{}},L_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,j){var z=B.length;B.push(j);e:for(;0<z;){var W=z-1>>>1,G=B[W];if(0<i(G,j))B[W]=j,B[z]=G,z=W;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var j=B[0],z=B.pop();if(z!==j){B[0]=z;e:for(var W=0,G=B.length,H=G>>>1;W<H;){var Y=2*(W+1)-1,q=B[Y],Q=Y+1,J=B[Q];if(0>i(q,z))Q<G&&0>i(J,q)?(B[W]=J,B[Q]=z,W=Q):(B[W]=q,B[Y]=z,W=Y);else if(Q<G&&0>i(J,z))B[W]=J,B[Q]=z,W=Q;else break e}}return j}function i(B,j){var z=B.sortIndex-j.sortIndex;return z!==0?z:B.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],d=[],u=1,f=null,h=3,p=!1,v=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(B){for(var j=n(d);j!==null;){if(j.callback===null)r(d);else if(j.startTime<=B)r(d),j.sortIndex=j.expirationTime,e(c,j);else break;j=n(d)}}function E(B){if(y=!1,_(B),!v)if(n(c)!==null)v=!0,D(A);else{var j=n(d);j!==null&&O(E,j.startTime-B)}}function A(B,j){v=!1,y&&(y=!1,g(x),x=-1),p=!0;var z=h;try{for(_(j),f=n(c);f!==null&&(!(f.expirationTime>j)||B&&!T());){var W=f.callback;if(typeof W=="function"){f.callback=null,h=f.priorityLevel;var G=W(f.expirationTime<=j);j=t.unstable_now(),typeof G=="function"?f.callback=G:f===n(c)&&r(c),_(j)}else r(c);f=n(c)}if(f!==null)var H=!0;else{var Y=n(d);Y!==null&&O(E,Y.startTime-j),H=!1}return H}finally{f=null,h=z,p=!1}}var k=!1,I=null,x=-1,S=5,R=-1;function T(){return!(t.unstable_now()-R<S)}function N(){if(I!==null){var B=t.unstable_now();R=B;var j=!0;try{j=I(!0,B)}finally{j?P():(k=!1,I=null)}}else k=!1}var P;if(typeof b=="function")P=function(){b(N)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,$=V.port2;V.port1.onmessage=N,P=function(){$.postMessage(null)}}else P=function(){w(N,0)};function D(B){I=B,k||(k=!0,P())}function O(B,j){x=w(function(){B(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(A))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(B){switch(h){case 1:case 2:case 3:var j=3;break;default:j=h}var z=h;h=j;try{return B()}finally{h=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,j){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var z=h;h=B;try{return j()}finally{h=z}},t.unstable_scheduleCallback=function(B,j,z){var W=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?W+z:W):z=W,B){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=z+G,B={id:u++,callback:j,priorityLevel:B,startTime:z,expirationTime:G,sortIndex:-1},z>W?(B.sortIndex=z,e(d,B),n(c)===null&&B===n(d)&&(y?(g(x),x=-1):y=!0,O(E,z-W))):(B.sortIndex=G,e(c,B),v||p||(v=!0,D(A))),B},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(B){var j=h;return function(){var z=h;h=j;try{return B.apply(this,arguments)}finally{h=z}}}})(L_);P_.exports=L_;var L9=P_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M9=M,Bn=L9;function te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var M_=new Set,vl={};function Go(t,e){zs(t,e),zs(t+"Capture",e)}function zs(t,e){for(vl[t]=e,t=0;t<e.length;t++)M_.add(e[t])}var ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kp=Object.prototype.hasOwnProperty,O9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wv={},Gv={};function D9(t){return kp.call(Gv,t)?!0:kp.call(Wv,t)?!1:O9.test(t)?Gv[t]=!0:(Wv[t]=!0,!1)}function V9(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function U9(t,e,n,r){if(e===null||typeof e>"u"||V9(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mn(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Yt[t]=new mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Yt[e]=new mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Yt[t]=new mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Yt[t]=new mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Yt[t]=new mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Yt[t]=new mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Yt[t]=new mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Yt[t]=new mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Yt[t]=new mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var I0=/[\-:]([a-z])/g;function C0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(I0,C0);Yt[e]=new mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(I0,C0);Yt[e]=new mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(I0,C0);Yt[e]=new mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Yt[t]=new mn(t,1,!1,t.toLowerCase(),null,!1,!1)});Yt.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Yt[t]=new mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function A0(t,e,n,r){var i=Yt.hasOwnProperty(e)?Yt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(U9(e,n,i,r)&&(n=null),r||i===null?D9(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var fi=M9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nc=Symbol.for("react.element"),fs=Symbol.for("react.portal"),hs=Symbol.for("react.fragment"),T0=Symbol.for("react.strict_mode"),Rp=Symbol.for("react.profiler"),O_=Symbol.for("react.provider"),D_=Symbol.for("react.context"),k0=Symbol.for("react.forward_ref"),Np=Symbol.for("react.suspense"),Pp=Symbol.for("react.suspense_list"),R0=Symbol.for("react.memo"),Si=Symbol.for("react.lazy"),V_=Symbol.for("react.offscreen"),Yv=Symbol.iterator;function Na(t){return t===null||typeof t!="object"?null:(t=Yv&&t[Yv]||t["@@iterator"],typeof t=="function"?t:null)}var ft=Object.assign,wh;function qa(t){if(wh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);wh=e&&e[1]||""}return`
`+wh+t}var xh=!1;function Eh(t,e){if(!t||xh)return"";xh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var c=`
`+i[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=l);break}}}finally{xh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?qa(t):""}function F9(t){switch(t.tag){case 5:return qa(t.type);case 16:return qa("Lazy");case 13:return qa("Suspense");case 19:return qa("SuspenseList");case 0:case 2:case 15:return t=Eh(t.type,!1),t;case 11:return t=Eh(t.type.render,!1),t;case 1:return t=Eh(t.type,!0),t;default:return""}}function Lp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hs:return"Fragment";case fs:return"Portal";case Rp:return"Profiler";case T0:return"StrictMode";case Np:return"Suspense";case Pp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case D_:return(t.displayName||"Context")+".Consumer";case O_:return(t._context.displayName||"Context")+".Provider";case k0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R0:return e=t.displayName||null,e!==null?e:Lp(t.type)||"Memo";case Si:e=t._payload,t=t._init;try{return Lp(t(e))}catch{}}return null}function B9(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lp(e);case 8:return e===T0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function U_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function j9(t){var e=U_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Pc(t){t._valueTracker||(t._valueTracker=j9(t))}function F_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=U_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function zu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mp(t,e){var n=e.checked;return ft({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Kv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Wi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function B_(t,e){e=e.checked,e!=null&&A0(t,"checked",e,!1)}function Op(t,e){B_(t,e);var n=Wi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Dp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Dp(t,e.type,Wi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Xv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Dp(t,e,n){(e!=="number"||zu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wa=Array.isArray;function Cs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Wi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Vp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(te(91));return ft({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(te(92));if(Wa(n)){if(1<n.length)throw Error(te(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Wi(n)}}function j_(t,e){var n=Wi(e.value),r=Wi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Jv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Up(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lc,z_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Lc=Lc||document.createElement("div"),Lc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var tl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$9=["Webkit","ms","Moz","O"];Object.keys(tl).forEach(function(t){$9.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),tl[e]=tl[t]})});function H_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||tl.hasOwnProperty(t)&&tl[t]?(""+e).trim():e+"px"}function q_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=H_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var z9=ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fp(t,e){if(e){if(z9[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(te(62))}}function Bp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jp=null;function N0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $p=null,As=null,Ts=null;function Zv(t){if(t=Xl(t)){if(typeof $p!="function")throw Error(te(280));var e=t.stateNode;e&&(e=Jd(e),$p(t.stateNode,t.type,e))}}function W_(t){As?Ts?Ts.push(t):Ts=[t]:As=t}function G_(){if(As){var t=As,e=Ts;if(Ts=As=null,Zv(t),e)for(t=0;t<e.length;t++)Zv(e[t])}}function Y_(t,e){return t(e)}function K_(){}var Sh=!1;function X_(t,e,n){if(Sh)return t(e,n);Sh=!0;try{return Y_(t,e,n)}finally{Sh=!1,(As!==null||Ts!==null)&&(K_(),G_())}}function _l(t,e){var n=t.stateNode;if(n===null)return null;var r=Jd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(te(231,e,typeof n));return n}var zp=!1;if(ti)try{var Pa={};Object.defineProperty(Pa,"passive",{get:function(){zp=!0}}),window.addEventListener("test",Pa,Pa),window.removeEventListener("test",Pa,Pa)}catch{zp=!1}function H9(t,e,n,r,i,o,s,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(u){this.onError(u)}}var nl=!1,Hu=null,qu=!1,Hp=null,q9={onError:function(t){nl=!0,Hu=t}};function W9(t,e,n,r,i,o,s,l,c){nl=!1,Hu=null,H9.apply(q9,arguments)}function G9(t,e,n,r,i,o,s,l,c){if(W9.apply(this,arguments),nl){if(nl){var d=Hu;nl=!1,Hu=null}else throw Error(te(198));qu||(qu=!0,Hp=d)}}function Yo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Q_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function e2(t){if(Yo(t)!==t)throw Error(te(188))}function Y9(t){var e=t.alternate;if(!e){if(e=Yo(t),e===null)throw Error(te(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return e2(i),t;if(o===r)return e2(i),e;o=o.sibling}throw Error(te(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(te(189))}}if(n.alternate!==r)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?t:e}function J_(t){return t=Y9(t),t!==null?Z_(t):null}function Z_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Z_(t);if(e!==null)return e;t=t.sibling}return null}var e5=Bn.unstable_scheduleCallback,t2=Bn.unstable_cancelCallback,K9=Bn.unstable_shouldYield,X9=Bn.unstable_requestPaint,Et=Bn.unstable_now,Q9=Bn.unstable_getCurrentPriorityLevel,P0=Bn.unstable_ImmediatePriority,t5=Bn.unstable_UserBlockingPriority,Wu=Bn.unstable_NormalPriority,J9=Bn.unstable_LowPriority,n5=Bn.unstable_IdlePriority,Yd=null,Ar=null;function Z9(t){if(Ar&&typeof Ar.onCommitFiberRoot=="function")try{Ar.onCommitFiberRoot(Yd,t,void 0,(t.current.flags&128)===128)}catch{}}var lr=Math.clz32?Math.clz32:nE,eE=Math.log,tE=Math.LN2;function nE(t){return t>>>=0,t===0?32:31-(eE(t)/tE|0)|0}var Mc=64,Oc=4194304;function Ga(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=Ga(l):(o&=s,o!==0&&(r=Ga(o)))}else s=n&~i,s!==0?r=Ga(s):o!==0&&(r=Ga(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-lr(e),i=1<<n,r|=t[n],e&=~i;return r}function rE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-lr(o),l=1<<s,c=i[s];c===-1?(!(l&n)||l&r)&&(i[s]=rE(l,e)):c<=e&&(t.expiredLanes|=l),o&=~l}}function qp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function r5(){var t=Mc;return Mc<<=1,!(Mc&4194240)&&(Mc=64),t}function Ih(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Yl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-lr(e),t[e]=n}function oE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-lr(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function L0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-lr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ge=0;function i5(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var o5,M0,s5,a5,l5,Wp=!1,Dc=[],Oi=null,Di=null,Vi=null,bl=new Map,wl=new Map,Ci=[],sE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function n2(t,e){switch(t){case"focusin":case"focusout":Oi=null;break;case"dragenter":case"dragleave":Di=null;break;case"mouseover":case"mouseout":Vi=null;break;case"pointerover":case"pointerout":bl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wl.delete(e.pointerId)}}function La(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Xl(e),e!==null&&M0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function aE(t,e,n,r,i){switch(e){case"focusin":return Oi=La(Oi,t,e,n,r,i),!0;case"dragenter":return Di=La(Di,t,e,n,r,i),!0;case"mouseover":return Vi=La(Vi,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return bl.set(o,La(bl.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,wl.set(o,La(wl.get(o)||null,t,e,n,r,i)),!0}return!1}function c5(t){var e=yo(t.target);if(e!==null){var n=Yo(e);if(n!==null){if(e=n.tag,e===13){if(e=Q_(n),e!==null){t.blockedOn=e,l5(t.priority,function(){s5(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);jp=r,n.target.dispatchEvent(r),jp=null}else return e=Xl(n),e!==null&&M0(e),t.blockedOn=n,!1;e.shift()}return!0}function r2(t,e,n){hu(t)&&n.delete(e)}function lE(){Wp=!1,Oi!==null&&hu(Oi)&&(Oi=null),Di!==null&&hu(Di)&&(Di=null),Vi!==null&&hu(Vi)&&(Vi=null),bl.forEach(r2),wl.forEach(r2)}function Ma(t,e){t.blockedOn===e&&(t.blockedOn=null,Wp||(Wp=!0,Bn.unstable_scheduleCallback(Bn.unstable_NormalPriority,lE)))}function xl(t){function e(i){return Ma(i,t)}if(0<Dc.length){Ma(Dc[0],t);for(var n=1;n<Dc.length;n++){var r=Dc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Oi!==null&&Ma(Oi,t),Di!==null&&Ma(Di,t),Vi!==null&&Ma(Vi,t),bl.forEach(e),wl.forEach(e),n=0;n<Ci.length;n++)r=Ci[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ci.length&&(n=Ci[0],n.blockedOn===null);)c5(n),n.blockedOn===null&&Ci.shift()}var ks=fi.ReactCurrentBatchConfig,Yu=!0;function cE(t,e,n,r){var i=Ge,o=ks.transition;ks.transition=null;try{Ge=1,O0(t,e,n,r)}finally{Ge=i,ks.transition=o}}function uE(t,e,n,r){var i=Ge,o=ks.transition;ks.transition=null;try{Ge=4,O0(t,e,n,r)}finally{Ge=i,ks.transition=o}}function O0(t,e,n,r){if(Yu){var i=Gp(t,e,n,r);if(i===null)Oh(t,e,r,Ku,n),n2(t,r);else if(aE(i,t,e,n,r))r.stopPropagation();else if(n2(t,r),e&4&&-1<sE.indexOf(t)){for(;i!==null;){var o=Xl(i);if(o!==null&&o5(o),o=Gp(t,e,n,r),o===null&&Oh(t,e,r,Ku,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Oh(t,e,r,null,n)}}var Ku=null;function Gp(t,e,n,r){if(Ku=null,t=N0(r),t=yo(t),t!==null)if(e=Yo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Q_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ku=t,null}function u5(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Q9()){case P0:return 1;case t5:return 4;case Wu:case J9:return 16;case n5:return 536870912;default:return 16}default:return 16}}var Pi=null,D0=null,pu=null;function d5(){if(pu)return pu;var t,e=D0,n=e.length,r,i="value"in Pi?Pi.value:Pi.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return pu=i.slice(t,1<r?1-r:void 0)}function mu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Vc(){return!0}function i2(){return!1}function $n(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Vc:i2,this.isPropagationStopped=i2,this}return ft(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vc)},persist:function(){},isPersistent:Vc}),e}var ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},V0=$n(ca),Kl=ft({},ca,{view:0,detail:0}),dE=$n(Kl),Ch,Ah,Oa,Kd=ft({},Kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:U0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oa&&(Oa&&t.type==="mousemove"?(Ch=t.screenX-Oa.screenX,Ah=t.screenY-Oa.screenY):Ah=Ch=0,Oa=t),Ch)},movementY:function(t){return"movementY"in t?t.movementY:Ah}}),o2=$n(Kd),fE=ft({},Kd,{dataTransfer:0}),hE=$n(fE),pE=ft({},Kl,{relatedTarget:0}),Th=$n(pE),mE=ft({},ca,{animationName:0,elapsedTime:0,pseudoElement:0}),gE=$n(mE),vE=ft({},ca,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yE=$n(vE),_E=ft({},ca,{data:0}),s2=$n(_E),bE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xE[t])?!!e[t]:!1}function U0(){return EE}var SE=ft({},Kl,{key:function(t){if(t.key){var e=bE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=mu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:U0,charCode:function(t){return t.type==="keypress"?mu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?mu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),IE=$n(SE),CE=ft({},Kd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),a2=$n(CE),AE=ft({},Kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:U0}),TE=$n(AE),kE=ft({},ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),RE=$n(kE),NE=ft({},Kd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),PE=$n(NE),LE=[9,13,27,32],F0=ti&&"CompositionEvent"in window,rl=null;ti&&"documentMode"in document&&(rl=document.documentMode);var ME=ti&&"TextEvent"in window&&!rl,f5=ti&&(!F0||rl&&8<rl&&11>=rl),l2=" ",c2=!1;function h5(t,e){switch(t){case"keyup":return LE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function p5(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ps=!1;function OE(t,e){switch(t){case"compositionend":return p5(e);case"keypress":return e.which!==32?null:(c2=!0,l2);case"textInput":return t=e.data,t===l2&&c2?null:t;default:return null}}function DE(t,e){if(ps)return t==="compositionend"||!F0&&h5(t,e)?(t=d5(),pu=D0=Pi=null,ps=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return f5&&e.locale!=="ko"?null:e.data;default:return null}}var VE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!VE[t.type]:e==="textarea"}function m5(t,e,n,r){W_(r),e=Xu(e,"onChange"),0<e.length&&(n=new V0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var il=null,El=null;function UE(t){C5(t,0)}function Xd(t){var e=vs(t);if(F_(e))return t}function FE(t,e){if(t==="change")return e}var g5=!1;if(ti){var kh;if(ti){var Rh="oninput"in document;if(!Rh){var d2=document.createElement("div");d2.setAttribute("oninput","return;"),Rh=typeof d2.oninput=="function"}kh=Rh}else kh=!1;g5=kh&&(!document.documentMode||9<document.documentMode)}function f2(){il&&(il.detachEvent("onpropertychange",v5),El=il=null)}function v5(t){if(t.propertyName==="value"&&Xd(El)){var e=[];m5(e,El,t,N0(t)),X_(UE,e)}}function BE(t,e,n){t==="focusin"?(f2(),il=e,El=n,il.attachEvent("onpropertychange",v5)):t==="focusout"&&f2()}function jE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xd(El)}function $E(t,e){if(t==="click")return Xd(e)}function zE(t,e){if(t==="input"||t==="change")return Xd(e)}function HE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dr=typeof Object.is=="function"?Object.is:HE;function Sl(t,e){if(dr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!kp.call(e,i)||!dr(t[i],e[i]))return!1}return!0}function h2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function p2(t,e){var n=h2(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=h2(n)}}function y5(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?y5(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _5(){for(var t=window,e=zu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=zu(t.document)}return e}function B0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qE(t){var e=_5(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&y5(n.ownerDocument.documentElement,n)){if(r!==null&&B0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=p2(n,o);var s=p2(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var WE=ti&&"documentMode"in document&&11>=document.documentMode,ms=null,Yp=null,ol=null,Kp=!1;function m2(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kp||ms==null||ms!==zu(r)||(r=ms,"selectionStart"in r&&B0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ol&&Sl(ol,r)||(ol=r,r=Xu(Yp,"onSelect"),0<r.length&&(e=new V0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ms)))}function Uc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gs={animationend:Uc("Animation","AnimationEnd"),animationiteration:Uc("Animation","AnimationIteration"),animationstart:Uc("Animation","AnimationStart"),transitionend:Uc("Transition","TransitionEnd")},Nh={},b5={};ti&&(b5=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function Qd(t){if(Nh[t])return Nh[t];if(!gs[t])return t;var e=gs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in b5)return Nh[t]=e[n];return t}var w5=Qd("animationend"),x5=Qd("animationiteration"),E5=Qd("animationstart"),S5=Qd("transitionend"),I5=new Map,g2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function no(t,e){I5.set(t,e),Go(e,[t])}for(var Ph=0;Ph<g2.length;Ph++){var Lh=g2[Ph],GE=Lh.toLowerCase(),YE=Lh[0].toUpperCase()+Lh.slice(1);no(GE,"on"+YE)}no(w5,"onAnimationEnd");no(x5,"onAnimationIteration");no(E5,"onAnimationStart");no("dblclick","onDoubleClick");no("focusin","onFocus");no("focusout","onBlur");no(S5,"onTransitionEnd");zs("onMouseEnter",["mouseout","mouseover"]);zs("onMouseLeave",["mouseout","mouseover"]);zs("onPointerEnter",["pointerout","pointerover"]);zs("onPointerLeave",["pointerout","pointerover"]);Go("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Go("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Go("onBeforeInput",["compositionend","keypress","textInput","paste"]);Go("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Go("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Go("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ya));function v2(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,G9(r,e,void 0,t),t.currentTarget=null}function C5(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&i.isPropagationStopped())break e;v2(i,l,d),o=c}else for(s=0;s<r.length;s++){if(l=r[s],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&i.isPropagationStopped())break e;v2(i,l,d),o=c}}}if(qu)throw t=Hp,qu=!1,Hp=null,t}function ot(t,e){var n=e[e1];n===void 0&&(n=e[e1]=new Set);var r=t+"__bubble";n.has(r)||(A5(e,t,2,!1),n.add(r))}function Mh(t,e,n){var r=0;e&&(r|=4),A5(n,t,r,e)}var Fc="_reactListening"+Math.random().toString(36).slice(2);function Il(t){if(!t[Fc]){t[Fc]=!0,M_.forEach(function(n){n!=="selectionchange"&&(KE.has(n)||Mh(n,!1,t),Mh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fc]||(e[Fc]=!0,Mh("selectionchange",!1,e))}}function A5(t,e,n,r){switch(u5(e)){case 1:var i=cE;break;case 4:i=uE;break;default:i=O0}n=i.bind(null,e,n,t),i=void 0,!zp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Oh(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;l!==null;){if(s=yo(l),s===null)return;if(c=s.tag,c===5||c===6){r=o=s;continue e}l=l.parentNode}}r=r.return}X_(function(){var d=o,u=N0(n),f=[];e:{var h=I5.get(t);if(h!==void 0){var p=V0,v=t;switch(t){case"keypress":if(mu(n)===0)break e;case"keydown":case"keyup":p=IE;break;case"focusin":v="focus",p=Th;break;case"focusout":v="blur",p=Th;break;case"beforeblur":case"afterblur":p=Th;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=o2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=hE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=TE;break;case w5:case x5:case E5:p=gE;break;case S5:p=RE;break;case"scroll":p=dE;break;case"wheel":p=PE;break;case"copy":case"cut":case"paste":p=yE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=a2}var y=(e&4)!==0,w=!y&&t==="scroll",g=y?h!==null?h+"Capture":null:h;y=[];for(var b=d,_;b!==null;){_=b;var E=_.stateNode;if(_.tag===5&&E!==null&&(_=E,g!==null&&(E=_l(b,g),E!=null&&y.push(Cl(b,E,_)))),w)break;b=b.return}0<y.length&&(h=new p(h,v,null,n,u),f.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&n!==jp&&(v=n.relatedTarget||n.fromElement)&&(yo(v)||v[ni]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(v=n.relatedTarget||n.toElement,p=d,v=v?yo(v):null,v!==null&&(w=Yo(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=d),p!==v)){if(y=o2,E="onMouseLeave",g="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(y=a2,E="onPointerLeave",g="onPointerEnter",b="pointer"),w=p==null?h:vs(p),_=v==null?h:vs(v),h=new y(E,b+"leave",p,n,u),h.target=w,h.relatedTarget=_,E=null,yo(u)===d&&(y=new y(g,b+"enter",v,n,u),y.target=_,y.relatedTarget=w,E=y),w=E,p&&v)t:{for(y=p,g=v,b=0,_=y;_;_=is(_))b++;for(_=0,E=g;E;E=is(E))_++;for(;0<b-_;)y=is(y),b--;for(;0<_-b;)g=is(g),_--;for(;b--;){if(y===g||g!==null&&y===g.alternate)break t;y=is(y),g=is(g)}y=null}else y=null;p!==null&&y2(f,h,p,y,!1),v!==null&&w!==null&&y2(f,w,v,y,!0)}}e:{if(h=d?vs(d):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var A=FE;else if(u2(h))if(g5)A=zE;else{A=jE;var k=BE}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(A=$E);if(A&&(A=A(t,d))){m5(f,A,n,u);break e}k&&k(t,h,d),t==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&Dp(h,"number",h.value)}switch(k=d?vs(d):window,t){case"focusin":(u2(k)||k.contentEditable==="true")&&(ms=k,Yp=d,ol=null);break;case"focusout":ol=Yp=ms=null;break;case"mousedown":Kp=!0;break;case"contextmenu":case"mouseup":case"dragend":Kp=!1,m2(f,n,u);break;case"selectionchange":if(WE)break;case"keydown":case"keyup":m2(f,n,u)}var I;if(F0)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else ps?h5(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(f5&&n.locale!=="ko"&&(ps||x!=="onCompositionStart"?x==="onCompositionEnd"&&ps&&(I=d5()):(Pi=u,D0="value"in Pi?Pi.value:Pi.textContent,ps=!0)),k=Xu(d,x),0<k.length&&(x=new s2(x,t,null,n,u),f.push({event:x,listeners:k}),I?x.data=I:(I=p5(n),I!==null&&(x.data=I)))),(I=ME?OE(t,n):DE(t,n))&&(d=Xu(d,"onBeforeInput"),0<d.length&&(u=new s2("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:d}),u.data=I))}C5(f,e)})}function Cl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=_l(t,n),o!=null&&r.unshift(Cl(t,o,i)),o=_l(t,e),o!=null&&r.push(Cl(t,o,i))),t=t.return}return r}function is(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function y2(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,i?(c=_l(n,o),c!=null&&s.unshift(Cl(n,c,l))):i||(c=_l(n,o),c!=null&&s.push(Cl(n,c,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var XE=/\r\n?/g,QE=/\u0000|\uFFFD/g;function _2(t){return(typeof t=="string"?t:""+t).replace(XE,`
`).replace(QE,"")}function Bc(t,e,n){if(e=_2(e),_2(t)!==e&&n)throw Error(te(425))}function Qu(){}var Xp=null,Qp=null;function Jp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zp=typeof setTimeout=="function"?setTimeout:void 0,JE=typeof clearTimeout=="function"?clearTimeout:void 0,b2=typeof Promise=="function"?Promise:void 0,ZE=typeof queueMicrotask=="function"?queueMicrotask:typeof b2<"u"?function(t){return b2.resolve(null).then(t).catch(eS)}:Zp;function eS(t){setTimeout(function(){throw t})}function Dh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),xl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);xl(e)}function Ui(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function w2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ua=Math.random().toString(36).slice(2),Sr="__reactFiber$"+ua,Al="__reactProps$"+ua,ni="__reactContainer$"+ua,e1="__reactEvents$"+ua,tS="__reactListeners$"+ua,nS="__reactHandles$"+ua;function yo(t){var e=t[Sr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ni]||n[Sr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=w2(t);t!==null;){if(n=t[Sr])return n;t=w2(t)}return e}t=n,n=t.parentNode}return null}function Xl(t){return t=t[Sr]||t[ni],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(te(33))}function Jd(t){return t[Al]||null}var t1=[],ys=-1;function ro(t){return{current:t}}function at(t){0>ys||(t.current=t1[ys],t1[ys]=null,ys--)}function et(t,e){ys++,t1[ys]=t.current,t.current=e}var Gi={},ln=ro(Gi),xn=ro(!1),No=Gi;function Hs(t,e){var n=t.type.contextTypes;if(!n)return Gi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function En(t){return t=t.childContextTypes,t!=null}function Ju(){at(xn),at(ln)}function x2(t,e,n){if(ln.current!==Gi)throw Error(te(168));et(ln,e),et(xn,n)}function T5(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(te(108,B9(t)||"Unknown",i));return ft({},n,r)}function Zu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gi,No=ln.current,et(ln,t),et(xn,xn.current),!0}function E2(t,e,n){var r=t.stateNode;if(!r)throw Error(te(169));n?(t=T5(t,e,No),r.__reactInternalMemoizedMergedChildContext=t,at(xn),at(ln),et(ln,t)):at(xn),et(xn,n)}var Hr=null,Zd=!1,Vh=!1;function k5(t){Hr===null?Hr=[t]:Hr.push(t)}function rS(t){Zd=!0,k5(t)}function io(){if(!Vh&&Hr!==null){Vh=!0;var t=0,e=Ge;try{var n=Hr;for(Ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Hr=null,Zd=!1}catch(i){throw Hr!==null&&(Hr=Hr.slice(t+1)),e5(P0,io),i}finally{Ge=e,Vh=!1}}return null}var _s=[],bs=0,ed=null,td=0,Wn=[],Gn=0,Po=null,Wr=1,Gr="";function mo(t,e){_s[bs++]=td,_s[bs++]=ed,ed=t,td=e}function R5(t,e,n){Wn[Gn++]=Wr,Wn[Gn++]=Gr,Wn[Gn++]=Po,Po=t;var r=Wr;t=Gr;var i=32-lr(r)-1;r&=~(1<<i),n+=1;var o=32-lr(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Wr=1<<32-lr(e)+i|n<<i|r,Gr=o+t}else Wr=1<<o|n<<i|r,Gr=t}function j0(t){t.return!==null&&(mo(t,1),R5(t,1,0))}function $0(t){for(;t===ed;)ed=_s[--bs],_s[bs]=null,td=_s[--bs],_s[bs]=null;for(;t===Po;)Po=Wn[--Gn],Wn[Gn]=null,Gr=Wn[--Gn],Wn[Gn]=null,Wr=Wn[--Gn],Wn[Gn]=null}var Vn=null,Mn=null,ct=!1,ar=null;function N5(t,e){var n=Yn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function S2(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vn=t,Mn=Ui(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vn=t,Mn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Po!==null?{id:Wr,overflow:Gr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Vn=t,Mn=null,!0):!1;default:return!1}}function n1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function r1(t){if(ct){var e=Mn;if(e){var n=e;if(!S2(t,e)){if(n1(t))throw Error(te(418));e=Ui(n.nextSibling);var r=Vn;e&&S2(t,e)?N5(r,n):(t.flags=t.flags&-4097|2,ct=!1,Vn=t)}}else{if(n1(t))throw Error(te(418));t.flags=t.flags&-4097|2,ct=!1,Vn=t}}}function I2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vn=t}function jc(t){if(t!==Vn)return!1;if(!ct)return I2(t),ct=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Jp(t.type,t.memoizedProps)),e&&(e=Mn)){if(n1(t))throw P5(),Error(te(418));for(;e;)N5(t,e),e=Ui(e.nextSibling)}if(I2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mn=Ui(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mn=null}}else Mn=Vn?Ui(t.stateNode.nextSibling):null;return!0}function P5(){for(var t=Mn;t;)t=Ui(t.nextSibling)}function qs(){Mn=Vn=null,ct=!1}function z0(t){ar===null?ar=[t]:ar.push(t)}var iS=fi.ReactCurrentBatchConfig;function Da(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(te(309));var r=n.stateNode}if(!r)throw Error(te(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(te(284));if(!n._owner)throw Error(te(290,t))}return t}function $c(t,e){throw t=Object.prototype.toString.call(e),Error(te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function C2(t){var e=t._init;return e(t._payload)}function L5(t){function e(g,b){if(t){var _=g.deletions;_===null?(g.deletions=[b],g.flags|=16):_.push(b)}}function n(g,b){if(!t)return null;for(;b!==null;)e(g,b),b=b.sibling;return null}function r(g,b){for(g=new Map;b!==null;)b.key!==null?g.set(b.key,b):g.set(b.index,b),b=b.sibling;return g}function i(g,b){return g=$i(g,b),g.index=0,g.sibling=null,g}function o(g,b,_){return g.index=_,t?(_=g.alternate,_!==null?(_=_.index,_<b?(g.flags|=2,b):_):(g.flags|=2,b)):(g.flags|=1048576,b)}function s(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,b,_,E){return b===null||b.tag!==6?(b=Hh(_,g.mode,E),b.return=g,b):(b=i(b,_),b.return=g,b)}function c(g,b,_,E){var A=_.type;return A===hs?u(g,b,_.props.children,E,_.key):b!==null&&(b.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Si&&C2(A)===b.type)?(E=i(b,_.props),E.ref=Da(g,b,_),E.return=g,E):(E=xu(_.type,_.key,_.props,null,g.mode,E),E.ref=Da(g,b,_),E.return=g,E)}function d(g,b,_,E){return b===null||b.tag!==4||b.stateNode.containerInfo!==_.containerInfo||b.stateNode.implementation!==_.implementation?(b=qh(_,g.mode,E),b.return=g,b):(b=i(b,_.children||[]),b.return=g,b)}function u(g,b,_,E,A){return b===null||b.tag!==7?(b=Io(_,g.mode,E,A),b.return=g,b):(b=i(b,_),b.return=g,b)}function f(g,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Hh(""+b,g.mode,_),b.return=g,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Nc:return _=xu(b.type,b.key,b.props,null,g.mode,_),_.ref=Da(g,null,b),_.return=g,_;case fs:return b=qh(b,g.mode,_),b.return=g,b;case Si:var E=b._init;return f(g,E(b._payload),_)}if(Wa(b)||Na(b))return b=Io(b,g.mode,_,null),b.return=g,b;$c(g,b)}return null}function h(g,b,_,E){var A=b!==null?b.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return A!==null?null:l(g,b,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Nc:return _.key===A?c(g,b,_,E):null;case fs:return _.key===A?d(g,b,_,E):null;case Si:return A=_._init,h(g,b,A(_._payload),E)}if(Wa(_)||Na(_))return A!==null?null:u(g,b,_,E,null);$c(g,_)}return null}function p(g,b,_,E,A){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(_)||null,l(b,g,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Nc:return g=g.get(E.key===null?_:E.key)||null,c(b,g,E,A);case fs:return g=g.get(E.key===null?_:E.key)||null,d(b,g,E,A);case Si:var k=E._init;return p(g,b,_,k(E._payload),A)}if(Wa(E)||Na(E))return g=g.get(_)||null,u(b,g,E,A,null);$c(b,E)}return null}function v(g,b,_,E){for(var A=null,k=null,I=b,x=b=0,S=null;I!==null&&x<_.length;x++){I.index>x?(S=I,I=null):S=I.sibling;var R=h(g,I,_[x],E);if(R===null){I===null&&(I=S);break}t&&I&&R.alternate===null&&e(g,I),b=o(R,b,x),k===null?A=R:k.sibling=R,k=R,I=S}if(x===_.length)return n(g,I),ct&&mo(g,x),A;if(I===null){for(;x<_.length;x++)I=f(g,_[x],E),I!==null&&(b=o(I,b,x),k===null?A=I:k.sibling=I,k=I);return ct&&mo(g,x),A}for(I=r(g,I);x<_.length;x++)S=p(I,g,x,_[x],E),S!==null&&(t&&S.alternate!==null&&I.delete(S.key===null?x:S.key),b=o(S,b,x),k===null?A=S:k.sibling=S,k=S);return t&&I.forEach(function(T){return e(g,T)}),ct&&mo(g,x),A}function y(g,b,_,E){var A=Na(_);if(typeof A!="function")throw Error(te(150));if(_=A.call(_),_==null)throw Error(te(151));for(var k=A=null,I=b,x=b=0,S=null,R=_.next();I!==null&&!R.done;x++,R=_.next()){I.index>x?(S=I,I=null):S=I.sibling;var T=h(g,I,R.value,E);if(T===null){I===null&&(I=S);break}t&&I&&T.alternate===null&&e(g,I),b=o(T,b,x),k===null?A=T:k.sibling=T,k=T,I=S}if(R.done)return n(g,I),ct&&mo(g,x),A;if(I===null){for(;!R.done;x++,R=_.next())R=f(g,R.value,E),R!==null&&(b=o(R,b,x),k===null?A=R:k.sibling=R,k=R);return ct&&mo(g,x),A}for(I=r(g,I);!R.done;x++,R=_.next())R=p(I,g,x,R.value,E),R!==null&&(t&&R.alternate!==null&&I.delete(R.key===null?x:R.key),b=o(R,b,x),k===null?A=R:k.sibling=R,k=R);return t&&I.forEach(function(N){return e(g,N)}),ct&&mo(g,x),A}function w(g,b,_,E){if(typeof _=="object"&&_!==null&&_.type===hs&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Nc:e:{for(var A=_.key,k=b;k!==null;){if(k.key===A){if(A=_.type,A===hs){if(k.tag===7){n(g,k.sibling),b=i(k,_.props.children),b.return=g,g=b;break e}}else if(k.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Si&&C2(A)===k.type){n(g,k.sibling),b=i(k,_.props),b.ref=Da(g,k,_),b.return=g,g=b;break e}n(g,k);break}else e(g,k);k=k.sibling}_.type===hs?(b=Io(_.props.children,g.mode,E,_.key),b.return=g,g=b):(E=xu(_.type,_.key,_.props,null,g.mode,E),E.ref=Da(g,b,_),E.return=g,g=E)}return s(g);case fs:e:{for(k=_.key;b!==null;){if(b.key===k)if(b.tag===4&&b.stateNode.containerInfo===_.containerInfo&&b.stateNode.implementation===_.implementation){n(g,b.sibling),b=i(b,_.children||[]),b.return=g,g=b;break e}else{n(g,b);break}else e(g,b);b=b.sibling}b=qh(_,g.mode,E),b.return=g,g=b}return s(g);case Si:return k=_._init,w(g,b,k(_._payload),E)}if(Wa(_))return v(g,b,_,E);if(Na(_))return y(g,b,_,E);$c(g,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,b!==null&&b.tag===6?(n(g,b.sibling),b=i(b,_),b.return=g,g=b):(n(g,b),b=Hh(_,g.mode,E),b.return=g,g=b),s(g)):n(g,b)}return w}var Ws=L5(!0),M5=L5(!1),nd=ro(null),rd=null,ws=null,H0=null;function q0(){H0=ws=rd=null}function W0(t){var e=nd.current;at(nd),t._currentValue=e}function i1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Rs(t,e){rd=t,H0=ws=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wn=!0),t.firstContext=null)}function Jn(t){var e=t._currentValue;if(H0!==t)if(t={context:t,memoizedValue:e,next:null},ws===null){if(rd===null)throw Error(te(308));ws=t,rd.dependencies={lanes:0,firstContext:t}}else ws=ws.next=t;return e}var _o=null;function G0(t){_o===null?_o=[t]:_o.push(t)}function O5(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,G0(e)):(n.next=i.next,i.next=n),e.interleaved=n,ri(t,r)}function ri(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ii=!1;function Y0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D5(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Jr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,je&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ri(t,n)}return i=r.interleaved,i===null?(e.next=e,G0(r)):(e.next=i.next,i.next=e),r.interleaved=e,ri(t,n)}function gu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,L0(t,n)}}function A2(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function id(t,e,n,r){var i=t.updateQueue;Ii=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,s===null?o=d:s.next=d,s=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==s&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(o!==null){var f=i.baseState;s=0,u=d=c=null,l=o;do{var h=l.lane,p=l.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,y=l;switch(h=e,p=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){f=v.call(p,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,h=typeof v=="function"?v.call(p,f,h):v,h==null)break e;f=ft({},f,h);break e;case 2:Ii=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=p,c=f):u=u.next=p,s|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(c=f),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Mo|=s,t.lanes=s,t.memoizedState=f}}function T2(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(te(191,i));i.call(r)}}}var Ql={},Tr=ro(Ql),Tl=ro(Ql),kl=ro(Ql);function bo(t){if(t===Ql)throw Error(te(174));return t}function K0(t,e){switch(et(kl,e),et(Tl,t),et(Tr,Ql),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Up(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Up(e,t)}at(Tr),et(Tr,e)}function Gs(){at(Tr),at(Tl),at(kl)}function V5(t){bo(kl.current);var e=bo(Tr.current),n=Up(e,t.type);e!==n&&(et(Tl,t),et(Tr,n))}function X0(t){Tl.current===t&&(at(Tr),at(Tl))}var ut=ro(0);function od(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Uh=[];function Q0(){for(var t=0;t<Uh.length;t++)Uh[t]._workInProgressVersionPrimary=null;Uh.length=0}var vu=fi.ReactCurrentDispatcher,Fh=fi.ReactCurrentBatchConfig,Lo=0,dt=null,Nt=null,Dt=null,sd=!1,sl=!1,Rl=0,oS=0;function Jt(){throw Error(te(321))}function J0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!dr(t[n],e[n]))return!1;return!0}function Z0(t,e,n,r,i,o){if(Lo=o,dt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vu.current=t===null||t.memoizedState===null?cS:uS,t=n(r,i),sl){o=0;do{if(sl=!1,Rl=0,25<=o)throw Error(te(301));o+=1,Dt=Nt=null,e.updateQueue=null,vu.current=dS,t=n(r,i)}while(sl)}if(vu.current=ad,e=Nt!==null&&Nt.next!==null,Lo=0,Dt=Nt=dt=null,sd=!1,e)throw Error(te(300));return t}function em(){var t=Rl!==0;return Rl=0,t}function yr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?dt.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function Zn(){if(Nt===null){var t=dt.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var e=Dt===null?dt.memoizedState:Dt.next;if(e!==null)Dt=e,Nt=t;else{if(t===null)throw Error(te(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Dt===null?dt.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function Nl(t,e){return typeof e=="function"?e(t):e}function Bh(t){var e=Zn(),n=e.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=t;var r=Nt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,c=null,d=o;do{var u=d.lane;if((Lo&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,s=r):c=c.next=f,dt.lanes|=u,Mo|=u}d=d.next}while(d!==null&&d!==o);c===null?s=r:c.next=l,dr(r,e.memoizedState)||(wn=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,dt.lanes|=o,Mo|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function jh(t){var e=Zn(),n=e.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);dr(o,e.memoizedState)||(wn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function U5(){}function F5(t,e){var n=dt,r=Zn(),i=e(),o=!dr(r.memoizedState,i);if(o&&(r.memoizedState=i,wn=!0),r=r.queue,tm($5.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Dt!==null&&Dt.memoizedState.tag&1){if(n.flags|=2048,Pl(9,j5.bind(null,n,r,i,e),void 0,null),Vt===null)throw Error(te(349));Lo&30||B5(n,e,i)}return i}function B5(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function j5(t,e,n,r){e.value=n,e.getSnapshot=r,z5(e)&&H5(t)}function $5(t,e,n){return n(function(){z5(e)&&H5(t)})}function z5(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dr(t,n)}catch{return!0}}function H5(t){var e=ri(t,1);e!==null&&cr(e,t,1,-1)}function k2(t){var e=yr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nl,lastRenderedState:t},e.queue=t,t=t.dispatch=lS.bind(null,dt,t),[e.memoizedState,t]}function Pl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function q5(){return Zn().memoizedState}function yu(t,e,n,r){var i=yr();dt.flags|=t,i.memoizedState=Pl(1|e,n,void 0,r===void 0?null:r)}function ef(t,e,n,r){var i=Zn();r=r===void 0?null:r;var o=void 0;if(Nt!==null){var s=Nt.memoizedState;if(o=s.destroy,r!==null&&J0(r,s.deps)){i.memoizedState=Pl(e,n,o,r);return}}dt.flags|=t,i.memoizedState=Pl(1|e,n,o,r)}function R2(t,e){return yu(8390656,8,t,e)}function tm(t,e){return ef(2048,8,t,e)}function W5(t,e){return ef(4,2,t,e)}function G5(t,e){return ef(4,4,t,e)}function Y5(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function K5(t,e,n){return n=n!=null?n.concat([t]):null,ef(4,4,Y5.bind(null,e,t),n)}function nm(){}function X5(t,e){var n=Zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&J0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Q5(t,e){var n=Zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&J0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function J5(t,e,n){return Lo&21?(dr(n,e)||(n=r5(),dt.lanes|=n,Mo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wn=!0),t.memoizedState=n)}function sS(t,e){var n=Ge;Ge=n!==0&&4>n?n:4,t(!0);var r=Fh.transition;Fh.transition={};try{t(!1),e()}finally{Ge=n,Fh.transition=r}}function Z5(){return Zn().memoizedState}function aS(t,e,n){var r=ji(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},eb(t))tb(e,n);else if(n=O5(t,e,n,r),n!==null){var i=hn();cr(n,t,r,i),nb(n,e,r)}}function lS(t,e,n){var r=ji(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(eb(t))tb(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,dr(l,s)){var c=e.interleaved;c===null?(i.next=i,G0(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=O5(t,e,i,r),n!==null&&(i=hn(),cr(n,t,r,i),nb(n,e,r))}}function eb(t){var e=t.alternate;return t===dt||e!==null&&e===dt}function tb(t,e){sl=sd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function nb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,L0(t,n)}}var ad={readContext:Jn,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},cS={readContext:Jn,useCallback:function(t,e){return yr().memoizedState=[t,e===void 0?null:e],t},useContext:Jn,useEffect:R2,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,yu(4194308,4,Y5.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yu(4194308,4,t,e)},useInsertionEffect:function(t,e){return yu(4,2,t,e)},useMemo:function(t,e){var n=yr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=yr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=aS.bind(null,dt,t),[r.memoizedState,t]},useRef:function(t){var e=yr();return t={current:t},e.memoizedState=t},useState:k2,useDebugValue:nm,useDeferredValue:function(t){return yr().memoizedState=t},useTransition:function(){var t=k2(!1),e=t[0];return t=sS.bind(null,t[1]),yr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=dt,i=yr();if(ct){if(n===void 0)throw Error(te(407));n=n()}else{if(n=e(),Vt===null)throw Error(te(349));Lo&30||B5(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,R2($5.bind(null,r,o,t),[t]),r.flags|=2048,Pl(9,j5.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=yr(),e=Vt.identifierPrefix;if(ct){var n=Gr,r=Wr;n=(r&~(1<<32-lr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Rl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=oS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},uS={readContext:Jn,useCallback:X5,useContext:Jn,useEffect:tm,useImperativeHandle:K5,useInsertionEffect:W5,useLayoutEffect:G5,useMemo:Q5,useReducer:Bh,useRef:q5,useState:function(){return Bh(Nl)},useDebugValue:nm,useDeferredValue:function(t){var e=Zn();return J5(e,Nt.memoizedState,t)},useTransition:function(){var t=Bh(Nl)[0],e=Zn().memoizedState;return[t,e]},useMutableSource:U5,useSyncExternalStore:F5,useId:Z5,unstable_isNewReconciler:!1},dS={readContext:Jn,useCallback:X5,useContext:Jn,useEffect:tm,useImperativeHandle:K5,useInsertionEffect:W5,useLayoutEffect:G5,useMemo:Q5,useReducer:jh,useRef:q5,useState:function(){return jh(Nl)},useDebugValue:nm,useDeferredValue:function(t){var e=Zn();return Nt===null?e.memoizedState=t:J5(e,Nt.memoizedState,t)},useTransition:function(){var t=jh(Nl)[0],e=Zn().memoizedState;return[t,e]},useMutableSource:U5,useSyncExternalStore:F5,useId:Z5,unstable_isNewReconciler:!1};function or(t,e){if(t&&t.defaultProps){e=ft({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function o1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ft({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var tf={isMounted:function(t){return(t=t._reactInternals)?Yo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=hn(),i=ji(t),o=Jr(r,i);o.payload=e,n!=null&&(o.callback=n),e=Fi(t,o,i),e!==null&&(cr(e,t,i,r),gu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=hn(),i=ji(t),o=Jr(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Fi(t,o,i),e!==null&&(cr(e,t,i,r),gu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hn(),r=ji(t),i=Jr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Fi(t,i,r),e!==null&&(cr(e,t,r,n),gu(e,t,r))}};function N2(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Sl(n,r)||!Sl(i,o):!0}function rb(t,e,n){var r=!1,i=Gi,o=e.contextType;return typeof o=="object"&&o!==null?o=Jn(o):(i=En(e)?No:ln.current,r=e.contextTypes,o=(r=r!=null)?Hs(t,i):Gi),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=tf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function P2(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&tf.enqueueReplaceState(e,e.state,null)}function s1(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Y0(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Jn(o):(o=En(e)?No:ln.current,i.context=Hs(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(o1(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&tf.enqueueReplaceState(i,i.state,null),id(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ys(t,e){try{var n="",r=e;do n+=F9(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function $h(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function a1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fS=typeof WeakMap=="function"?WeakMap:Map;function ib(t,e,n){n=Jr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){cd||(cd=!0,v1=r),a1(t,e)},n}function ob(t,e,n){n=Jr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){a1(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){a1(t,e),typeof r!="function"&&(Bi===null?Bi=new Set([this]):Bi.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function L2(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new fS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=CS.bind(null,t,e,n),e.then(t,t))}function M2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function O2(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Jr(-1,1),e.tag=2,Fi(n,e,1))),n.lanes|=1),t)}var hS=fi.ReactCurrentOwner,wn=!1;function fn(t,e,n,r){e.child=t===null?M5(e,null,n,r):Ws(e,t.child,n,r)}function D2(t,e,n,r,i){n=n.render;var o=e.ref;return Rs(e,i),r=Z0(t,e,n,r,o,i),n=em(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ii(t,e,i)):(ct&&n&&j0(e),e.flags|=1,fn(t,e,r,i),e.child)}function V2(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!um(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,sb(t,e,o,r,i)):(t=xu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Sl,n(s,r)&&t.ref===e.ref)return ii(t,e,i)}return e.flags|=1,t=$i(o,r),t.ref=e.ref,t.return=e,e.child=t}function sb(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Sl(o,r)&&t.ref===e.ref)if(wn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(wn=!0);else return e.lanes=t.lanes,ii(t,e,i)}return l1(t,e,n,r,i)}function ab(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(Es,Pn),Pn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,et(Es,Pn),Pn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,et(Es,Pn),Pn|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,et(Es,Pn),Pn|=r;return fn(t,e,i,n),e.child}function lb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function l1(t,e,n,r,i){var o=En(n)?No:ln.current;return o=Hs(e,o),Rs(e,i),n=Z0(t,e,n,r,o,i),r=em(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ii(t,e,i)):(ct&&r&&j0(e),e.flags|=1,fn(t,e,n,i),e.child)}function U2(t,e,n,r,i){if(En(n)){var o=!0;Zu(e)}else o=!1;if(Rs(e,i),e.stateNode===null)_u(t,e),rb(e,n,r),s1(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=Jn(d):(d=En(n)?No:ln.current,d=Hs(e,d));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||c!==d)&&P2(e,s,r,d),Ii=!1;var h=e.memoizedState;s.state=h,id(e,r,s,i),c=e.memoizedState,l!==r||h!==c||xn.current||Ii?(typeof u=="function"&&(o1(e,n,u,r),c=e.memoizedState),(l=Ii||N2(e,n,l,r,h,c,d))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=d,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,D5(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:or(e.type,l),s.props=d,f=e.pendingProps,h=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=Jn(c):(c=En(n)?No:ln.current,c=Hs(e,c));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==f||h!==c)&&P2(e,s,r,c),Ii=!1,h=e.memoizedState,s.state=h,id(e,r,s,i);var v=e.memoizedState;l!==f||h!==v||xn.current||Ii?(typeof p=="function"&&(o1(e,n,p,r),v=e.memoizedState),(d=Ii||N2(e,n,d,r,h,v,c)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),s.props=r,s.state=v,s.context=c,r=d):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return c1(t,e,n,r,o,i)}function c1(t,e,n,r,i,o){lb(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&E2(e,n,!1),ii(t,e,o);r=e.stateNode,hS.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Ws(e,t.child,null,o),e.child=Ws(e,null,l,o)):fn(t,e,l,o),e.memoizedState=r.state,i&&E2(e,n,!0),e.child}function cb(t){var e=t.stateNode;e.pendingContext?x2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&x2(t,e.context,!1),K0(t,e.containerInfo)}function F2(t,e,n,r,i){return qs(),z0(i),e.flags|=256,fn(t,e,n,r),e.child}var u1={dehydrated:null,treeContext:null,retryLane:0};function d1(t){return{baseLanes:t,cachePool:null,transitions:null}}function ub(t,e,n){var r=e.pendingProps,i=ut.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),et(ut,i&1),t===null)return r1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=of(s,r,0,null),t=Io(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=d1(n),e.memoizedState=u1,t):rm(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return pS(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=$i(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=$i(l,o):(o=Io(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?d1(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=u1,r}return o=t.child,t=o.sibling,r=$i(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function rm(t,e){return e=of({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zc(t,e,n,r){return r!==null&&z0(r),Ws(e,t.child,null,n),t=rm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pS(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=$h(Error(te(422))),zc(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=of({mode:"visible",children:r.children},i,0,null),o=Io(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Ws(e,t.child,null,s),e.child.memoizedState=d1(s),e.memoizedState=u1,o);if(!(e.mode&1))return zc(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(te(419)),r=$h(o,r,void 0),zc(t,e,s,r)}if(l=(s&t.childLanes)!==0,wn||l){if(r=Vt,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,ri(t,i),cr(r,t,i,-1))}return cm(),r=$h(Error(te(421))),zc(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=AS.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Mn=Ui(i.nextSibling),Vn=e,ct=!0,ar=null,t!==null&&(Wn[Gn++]=Wr,Wn[Gn++]=Gr,Wn[Gn++]=Po,Wr=t.id,Gr=t.overflow,Po=e),e=rm(e,r.children),e.flags|=4096,e)}function B2(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),i1(t.return,e,n)}function zh(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function db(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(fn(t,e,r.children,n),r=ut.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&B2(t,n,e);else if(t.tag===19)B2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(et(ut,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&od(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),zh(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&od(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}zh(e,!0,n,null,o);break;case"together":zh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _u(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ii(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Mo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(te(153));if(e.child!==null){for(t=e.child,n=$i(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$i(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function mS(t,e,n){switch(e.tag){case 3:cb(e),qs();break;case 5:V5(e);break;case 1:En(e.type)&&Zu(e);break;case 4:K0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;et(nd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(et(ut,ut.current&1),e.flags|=128,null):n&e.child.childLanes?ub(t,e,n):(et(ut,ut.current&1),t=ii(t,e,n),t!==null?t.sibling:null);et(ut,ut.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return db(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),et(ut,ut.current),r)break;return null;case 22:case 23:return e.lanes=0,ab(t,e,n)}return ii(t,e,n)}var fb,f1,hb,pb;fb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};f1=function(){};hb=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,bo(Tr.current);var o=null;switch(n){case"input":i=Mp(t,i),r=Mp(t,r),o=[];break;case"select":i=ft({},i,{value:void 0}),r=ft({},r,{value:void 0}),o=[];break;case"textarea":i=Vp(t,i),r=Vp(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Qu)}Fp(n,r);var s;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(vl.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(l=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(vl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ot("scroll",t),o||l===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};pb=function(t,e,n,r){n!==r&&(e.flags|=4)};function Va(t,e){if(!ct)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function gS(t,e,n){var r=e.pendingProps;switch($0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(e),null;case 1:return En(e.type)&&Ju(),Zt(e),null;case 3:return r=e.stateNode,Gs(),at(xn),at(ln),Q0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(jc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ar!==null&&(b1(ar),ar=null))),f1(t,e),Zt(e),null;case 5:X0(e);var i=bo(kl.current);if(n=e.type,t!==null&&e.stateNode!=null)hb(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(te(166));return Zt(e),null}if(t=bo(Tr.current),jc(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Sr]=e,r[Al]=o,t=(e.mode&1)!==0,n){case"dialog":ot("cancel",r),ot("close",r);break;case"iframe":case"object":case"embed":ot("load",r);break;case"video":case"audio":for(i=0;i<Ya.length;i++)ot(Ya[i],r);break;case"source":ot("error",r);break;case"img":case"image":case"link":ot("error",r),ot("load",r);break;case"details":ot("toggle",r);break;case"input":Kv(r,o),ot("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ot("invalid",r);break;case"textarea":Qv(r,o),ot("invalid",r)}Fp(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Bc(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Bc(r.textContent,l,t),i=["children",""+l]):vl.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&ot("scroll",r)}switch(n){case"input":Pc(r),Xv(r,o,!0);break;case"textarea":Pc(r),Jv(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Qu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Sr]=e,t[Al]=r,fb(t,e,!1,!1),e.stateNode=t;e:{switch(s=Bp(n,r),n){case"dialog":ot("cancel",t),ot("close",t),i=r;break;case"iframe":case"object":case"embed":ot("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ya.length;i++)ot(Ya[i],t);i=r;break;case"source":ot("error",t),i=r;break;case"img":case"image":case"link":ot("error",t),ot("load",t),i=r;break;case"details":ot("toggle",t),i=r;break;case"input":Kv(t,r),i=Mp(t,r),ot("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ft({},r,{value:void 0}),ot("invalid",t);break;case"textarea":Qv(t,r),i=Vp(t,r),ot("invalid",t);break;default:i=r}Fp(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?q_(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&z_(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&yl(t,c):typeof c=="number"&&yl(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(vl.hasOwnProperty(o)?c!=null&&o==="onScroll"&&ot("scroll",t):c!=null&&A0(t,o,c,s))}switch(n){case"input":Pc(t),Xv(t,r,!1);break;case"textarea":Pc(t),Jv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Wi(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Cs(t,!!r.multiple,o,!1):r.defaultValue!=null&&Cs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Qu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zt(e),null;case 6:if(t&&e.stateNode!=null)pb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(te(166));if(n=bo(kl.current),bo(Tr.current),jc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Sr]=e,(o=r.nodeValue!==n)&&(t=Vn,t!==null))switch(t.tag){case 3:Bc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bc(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sr]=e,e.stateNode=r}return Zt(e),null;case 13:if(at(ut),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ct&&Mn!==null&&e.mode&1&&!(e.flags&128))P5(),qs(),e.flags|=98560,o=!1;else if(o=jc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(te(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(te(317));o[Sr]=e}else qs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zt(e),o=!1}else ar!==null&&(b1(ar),ar=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ut.current&1?Lt===0&&(Lt=3):cm())),e.updateQueue!==null&&(e.flags|=4),Zt(e),null);case 4:return Gs(),f1(t,e),t===null&&Il(e.stateNode.containerInfo),Zt(e),null;case 10:return W0(e.type._context),Zt(e),null;case 17:return En(e.type)&&Ju(),Zt(e),null;case 19:if(at(ut),o=e.memoizedState,o===null)return Zt(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Va(o,!1);else{if(Lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=od(t),s!==null){for(e.flags|=128,Va(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return et(ut,ut.current&1|2),e.child}t=t.sibling}o.tail!==null&&Et()>Ks&&(e.flags|=128,r=!0,Va(o,!1),e.lanes=4194304)}else{if(!r)if(t=od(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Va(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!ct)return Zt(e),null}else 2*Et()-o.renderingStartTime>Ks&&n!==1073741824&&(e.flags|=128,r=!0,Va(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Et(),e.sibling=null,n=ut.current,et(ut,r?n&1|2:n&1),e):(Zt(e),null);case 22:case 23:return lm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Pn&1073741824&&(Zt(e),e.subtreeFlags&6&&(e.flags|=8192)):Zt(e),null;case 24:return null;case 25:return null}throw Error(te(156,e.tag))}function vS(t,e){switch($0(e),e.tag){case 1:return En(e.type)&&Ju(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Gs(),at(xn),at(ln),Q0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return X0(e),null;case 13:if(at(ut),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(te(340));qs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return at(ut),null;case 4:return Gs(),null;case 10:return W0(e.type._context),null;case 22:case 23:return lm(),null;case 24:return null;default:return null}}var Hc=!1,on=!1,yS=typeof WeakSet=="function"?WeakSet:Set,le=null;function xs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){vt(t,e,r)}else n.current=null}function h1(t,e,n){try{n()}catch(r){vt(t,e,r)}}var j2=!1;function _S(t,e){if(Xp=Yu,t=_5(),B0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,c=-1,d=0,u=0,f=t,h=null;t:for(;;){for(var p;f!==n||i!==0&&f.nodeType!==3||(l=s+i),f!==o||r!==0&&f.nodeType!==3||(c=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===t)break t;if(h===n&&++d===i&&(l=s),h===o&&++u===r&&(c=s),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qp={focusedElem:t,selectionRange:n},Yu=!1,le=e;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,w=v.memoizedState,g=e.stateNode,b=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:or(e.type,y),w);g.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(E){vt(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return v=j2,j2=!1,v}function al(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&h1(e,n,o)}i=i.next}while(i!==r)}}function nf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function p1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function mb(t){var e=t.alternate;e!==null&&(t.alternate=null,mb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sr],delete e[Al],delete e[e1],delete e[tS],delete e[nS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function gb(t){return t.tag===5||t.tag===3||t.tag===4}function $2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function m1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Qu));else if(r!==4&&(t=t.child,t!==null))for(m1(t,e,n),t=t.sibling;t!==null;)m1(t,e,n),t=t.sibling}function g1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(g1(t,e,n),t=t.sibling;t!==null;)g1(t,e,n),t=t.sibling}var $t=null,sr=!1;function _i(t,e,n){for(n=n.child;n!==null;)vb(t,e,n),n=n.sibling}function vb(t,e,n){if(Ar&&typeof Ar.onCommitFiberUnmount=="function")try{Ar.onCommitFiberUnmount(Yd,n)}catch{}switch(n.tag){case 5:on||xs(n,e);case 6:var r=$t,i=sr;$t=null,_i(t,e,n),$t=r,sr=i,$t!==null&&(sr?(t=$t,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$t.removeChild(n.stateNode));break;case 18:$t!==null&&(sr?(t=$t,n=n.stateNode,t.nodeType===8?Dh(t.parentNode,n):t.nodeType===1&&Dh(t,n),xl(t)):Dh($t,n.stateNode));break;case 4:r=$t,i=sr,$t=n.stateNode.containerInfo,sr=!0,_i(t,e,n),$t=r,sr=i;break;case 0:case 11:case 14:case 15:if(!on&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&h1(n,e,s),i=i.next}while(i!==r)}_i(t,e,n);break;case 1:if(!on&&(xs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){vt(n,e,l)}_i(t,e,n);break;case 21:_i(t,e,n);break;case 22:n.mode&1?(on=(r=on)||n.memoizedState!==null,_i(t,e,n),on=r):_i(t,e,n);break;default:_i(t,e,n)}}function z2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yS),e.forEach(function(r){var i=TS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function nr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:$t=l.stateNode,sr=!1;break e;case 3:$t=l.stateNode.containerInfo,sr=!0;break e;case 4:$t=l.stateNode.containerInfo,sr=!0;break e}l=l.return}if($t===null)throw Error(te(160));vb(o,s,i),$t=null,sr=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){vt(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yb(e,t),e=e.sibling}function yb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nr(e,t),vr(t),r&4){try{al(3,t,t.return),nf(3,t)}catch(y){vt(t,t.return,y)}try{al(5,t,t.return)}catch(y){vt(t,t.return,y)}}break;case 1:nr(e,t),vr(t),r&512&&n!==null&&xs(n,n.return);break;case 5:if(nr(e,t),vr(t),r&512&&n!==null&&xs(n,n.return),t.flags&32){var i=t.stateNode;try{yl(i,"")}catch(y){vt(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&B_(i,o),Bp(l,s);var d=Bp(l,o);for(s=0;s<c.length;s+=2){var u=c[s],f=c[s+1];u==="style"?q_(i,f):u==="dangerouslySetInnerHTML"?z_(i,f):u==="children"?yl(i,f):A0(i,u,f,d)}switch(l){case"input":Op(i,o);break;case"textarea":j_(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Cs(i,!!o.multiple,p,!1):h!==!!o.multiple&&(o.defaultValue!=null?Cs(i,!!o.multiple,o.defaultValue,!0):Cs(i,!!o.multiple,o.multiple?[]:"",!1))}i[Al]=o}catch(y){vt(t,t.return,y)}}break;case 6:if(nr(e,t),vr(t),r&4){if(t.stateNode===null)throw Error(te(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(y){vt(t,t.return,y)}}break;case 3:if(nr(e,t),vr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xl(e.containerInfo)}catch(y){vt(t,t.return,y)}break;case 4:nr(e,t),vr(t);break;case 13:nr(e,t),vr(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(sm=Et())),r&4&&z2(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(on=(d=on)||u,nr(e,t),on=d):nr(e,t),vr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(le=t,u=t.child;u!==null;){for(f=le=u;le!==null;){switch(h=le,p=h.child,h.tag){case 0:case 11:case 14:case 15:al(4,h,h.return);break;case 1:xs(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){vt(r,n,y)}}break;case 5:xs(h,h.return);break;case 22:if(h.memoizedState!==null){q2(f);continue}}p!==null?(p.return=h,le=p):q2(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,d?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,c=f.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=H_("display",s))}catch(y){vt(t,t.return,y)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(y){vt(t,t.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:nr(e,t),vr(t),r&4&&z2(t);break;case 21:break;default:nr(e,t),vr(t)}}function vr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(gb(n)){var r=n;break e}n=n.return}throw Error(te(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(yl(i,""),r.flags&=-33);var o=$2(t);g1(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=$2(t);m1(t,l,s);break;default:throw Error(te(161))}}catch(c){vt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function bS(t,e,n){le=t,_b(t)}function _b(t,e,n){for(var r=(t.mode&1)!==0;le!==null;){var i=le,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Hc;if(!s){var l=i.alternate,c=l!==null&&l.memoizedState!==null||on;l=Hc;var d=on;if(Hc=s,(on=c)&&!d)for(le=i;le!==null;)s=le,c=s.child,s.tag===22&&s.memoizedState!==null?W2(i):c!==null?(c.return=s,le=c):W2(i);for(;o!==null;)le=o,_b(o),o=o.sibling;le=i,Hc=l,on=d}H2(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,le=o):H2(t)}}function H2(t){for(;le!==null;){var e=le;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:on||nf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!on)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:or(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&T2(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}T2(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&xl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}on||e.flags&512&&p1(e)}catch(h){vt(e,e.return,h)}}if(e===t){le=null;break}if(n=e.sibling,n!==null){n.return=e.return,le=n;break}le=e.return}}function q2(t){for(;le!==null;){var e=le;if(e===t){le=null;break}var n=e.sibling;if(n!==null){n.return=e.return,le=n;break}le=e.return}}function W2(t){for(;le!==null;){var e=le;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{nf(4,e)}catch(c){vt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){vt(e,i,c)}}var o=e.return;try{p1(e)}catch(c){vt(e,o,c)}break;case 5:var s=e.return;try{p1(e)}catch(c){vt(e,s,c)}}}catch(c){vt(e,e.return,c)}if(e===t){le=null;break}var l=e.sibling;if(l!==null){l.return=e.return,le=l;break}le=e.return}}var wS=Math.ceil,ld=fi.ReactCurrentDispatcher,im=fi.ReactCurrentOwner,Xn=fi.ReactCurrentBatchConfig,je=0,Vt=null,kt=null,Wt=0,Pn=0,Es=ro(0),Lt=0,Ll=null,Mo=0,rf=0,om=0,ll=null,vn=null,sm=0,Ks=1/0,zr=null,cd=!1,v1=null,Bi=null,qc=!1,Li=null,ud=0,cl=0,y1=null,bu=-1,wu=0;function hn(){return je&6?Et():bu!==-1?bu:bu=Et()}function ji(t){return t.mode&1?je&2&&Wt!==0?Wt&-Wt:iS.transition!==null?(wu===0&&(wu=r5()),wu):(t=Ge,t!==0||(t=window.event,t=t===void 0?16:u5(t.type)),t):1}function cr(t,e,n,r){if(50<cl)throw cl=0,y1=null,Error(te(185));Yl(t,n,r),(!(je&2)||t!==Vt)&&(t===Vt&&(!(je&2)&&(rf|=n),Lt===4&&Ai(t,Wt)),Sn(t,r),n===1&&je===0&&!(e.mode&1)&&(Ks=Et()+500,Zd&&io()))}function Sn(t,e){var n=t.callbackNode;iE(t,e);var r=Gu(t,t===Vt?Wt:0);if(r===0)n!==null&&t2(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&t2(n),e===1)t.tag===0?rS(G2.bind(null,t)):k5(G2.bind(null,t)),ZE(function(){!(je&6)&&io()}),n=null;else{switch(i5(r)){case 1:n=P0;break;case 4:n=t5;break;case 16:n=Wu;break;case 536870912:n=n5;break;default:n=Wu}n=Ab(n,bb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function bb(t,e){if(bu=-1,wu=0,je&6)throw Error(te(327));var n=t.callbackNode;if(Ns()&&t.callbackNode!==n)return null;var r=Gu(t,t===Vt?Wt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=dd(t,r);else{e=r;var i=je;je|=2;var o=xb();(Vt!==t||Wt!==e)&&(zr=null,Ks=Et()+500,So(t,e));do try{SS();break}catch(l){wb(t,l)}while(!0);q0(),ld.current=o,je=i,kt!==null?e=0:(Vt=null,Wt=0,e=Lt)}if(e!==0){if(e===2&&(i=qp(t),i!==0&&(r=i,e=_1(t,i))),e===1)throw n=Ll,So(t,0),Ai(t,r),Sn(t,Et()),n;if(e===6)Ai(t,r);else{if(i=t.current.alternate,!(r&30)&&!xS(i)&&(e=dd(t,r),e===2&&(o=qp(t),o!==0&&(r=o,e=_1(t,o))),e===1))throw n=Ll,So(t,0),Ai(t,r),Sn(t,Et()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(te(345));case 2:go(t,vn,zr);break;case 3:if(Ai(t,r),(r&130023424)===r&&(e=sm+500-Et(),10<e)){if(Gu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){hn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Zp(go.bind(null,t,vn,zr),e);break}go(t,vn,zr);break;case 4:if(Ai(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-lr(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Et()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wS(r/1960))-r,10<r){t.timeoutHandle=Zp(go.bind(null,t,vn,zr),r);break}go(t,vn,zr);break;case 5:go(t,vn,zr);break;default:throw Error(te(329))}}}return Sn(t,Et()),t.callbackNode===n?bb.bind(null,t):null}function _1(t,e){var n=ll;return t.current.memoizedState.isDehydrated&&(So(t,e).flags|=256),t=dd(t,e),t!==2&&(e=vn,vn=n,e!==null&&b1(e)),t}function b1(t){vn===null?vn=t:vn.push.apply(vn,t)}function xS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!dr(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ai(t,e){for(e&=~om,e&=~rf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-lr(e),r=1<<n;t[n]=-1,e&=~r}}function G2(t){if(je&6)throw Error(te(327));Ns();var e=Gu(t,0);if(!(e&1))return Sn(t,Et()),null;var n=dd(t,e);if(t.tag!==0&&n===2){var r=qp(t);r!==0&&(e=r,n=_1(t,r))}if(n===1)throw n=Ll,So(t,0),Ai(t,e),Sn(t,Et()),n;if(n===6)throw Error(te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,go(t,vn,zr),Sn(t,Et()),null}function am(t,e){var n=je;je|=1;try{return t(e)}finally{je=n,je===0&&(Ks=Et()+500,Zd&&io())}}function Oo(t){Li!==null&&Li.tag===0&&!(je&6)&&Ns();var e=je;je|=1;var n=Xn.transition,r=Ge;try{if(Xn.transition=null,Ge=1,t)return t()}finally{Ge=r,Xn.transition=n,je=e,!(je&6)&&io()}}function lm(){Pn=Es.current,at(Es)}function So(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,JE(n)),kt!==null)for(n=kt.return;n!==null;){var r=n;switch($0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ju();break;case 3:Gs(),at(xn),at(ln),Q0();break;case 5:X0(r);break;case 4:Gs();break;case 13:at(ut);break;case 19:at(ut);break;case 10:W0(r.type._context);break;case 22:case 23:lm()}n=n.return}if(Vt=t,kt=t=$i(t.current,null),Wt=Pn=e,Lt=0,Ll=null,om=rf=Mo=0,vn=ll=null,_o!==null){for(e=0;e<_o.length;e++)if(n=_o[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}_o=null}return t}function wb(t,e){do{var n=kt;try{if(q0(),vu.current=ad,sd){for(var r=dt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}sd=!1}if(Lo=0,Dt=Nt=dt=null,sl=!1,Rl=0,im.current=null,n===null||n.return===null){Lt=1,Ll=e,kt=null;break}e:{var o=t,s=n.return,l=n,c=e;if(e=Wt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=M2(s);if(p!==null){p.flags&=-257,O2(p,s,l,o,e),p.mode&1&&L2(o,d,e),e=p,c=d;var v=e.updateQueue;if(v===null){var y=new Set;y.add(c),e.updateQueue=y}else v.add(c);break e}else{if(!(e&1)){L2(o,d,e),cm();break e}c=Error(te(426))}}else if(ct&&l.mode&1){var w=M2(s);if(w!==null){!(w.flags&65536)&&(w.flags|=256),O2(w,s,l,o,e),z0(Ys(c,l));break e}}o=c=Ys(c,l),Lt!==4&&(Lt=2),ll===null?ll=[o]:ll.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=ib(o,c,e);A2(o,g);break e;case 1:l=c;var b=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof b.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Bi===null||!Bi.has(_)))){o.flags|=65536,e&=-e,o.lanes|=e;var E=ob(o,l,e);A2(o,E);break e}}o=o.return}while(o!==null)}Sb(n)}catch(A){e=A,kt===n&&n!==null&&(kt=n=n.return);continue}break}while(!0)}function xb(){var t=ld.current;return ld.current=ad,t===null?ad:t}function cm(){(Lt===0||Lt===3||Lt===2)&&(Lt=4),Vt===null||!(Mo&268435455)&&!(rf&268435455)||Ai(Vt,Wt)}function dd(t,e){var n=je;je|=2;var r=xb();(Vt!==t||Wt!==e)&&(zr=null,So(t,e));do try{ES();break}catch(i){wb(t,i)}while(!0);if(q0(),je=n,ld.current=r,kt!==null)throw Error(te(261));return Vt=null,Wt=0,Lt}function ES(){for(;kt!==null;)Eb(kt)}function SS(){for(;kt!==null&&!K9();)Eb(kt)}function Eb(t){var e=Cb(t.alternate,t,Pn);t.memoizedProps=t.pendingProps,e===null?Sb(t):kt=e,im.current=null}function Sb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vS(n,e),n!==null){n.flags&=32767,kt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Lt=6,kt=null;return}}else if(n=gS(n,e,Pn),n!==null){kt=n;return}if(e=e.sibling,e!==null){kt=e;return}kt=e=t}while(e!==null);Lt===0&&(Lt=5)}function go(t,e,n){var r=Ge,i=Xn.transition;try{Xn.transition=null,Ge=1,IS(t,e,n,r)}finally{Xn.transition=i,Ge=r}return null}function IS(t,e,n,r){do Ns();while(Li!==null);if(je&6)throw Error(te(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(te(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(oE(t,o),t===Vt&&(kt=Vt=null,Wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qc||(qc=!0,Ab(Wu,function(){return Ns(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Xn.transition,Xn.transition=null;var s=Ge;Ge=1;var l=je;je|=4,im.current=null,_S(t,n),yb(n,t),qE(Qp),Yu=!!Xp,Qp=Xp=null,t.current=n,bS(n),X9(),je=l,Ge=s,Xn.transition=o}else t.current=n;if(qc&&(qc=!1,Li=t,ud=i),o=t.pendingLanes,o===0&&(Bi=null),Z9(n.stateNode),Sn(t,Et()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(cd)throw cd=!1,t=v1,v1=null,t;return ud&1&&t.tag!==0&&Ns(),o=t.pendingLanes,o&1?t===y1?cl++:(cl=0,y1=t):cl=0,io(),null}function Ns(){if(Li!==null){var t=i5(ud),e=Xn.transition,n=Ge;try{if(Xn.transition=null,Ge=16>t?16:t,Li===null)var r=!1;else{if(t=Li,Li=null,ud=0,je&6)throw Error(te(331));var i=je;for(je|=4,le=t.current;le!==null;){var o=le,s=o.child;if(le.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(le=d;le!==null;){var u=le;switch(u.tag){case 0:case 11:case 15:al(8,u,o)}var f=u.child;if(f!==null)f.return=u,le=f;else for(;le!==null;){u=le;var h=u.sibling,p=u.return;if(mb(u),u===d){le=null;break}if(h!==null){h.return=p,le=h;break}le=p}}}var v=o.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}le=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,le=s;else e:for(;le!==null;){if(o=le,o.flags&2048)switch(o.tag){case 0:case 11:case 15:al(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,le=g;break e}le=o.return}}var b=t.current;for(le=b;le!==null;){s=le;var _=s.child;if(s.subtreeFlags&2064&&_!==null)_.return=s,le=_;else e:for(s=b;le!==null;){if(l=le,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:nf(9,l)}}catch(A){vt(l,l.return,A)}if(l===s){le=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,le=E;break e}le=l.return}}if(je=i,io(),Ar&&typeof Ar.onPostCommitFiberRoot=="function")try{Ar.onPostCommitFiberRoot(Yd,t)}catch{}r=!0}return r}finally{Ge=n,Xn.transition=e}}return!1}function Y2(t,e,n){e=Ys(n,e),e=ib(t,e,1),t=Fi(t,e,1),e=hn(),t!==null&&(Yl(t,1,e),Sn(t,e))}function vt(t,e,n){if(t.tag===3)Y2(t,t,n);else for(;e!==null;){if(e.tag===3){Y2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bi===null||!Bi.has(r))){t=Ys(n,t),t=ob(e,t,1),e=Fi(e,t,1),t=hn(),e!==null&&(Yl(e,1,t),Sn(e,t));break}}e=e.return}}function CS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=hn(),t.pingedLanes|=t.suspendedLanes&n,Vt===t&&(Wt&n)===n&&(Lt===4||Lt===3&&(Wt&130023424)===Wt&&500>Et()-sm?So(t,0):om|=n),Sn(t,e)}function Ib(t,e){e===0&&(t.mode&1?(e=Oc,Oc<<=1,!(Oc&130023424)&&(Oc=4194304)):e=1);var n=hn();t=ri(t,e),t!==null&&(Yl(t,e,n),Sn(t,n))}function AS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ib(t,n)}function TS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(te(314))}r!==null&&r.delete(e),Ib(t,n)}var Cb;Cb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||xn.current)wn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wn=!1,mS(t,e,n);wn=!!(t.flags&131072)}else wn=!1,ct&&e.flags&1048576&&R5(e,td,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_u(t,e),t=e.pendingProps;var i=Hs(e,ln.current);Rs(e,n),i=Z0(null,e,r,t,i,n);var o=em();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,En(r)?(o=!0,Zu(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Y0(e),i.updater=tf,e.stateNode=i,i._reactInternals=e,s1(e,r,t,n),e=c1(null,e,r,!0,o,n)):(e.tag=0,ct&&o&&j0(e),fn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_u(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=RS(r),t=or(r,t),i){case 0:e=l1(null,e,r,t,n);break e;case 1:e=U2(null,e,r,t,n);break e;case 11:e=D2(null,e,r,t,n);break e;case 14:e=V2(null,e,r,or(r.type,t),n);break e}throw Error(te(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:or(r,i),l1(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:or(r,i),U2(t,e,r,i,n);case 3:e:{if(cb(e),t===null)throw Error(te(387));r=e.pendingProps,o=e.memoizedState,i=o.element,D5(t,e),id(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Ys(Error(te(423)),e),e=F2(t,e,r,n,i);break e}else if(r!==i){i=Ys(Error(te(424)),e),e=F2(t,e,r,n,i);break e}else for(Mn=Ui(e.stateNode.containerInfo.firstChild),Vn=e,ct=!0,ar=null,n=M5(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qs(),r===i){e=ii(t,e,n);break e}fn(t,e,r,n)}e=e.child}return e;case 5:return V5(e),t===null&&r1(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Jp(r,i)?s=null:o!==null&&Jp(r,o)&&(e.flags|=32),lb(t,e),fn(t,e,s,n),e.child;case 6:return t===null&&r1(e),null;case 13:return ub(t,e,n);case 4:return K0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ws(e,null,r,n):fn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:or(r,i),D2(t,e,r,i,n);case 7:return fn(t,e,e.pendingProps,n),e.child;case 8:return fn(t,e,e.pendingProps.children,n),e.child;case 12:return fn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,et(nd,r._currentValue),r._currentValue=s,o!==null)if(dr(o.value,s)){if(o.children===i.children&&!xn.current){e=ii(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Jr(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),i1(o.return,n,e),l.lanes|=n;break}c=c.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(te(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),i1(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}fn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Rs(e,n),i=Jn(i),r=r(i),e.flags|=1,fn(t,e,r,n),e.child;case 14:return r=e.type,i=or(r,e.pendingProps),i=or(r.type,i),V2(t,e,r,i,n);case 15:return sb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:or(r,i),_u(t,e),e.tag=1,En(r)?(t=!0,Zu(e)):t=!1,Rs(e,n),rb(e,r,i),s1(e,r,i,n),c1(null,e,r,!0,t,n);case 19:return db(t,e,n);case 22:return ab(t,e,n)}throw Error(te(156,e.tag))};function Ab(t,e){return e5(t,e)}function kS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(t,e,n,r){return new kS(t,e,n,r)}function um(t){return t=t.prototype,!(!t||!t.isReactComponent)}function RS(t){if(typeof t=="function")return um(t)?1:0;if(t!=null){if(t=t.$$typeof,t===k0)return 11;if(t===R0)return 14}return 2}function $i(t,e){var n=t.alternate;return n===null?(n=Yn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xu(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")um(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case hs:return Io(n.children,i,o,e);case T0:s=8,i|=8;break;case Rp:return t=Yn(12,n,e,i|2),t.elementType=Rp,t.lanes=o,t;case Np:return t=Yn(13,n,e,i),t.elementType=Np,t.lanes=o,t;case Pp:return t=Yn(19,n,e,i),t.elementType=Pp,t.lanes=o,t;case V_:return of(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case O_:s=10;break e;case D_:s=9;break e;case k0:s=11;break e;case R0:s=14;break e;case Si:s=16,r=null;break e}throw Error(te(130,t==null?t:typeof t,""))}return e=Yn(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Io(t,e,n,r){return t=Yn(7,t,r,e),t.lanes=n,t}function of(t,e,n,r){return t=Yn(22,t,r,e),t.elementType=V_,t.lanes=n,t.stateNode={isHidden:!1},t}function Hh(t,e,n){return t=Yn(6,t,null,e),t.lanes=n,t}function qh(t,e,n){return e=Yn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function NS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ih(0),this.expirationTimes=Ih(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ih(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function dm(t,e,n,r,i,o,s,l,c){return t=new NS(t,e,n,l,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Yn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Y0(o),t}function PS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Tb(t){if(!t)return Gi;t=t._reactInternals;e:{if(Yo(t)!==t||t.tag!==1)throw Error(te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(En(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(te(171))}if(t.tag===1){var n=t.type;if(En(n))return T5(t,n,e)}return e}function kb(t,e,n,r,i,o,s,l,c){return t=dm(n,r,!0,t,i,o,s,l,c),t.context=Tb(null),n=t.current,r=hn(),i=ji(n),o=Jr(r,i),o.callback=e??null,Fi(n,o,i),t.current.lanes=i,Yl(t,i,r),Sn(t,r),t}function sf(t,e,n,r){var i=e.current,o=hn(),s=ji(i);return n=Tb(n),e.context===null?e.context=n:e.pendingContext=n,e=Jr(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Fi(i,e,s),t!==null&&(cr(t,i,s,o),gu(t,i,s)),s}function fd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function K2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fm(t,e){K2(t,e),(t=t.alternate)&&K2(t,e)}function LS(){return null}var Rb=typeof reportError=="function"?reportError:function(t){console.error(t)};function hm(t){this._internalRoot=t}af.prototype.render=hm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(te(409));sf(t,e,null,null)};af.prototype.unmount=hm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Oo(function(){sf(null,t,null,null)}),e[ni]=null}};function af(t){this._internalRoot=t}af.prototype.unstable_scheduleHydration=function(t){if(t){var e=a5();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ci.length&&e!==0&&e<Ci[n].priority;n++);Ci.splice(n,0,t),n===0&&c5(t)}};function pm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function lf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function X2(){}function MS(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var d=fd(s);o.call(d)}}var s=kb(e,r,t,0,null,!1,!1,"",X2);return t._reactRootContainer=s,t[ni]=s.current,Il(t.nodeType===8?t.parentNode:t),Oo(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var d=fd(c);l.call(d)}}var c=dm(t,0,!1,null,null,!1,!1,"",X2);return t._reactRootContainer=c,t[ni]=c.current,Il(t.nodeType===8?t.parentNode:t),Oo(function(){sf(e,c,n,r)}),c}function cf(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var c=fd(s);l.call(c)}}sf(e,s,t,i)}else s=MS(n,e,t,i,r);return fd(s)}o5=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ga(e.pendingLanes);n!==0&&(L0(e,n|1),Sn(e,Et()),!(je&6)&&(Ks=Et()+500,io()))}break;case 13:Oo(function(){var r=ri(t,1);if(r!==null){var i=hn();cr(r,t,1,i)}}),fm(t,1)}};M0=function(t){if(t.tag===13){var e=ri(t,134217728);if(e!==null){var n=hn();cr(e,t,134217728,n)}fm(t,134217728)}};s5=function(t){if(t.tag===13){var e=ji(t),n=ri(t,e);if(n!==null){var r=hn();cr(n,t,e,r)}fm(t,e)}};a5=function(){return Ge};l5=function(t,e){var n=Ge;try{return Ge=t,e()}finally{Ge=n}};$p=function(t,e,n){switch(e){case"input":if(Op(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Jd(r);if(!i)throw Error(te(90));F_(r),Op(r,i)}}}break;case"textarea":j_(t,n);break;case"select":e=n.value,e!=null&&Cs(t,!!n.multiple,e,!1)}};Y_=am;K_=Oo;var OS={usingClientEntryPoint:!1,Events:[Xl,vs,Jd,W_,G_,am]},Ua={findFiberByHostInstance:yo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DS={bundleType:Ua.bundleType,version:Ua.version,rendererPackageName:Ua.rendererPackageName,rendererConfig:Ua.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=J_(t),t===null?null:t.stateNode},findFiberByHostInstance:Ua.findFiberByHostInstance||LS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wc.isDisabled&&Wc.supportsFiber)try{Yd=Wc.inject(DS),Ar=Wc}catch{}}jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OS;jn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pm(e))throw Error(te(200));return PS(t,e,null,n)};jn.createRoot=function(t,e){if(!pm(t))throw Error(te(299));var n=!1,r="",i=Rb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=dm(t,1,!1,null,null,n,!1,r,i),t[ni]=e.current,Il(t.nodeType===8?t.parentNode:t),new hm(e)};jn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(te(188)):(t=Object.keys(t).join(","),Error(te(268,t)));return t=J_(e),t=t===null?null:t.stateNode,t};jn.flushSync=function(t){return Oo(t)};jn.hydrate=function(t,e,n){if(!lf(e))throw Error(te(200));return cf(null,t,e,!0,n)};jn.hydrateRoot=function(t,e,n){if(!pm(t))throw Error(te(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=Rb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=kb(e,null,t,1,n??null,i,!1,o,s),t[ni]=e.current,Il(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new af(e)};jn.render=function(t,e,n){if(!lf(e))throw Error(te(200));return cf(null,t,e,!1,n)};jn.unmountComponentAtNode=function(t){if(!lf(t))throw Error(te(40));return t._reactRootContainer?(Oo(function(){cf(null,null,t,!1,function(){t._reactRootContainer=null,t[ni]=null})}),!0):!1};jn.unstable_batchedUpdates=am;jn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!lf(n))throw Error(te(200));if(t==null||t._reactInternals===void 0)throw Error(te(38));return cf(t,e,n,!1,r)};jn.version="18.3.1-next-f1338f8080-20240426";function Nb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nb)}catch(t){console.error(t)}}Nb(),N_.exports=jn;var oo=N_.exports;const VS=__(oo);var Pb,Q2=oo;Pb=Q2.createRoot,Q2.hydrateRoot;var a=function(t,e){var n=this;if((typeof t=="string"||t instanceof String)&&(t=document.querySelector(t)),this.element=t,this.config=a.mergeDeep(a._defaultConfig(e),e),this._layoutConfigs={base:{orientation:this.config.orientation,levelSeparation:this.config.levelSeparation,mixedHierarchyNodesSeparation:this.config.mixedHierarchyNodesSeparation,assistantSeparation:this.config.assistantSeparation,subtreeSeparation:this.config.subtreeSeparation,siblingSeparation:this.config.siblingSeparation,layout:this.config.layout,columns:this.config.columns,collapse:this.config.collapse,partnerNodeSeparation:this.config.partnerNodeSeparation}},this.config.tags)for(var r in this.config.tags){var i=this.config.tags[r];i.subTreeConfig!=null&&(this._layoutConfigs[r]={orientation:i.subTreeConfig.orientation!=null?i.subTreeConfig.orientation:this.config.orientation,levelSeparation:i.subTreeConfig.levelSeparation!=null?i.subTreeConfig.levelSeparation:this.config.levelSeparation,mixedHierarchyNodesSeparation:i.subTreeConfig.mixedHierarchyNodesSeparation!=null?i.subTreeConfig.mixedHierarchyNodesSeparation:this.config.mixedHierarchyNodesSeparation,assistantSeparation:i.subTreeConfig.assistantSeparation!=null?i.subTreeConfig.assistantSeparation:this.config.assistantSeparation,subtreeSeparation:i.subTreeConfig.subtreeSeparation!=null?i.subTreeConfig.subtreeSeparation:this.config.subtreeSeparation,siblingSeparation:i.subTreeConfig.siblingSeparation!=null?i.subTreeConfig.siblingSeparation:this.config.siblingSeparation,layout:i.subTreeConfig.layout!=null?i.subTreeConfig.layout:this.config.layout,columns:i.subTreeConfig.columns!=null?i.subTreeConfig.columns:this.config.columns,collapse:i.subTreeConfig.collapse!=null?i.subTreeConfig.collapse:this.config.collapse,partnerNodeSeparation:i.subTreeConfig.partnerNodeSeparation!=null?i.subTreeConfig.partnerNodeSeparation:this.config.partnerNodeSeparation})}this._event_id=a._guid(),a._validateConfig(this.config)&&(this._vScroll={},this.config.ui||(this.ui=a.ui),this.config.editUI?this.editUI=this.config.editUI:this.editUI=new a.editUI,this.editUI.init(this),this.config.filterUI?this.filterUI=this.config.filterUI:this.filterUI=new a.filterUI,this.filterUI.init(this),this.manager=new a.manager(this),this.config.searchUI?this.searchUI=this.config.searchUI:this.searchUI=new a.searchUI,this.config.nodeMenuUI?this.nodeMenuUI=this.config.nodeMenuUI:this.nodeMenuUI=new a.menuUI,this.nodeMenuUI.init(this,this.config.nodeMenu),this.config.nodeCircleMenuUI?this.nodeCircleMenuUI=this.config.nodeCircleMenuUI:this.nodeCircleMenuUI=new a.circleMenuUI,this.nodeCircleMenuUI.init(this,this.config.nodeCircleMenu),this.config.nodeContextMenuUI?this.nodeContextMenuUI=this.config.nodeContextMenuUI:this.nodeContextMenuUI=new a.menuUI,this.nodeContextMenuUI.init(this,this.config.nodeContextMenu),this.config.toolbarUI?this.toolbarUI=this.config.toolbarUI:this.toolbarUI=new a.toolbarUI,this.config.notifierUI?this.notifierUI=this.config.notifierUI:this.notifierUI=new a.notifierUI,this.notifierUI.init(this),this.config.menuUI?this.menuUI=this.config.menuUI:this.menuUI=new a.menuUI,this.menuUI.init(this,this.config.menu),this.config.xScrollUI||(this.xScrollUI=new a.xScrollUI(this.element,this.config,function(){return{boundary:n.response.boundary,scale:n.getScale(),viewBox:n.getViewBox(),padding:n.config.padding}},function(o){n.setViewBox(o)},function(){n._draw(!0,a.action.xScroll)})),this.config.yScrollUI||(this.yScrollUI=new a.yScrollUI(this.element,this.config,function(){return{boundary:n.response.boundary,scale:n.getScale(),viewBox:n.getViewBox(),padding:n.config.padding}},function(o){n.setViewBox(o)},function(){n._draw(!0,a.action.xScroll)})),this.config.undoRedoUI?this.undoRedoUI=this.config.undoRedoUI:this.undoRedoUI=new a.undoRedoUI,this.element.classList.add("bft-"+this.config.mode),this._gragStartedId=null,this._timeout=null,this._touch=null,this._initialized=!1,this._loaded=!1,this._moveInterval=null,this._movePosition=null,this.response=null,this.nodes=null,this.isVisible=null,a._intersectionObserver(this.element,function(o){n.isVisible=o,a.events.publish("visibility-change",[n])!==!1&&a.LAZY_LOADING&&n.isVisible&&(n._loaded?n._draw(!1,a.action.update):(n._setInitialSizeIfNotSet(),n._draw(!1,a.action.init)))}))};a._defaultConfig=function(t){return{interactive:!0,mode:"light",lazyLoading:!0,enableDragDrop:!1,enableSearch:!0,enableTouch:!1,enablePan:!0,keyNavigation:!1,miniMap:!1,nodeMenu:null,nodeCircleMenu:null,nodeContextMenu:null,menu:null,toolbar:!1,sticky:!0,nodeMouseClick:a.action.details,nodeMouseDbClick:a.none,mouseScrool:a.action.zoom,showXScroll:a.none,showYScroll:a.none,template:"ana",tags:{},min:!1,nodeBinding:{},linkBinding:{},searchFields:null,searchDisplayField:null,searchFieldsWeight:null,searchFieldsAbbreviation:null,nodes:[],clinks:[],slinks:[],backdrops:[],groupDottedLines:[],dottedLines:[],undoRedoStorageName:null,levelSeparation:60,siblingSeparation:20,subtreeSeparation:40,backdropSeparation:15,mixedHierarchyNodesSeparation:15,assistantSeparation:100,minPartnerSeparation:50,partnerChildrenSplitSeparation:20,partnerNodeSeparation:15,columns:10,padding:30,orientation:a.orientation.top,layout:a.layout.normal,layoutGridColumns:"dynamic",scaleInitial:1,movable:null,scaleMin:.1,scaleMax:5,orderBy:null,editUI:null,filterUI:null,searchUI:null,xScrollUI:null,yScrollUI:null,nodeMenuUI:null,nodeCircleMenuUI:null,nodeContextMenuUI:null,toolbarUI:null,notifierUI:null,menuUI:null,undoRedoUI:null,exportUrl:"https://balkan.app/export",collapse:{},expand:{},align:a.CENTER,UI:null,anim:{func:a.anim.outPow,duration:200},zoom:{speed:120,smooth:12},roots:null,state:null,editForm:{readOnly:!1,titleBinding:"name",photoBinding:"img",addMore:"Add more fields",addMoreBtn:"Add",addMoreFieldName:"Field name",saveAndCloseBtn:"Save and close",cancelBtn:"Cancel",generateElementsFromFields:!0,focusBinding:null,buttons:{edit:{icon:a.icon.edit(24,24,"#fff"),text:"Edit",hideIfEditMode:!0,hideIfDetailsMode:!1},share:{icon:a.icon.share(24,24,"#fff"),text:"Share"},pdf:{icon:a.icon.pdf(24,24,"#fff"),text:"Save as PDF"},remove:{icon:a.icon.remove(24,24,"#fff"),text:"Remove",hideIfDetailsMode:!0}},elements:[]}}},a.prototype.load=function(t,e){var n=this;return this.config.nodes=t,this._draw(!1,a.action.init,void 0,function(){n.filterUI.update(),e&&e()}),this},a.prototype.loadXML=function(t,e){var n=a._xml2json(t);return this.load(n,e)},a.prototype.getXML=function(){return a._json2xml(this.config.nodes)},a.prototype.on=function(t,e){return a.events.on(t,e,this._event_id),this},a.prototype.removeListener=function(t,e){return a.events.remove(t,e,this._event_id)},a.prototype.draw=function(t,e,n){t==null&&(t=a.action.update),this._draw(!1,t,e,n)},a.prototype._draw=function(t,e,n,r){var i=this;if(!a.LAZY_LOADING||this.isVisible)if(a.LAZY_LOADING||this._initialized||(this._setInitialSizeIfNotSet(),this.width()!=0&&this.height()!=0)){this._hideBeforeAnimationCompleted=!1;var o=e==a.action.init?null:this.getViewBox();this.manager.read(t,this.width(),this.height(),o,e,n,function(s){if(!i.notifierUI.show(s.notif)){e!=a.action.exporting&&(i.nodes=s.nodes,i.visibleNodeIds=s.visibleNodeIds,i.roots=s.roots),i.editUI.fields=s.allFields;var l={defs:""};a.events.publish("renderdefs",[i,l]);var c=i.ui.defs(l.defs),d=i.getScale(s.viewBox);c+=i.ui.pointer(i.config,e,d);var u=i.getViewBox(),f=s.viewBox;l={content:c,res:s},a.events.publish("prerender",[i,l]),c=l.content;var h=[];if(a.RENDER_LINKS_BEFORE_NODES)for(var p=0;p<s.visibleNodeIds.length;p++){var v=s.nodes[s.visibleNodeIds[p]];a.getRootOf(v).stParent?h.push(v.id):c+=i.ui.link(v,i,d,s.bordersByRootIdAndLevel,s.nodes,e)}for(p=0;p<s.visibleNodeIds.length;p++){v=s.nodes[s.visibleNodeIds[p]];var y=i._get(v.id);a.RENDER_LINKS_BEFORE_NODES&&h.includes(v.id)&&(c+=i.ui.link(v,i,d,s.bordersByRootIdAndLevel,s.nodes,e)),c+=i.ui.node(v,y,s.animations,i.config,void 0,void 0,void 0,e,d,i)}for(p=0;p<s.visibleNodeIds.length;p++)v=s.nodes[s.visibleNodeIds[p]],a.RENDER_LINKS_BEFORE_NODES||(c+=i.ui.link(v,i,d,s.bordersByRootIdAndLevel,s.nodes,e)),c+=i.ui.expandCollapseBtn(i,v,i._layoutConfigs,e,d);if(l={content:c,res:s},a.events.publish("render",[i,l]),c=l.content,s=l.res,c+=i.ui.lonely(i.config),e!==a.action.exporting){if(e!==a.action.centernode&&e!==a.action.insert&&e!==a.action.expand&&e!==a.action.collapse&&e!==a.action.update||(f=u),e===a.action.init&&u!=null&&(f=u),i.response=s,I=i.ui.svg(i.width(),i.height(),f,i.config,c),i._initialized){var w=i.getSvg(),g=w.parentNode;g.removeChild(w),g.insertAdjacentHTML("afterbegin",I),i._attachEventHandlers(),i.xScrollUI.addListener(i.getSvg()),i.yScrollUI.addListener(i.getSvg()),i.xScrollUI.setPosition(),i.yScrollUI.setPosition()}else i.element.innerHTML=i.ui.css()+I+i.ui.menuButton(i.config),i._attachInitEventHandlers(),i._attachEventHandlers(),i.xScrollUI.create(i.width(),i.config.padding),i.xScrollUI.setPosition(),i.xScrollUI.addListener(i.getSvg()),i.yScrollUI.create(i.height(),i.config.padding),i.yScrollUI.setPosition(),i.yScrollUI.addListener(i.getSvg()),i.config.enableSearch&&i.searchUI.init(i),i.toolbarUI.init(i,i.config.toolbar),i.undoRedoUI.init(i);var b=!1,_=i.response.animations;if(_[0].length>0){for(i._hideBeforeAnimation(_[0].length),p=0;p<_[0].length;p++)_[0][p]=i.getNodeElement(_[0][p]);a.animate(_[0],_[1],_[2],i.config.anim.duration,i.config.anim.func,function(){b||(r&&r(),a.events.publish("redraw",[i]),i._showAfterAnimation(),b=!0)})}e===a.action.centerNode?a.animate(i.getSvg(),{viewbox:u},{viewbox:i.response.viewBox},i.config.anim.duration,i.config.anim.func,function(){i.ripple(n.options.rippleId),b||(r&&r(),a.events.publish("redraw",[i]),i._showAfterAnimation(),b=!0)},function(){i.xScrollUI.setPosition(),i.yScrollUI.setPosition()}):!u||!i.response||u[0]==i.response.viewBox[0]&&u[1]==i.response.viewBox[1]&&u[2]==i.response.viewBox[2]&&u[3]==i.response.viewBox[3]||e!==a.action.insert&&e!==a.action.expand&&e!==a.action.collapse&&e!==a.action.update&&e!==a.action.init?_[0].length==0&&(b||(r&&r(),a.events.publish("redraw",[i]),b=!0)):a.animate(i.getSvg(),{viewbox:u},{viewbox:i.response.viewBox},2*i.config.anim.duration,i.config.anim.func,function(){i.xScrollUI.setPosition(),i.yScrollUI.setPosition(),b||(r&&r(),a.events.publish("redraw",[i]),b=!0)}),i._initialized||(i._initialized=!0,i.filterUI.update(),a.events.publish("init",[i])),!i._loaded&&s&&s.nodes&&Object.keys(s.nodes).length&&(i._loaded=!0)}else{var E=s.boundary,A=E.maxX-E.minX,k=E.maxY-E.minY,I=i.ui.svg(A,k,[E.minX,E.minY,A,k],i.config,c,d);r(I,s)}}},function(s){a.events.publish("ready",[i,s])})}else console.error("Cannot load the family with size 0! If you are using the FamilyTree within tabs set FamilyTree.LAZY_LOADING to true! ")},a.prototype._setInitialSizeIfNotSet=function(){this.element.style.overflow="hidden",this.element.style.position="relative",this.element.offsetHeight==0&&(this.element.style.height="100%",this.element.offsetHeight==0&&(this.element.style.height="700px")),this.element.offsetWidth==0&&(this.element.style.width="100%",this.element.offsetWidth==0&&(this.element.style.width="700px"))},a.prototype.width=function(){return this.element.offsetWidth},a.prototype.height=function(){return this.element.offsetHeight},a.prototype.getViewBox=function(){var t=this.getSvg();return a._getViewBox(t)},a.prototype.setViewBox=function(t){this.getSvg().setAttribute("viewBox",t.toString())},a.prototype.getScale=function(t){return t||(t=this.getViewBox()),a.getScale(t,this.width(),this.height(),this.config.scaleInitial,this.config.scaleMax,this.config.scaleMin)},a.prototype.setScale=function(t){t>this.config.scaleMax&&(t=this.config.scaleMax),t<this.config.scaleMin&&(t=this.config.scaleMin);var e=this.getViewBox().slice(0),n=this.width(),r=this.height(),i=n/e[2],o=r/e[3],s=i>o?o:i,l=e,c=e[2],d=e[3];return e[2]=e[2]/(t/s),e[3]=e[3]/(t/s),e[0]=l[0]-(e[2]-c)/2,e[1]=l[1]-(e[3]-d)/2,this.setViewBox(e),a.events.publish("redraw",[this]),t},a.prototype.ripple=function(t,e,n){var r=this.getNode(t);if(r!=null){var i=this.getNodeElement(t);if(i!=null){var o=this.getScale(),s=r.w/2,l=r.h/2;if(e!==void 0&&n!==void 0){var c=i.getBoundingClientRect();s=e/o-c.left/o,l=n/o-c.top/o}var d=r.w,u=r.h,f=d-s>s?d-s:s,h=u-l>l?u-l:l,p=f>h?f:h,v=document.createElementNS("http://www.w3.org/2000/svg","g"),y=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),w=document.createElementNS("http://www.w3.org/2000/svg","rect"),g=document.createElementNS("http://www.w3.org/2000/svg","circle"),b=a.randomId();y.setAttribute("id",b);var _={ripple:a.t(r.templateName,r.min,this.getScale()).ripple,node:r};a.events.publish("ripple",[this,_]),w.setAttribute("x",_.ripple.rect?_.ripple.rect.x:0),w.setAttribute("y",_.ripple.rect?_.ripple.rect.y:0),w.setAttribute("width",_.ripple.rect?_.ripple.rect.width:r.w),w.setAttribute("height",_.ripple.rect?_.ripple.rect.height:r.h),w.setAttribute("rx",_.ripple.radius),w.setAttribute("ry",_.ripple.radius),g.setAttribute("clip-path","url(#"+b+")"),g.setAttribute("cx",s),g.setAttribute("cy",l),g.setAttribute("r",0),g.setAttribute("fill",_.ripple.color),g.setAttribute("class","bft-ripple"),y.appendChild(w),v.appendChild(y),v.appendChild(g),i.appendChild(v),a.animate(g,{r:0,opacity:1},{r:p,opacity:0},500,a.anim.outPow,function(){i.removeChild(v)})}}},a.prototype.center=function(t,e,n){var r,i,o=t,s=!0,l=!0;e&&e.parentState!=null&&(r=e.parentState),e&&e.childrenState!=null&&(i=e.childrenState),e&&e.rippleId!=null&&(o=e.rippleId),e&&e.vertical!=null&&(s=e.vertical),e&&e.horizontal!=null&&(l=e.horizontal);var c={parentState:r,childrenState:i,rippleId:o,vertical:s,horizontal:l};this._draw(!1,a.action.centerNode,{id:t,options:c},n)},a.prototype.fit=function(t){this.config.scaleInitial=a.match.boundary,this._draw(!0,a.action.init,{method:"fit"},t)},a.prototype.toggleFullScreen=function(){var t=document.querySelector("["+a.attr.tlbr+"r='fullScreen']");document.fullscreenElement==this.element||document.webkitFullscreenElement==this.element||document.mozFullScreenElement==this.element||document.msFullscreenElement==this.element?(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),t&&(t.innerHTML=a.toolbarUI.openFullScreenIcon)):(this.element.requestFullscreen?this.element.requestFullscreen():this.element.mozRequestFullScreen?this.element.mozRequestFullScreen():this.element.webkitRequestFullscreen?this.element.webkitRequestFullscreen():this.element.msRequestFullscreen&&this.element.msRequestFullscreen(),t&&(t.innerHTML=a.toolbarUI.closeFullScreenIcon))},a.prototype.getNode=function(t){return this.nodes[t]},a.prototype.setLayout=function(t,e){e||(e="base"),this._layoutConfigs[e].layout=t,e=="base"&&(this.config.layout=t),this._draw(!1,a.action.update)},a.prototype.setOrientation=function(t,e,n){var r=this;e||(e="base"),this._layoutConfigs[e].orientation=t,e=="base"&&(this.config.orientation=t),this._draw(!1,a.action.update,void 0,function(){a._moveToBoundaryArea(r.getSvg(),r.getViewBox(),r.response.boundary,function(){r._draw(!0,a.action.pan),n&&n()})})},a.prototype.search=function(t,e,n){return a.isNEU(e)&&(e=this.searchUI._searchFields),a.isNEU(n)&&(n=e),a._search.search(this.config.nodes,t,e,n,this.config.searchDisplayField,this.config.searchFieldsWeight,this.searchUI._searchFieldsAbbreviation)},a.prototype._hideBeforeAnimation=function(t){if(this._hideBeforeAnimationCompleted!=1&&!(t&&t<a.ANIM_THRESHOLD)){var e=this.element.getElementsByTagName("text");if(e.length>a.TEXT_THRESHOLD)for(var n=0;n<e.length;n++)e[n].style.display="none";var r=this.element.getElementsByTagName("image");if(r.length>a.IMAGES_THRESHOLD)for(n=0;n<r.length;n++)r[n].style.display="none";var i=this.element.querySelectorAll("["+a.attr.link_id+"]");if(i.length>a.LINKS_THRESHOLD)for(n=0;n<i.length;n++)i[n].style.display="none";var o=this.element.querySelectorAll("["+a.attr.control_expcoll_id+"]");if(o.length>a.BUTTONS_THRESHOLD)for(n=0;n<o.length;n++)o[n].style.display="none";var s=this.element.querySelectorAll("["+a.attr.control_up_id+"]");if(s.length>a.BUTTONS_THRESHOLD)for(n=0;n<s.length;n++)s[n].style.display="none";this._hideBeforeAnimationCompleted=!0}},a.prototype._showAfterAnimation=function(){for(var t=this.element.getElementsByTagName("text"),e=0;e<t.length;e++)t[e].style.display="";var n=this.element.getElementsByTagName("image");for(e=0;e<n.length;e++)n[e].style.display="";var r=this.element.querySelectorAll("["+a.attr.link_id+"]");for(e=0;e<r.length;e++)r[e].style.display="";var i=this.element.querySelectorAll("["+a.attr.control_expcoll_id+"]");for(e=0;e<i.length;e++)i[e].style.display="";var o=this.element.querySelectorAll("["+a.attr.control_up_id+"]");for(e=0;e<o.length;e++)o[e].style.display="";this._hideBeforeAnimationCompleted=!1},a.prototype.isChild=function(t,e){for(var n=this.getNode(e);n;){if(n.id==t)return!0;n=n.parent?n.parent:n.stParent}return!1},a.prototype.getCollapsedIds=function(t){for(var e=[],n=0;n<t.childrenIds.length;n++){var r=this.getNode(t.childrenIds[n]);r.collapsed==1&&e.push(r.id)}return e},a.prototype.stateToUrl=function(){if(this.manager.state){var t={};return t.exp=this.manager.state.exp.join("*"),t.min=this.manager.state.min.join("*"),t.adjustify=this.manager.state.adjustify.x+"*"+this.manager.state.adjustify.y,t.scale=this.manager.state.scale,t.y=this.manager.state.x,t.x=this.manager.state.y,new URLSearchParams(t).toString()}return""},a.prototype.generateId=function(){for(;;){var t="_"+("0000"+(Math.random()*Math.pow(36,4)|0).toString(36)).slice(-4);if(this.nodes==null||!this.nodes.hasOwnProperty(t))return t}},a.prototype.moveNodesToVisibleArea=function(t,e){for(var n=this,r=this.getSvg(),i=this.getViewBox(),o=null,s=null,l=null,c=null,d=0;d<t.length;d++){var u=this.nodes[t[d]];(o===null||o<u.x+u.w)&&(o=u.x+u.w),(s===null||s<u.y+u.h)&&(s=u.y+u.h),(l===null||l>u.x)&&(l=u.x),(c===null||c>u.y)&&(c=u.y)}var f=this.width(),h=this.height(),p=f/(b=o-l+2*this.config.padding),v=h/(_=s-c+2*this.config.padding),y=p>v?v:p,w=Math.ceil(f/y),g=Math.ceil(h/y),b=0,_=0;if(w-2*this.config.padding>=o-l)b=(o+l)/2-w/2;else switch(b=firstRoot.x-w/2+a.manager._getNodeWidth(firstRoot,this.config)/2,this.config.orientation){case a.orientation.right:case a.orientation.right_top:(b=-(w/2-(l-o)/2))<this.config.padding-w&&(b=this.config.padding-w);break;case a.orientation.left:case a.orientation.bottom_left:case a.orientation.top_left:case a.orientation.left_top:(b=-(w/2-(o-l)/2))>-this.config.padding&&(b=-this.config.padding)}if(g-2*this.config.padding>=s-c)_=(s+c)/2-g/2;else switch((_=-(g/2-(s-c)/2))>-this.config.padding&&(_=-this.config.padding),this.config.orientation){case a.orientation.bottom:case a.orientation.bottom_left:(_=-(g/2-(c-s)/2))<this.config.padding-g&&(_=this.config.padding-g);break;case a.orientation.left:case a.orientation.right:_=firstRoot.y-g/2+a.manager._getNodeWidth(firstRoot,this.config)/2}var E=[b,_,w,g];i[0]!==E[0]||i[1]!==E[1]?a.animate(r,{viewBox:i},{viewBox:E},this.config.anim.duration,this.config.anim.func,function(){n.draw(a.action.update,void 0,e)}):e&&e()},a.prototype._nodeHasHiddenParent=function(t){return!t.parent&&!a.isNEU(t.pid)&&this.getNode(t.pid)},a.prototype.destroy=function(){this._removeEvent(window,"resize"),a.events.removeForEventId(this._event_id),this.element.innerHTML=null},a.__defaultConfig=a._defaultConfig,a._defaultConfig=function(t){var e=a.__defaultConfig();return e.nodeTreeMenu=null,e.template="tommy",e.mode="light",e.minPartnerSeparation=30,e.partnerChildrenSplitSeparation=10,e.siblingSeparation=35,e.tags["children-group"]={template:"cgroup",subTreeConfig:{siblingSeparation:7,columns:1}},t&&t.template?(e.tags.male={template:t.template+"_male"},e.tags.female={template:t.template+"_female"}):(e.tags.male={template:e.template+"_male"},e.tags.female={template:e.template+"_female"}),e},a.prototype.load=function(t,e){var n=this;return this.config.nodes=t,this.config.roots=null,this._draw(!1,a.action.init,void 0,function(){n.filterUI.update(),e&&e()}),this},a.prototype.getRecentRootsByNodeId=function(t){this.recentRoots||(this.recentRoots=[]);var e=this.recentRoots,n=this.getNode(t);return n?(n.rids.sort(function(r,i){var o=e.indexOf(r),s=e.indexOf(i);return o==-1?1e3:s==-1?-1e3:o-s}),n.rids):[]},a.prototype._nodeHasHiddenParent=function(t){return!(t.parent||a.isNEU(t.pid)||!this.getNode(t.pid))||!(!t.isPartner||a.isNEU(t.mid)||!this.getNode(t.mid))||!(!t.isPartner||a.isNEU(t.fid)||!this.getNode(t.fid))||!!(t.isPartner&&t.pids.length>1)},a.prototype._center=a.prototype.center,a.prototype.center=function(t,e,n){var r=this.getRecentRootsByNodeId(t);Array.isArray(this.config.roots)||(roots=[]),a._changeRootOption(this.config.roots,r,this.manager.rootList),this._center(t,e,n)},a.localStorage={},a.localStorage.getItem=function(t){var e=localStorage.getItem("to_date");if(e){if((e=new Date(e))<new Date){for(var n=0,r=localStorage.length;n<r;++n){var i=localStorage.key(n);i&&i.startsWith&&i.startsWith('{"n"')&&localStorage.removeItem(i)}localStorage.removeItem("to_date")}}else(e=new Date).setDate(e.getDate()+5),e=e.toISOString(),localStorage.setItem("to_date",e);return localStorage.getItem(t)},a.localStorage.setItem=function(t,e){try{localStorage.setItem(t,e)}catch(n){n.code==n.QUOTA_EXCEEDED_ERR?(console.warn("Local storage quota exceeded"),localStorage.clear()):(console.error("Local storage error code:"+n.code),console.error(n))}},a.prototype.canUpdateLink=function(t,e){if(e==null||e==null||t==null||t==null||t==e)return!1;var n=this.getNode(e),r=this.getNode(t);return!(n&&r&&(n.isPartner||n.hasPartners&&r.isAssistant||n.hasAssistants&&r.isPartner))&&!this.isChild(t,e)},a.prototype._canUpdateLink=a.prototype.canUpdateLink,a.prototype.updateNode=function(t,e,n){var r=this,i=this.get(t.id);if(n===!0&&a.events.publish("update",[this,i,t])===!1)return!1;this.update(t),a.events.publish("updated",[this]),this.filterUI.update();var o=this.getNode(t.id),s=o.pid;s==null&&(s=o.stpid),this._draw(!1,a.action.update,{id:s},function(){r.ripple(t.id),e&&e()})},a.prototype.update=function(t){for(var e=0;e<this.config.nodes.length;e++)if(this.config.nodes[e].id==t.id){this._putInUndoStack(),this.clearRedo(),this.config.nodes[e]=t;break}return this},a.prototype.removeNode=function(t,e,n){var r=this;if(!this.canRemove(t))return!1;var i=this._getNewPidsAndStpidsForIds(t);return n===!0&&a.events.publish("remove",[this,t,i])===!1?!1:(this.remove(t),a.events.publish("updated",[this]),this.filterUI.update(),this._draw(!1,a.action.update,null,function(){r.config.sticky&&a._moveToBoundaryArea(r.getSvg(),r.getViewBox(),r.response.boundary),e&&e()}),!0)},a.prototype.remove=function(t){var e=this.get(t);if(e){this._putInUndoStack(),this.clearRedo();for(var n=this.config.nodes.length-1;n>=0;n--)this.config.nodes[n].pid!=t&&this.config.nodes[n].stpid!=t||(this.config.nodes[n].pid=e.pid,this.config.nodes[n].stpid=e.stpid),this.config.nodes[n].id==t&&this.config.nodes.splice(n,1)}return this},a.prototype._getNewPidsAndStpidsForIds=function(t){var e=this.get(t),n={},r={};if(e)for(var i=this.config.nodes.length-1;i>=0;i--)this.config.nodes[i].pid==t?n[this.config.nodes[i].id]=e.pid:this.config.nodes[i].stpid==t&&(r[this.config.nodes[i].id]=e.stpid);return{newPidsForIds:n,newStpidsForIds:r}},a.prototype.addNode=function(t,e,n){var r=this;if(n===!0&&a.events.publish("add",[this,t])===!1)return!1;this.add(t),a.events.publish("updated",[this]),this.filterUI.update(),r._draw(!1,a.action.insert,{id:t.pid,insertedNodeId:t.id},function(){r.ripple(t.id),e&&e()})},a.prototype.add=function(t){if(t.id==null&&console.error("Call addNode without id"),this._putInUndoStack(),this.clearRedo(),this.config.movable&&!a.isNEU(t.pid)){var e=this._get(t.pid);e&&(e.movex!=null&&(t.movex=e.movex),e.movey!=null&&(t.movey=e.movey))}return this.config.nodes.push(t),this},a.prototype.replaceIds=function(t,e){this._replaceIds(t),this._draw(!1,a.action.update,void 0,e)},a.prototype._replaceIds=function(t){for(var e=function(c){for(var d=0;d<c.length;d++){var u=c[d];for(var f in t){var h=t[f];u.from==f&&(u.from=h),u.to==f&&(u.to=h)}}},n=0;n<this.config.nodes.length;n++){var r=this.config.nodes[n];for(var i in t){var o=t[i];r.id==i&&(r.id=o),r.pid==i&&(r.pid=o),r.stpid==i&&(r.stpid=o),r.ppid==i&&(r.ppid=o)}}if(Array.isArray(this.config.roots))for(n=0;n<this.config.roots.length;n++)a.isNEU(t[this.config.roots[n]])||(this.config.roots[n]=t[this.config.roots[n]]);if(this.nodes)for(var s in this.nodes)a.isNEU(t[s])||(o=t[s],(l=this.nodes[s]).id=o,this.nodes[o]=l);if(this.manager.oldNodes)for(var s in this.manager.oldNodes)a.isNEU(t[s])||(o=t[s],(l=this.manager.oldNodes[s]).id=o,this.manager.oldNodes[o]=l);if(this.roots){for(var s in this.roots)if(!a.isNEU(t[s])){var l;o=t[s],(l=this.roots[s]).id=o,this.roots[o]=l}}e(this.config.clinks),e(this.config.slinks),e(this.config.groupDottedLines),e(this.config.dottedLines)},a.prototype._get=function(t){var e=this.__get(t);if(e)return e;if((this.config.groupDottedLines.length||this.config.dottedLines.length)&&!a.isNEU(t)&&typeof t=="string"&&(t.indexOf("balkan_group_dotted_")!=-1||t.indexOf("balkan_dotted_")!=-1)){var n=(t=(t=t.replace("balkan_group_dotted_","")).replace("balkan_dotted_","")).indexOf("_balkan_id_");if(t=t.substring(n+11),e=this.__get(t))return e}return null},a.prototype.__get=function(t){for(var e=0;e<this.config.nodes.length;e++)if(this.config.nodes[e].id==t)return this.config.nodes[e];return null},a.prototype.get=function(t){var e=this._get(t);return e==null?null:JSON.parse(JSON.stringify(e))},a.prototype.canRemove=function(t){var e=this.getNode(t);return!!e&&!e.hasPartners&&!e.hasAssistants},a.prototype.addChildNode=function(t,e,n){this.hideTreeMenu(!1);var r=this;if(!t||a.isNEU(t.mid)&&a.isNEU(t.fid))console.error("addSonNode invalid data");else{a.isNEU(t.id)&&(t.id=this.generateId());var i={addNodesData:[t],updateNodesData:[],removeNodeId:null};if(n===!0&&a.events.publish("update",[this,i])===!1)return!1;r._fireUpdate_addUpdateRemove(i,n);var o="";a.isNEU(i.addNodesData[0].pid)?a.isNEU(i.addNodesData[0].mid)?a.isNEU(i.addNodesData[0].fid)||(o=i.addNodesData[0].fid):o=i.addNodesData[0].mid:o=i.addNodesData[0].pid,r._draw(!1,a.action.insert,{id:o,insertedNodeId:i.addNodesData[0].id},function(){r.ripple(i.addNodesData[0].id),e&&e(),n===!0&&a.events.publish("updated",[r,i]),r.filterUI.update()})}},a.prototype.addChildAndPartnerNodes=function(t,e,n,r,i){this.hideTreeMenu(!1);var o=this;if(!e||a.isNEU(e.mid)&&a.isNEU(e.fid))console.error("addChildAndPartnerNodes invalid childData");else if(n){a.isNEU(e.id)&&(e.id=this.generateId()),a.isNEU(n.id)&&(n.id=this.generateId()),e.mid=="_ft_partner"?e.mid=n.id:e.fid=="_ft_partner"&&(e.fid=n.id);var s=[],l=null;Array.isArray(n.pids)&&(n.pids.length!=1&&console.error("addChildAndPartnerNodes partnerData.pids has to have one partner"),l=this.get(n.pids[0]),Array.isArray(l.pids)||(l.pids=[]),l.pids.push(n.id),s.push(l));var c={addNodesData:[e,n],updateNodesData:s,removeNodeId:null};if(i===!0&&a.events.publish("update",[this,c])===!1)return!1;o._fireUpdate_addUpdateRemove(c,i);var d=o.getRecentRootsByNodeId(t);a._changeRootOption(o.config.roots,d,o.manager.rootList);var u="";l?u=l.id:a.isNEU(e.pid)?a.isNEU(e.mid)?a.isNEU(e.fid)||(u=e.fid):u=e.mid:u=e.pid,o._draw(!1,a.action.update,{id:u},function(){o.ripple(e.id),o.ripple(n.id),r&&r(),i===!0&&a.events.publish("updated",[o,c]),o.filterUI.update()}),i===!0&&a.events.publish("updating",[o,c])}else console.error("addChildAndPartnerNodes invalid data")},a.prototype.addPartnerAndParentNodes=function(t,e,n,r,i){this.hideTreeMenu(!1);var o=this;if(!a.isNEU(e)&&e.length)if(n){a.isNEU(n.id)&&(n.id=this.generateId());for(var s=[],l=0;l<e.length;l++){var c=this.get(e[l]);if(!a.isNEU(c.mid)&&!a.isNEU(c.fid))return void console.error("father id (fid) or mather id (mid) has to be null or undefined");a.isNEU(c.mid)?c.mid=n.id:a.isNEU(c.mid)||(c.fid=n.id),s.push(c)}var d=null;Array.isArray(n.pids)&&(n.pids.length!=1&&console.error("addChildAndPartnerNodes partnerData.pids has to have one partner"),d=this.get(n.pids[0]),Array.isArray(d.pids)||(d.pids=[]),d.pids.push(n.id),s.push(d));var u={addNodesData:[n],updateNodesData:s,removeNodeId:null};if(i===!0&&a.events.publish("update",[this,u])===!1)return!1;o._fireUpdate_addUpdateRemove(u,i);var f=o.getRecentRootsByNodeId(t);a._changeRootOption(o.config.roots,f,o.manager.rootList);var h="";d&&(h=d.id),o._draw(!1,a.action.update,{id:h},function(){o.ripple(n.id),r&&r(),i===!0&&a.events.publish("updated",[o,u]),o.filterUI.update()}),i===!0&&a.events.publish("updating",[o,u])}else console.error("addPartnerAndParentNodes invalid data");else console.error("addPartnerAndParentNodes invalid data")},a.prototype.addPartnerNode=function(t,e,n){this.hideTreeMenu(!1);var r=this;if(t&&Array.isArray(t.pids)&&t.pids.length==1){a.isNEU(t.id)&&(t.id=this.generateId());var i=this.get(t.pids[0]);Array.isArray(i.pids)||(i.pids=[]),i.pids.push(t.id);var o={removeNodeId:null,updateNodesData:[i],addNodesData:[t]};if(n===!0&&a.events.publish("update",[this,o])===!1)return!1;r._fireUpdate_addUpdateRemove(o,n);var s=r.getRecentRootsByNodeId(o.updateNodesData[0].id);a._changeRootOption(r.config.roots,s,r.manager.rootList);var l=o.updateNodesData[0].id;r._draw(!1,a.action.insert,{id:l,insertedNodeId:o.addNodesData[0].id},function(){r.ripple(o.addNodesData[0].id),e&&e(),n===!0&&a.events.publish("updated",[r,o]),r.filterUI.update()}),n===!0&&a.events.publish("updating",[r,o])}else console.error("addPartnerNode invalid data")},a.prototype.addParentNode=function(t,e,n,r,i){this.hideTreeMenu(!1);var o=this;if(n)if(["mid","fid"].has(e))if(a.isNEU(t))console.error("addParentNode invalid childId");else{a.isNEU(n.id)&&(n.id=this.generateId());var s=[],l=this.get(t);l[e]=n.id,s.push(l);var c=null;Array.isArray(n.pids)&&(n.pids.length!=1&&console.error("addParentNode: data has to have one partner"),c=this.get(n.pids[0]),Array.isArray(c.pids)||(c.pids=[]),c.pids.push(n.id),s.push(c));var d={removeNodeId:null,updateNodesData:s,addNodesData:[n]};if(i===!0&&a.events.publish("update",[this,d])===!1)return!1;o._fireUpdate_addUpdateRemove(d,i);var u=t;o.config.roots=[d.addNodesData[0].id],o._draw(!1,a.action.insert,{id:u,insertedNodeId:d.addNodesData[0].id},function(){o.ripple(d.addNodesData[0].id),r&&r(),i===!0&&a.events.publish("updated",[o,d]),o.filterUI.update()}),i===!0&&a.events.publish("updating",[o,d])}else console.error("addParentNode invalid type");else console.error("addParentNode invalid data")},a.prototype.canRemove=function(t){var e=this.getNode(t);if(!e)return!1;var n=this.getNode(e.mid),r=this.getNode(e.fid),i=e.ftChildrenIds.length>0,o=!1,s=e.pids.length>0,l=e.pids.length>1;if(e.pids.length==1){var c=this.getNode(e.pids[0]);o=e.ftChildrenIds.compare(c.ftChildrenIds)}return!(!n&&!r||i||s)||!(n||r||i||l||!s||o)||!(n||r||!i||!o)||!(n||r||!i||o)||!(n||r||i||!o)},a.prototype.removeNode=function(t,e,n){var r=this;if(this.canRemove(t)){var i=this.getNode(t),o=[];if(Array.isArray(i.pids))for(var s=0;s<i.pids.length;s++){var l=this.get(i.pids[s]);l&&(d=l.pids.indexOf(i.id))!=-1&&(l.pids.splice(d,1),o.push(l))}if(Array.isArray(i.ftChildrenIds))for(s=0;s<i.ftChildrenIds.length;s++){var c=this.get(i.ftChildrenIds[s]);c&&(c.mid==i.id?(c.mid=void 0,o.push(c)):c.fid==i.id&&(c.fid=void 0,o.push(c)))}var d,u={removeNodeId:t,updateNodesData:o,addNodesData:[]};if(n===!0&&a.events.publish("update",[this,u])===!1)return!1;r._fireUpdate_addUpdateRemove(u,n),(d=r.config.roots.indexOf(t))!=-1&&r.config.roots.splice(d,1),r._draw(!1,a.action.update,null,function(){r.config.sticky&&a._moveToBoundaryArea(r.getSvg(),r.getViewBox(),r.response.boundary),e&&e(),n===!0&&a.events.publish("updated",[r,u]),r.filterUI.update()}),n===!0&&a.events.publish("updating",[r,u])}},a.prototype.updateNode=function(t,e,n){var r=this,i=this.getNode(t.id);t.pids||(t.pids=[]);var o=[];o.push(t);for(var s=0;s<i.pids.length;s++)if(!t.pids.has(i.pids[s])&&(c=this._get(i.pids[s]))&&c.pids){var l=c.pids.indexOf(t.id);l!=-1&&(c.pids.splice(l,1),o.push(t)),i.pids.splice(s,1),o.push(c)}for(s=0;s<t.pids.length;s++){var c;(!i.pids||!i.pids.has(t.pids[s]))&&((c=this._get(t.pids[s])).pids||(c.pids=[]),c.pids.push(t.pids[s]),o.push(c))}var d={removeNodeId:null,updateNodesData:o,addNodesData:[]};if(n===!0&&a.events.publish("update",[this,d])===!1)return!1;r._fireUpdate_addUpdateRemove(d,n),r._draw(!1,a.action.update,null,function(){r.config.sticky&&a._moveToBoundaryArea(r.getSvg(),r.getViewBox(),r.response.boundary),e&&e(),n===!0&&a.events.publish("updated",[r,d]),r.filterUI.update()})},a.prototype._fireUpdate_addUpdateRemove=function(t,e){for(var n=0;n<t.addNodesData.length;n++)this.add(t.addNodesData[n]);for(n=0;n<t.updateNodesData.length;n++)this.update(t.updateNodesData[n]);a.isNEU(t.removeNodeId)||this.remove(t.removeNodeId),e===!0&&a.events.publish("updating",[this,t])},a.prototype.__replaceIds=a.prototype._replaceIds,a.prototype._replaceIds=function(t){this.__replaceIds(t);for(var e=0;e<this.config.nodes.length;e++){var n=this.config.nodes[e];for(var r in t){var i=t[r];if(n.fid==r&&(n.fid=i),n.mid==r&&(n.mid=i),Array.isArray(n.pids))for(var o=0;o<n.pids.length;o++)n.pids[o]==r&&(n.pids[o]=i)}}},a===void 0&&(a={}),a._ajax=function(t,e,n,r,i){r==null&&(r="arraybuffer");var o=new XMLHttpRequest;o.onload=function(s){o.readyState==4&&this.status===200&&(s.target==null?i(this.response):i(s.target.response))},o.onerror=function(s){i({error:s})},o.open(e,t),o.responseType=r,o.setRequestHeader("Content-Type","application/json"),n==null?o.send():o.send(n)},a===void 0&&(a={}),a.animate=function(t,e,n,r,i,o,s){var l,c=10,d=1,u=r/c+1;return document.getElementsByTagName("g"),Array.isArray(t)||(t=[t]),Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]),l=setInterval(function(){for(var f=0;f<t.length;f++)for(var h in n[f]){var p=a._arrayContains(["top","left","right","bottom","width","height"],h.toLowerCase())?"px":"";switch(h.toLowerCase()){case"d":var v=i((d*c-c)/r)*(n[f][h][0]-e[f][h][0])+e[f][h][0],y=i((d*c-c)/r)*(n[f][h][1]-e[f][h][1])+e[f][h][1];t[f].setAttribute("d",t[f].getAttribute("d")+" L"+v+" "+y);break;case"r":var w=i((d*c-c)/r)*(n[f][h]-e[f][h])+e[f][h];t[f].setAttribute("r",w);break;case"x1":w=i((d*c-c)/r)*(n[f][h]-e[f][h])+e[f][h],t[f].setAttribute("x1",w);break;case"x2":w=i((d*c-c)/r)*(n[f][h]-e[f][h])+e[f][h],t[f].setAttribute("x2",w);break;case"y1":w=i((d*c-c)/r)*(n[f][h]-e[f][h])+e[f][h],t[f].setAttribute("y1",w);break;case"y2":w=i((d*c-c)/r)*(n[f][h]-e[f][h])+e[f][h],t[f].setAttribute("y2",w);break;case"rotate3d":if(n[f][h]){var g=e[f][h],b=n[f][h],_=[0,0,0,0];for(var E in g)_[E]=i((d*c-c)/r)*(b[E]-g[E])+g[E];t[f].style.transform="rotate3d("+_.toString()+"deg)"}break;case"transform":if(n[f][h]){g=e[f][h],b=n[f][h],_=[0,0,0,0,0,0];for(var E in g)_[E]=i((d*c-c)/r)*(b[E]-g[E])+g[E];t[f].hasAttribute("transform")?t[f].setAttribute("transform","matrix("+_.toString()+")"):t[f].style.transform="matrix("+_.toString()+")"}break;case"viewbox":if(n[f][h]){g=e[f][h],b=n[f][h],_=[0,0,0,0];for(var E in g)_[E]=i((d*c-c)/r)*(b[E]-g[E])+g[E];t[f].setAttribute("viewBox",_.toString())}break;case"margin":if(n[f][h]){g=e[f][h],b=n[f][h],_=[0,0,0,0];for(var E in g)_[E]=i((d*c-c)/r)*(b[E]-g[E])+g[E];var A="";for(E=0;E<_.length;E++)A+=parseInt(_[E])+"px ";t[f]&&t[f].style&&(t[f].style[h]=A)}break;case"scrolly":w=i((d*c-c)/r)*(n[f][h]-e[f][h])+e[f][h],t[f].scrollTo(0,w);break;default:w=i((d*c-c)/r)*(n[f][h]-e[f][h])+e[f][h],t[f]&&t[f].style&&(t[f].style[h]=w+p)}}s&&s(),(d+=1)>u+1&&(clearInterval(l),o&&o(t))},c)},a.anim={},a.anim.inPow=function(t){return t<0?0:t>1?1:Math.pow(t,2)},a.anim.outPow=function(t){return t<0?0:t>1?1:-1*(Math.pow(t-1,2)+-1)},a.anim.inOutPow=function(t){return t<0?0:t>1?1:(t*=2)<1?a.anim.inPow(t,2)/2:-.5*(Math.pow(t-2,2)+-2)},a.anim.inSin=function(t){return t<0?0:t>1?1:1-Math.cos(t*(Math.PI/2))},a.anim.outSin=function(t){return t<0?0:t>1?1:Math.sin(t*(Math.PI/2))},a.anim.inOutSin=function(t){return t<0?0:t>1?1:-.5*(Math.cos(Math.PI*t)-1)},a.anim.inExp=function(t){return t<0?0:t>1?1:Math.pow(2,10*(t-1))},a.anim.outExp=function(t){return t<0?0:t>1?1:1-Math.pow(2,-10*t)},a.anim.inOutExp=function(t){return t<0?0:t>1?1:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,10*(-2*t+1)))},a.anim.inCirc=function(t){return t<0?0:t>1?1:-(Math.sqrt(1-t*t)-1)},a.anim.outCirc=function(t){return t<0?0:t>1?1:Math.sqrt(1-(t-1)*(t-1))},a.anim.inOutCirc=function(t){return t<0?0:t>1?1:t<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(2*t-2)*(2*t-2))+1)},a.anim.rebound=function(t){return t<0?0:t>1?1:t<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-1.5/2.75)*(t-1.5/2.75)+.75):t<2.5/2.75?1-(7.5625*(t-2.25/2.75)*(t-2.25/2.75)+.9375):1-(7.5625*(t-2.625/2.75)*(t-2.625/2.75)+.984375)},a.anim.inBack=function(t){return t<0?0:t>1?1:t*t*(2.70158*t-1.70158)},a.anim.outBack=function(t){return t<0?0:t>1?1:(t-1)*(t-1)*(2.70158*(t-1)+1.70158)+1},a.anim.inOutBack=function(t){return t<0?0:t>1?1:t<.5?4*t*t*(7.1898*t-2.5949)*.5:.5*((2*t-2)*(2*t-2)*(3.5949*(2*t-2)+2.5949)+2)},a.anim.impulse=function(t){var e=2*t;return e*Math.exp(1-e)},a.anim.expPulse=function(t){return Math.exp(-2*Math.pow(t,2))},a===void 0&&(a={}),a.prototype._attachInitEventHandlers=function(t){this._addEvent(window,"resize",this._resizeHandler)},a.prototype._attachEventHandlers=function(t){if(this.config.interactive){t=this.getSvg(),this.config.enableTouch||a.isMobile()?(this._addEvent(t,"touchstart",this._globalMouseDownHandler),this._addEvent(t,"touchend",this._globalClickHandler)):(this._addEvent(t,"mousedown",this._globalMouseDownHandler),this._addEvent(t,"click",this._globalClickHandler),this._addEvent(t,"contextmenu",this._globalContextHandler),this._addEvent(t,"dblclick",this._globalDbClickHandler),this.config.mouseScrool!=a.action.none&&this._addEvent(t,"wheel",this._mouseScrollHandler));var e=this.getMenuButton();e&&this._addEvent(e,"click",this._menuClickHandler)}},a.prototype._addEvent=function(t,e,n,r){var i,o;r||(r=""),t.getListenerList||(t.getListenerList={}),t.getListenerList[e+r]||(i=this,o=n,n=function(){if(o)return o.apply(i,[this,arguments[0]])},t.addEventListener?e=="mousewheel"?t.addEventListener(e,s,{passive:!1}):t.addEventListener(e,s,!1):t.attachEvent("on"+e,function(){var l=n.call(t,window.event);return l===!1&&(window.event.returnValue=!1,window.event.cancelBubble=!0),l}),t.getListenerList[e+r]=s);function s(l){var c=n.apply(this,arguments);return c===!1&&(l.stopPropagation(),l.preventDefault()),c}},a.prototype._removeEvent=function(t,e){if(t.getListenerList[e]){var n=t.getListenerList[e];t.removeEventListener(e,n,!1),delete t.getListenerList[e]}},a===void 0&&(a={}),a.VERSION="8.14.46",a.orientation={},a.orientation.top=0,a.orientation.bottom=1,a.orientation.right=2,a.orientation.left=3,a.orientation.top_left=4,a.orientation.bottom_left=5,a.orientation.right_top=6,a.orientation.left_top=7,a.align={},a.align.center=a.CENTER=8,a.align.orientation=a.ORIENTATION=9,a.attr={},a.attr.l="data-l",a.attr.id="data-id",a.attr.sl="data-sl",a.attr.lbl="data-lbl",a.attr.val="data-val",a.attr.tlbr="data-tlbr",a.attr.item="data-item",a.attr.layout="data-layout",a.attr.node_id="data-n-id",a.attr.link_id="data-l-id",a.attr.field_name="data-f-name",a.attr.c_link_to="data-c-l-to",a.attr.c_link_from="data-c-l-from",a.attr.s_link_to="data-s-l-to",a.attr.s_link_from="data-s-l-from",a.attr.control_add="data-ctrl-add",a.attr.control_expcoll_id="data-ctrl-ec-id",a.attr.control_up_id="data-ctrl-up-id",a.attr.control_export_menu="data-ctrl-menu",a.attr.control_node_menu_id="data-ctrl-n-menu-id",a.attr.control_node_circle_menu_id="data-ctrl-n-c-menu-id",a.attr.control_node_circle_menu_name="data-ctrl-n-c-menu-name",a.attr.control_node_circle_menu_wrraper_id="data-ctrl-n-c-menu-wrapper-id",a.attr.width="data-width",a.attr.text_overflow="data-text-overflow",a.ID="id",a.PID="pid",a.STPID="stpid",a.TAGS="tags",a.NODES="nodes",a.ELASTIC="elastic",a.ASSISTANT="Assistant",a.action={},a.action.expand=0,a.action.collapse=1,a.action.maximize=101,a.action.minimize=102,a.action.expandCollapse=501,a.action.edit=1,a.action.zoom=2,a.action.ctrlZoom=22,a.action.scroll=41,a.action.xScroll=3,a.action.yScroll=4,a.action.none=5,a.action.init=6,a.action.update=7,a.action.move=70,a.action.pan=8,a.action.centerNode=9,a.action.resize=10,a.action.insert=11,a.action.insertfirst=12,a.action.details=13,a.action.exporting=14,a.none=400001,a.scroll={},a.scroll.visible=!0,a.scroll.smooth=12,a.scroll.speed=120,a.scroll.safari={smooth:12,speed:250},a.match={},a.match.height=100001,a.match.width=100002,a.match.boundary=100003,a.movable={},a.movable.node="node",a.movable.tree="tree",a.movable.detachTree="detachTree",a.layout={},a.layout.normal=a.normal=0,a.layout.mixed=a.mixed=1,a.layout.tree=a.tree=2,a.layout.treeLeftOffset=a.treeLeftOffset=3,a.layout.treeRightOffset=a.treeRightOffset=4,a.layout.treeLeft=5,a.layout.treeRight=6,a.layout.grid=-1,a.nodeOpenTag="<g "+a.attr.node_id+'="{id}" style="opacity: {opacity}" transform="matrix(1,0,0,1,{x},{y})" class="{class}" '+a.attr.sl+'="{sl}" '+a.attr.l+"={level} {lcn}>",a.linkOpenTag="<g "+a.attr.link_id+'="[{id}][{child-id}]" class="{class}">',a.expcollOpenTag="<g "+a.attr.control_expcoll_id+'="{id}" transform="matrix(1,0,0,1,{x},{y})"  style="cursor:pointer;">',a.upOpenTag="<g "+a.attr.control_up_id+'="{id}" transform="matrix(1,0,0,1,{x},{y})" style="cursor:pointer;">',a.linkFieldsOpenTag='<g transform="matrix(1,0,0,1,{x},{y}) rotate({rotate})">',a.grCloseTag="</g>",a.A5w=420,a.A5h=595,a.A4w=595,a.A4h=842,a.A3w=842,a.A3h=1191,a.A2w=1191,a.A2h=1684,a.A1w=1684,a.A1h=2384,a.Letterw=612,a.Letterh=791,a.Legalw=612,a.Legalh=1009,a.COLLAPSE_PARENT_NEIGHBORS=1,a.COLLAPSE_SUB_CHILDRENS=2,a.COLLAPSE_PARENT_SUB_CHILDREN_EXCEPT_CLICKED=3,a.TEXT_THRESHOLD=400,a.IMAGES_THRESHOLD=100,a.LINKS_THRESHOLD=200,a.BUTTONS_THRESHOLD=70,a.ANIM_THRESHOLD=50,a.IT_IS_LONELY_HERE='<g transform="translate(-100, 0)" style="cursor:pointer;"  '+a.attr.control_add+'="control-add"><text fill="#039be5">{link}</text></g>',a.RES={},a.RES.IT_IS_LONELY_HERE_LINK="It's lonely here, add your first node",a.FIRE_DRAG_NOT_CLICK_IF_MOVE=3,a.STRING_TAGS=!1,a.MAX_NODES_MESS="The trial has expired or 200 nodes limit was reached! <br /><a style='color: #039BE5;' target='_blank' href='https://balkan.app/FamilyTreeJS/Docs/Evaluation'>See more</a>",a.OFFLINE_MESS="The evaluation version requires internet connection! <br /><a style='color: #039BE5;' target='_blank' href='https://balkan.app/FamilyTreeJS/Docs/Evaluation'>See more</a>",a.SEARCH_PLACEHOLDER="Search for name .....",a.SEARCH_HELP_SYMBOL="?",a.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE=!1,a.SEARCH_RESULT_LIMIT=10,a.IMPORT_MESSAGE="Choose the columns (fields) in your data file that contain the required information.",a.FIXED_POSITION_ON_CLICK=!1,a.RENDER_LINKS_BEFORE_NODES=!1,a.RENDER_CLINKS_BEFORE_NODES=!1,a.MIXED_LAYOUT_ALL_NODES=!0,a.MIXED_LAYOUT_FOR_NODES_WITH_COLLAPSED_CHILDREN=!1,a.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN=1,a.LINK_ROUNDED_CORNERS=5,a.MOVE_STEP=5,a.CLINK_CURVE=1,a.MAX_DEPTH=200,a.SCALE_FACTOR=1.44,a.LAZY_LOADING_FACTOR=500,a.HIDE_EDIT_FORM_ON_PAN=!0,a.LAZY_LOADING=!0,a.ARRAY_FIELDS=["tags"],a.CSV_DELIMITER=",",a.EDITFORM_CLOSE_BTN='<svg data-edit-from-close class="bft-edit-form-close"><path style="fill:#ffffff;" d="M21.205,5.007c-0.429-0.444-1.143-0.444-1.587,0c-0.429,0.429-0.429,1.143,0,1.571l8.047,8.047H1.111 C0.492,14.626,0,15.118,0,15.737c0,0.619,0.492,1.127,1.111,1.127h26.554l-8.047,8.032c-0.429,0.444-0.429,1.159,0,1.587 c0.444,0.444,1.159,0.444,1.587,0l9.952-9.952c0.444-0.429,0.444-1.143,0-1.571L21.205,5.007z"></path></svg>',a.ESCAPE_HTML=!1,a.VERTICAL_CHILDREN_ASSISTANT=!1,a.EXPORT_PAGES_CUT_NODES=!1,a.RESET_MOVABLE_ONEXPANDCOLLAPSE=!1,a.FILTER_ALPHABETICALLY=!0,a.SERVER_PREFIX=".azurewebsites.net/api/OrgChartJS",a.FUNC_URL_NAME="func-url-orgfamilyjs",typeof b0<"u"&&(b0.exports=a),a.SERVER_PREFIX=".azurewebsites.net/api/FamilyTreeJS",a.FUNC_URL_NAME="func-url-familytreejs",a.OC_VERSION=a.VERSION,a.VERSION="1.09.41",a.RENDER_LINKS_BEFORE_NODES=!0,a.ARRAY_FIELDS=["tags","pids"],a._intersects=function(t,e,n){var r=t.x-n.siblingSeparation/4,i=t.y,o=t.x+t.w+n.siblingSeparation/4,s=t.y;switch(n.orientation){case a.orientation.right:case a.orientation.right_top:case a.orientation.left:case a.orientation.left_top:r=t.x,i=t.y-n.siblingSeparation/4,o=t.x,s=t.y+t.h+n.siblingSeparation/4}var l,c,d,u=e.p,f=e.q,h=e.r,p=e.s;return(l=(o-r)*(p-f)-(h-u)*(s-i))!==0&&(c=((i-s)*(h-r)+(o-r)*(p-i))/l,0<(d=((p-f)*(h-r)+(u-h)*(p-i))/l)&&d<1&&0<c&&c<1)},a._addPoint=function(t,e,n,r,i){switch(n.orientation){case a.orientation.top:case a.orientation.top_left:return a._addPointTop(t,e,n,r,i);case a.orientation.bottom:case a.orientation.bottom_left:return a._addPointBottom(t,e,n,r,i);case a.orientation.left:case a.orientation.left_top:return a._addPointLeft(t,e,n,r,i);case a.orientation.right:case a.orientation.right_top:return a._addPointRight(t,e,n,r,i)}},a._addPointTop=function(t,e,n,r,i){var o,s,l;return i=="left"?o=t.leftNeighbor?t.x+(t.leftNeighbor.x+t.leftNeighbor.w-t.x)/2:t.x-n.siblingSeparation/2:i=="right"&&(o=t.rightNeighbor?t.x+t.w+(t.rightNeighbor.x-(t.x+t.w))/2:t.x+t.w+n.siblingSeparation/2),e.push([o,e[e.length-1][1]]),e.push([o,t.y-n.levelSeparation/3]),s=e[e.length-1][1],l=o,r.p=o,r.q=s,r.r=l,r},a._addPointBottom=function(t,e,n,r,i){var o,s,l;return i=="left"?o=t.leftNeighbor?t.x+(t.leftNeighbor.x+t.leftNeighbor.w-t.x)/2:t.x-n.siblingSeparation/2:i=="right"&&(o=t.rightNeighbor?t.x+t.w+(t.rightNeighbor.x-(t.x+t.w))/2:t.x+t.w+n.siblingSeparation/2),e.push([o,e[e.length-1][1]]),e.push([o,t.y+t.h+n.levelSeparation/3]),s=e[e.length-1][1],l=o,r.p=o,r.q=s,r.r=l,r},a._addPointLeft=function(t,e,n,r,i){var o,s=e[e.length-1][0];i=="bottom"?o=t.rightNeighbor?t.y+t.h+(t.rightNeighbor.y-(t.y+t.h))/2:t.y+t.h+n.siblingSeparation/2:i=="top"&&(o=t.leftNeighbor?t.y+(t.leftNeighbor.y+t.leftNeighbor.h-t.y)/2:t.y-n.siblingSeparation/2),e.push([e[e.length-1][0],o]),e.push([t.x-n.levelSeparation/3,o]),s=e[e.length-1][0];var l=o;return r.p=s,r.q=o,r.s=l,r},a._addPointRight=function(t,e,n,r,i){var o,s=e[e.length-1][0];i=="bottom"?o=t.rightNeighbor?t.y+t.h+(t.rightNeighbor.y-(t.y+t.h))/2:t.y+t.h+n.siblingSeparation/2:i=="top"&&(o=t.leftNeighbor?t.y+(t.leftNeighbor.y+t.leftNeighbor.h-t.y)/2:t.y-n.siblingSeparation/2),e.push([e[e.length-1][0],o]),e.push([t.x+t.w+n.levelSeparation/3,o]),s=e[e.length-1][0];var l=o;return r.p=s,r.q=o,r.s=l,r},a.editUI=function(){},a.editUI.prototype.init=function(t){this.obj=t,this.fields=null,this._event_id=a._guid()},a.editUI.prototype.on=function(t,e){return a.events.on(t,e,this._event_id),this},a.editUI.prototype.show=function(t,e,n){if(this.hide(),a.events.publish("show",[this,t])===!1)return!1;var r=this,i=this.content(t,e,n);this.obj.element.appendChild(i.element),a.input.init(this.obj.element),n?e||this._focusElement(i.focusId):this.interval=a.animate(i.element,{right:-20,opacity:0},{right:0,opacity:1},300,a.anim.outSin,function(){e||r._focusElement(i.focusId)}),this.obj.element.querySelector("[data-edit-from-close]").addEventListener("click",function(l){l.preventDefault(),a.events.publish("cancel",[r,{id:t}])!==!1&&r.hide()}),this.obj.element.querySelector("[data-edit-from-cancel]").addEventListener("click",function(l){l.preventDefault(),a.events.publish("cancel",[r,{id:t}])!==!1&&r.hide()}),this.obj.element.querySelector("[data-edit-from-save]").addEventListener("click",function(l){l.preventDefault();var c=a.input.validateAndGetData(i.element);if(c!==!1){var d=r.obj.get(t),u={data:a.mergeDeep(d,c)};if(a.events.publish("save",[r,u])===!1)return;r.obj.updateNode(u.data,null,!0),r.hide()}});for(var o=this.obj.element.querySelectorAll("[data-input-btn]"),s=0;s<o.length;s++)o[s].addEventListener("click",function(l){l.preventDefault(),a.events.publish("element-btn-click",[r,{input:this.parentNode.querySelector("input"),nodeId:t,event:l}])});this.obj.element.querySelector("[data-add-more-fields-btn]").addEventListener("click",function(l){l.stopPropagation(),l.preventDefault();var c=this,d=a.elements.textbox({},{type:"textbox",label:r.obj.config.editForm.addMoreFieldName,btn:r.obj.config.editForm.addMoreBtn},"280px");c.parentNode.insertAdjacentHTML("beforebegin",d.html),c.style.display="none",a.input.init(c.parentNode.previousSibling);var u=document.getElementById(d.id);u.focus(),u.nextElementSibling.addEventListener("click",function(f){f.stopPropagation(),f.preventDefault();var h=u.value,p=r.obj.element.querySelector('[data-binding="'+a._escapeDoubleQuotes(u.value)+'"]');if(a.isNEU(h)||p)u.focus();else{var v=a.elements.textbox({},{type:"textbox",label:h,binding:h},"280px");u.parentNode.parentNode.parentNode.removeChild(u.parentNode.parentNode),c.parentNode.insertAdjacentHTML("beforebegin",v.html),c.style.display="",a.input.init(c.parentNode.previousSibling),document.getElementById(v.id).focus()}})}),this.obj.element.querySelector("[data-bft-edit-from-btns]").addEventListener("click",function(l){for(var c=l.target;c&&c.hasAttribute&&!c.hasAttribute("data-edit-from-btn");)c=c.parentNode;if(c&&c.hasAttribute){var d=c.getAttribute("data-edit-from-btn"),u={button:r.obj.config.editForm.buttons[d],name:d,nodeId:t,event:l};if(a.events.publish("button-click",[r,u])===!1)return!1;switch(d){case"edit":r.obj.editUI.show(t,!1,!0);break;case"pdf":r.obj.exportPDFProfile({id:t,filename:i.title}),r.hide();break;case"png":r.obj.exportPNGProfile({id:t,filename:i.title}),r.hide();break;case"share":r.obj.shareProfile(t);break;case"remove":r.obj.removeNode(t,null,!0),r.hide()}}})},a.editUI.prototype._focusElement=function(t){var e=null;a.isNEU(this.obj.config.editForm.focusBinding)?a.isNEU(t)||(e=document.getElementById(t)):e=this.obj.element.querySelector('[data-binding="'+this.obj.config.editForm.focusBinding+'"]'),e&&(e.value&&e.value.length&&e.setSelectionRange(e.value.length,e.value.length),e.focus())},a.editUI.prototype.setAvatar=function(t){var e=this.obj.element.querySelector("#bft-avatar");a.isNEU(t)?e.innerHTML=a.icon.user(150,150,"#8C8C8C",0,0):e.innerHTML=`<img style="width: 100%;height:100%;object-fit:cover;border-radius: 50%;" src="${t}"></img>`},a.editUI.prototype.content=function(t,e,n,r,i){var o,s=this.obj.config.editForm.readOnly,l=JSON.parse(JSON.stringify(this.obj.config.editForm.elements)),c=this.obj.config.editForm.addMore,d=this.obj.config.editForm.saveAndCloseBtn,u=this.obj.config.editForm.cancelBtn,f=this.obj.config.editForm.buttons,h=this.obj.config.editForm.titleBinding,p=this.obj.config.editForm.photoBinding,v=this.obj.getNode(t),y=this.obj._get(t),w=a.t(v.templateName,v.min,this.obj.getScale()),g=y[h],b=y[p];if(this.obj.config.editForm.generateElementsFromFields)for(var _=0;_<this.fields.length;_++){var E=this.fields[_];if(E!="tags"){for(var A=!1,k=0;k<l.length;k++){if(Array.isArray(l[k])){for(var I=0;I<l[k].length;I++)if(E==l[k][I].binding){A=!0;break}}else if(E==l[k].binding){A=!0;break}if(A)break}A||l.push({type:"textbox",label:E,binding:E})}}a.isNEU(g)&&(g=""),b=a.isNEU(b)?a.icon.user(150,150,"#8C8C8C",0,0):`<img style="width: 100%;height:100%;border-radius: 50%;object-fit:cover;" src="${b}"></img>`;var x=!e,S=e?"display:none;":"",R=e||!c?"display:none;":"",T=w.editFormHeaderColor?`style="background-color:${w.editFormHeaderColor};"`:"",N=document.createElement("form");if(N.setAttribute("data-bft-edit-form",""),N.classList.add("bft-edit-form"),N.classList.add(this.obj.config.mode),N.classList.add(v.templateName.replaceAll(" ","")),N.classList.add(a.ui._defsIds[v.templateName]),Array.isArray(v.tags)&&v.tags.length)for(_=0;_<v.tags.length;_++)N.classList.add(v.tags[_].replaceAll(" ",""));N.style.display="flex",N.style.opacity=n?1:0,N.style.right=n?0:"-20px",r&&(N.style.width=r);var P=[],V=i?"":a.EDITFORM_CLOSE_BTN;return N.innerHTML=`<div>
                        <div class="bft-edit-form-header" ${T}>
                            ${V}
                            ${a.editUI.renderHeaderContent(g,b,v,y)}
                        </div>
                        <div data-bft-edit-from-btns class="bft-edit-form-instruments">
                        ${function(){if(i)return"";var $="";for(var D in f){var O=f[D];a.isNEU(O)||x&&O.hideIfEditMode||e&&O.hideIfDetailsMode||s&&O.text=="Edit"||($+=`<div data-edit-from-btn='${D}' class="bft-img-button" ${T} title="${O.text}">${O.icon}</div>`)}return $}()}    
                        </div>
                    </div>
                    <div class="bft-edit-form-fields">
                        <div class="bft-edit-form-fields-inner">
                            <div class="bft-form-fieldset">
                                ${function(){for(var $="",D=0;D<l.length;D++){var O=l[D];if(Array.isArray(O)){$+='<div class="bft-form-field-100 bft-form-fieldset">';for(var B=0;B<O.length;B++){var j=O[B],z=a.elements[j.type](y,j,"unset",e);!a.isNEU(z.id)&&a.isNEU(o)&&a.isNEU(z.value)&&(o=z.id),a.isNEU(z.value)||P.push(`${j.label}: ${z.value}`),$+=z.html}$+="</div>"}else z=a.elements[O.type](y,O,"280px",e),!a.isNEU(z.id)&&a.isNEU(o)&&a.isNEU(z.value)&&(o=z.id),a.isNEU(z.value)||P.push(`${O.label}: ${z.value}`),$+=z.html}return $}()}

                                <div class="bft-form-field" style="min-width: 280px; text-align:center; ${R}">
                                    <a data-add-more-fields-btn href="#" class="bft-link">${c}</a>
                                </div>
                            </div>        
                        </div>
                    </div>
                    <div class="bft-form-fieldset" style="padding: 14px 10px; ${S}">
                        <div class="bft-form-field" style="min-width: initial;">
                            <button data-edit-from-cancel type="button" class="bft-button transparent">${u}</button>
                        </div>
                        <div class="bft-form-field" style="min-width: initial;">
                            <button type="submit" data-edit-from-save type="button" class="bft-button">${d}</button>
                        </div>
                    </div>`,{element:N,focusId:o,title:g,shareText:P.join(`
`)}},a.editUI.prototype.hide=function(){if(a.events.publish("hide",[this])===!1)return!1;a.isNEU(this.interval)&&(clearInterval(this.interval),this.interval=null);var t=this.obj.element.querySelector("[data-bft-edit-form]");t&&t.parentNode&&t.parentNode.removeChild(t)},a.editUI.renderHeaderContent=function(t,e,n,r){return`<h1 class="bft-edit-form-title">${a._escapeGreaterLessSign(t)}</h1>
                <div id="bft-avatar" class="bft-edit-form-avatar">${e}</div>`},a.prototype.getSvg=function(){var t=this.element.getElementsByTagName("svg");return t&&t.length?t[0]:null},a.prototype.getPointerElement=function(){return this.element.querySelector("g[data-pointer]")},a.prototype.getNodeElement=function(t){return this.element.querySelector("["+a.attr.node_id+"='"+t+"']")},a.prototype.getMenuButton=function(){return this.element.querySelector("["+a.attr.control_export_menu+"]")},a.menuUI=function(){},a.menuUI.prototype.init=function(t,e){this.obj=t,this.wrapper=null,this.menu=e,this._event_id=a._guid()},a.menuUI.prototype.showStickIn=function(t,e,n,r){this._show(t,null,e,n,r)},a.menuUI.prototype.show=function(t,e,n,r,i){this._show(t,e,n,r,i)},a.menuUI.prototype._show=function(t,e,n,r,i){var o=this;this.hide();var s="";i||(i=this.menu);var l={firstNodeId:n,secondNodeId:r,menu:i};if(a.events.publish("show",[this,l])===!1)return!1;for(var c in i=l.menu){var d=i[c].icon,u=i[c].text;d===void 0&&(d=a.icon[c]?a.icon[c](24,24,"#7A7A7A"):""),typeof u=="function"&&(u=u()),typeof d=="function"&&(d=d()),s+="<div "+a.attr.item+'="'+c+'">'+d+"<span>&nbsp;&nbsp;"+u+"</span></div>"}if(s!=""){if(this.wrapper=document.createElement("div"),this.wrapper.className="bft-family-menu",this.wrapper.style.left="-99999px",this.wrapper.style.top="-99999px",this.wrapper.innerHTML=s,this.obj.element.appendChild(this.wrapper),e==null){var f=a._menuPosition(t,this.wrapper,this.obj.getSvg());t=f.x,e=f.y}var h=t+45;this.wrapper.style.left=h+"px",this.wrapper.style.top=e+"px",this.wrapper.style.left=h-this.wrapper.offsetWidth+"px";var p=t-this.wrapper.offsetWidth;a.animate(this.wrapper,{opacity:0,left:h-this.wrapper.offsetWidth},{opacity:1,left:p},300,a.anim.inOutPow);for(var v=this.wrapper.getElementsByTagName("div"),y=0;y<v.length;y++)(c=v[y]).addEventListener("click",function(w){var g,b=this.getAttribute(a.attr.item);if(i[b].onClick===void 0)if(b==="add"){var _={id:o.obj.generateId(),pid:n};o.obj.addNode(_,null,!0)}else if(b==="edit"){var E=o.obj.getNode(n);o.obj.editUI.show(E.id)}else b==="details"?(E=o.obj.getNode(n),o.obj.editUI.show(E.id,!0)):b==="remove"?o.obj.removeNode(n,null,!0):b==="svg"?o.obj.exportSVG({filename:"FamilyTree.svg",expandChildren:!1,nodeId:n}):b==="pdf"?o.obj.exportPDF({filename:"FamilyTree.pdf",expandChildren:!1,nodeId:n}):b==="png"?o.obj.exportPNG({filename:"FamilyTree.png",expandChildren:!1,nodeId:n}):b==="csv"?o.obj.exportCSV({nodeId:n}):b==="xml"?o.obj.exportXML({nodeId:n}):b==="json"&&o.obj.exportJSON({nodeId:n});else g=i[b].onClick.call(o.obj,n,r);g!=0&&o.hide()})}},a.menuUI.prototype.isVisible=function(){return this.wrapper!=null},a.menuUI.prototype.hide=function(){this.wrapper!=null&&(this.obj.element.removeChild(this.wrapper),this.wrapper=null)},a.menuUI.prototype.on=function(t,e){return a.events.on(t,e,this._event_id),this},a.circleMenuUI=function(){},a.circleMenuUI.prototype.init=function(t,e){this.obj=t,this.menu=e,this._menu=null,this._buttonsInterval=[],this._linesInterval=[],this._event_id=a._guid()},a.circleMenuUI.prototype.show=function(t,e){this._show(t,e)},a.circleMenuUI.prototype._show=function(t,e){var n=this,r=this.obj.getNode(t),i=a.t(r.templateName,r.min,this.obj.getScale());if(!a.isNEU(i.nodeCircleMenuButton)){var o=this.obj.getSvg(),s=this.obj.element.querySelector("["+a.attr.control_node_circle_menu_id+'="'+t+'"]'),l=this.obj.getNodeElement(t),c=a._getTransform(s),d=a._getTransform(l),u=c[4]+d[4],f=c[5]+d[5],h=s.querySelectorAll("line"),p=this.obj.element.querySelector("["+a.attr.control_node_circle_menu_wrraper_id+"]");if(a.isNEU(p)||p.getAttribute(a.attr.control_node_circle_menu_wrraper_id)!=t){this.hide(),e||(e=this.menu);var v={nodeId:t,menu:e},y=a.events.publish("show",[this,v]);if(this._menu=e,y===!1)return!1;for(var w=0,g=Object.keys(v.menu).length,b=2*i.nodeCircleMenuButton.radius+4,_=2*Math.PI*b,E=_/g-(2*i.nodeCircleMenuButton.radius+2);E<0;)b+=8,E=(_=2*Math.PI*b)/g-(2*i.nodeCircleMenuButton.radius+2);for(var A in(p=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute(a.attr.control_node_circle_menu_wrraper_id,t),p.setAttribute("transform","matrix(1,0,0,1,"+u+","+f+")"),o.appendChild(p),v.menu){var k=v.menu[A].icon,I=v.menu[A].color,x=v.menu[A].text;typeof k=="function"&&(k=k()),typeof I=="function"&&(I=I()),typeof x=="function"&&(x=x());var S=document.createElementNS("http://www.w3.org/2000/svg","g");S.setAttribute("transform","matrix(1,0,0,1,0,0)"),S.setAttribute(a.attr.control_node_circle_menu_name,A),S.style.cursor="pointer";var R=document.createElementNS("http://www.w3.org/2000/svg","title");a.isNEU(x)||(R.innerHTML=x);var T=document.createElementNS("http://www.w3.org/2000/svg","circle");T.setAttribute("cx",0),T.setAttribute("cy",0),T.setAttribute("r",i.nodeCircleMenuButton.radius),T.setAttribute("fill",I),T.setAttribute("stroke-width","1"),T.setAttribute("stroke",i.nodeCircleMenuButton.stroke),S.appendChild(T),S.appendChild(R),S.innerHTML+=k,p.appendChild(S);var N=S.getElementsByTagName("svg")[0];if(N.setAttribute("pointer-events","none"),N){var P=parseInt(N.getAttribute("width")),V=parseInt(N.getAttribute("height"));N.setAttribute("x",-P/2),N.setAttribute("y",-V/2)}var $=w*Math.PI/(g/2);w++;var D=Math.cos($)*b,O=Math.sin($)*b;this._buttonsInterval.push(a.animate(S,{transform:[1,0,0,1,0,0]},{transform:[1,0,0,1,D,O]},250,a.anim.outBack,function(B){var j=B[0].getAttribute(a.attr.control_node_circle_menu_name),z=B[0].parentNode.getAttribute(a.attr.control_node_circle_menu_wrraper_id);B[0].addEventListener("mouseenter",function(W){a.events.publish("mouseenter",[n,{from:z,menuItem:v.menu[j],menuItemName:j,event:W}])}),B[0].addEventListener("mouseout",function(W){a.events.publish("mouseout",[n,{from:z,menuItem:v.menu[j],menuItemName:j,event:W}])})}))}this._linesInterval.push(a.animate(h[0],{x1:-i.nodeCircleMenuButton.radius/2,y1:-6,x2:i.nodeCircleMenuButton.radius/2,y2:-6},{x1:-7,y1:-7,x2:7,y2:7},500,a.anim.inOutSin)),this._linesInterval.push(a.animate(h[1],{x1:-i.nodeCircleMenuButton.radius/2,y1:0,x2:i.nodeCircleMenuButton.radius/2,y2:0},{x1:0,y1:0,x2:0,y2:0},500,a.anim.inOutSin)),this._linesInterval.push(a.animate(h[2],{x1:-i.nodeCircleMenuButton.radius/2,y1:6,x2:i.nodeCircleMenuButton.radius/2,y2:6},{x1:-7,y1:7,x2:7,y2:-7},500,a.anim.inOutSin))}else this.hide()}},a.circleMenuUI.prototype.hide=function(){for(var t=this._buttonsInterval.length-1;t>=0;t--)clearInterval(this._buttonsInterval[t]),this._buttonsInterval.splice(t,1);for(this._buttonsInterval=[],t=this._linesInterval.length-1;t>=0;t--)clearInterval(this._linesInterval[t]),this._linesInterval.splice(t,1);this._linesInterval=[];var e=this.obj.element.querySelector("["+a.attr.control_node_circle_menu_wrraper_id+"]");if(e!=null){var n=e.getAttribute(a.attr.control_node_circle_menu_wrraper_id),r=this.obj.getNode(n),i=a.t(r.templateName,r.min,this.obj.getScale()),o=this.obj.element.querySelector("["+a.attr.control_node_circle_menu_id+'="'+n+'"]').querySelectorAll("line");o[0].setAttribute("x1",-i.nodeCircleMenuButton.radius/2),o[0].setAttribute("x2",i.nodeCircleMenuButton.radius/2),o[0].setAttribute("y1",-6),o[0].setAttribute("y2",-6),o[1].setAttribute("x1",-i.nodeCircleMenuButton.radius/2),o[1].setAttribute("x2",i.nodeCircleMenuButton.radius/2),o[1].setAttribute("y1",0),o[1].setAttribute("y2",0),o[2].setAttribute("x1",-i.nodeCircleMenuButton.radius/2),o[2].setAttribute("x2",i.nodeCircleMenuButton.radius/2),o[2].setAttribute("y1",6),o[2].setAttribute("y2",6),e.parentElement.removeChild(e),e=null}},a.circleMenuUI.prototype.on=function(t,e){return a.events.on(t,e,this._event_id),this},a===void 0&&(a={}),a.idb={version:1,dbName:"BALKAN",tableName:"familytree-js",keyPath:"id"},a.idb.db=null,a.idb._open=function(t){if(a._browser().msie)t&&t(!1);else if((navigator.userAgent.toLowerCase().indexOf("safari")>0||navigator.userAgent.toLowerCase().indexOf("firefox")>0)&&window.location!==window.parent.location)t&&t(!1);else{if(!window.indexedDB)return console.error("Your browser doesn't support a stable version of IndexedDB."),void(t&&t(!1));if(a.idb.db==null){var e=indexedDB.open(a.idb.dbName,a.idb.version);e.onerror=function(n){console.error("Cannot open database!"),t&&t(!1)},e.onsuccess=function(n){a.idb.db=n.target.result,t&&t(!0)},e.onupgradeneeded=function(n){var r=n.target.result;r.objectStoreNames.contains(a.idb.tableName)&&r.deleteObjectStore(a.idb.tableName),r.createObjectStore(a.idb.tableName,{keyPath:a.idb.keyPath})}}else t&&t(!0)}},a.idb.read=function(t,e){a.idb._open(function(n){if(n){var r=a.idb.db.transaction([a.idb.tableName]).objectStore(a.idb.tableName).get(t);r.onerror=function(i){console.error("Unable to retrieve data from database!"),e&&e(!1)},r.onsuccess=function(i){r.result?e&&e(!0,r.result):e&&e(null)}}else e&&e(!1)})},a.idb.write=function(t,e){a.idb.read(t.id,function(n){if(n==null){var r=a.idb.db.transaction([a.idb.tableName],"readwrite").objectStore(a.idb.tableName).add(t);r.onerror=function(i){console.error("Unable to add data to database!"),e&&e(!1)},r.onsuccess=function(i){e&&e(!0)}}else e&&e(n)})},a.idb.put=function(t,e){a.idb._open(function(n){if(n){var r=a.idb.db.transaction([a.idb.tableName],"readwrite").objectStore(a.idb.tableName).put(t);r.onerror=function(i){console.error("Unable to put data to database!"),e&&e(!1)},r.onsuccess=function(i){e&&e(!0)}}else e&&e(!1)})},a.idb.delete=function(t,e){a.idb._open(function(n){if(n){var r=a.idb.db.transaction([a.idb.tableName],"readwrite").objectStore(a.idb.tableName).delete(t);r.onerror=function(i){console.error("Unable to retrieve data from database!"),e&&e(!1)},r.onsuccess=function(i){r.error?e&&e(!1):e&&e(!0)}}else e&&e(!1)})},a.toolbarUI=function(){},a.toolbarUI.expandAllIcon='<svg style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><marker id="arrow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="4" markerHeight="4" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#757575" /></marker><line x1="11" y1="11" x2="6" y2="6" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><line x1="21" y1="11" x2="26" y2="6" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><line x1="21" y1="21" x2="26" y2="26" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><line x1="11" y1="21" x2="6" y2="26" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><rect x="12" y="12" width="8" height="8" fill="#757575"></rect></svg>',a.toolbarUI.fitIcon='<svg  style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M4,11 L4,4 L11,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,11 L28,4 L21,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,21 L28,28 L21,28"></path><path stroke-width="3" fill="none" stroke="#757575" d="M4,21 L4,28 L11,28"></path><circle cx="16" cy="16" r="5" fill="#757575"></circle></svg>',a.toolbarUI.openFullScreenIcon='<svg  style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M4,11 L4,4 L11,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,11 L28,4 L21,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,21 L28,28 L21,28"></path><path stroke-width="3" fill="none" stroke="#757575" d="M4,21 L4,28 L11,28"></path><line x1="5" y1="5" x2="27" y2="27" stroke-width="3" stroke="#757575"></line><line x1="5" y1="27" x2="27" y2="5" stroke-width="3" stroke="#757575"></line></svg>',a.toolbarUI.closeFullScreenIcon='<svg  style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M4,11 L4,4 L11,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,11 L28,4 L21,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,21 L28,28 L21,28"></path><path stroke-width="3" fill="none" stroke="#757575" d="M4,21 L4,28 L11,28"></path><rect x="11" y="11" width="10" height="10" stroke-width="3" fill="none" stroke="#757575" ></rect></svg>',a.toolbarUI.zoomInIcon='<svg style="box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border-left: 1px solid #cacaca; border-right: 1px solid #cacaca; border-top: 1px solid #cacaca; background-color: #f9f9f9;display: block; cursor: pointer;" width="32px" height="32px" ><g><rect fill="#f9f9f9" x="0" y="0" width="32" height="32" ></rect><line x1="8" y1="16" x2="24" y2="16" stroke-width="3" stroke="#757575"></line><line x1="16" y1="8" x2="16" y2="24" stroke-width="3" stroke="#757575"></line></g><line x1="4" y1="32" x2="28" y2="32" stroke-width="1" stroke="#cacaca"></line></svg>',a.toolbarUI.zoomOutIcon='<svg style="box-shadow: 0px 1px 4px rgba(0,0,0,0.3); margin-bottom:7px; border-left: 1px solid #cacaca; border-right: 1px solid #cacaca; border-bottom: 1px solid #cacaca; background-color: #f9f9f9;display: block; cursor: pointer;" width="32px" height="32px" ><g><rect fill="#f9f9f9" x="0" y="0" width="32" height="32" ></rect><line x1="8" y1="16" x2="24" y2="16" stroke-width="3" stroke="#757575"></line></g></svg>',a.toolbarUI.layoutIcon="<svg "+a.attr.tlbr+'="layout" style="box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M8,24 L16,14 L24,24"></path><path stroke-width="3" fill="none" stroke="#757575" d="M8,16 L16,8 L24,16"></path></svg>',a.toolbarUI.prototype.init=function(t,e){if(e){this.obj=t,this.toolbar=e,this._visible=!1,this.div=document.createElement("div"),this.div.classList.add("bft-toolbar-container"),Object.assign(this.div.style,{position:"absolute",padding:"3px",right:this.obj.config.padding-10+"px",bottom:this.obj.config.padding-10+"px"}),e.expandAll&&(this.div.innerHTML+="<div "+a.attr.tlbr+'="expand">'+a.toolbarUI.expandAllIcon+"</div>"),e.fit&&(this.div.innerHTML+="<div "+a.attr.tlbr+'="fit">'+a.toolbarUI.fitIcon+"</div>"),e.zoom&&(this.div.innerHTML+="<div "+a.attr.tlbr+'="plus">'+a.toolbarUI.zoomInIcon+"</div>",this.div.innerHTML+="<div "+a.attr.tlbr+'="minus">'+a.toolbarUI.zoomOutIcon+"</div>"),e.layout&&(this.div.innerHTML+="<div "+a.attr.tlbr+'="layout">'+a.toolbarUI.layoutIcon+"</div>",this.layouts=document.createElement("div"),this.layouts.classList.add("bft-toolbar-layout"),this.layouts.innerHTML=`<svg data-layout="normal" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="7" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="63" y="41" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="35" stroke-width="1"></line><line stroke="#000000" x1="32" x2="88" y1="35" y2="35" stroke-width="1"></line><line stroke="#000000" x1="32" x2="32" y1="35" y2="41" stroke-width="1"></line><line stroke="#000000" x1="88" x2="88" y1="35" y2="41" stroke-width="1"></line></svg>
            <svg data-layout="treeRightOffset" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="40" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="40" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="35" stroke-width="1"></line><line stroke="#000000" x1="60" x2="35" y1="35" y2="35" stroke-width="1"></line><line stroke="#000000" x1="35" x2="35" y1="35" y2="86" stroke-width="1"></line><line stroke="#000000" x1="35" x2="40" y1="86" y2="86" stroke-width="1"></line><line stroke="#000000" x1="35" x2="40" y1="54" y2="54" stroke-width="1"></line></svg>
            <svg data-layout="treeLeftOffset" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="30" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="30" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="35" stroke-width="1"></line><line stroke="#000000" x1="60" x2="85" y1="35" y2="35" stroke-width="1"></line><line stroke="#000000" x1="85" x2="85" y1="35" y2="86" stroke-width="1"></line><line stroke="#000000" x1="80" x2="85" y1="86" y2="86" stroke-width="1"></line><line stroke="#000000" x1="80" x2="85" y1="54" y2="54" stroke-width="1"></line></svg>
            <svg data-layout="mixed" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="35" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="35" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="41" stroke-width="1"></line><line stroke="#000000" x1="60" x2="60" y1="68" y2="73" stroke-width="1"></line></svg>
            <svg data-layout="tree" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="7" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="35" y="73" width="50" height="27"></rect><rect fill="#F57C00" x="63" y="41" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="73" stroke-width="1"></line><line stroke="#000000" x1="57" x2="63" y1="54" y2="54" stroke-width="1"></line></svg>
            <svg data-layout="grid" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="7" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="7" y="73" width="50" height="27"></rect><rect fill="#F57C00" x="63" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="63" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="71" stroke-width="1"></line><line stroke="#000000" x1="32" x2="88" y1="39" y2="39" stroke-width="1"></line><line stroke="#000000" x1="32" x2="88" y1="71" y2="71" stroke-width="1"></line><line stroke="#000000" x1="32" x2="32" y1="71" y2="73" stroke-width="1"></line><line stroke="#000000" x1="88" x2="88" y1="71" y2="73" stroke-width="1"></line><line stroke="#000000" x1="32" x2="32" y1="39" y2="41" stroke-width="1"></line><line stroke="#000000" x1="88" x2="88" y1="39" y2="41" stroke-width="1"></line></svg>`,this.obj.element.appendChild(this.layouts)),e.fullScreen&&(this.div.innerHTML+="<div "+a.attr.tlbr+'="fullScreen">'+a.toolbarUI.openFullScreenIcon+"</div>"),this.obj.element.appendChild(this.div),this.layoutBtn=this.div.querySelector("["+a.attr.tlbr+'="layout"]');var n=this.div.querySelector("["+a.attr.tlbr+'="plus"]'),r=this.div.querySelector("["+a.attr.tlbr+'="minus"]'),i=this.div.querySelector("["+a.attr.tlbr+'="fit"]'),o=this.div.querySelector("["+a.attr.tlbr+'="fullScreen"]'),s=this.div.querySelector("["+a.attr.tlbr+'="expand"]'),l=this;n&&n.addEventListener("click",function(){l.obj.zoom(!0,null,!0)}),r&&r.addEventListener("click",function(){l.obj.zoom(!1,null,!0)}),i&&i.addEventListener("click",function(){l.obj.fit()}),o&&o.addEventListener("click",function(){l.obj.toggleFullScreen()}),s&&s.addEventListener("click",function(){l.obj.expand(null,"all")}),this.layoutBtn&&this.layoutBtn.addEventListener("click",function(){l._visible?l.hideLayout():l.showLayout()}),this.layouts&&this.layouts.addEventListener("click",function(c){for(var d=c.target;d;){if(d.hasAttribute&&d.hasAttribute(a.attr.layout)){d=d.getAttribute(a.attr.layout),l.obj.setLayout(a.layout[d]);break}d=d.parentNode}})}},a.toolbarUI.prototype.showLayout=function(){this._visible=!0,this.layoutBtn.style.transform="rotate(180deg) translateX(0px) translateY(0px)",a.animate(this.div,{bottom:this.obj.config.padding-10},{bottom:this.obj.config.padding+135},this.obj.config.anim.duration,this.obj.config.anim.func),a.animate(this.layouts,{bottom:-145},{bottom:0},this.obj.config.anim.duration,this.obj.config.anim.func)},a.toolbarUI.prototype.hideLayout=function(){this._visible=!1,this.layoutBtn.style.transform="rotate(0deg) translateX(0px) translateY(0px)",a.animate(this.div,{bottom:this.obj.config.padding+135},{bottom:this.obj.config.padding-10},this.obj.config.anim.duration,this.obj.config.anim.func),a.animate(this.layouts,{bottom:0},{bottom:-145},this.obj.config.anim.duration,this.obj.config.anim.func)},a.notifierUI=function(){},a.notifierUI.prototype.init=function(t){this.obj=t},a.notifierUI.prototype.show=function(t,e){if(t==null)return!1;t==1&&(t=a.MAX_NODES_MESS,e="#FFCA28"),t==2&&(t=a.OFFLINE_MESS,e="#FFCA28");var n=document.createElement("div");n.innerHTML=t,Object.assign(n.style,{position:"absolute","background-color":e,color:"#ffffff",padding:"15px","border-radius":"40px",opacity:0,overflow:"hidden","white-space":"nowrap","text-align":"center"}),this.obj.element.appendChild(n);var r=this.obj.width()/2-n.offsetWidth/2,i=this.obj.height()/2-n.offsetHeight/2;n.style.left=r+"px",n.style.top=i+"px";var o=n.offsetWidth;return n.style.width="20px",a.animate(n,{opacity:0,width:10},{opacity:1,width:o},this.obj.config.anim.duration,this.obj.config.anim.func),!0},a===void 0&&(a={}),a._validateConfig=function(t){return!!t||(console.error("config is not defined"),!1)},a._arrayContains=function(t,e){if(t&&Array.isArray(t)){for(var n=t.length;n--;)if(t[n]===e)return!0}return!1},a._interceptions=function(t,e){if(!t)return[];if(!e)return[];var n=[];if(Array.isArray(t)&&Array.isArray(e))for(var r in t)for(var i in e)t[r]==e[i]&&n.push(t[r]);else if(Array.isArray(t)&&!Array.isArray(e))for(var r in t)for(var i in e)t[r]==i&&n.push(t[r]);else if(!Array.isArray(t)&&Array.isArray(e))for(var r in t)for(var i in e)r==e[i]&&n.push(e[i]);return n},a._getTags=function(t){return t.tags&&!Array.isArray(t.tags)?t.tags.split(","):t.tags&&Array.isArray(t.tags)?t.tags:[]},a._centerPointInPercent=function(t,e,n){var r=t.getBoundingClientRect(),i=e-r.left,o=n-r.top;return[i/(r.width/100),o/(r.height/100)]},a._trim=function(t){return t.replace(/^\s+|\s+$/g,"")},a._getTransform=function(t){var e=t.getAttribute("transform");return e=e.replace("matrix","").replace("(","").replace(")",""),a._browser().msie&&(e=e.replace(/ /g,",")),e="["+(e=a._trim(e))+"]",e=JSON.parse(e)},a.getScale=function(t,e,n,r,i,o,s,l){var c=1;if(t||r!==a.match.boundary)if(t||r!==a.match.width)if(t||r!==a.match.height)if(t){var d,u;c=(d=e/t[2])>(u=n/t[3])?u:d}else c=r;else c=n/l;else c=e/s;else c=(d=e/s)>(u=n/l)?u:d;return c&&c>i&&(c=i),c&&c<o&&(c=o),c},a.isObject=function(t){return t&&typeof t=="object"&&!Array.isArray(t)&&t!==null},a.fileUploadDialog=function(t){var e=document.createElement("INPUT");e.setAttribute("type","file"),e.style.display="none",e.onchange=function(){var n=this.files[0];t(n)},document.body.appendChild(e),e.click()},a.mergeDeep=function(t,e){if(a.isObject(t)&&a.isObject(e))for(var n in e)a.isObject(e[n])?(t[n]||Object.assign(t,{[n]:{}}),a.mergeDeep(t[n],e[n])):Object.assign(t,{[n]:e[n]});return t},a._lblIsImg=function(t,e){return!(!t.nodeBinding||typeof e!="string"||e.indexOf("img")==-1||!t.nodeBinding[e])},a._getFistImgField=function(t){if(t.nodeBinding){for(var e in t.nodeBinding)if(e.indexOf("img")!=-1)return t.nodeBinding[e]}return!1},a._fieldIsImg=function(t,e){if(t.nodeBinding){for(var n in t.nodeBinding)if(t.nodeBinding[n]==e)return a._lblIsImg(t,n)}return!1},a._guid=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},a.htmlRipple=function(t){var e=document.createElement("style");e.type="text/css",e.innerHTML=" .bft-ripple-container {position: absolute; top: 0; right: 0; bottom: 0; left: 0; } .bft-ripple-container span {transform: scale(0);border-radius:100%;position:absolute;opacity:0.75;background-color:#fff;animation: bft-ripple 1000ms; }@-moz-keyframes bft-ripple {to {opacity: 0;transform: scale(2);}}@-webkit-keyframes bft-ripple {to {opacity: 0;transform: scale(2);}}@-o-keyframes bft-ripple {to {opacity: 0;transform: scale(2);}}@keyframes bft-ripple {to {opacity: 0;transform: scale(2);}}",document.head.appendChild(e);var n,r,i,o=document.createElement("div");o.className="bft-ripple-container",t.addEventListener("mousedown",function(s){var l,c,d,u,f;return c=document.createElement("span"),d=this.offsetWidth,l=this.getBoundingClientRect(),f=s.pageX-l.left-d/2,u="top:"+(s.pageY-l.top-d/2)+"px; left: "+f+"px; height: "+d+"px; width: "+d+"px;",t.rippleContainer.appendChild(c),c.setAttribute("style",u)}),t.addEventListener("mouseup",(n=function(){for(;this.rippleContainer.firstChild;)this.rippleContainer.removeChild(this.rippleContainer.firstChild)},r=2e3,i=void 0,function(){var s,l;return l=this,s=arguments,clearTimeout(i),i=setTimeout(function(){return n.apply(l,s)},r)})),t.rippleContainer=o,t.appendChild(o)},a._moveToBoundaryArea=function(t,e,n,r){var i=e.slice(0);e[0]<n.left&&e[0]<n.right&&(i[0]=n.left>n.right?n.right:n.left),e[0]>n.right&&e[0]>n.left&&(i[0]=n.left>n.right?n.left:n.right),e[1]<n.top&&e[1]<n.bottom&&(i[1]=n.top>n.bottom?n.bottom:n.top),e[1]>n.bottom&&e[1]>n.top&&(i[1]=n.top>n.bottom?n.top:n.bottom),e[0]!==i[0]||e[1]!==i[1]?a.animate(t,{viewBox:e},{viewBox:i},300,a.anim.outPow,function(){r&&r()}):r&&r()},a.randomId=function(){return"_"+("0000"+(Math.random()*Math.pow(36,4)|0).toString(36)).slice(-4)},a._getClientXY=function(t){return t.type.indexOf("touch")==-1?{x:t.clientX,y:t.clientY}:t.changedTouches.length?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:void 0},a._getClientTouchesXY=function(t,e){return t.type.indexOf("touch")!=-1?t.touches.length<e+1?{x:null,y:null}:{x:t.touches[e].clientX,y:t.touches[e].clientY}:{x:t.clientX,y:t.clientY}},a._getOffset=function(t,e){t&&(e.x+=t.offsetLeft,e.y+=t.offsetTop,a._getOffset(t.offsetParent,e))},a._getTopLeft=function(t){var e={x:0,y:0};return a._getOffset(t,e),e},a._getOffsetXY=function(t,e){if(e.type.indexOf("touch")==-1)return{x:e.offsetX,y:e.offsetY};if(e.touches.length){var n=a._getTopLeft(t);return{x:e.touches[0].pageX-n.x,y:e.touches[0].pageY-n.y}}if(e.changedTouches.length)return n=a._getTopLeft(t),{x:e.changedTouches[0].pageX-n.x,y:e.changedTouches[0].pageY-n.y}},a._pinchMiddlePointInPercent=function(t,e,n,r){var i=a._getTopLeft(t),o=r.touches[0].pageX-i.x,s=r.touches[0].pageY-i.y,l=r.touches[1].pageX-i.x,c=r.touches[1].pageY-i.y;return[((o-l)/2+l)/(e/100),((s-c)/2+c)/(n/100)]},a._browser=function(){var t=!!window.opr&&!!window.opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,e=typeof InstallTrigger<"u",n=/constructor/i.test(window.HTMLElement)||(!window.safari||window.safari!==void 0&&safari.pushNotification).toString()==="[object SafariRemoteNotification]",r=!!document.documentMode,i=!r&&!!window.StyleMedia,o=!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime);return{opera:t,firefox:e,safari:n,msie:r,edge:i,chrome:o,blink:(o||t)&&!!window.CSS}},a._menuPosition=function(t,e,n){var r=t.getBoundingClientRect(),i=n.getBoundingClientRect(),o=e.getBoundingClientRect(),s=r.left-i.left,l=r.top-i.top;return r.top+o.height>i.top+i.height&&(l-=o.height),r.left-o.width<i.left&&(s+=o.width),{x:s,y:l}},a._getTemplate=function(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++){var i=e[t[r]];if(i&&i.template)return i.template}return n},a._getMin=function(t,e){if(t.tags&&t.tags.length&&e.tags)for(var n=0;n<t.tags.length;n++){var r=e.tags[t.tags[n]];if(r&&r.min===!0)return!0}return e.min},a._getSubLevels=function(t,e){if(t&&t.length)for(var n=0;n<t.length;n++){var r=e[t[n]];if(r&&r.subLevels)return r.subLevels}return 0},a._isHTML=function(t){var e=new DOMParser().parseFromString(t,"text/html");return Array.from(e.body.childNodes).some(n=>n.nodeType===1)},a._getTestDiv=function(){var t=document.getElementById("orgfamily_js_test_div");return t||((t=document.createElement("div")).id="orgfamily_js_test_div",t.style.position="fixed",t.style.top="-10000px",t.style.left="-10000px",document.body.appendChild(t)),t},a._getLabelSize=function(t){var e=a._getTestDiv();return e.innerHTML="<svg>"+t+"</svg>",e.querySelector("text").getBoundingClientRect()},a.wrapText=function(t,e){var n=e.toLowerCase();if(n.indexOf("<text")==-1||n.indexOf(a.attr.width)==-1||n.indexOf("foreignobject")!=-1||e.indexOf(a.attr.width)==-1||a.ESCAPE_HTML&&typeof str=="string"&&a._isHTML(t))return a._escapeHtml(t);if(!a.ESCAPE_HTML&&a._isHTML(t))return t;var r=a._getTestDiv();e=e.replaceAll("{cw}",0),r.innerHTML="<svg>"+e+"</svg>";var i,o,s=new DOMParser().parseFromString(e,"text/xml").getElementsByTagName("text")[0],l=parseFloat(s.getAttribute("x")),c=parseFloat(s.getAttribute("y")),d=s.getAttribute("text-anchor"),u=s.getAttribute(a.attr.width),f=s.getAttribute(a.attr.text_overflow),h="http://www.w3.org/2000/svg",p=r.getElementsByTagName("svg")[0].getElementsByTagName("text")[0];f||(f="ellipsis");var v=f.split("-");if(v.length>1&&(i=parseInt(f.split("-")[1]),v.length>2&&v[2]=="ellipsis"&&(o=!0)),!u)return a._escapeHtml(t);if(u=parseFloat(u),l||(l=0),c||(c=0),l||(d="start"),f=="ellipsis"){p.removeChild(p.firstChild),p.textContent=t;for(var y=p.getComputedTextLength(),w=2;y>u;)p.textContent=t.substring(0,t.length-w),p.textContent+="...",y=p.getComputedTextLength(),w++;return w>2?`<title>${a._escapeHtml(t)}</title>${p.textContent}`:a._escapeHtml(t)}if(f.indexOf("multiline")!=-1){var g=t.split(" "),b=p.getBBox().height;p.textContent="";var _=document.createElementNS(h,"tspan"),E=document.createTextNode(g[0]);_.setAttributeNS(null,"x",l),_.setAttributeNS(null,"y",c),_.setAttributeNS(null,"text-anchor",d),_.appendChild(E),p.appendChild(_),w=1;for(var A=1,k=!1,I=1;I<g.length;I++){var x=_.firstChild.data.length;if(_.firstChild.data+=" "+g[I],_.getComputedTextLength()>u){if(_.firstChild.data=_.firstChild.data.slice(0,x),A++,i&&A>i){if(o&&p.children.length==i){var S=p.children[i-1].textContent;p.children[i-1].textContent=S.substring(0,S.length-3)+"...",k=!0}break}(_=document.createElementNS(h,"tspan")).setAttributeNS(null,"x",l),_.setAttributeNS(null,"y",c+b*w),_.setAttributeNS(null,"text-anchor",d),E=document.createTextNode(g[I]),_.appendChild(E),p.appendChild(_),w++}}var R="";if(p.innerHTML!=null)R=p.innerHTML,p.innerHTML="";else{var T="";for(I=p.childNodes.length-1;I>=0;I--)T=XMLSerializer().serializeToString(p.childNodes[I])+T,p.removeChild(p.childNodes[I]);R=T}return k?`<title>${a._escapeHtml(t)}</title>${R}`:R}},a._downloadFile=function(t,e,n,r,i){var o=new Blob([e],{type:t});if(r==1){var s=URL.createObjectURL(o);window.open(s,"_blank").focus()}else if(navigator.msSaveBlob)navigator.msSaveBlob(o,n);else{var l=document.createElement("a");if(l.download!==void 0){s=URL.createObjectURL(o),l.setAttribute("href",s);var c=n;c.toLowerCase().endsWith(i.toLowerCase())||(c=c+"."+i),l.setAttribute("download",c),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)}}},a._getPosition=function(t,e,n,r){var i={x:e.x,y:e.y};if(n!=null&&(i.x=n),r!=null&&(i.y=n),t&&t.length==3){var o=t[0].indexOf(e.id);o!=-1&&t[1][o].transform!=null&&(n==null&&(i.x=t[1][o].transform[4]),r==null&&(i.y=t[1][o].transform[5]))}return i},a._getOpacity=function(t,e){var n=1;if(t&&t.length==3){var r=t[0].indexOf(e.id);r!=-1&&t[1][r].opacity!=null&&(n=t[1][r].opacity)}return n},a.t=function(t,e,n){var r=a.templates[t];r==null&&console.error(`Template "${t}" does not exist!`);var i=null;if(n!=null&&r.scaleLessThen){var o=[];for(var s in r.scaleLessThen){var l=parseFloat(s);n<l&&o.push(l)}if(o.length>0){o.sort(function(u,f){return u-f});var c=r.scaleLessThen[o[0]];for(var d in c)i==null&&(i=Object.assign({},r)),i[d]=c[d]}}return e?i==null?r.min?r.min:r:i.min?i.min:i:i??r},a.setNodeSize=function(t){var e=a.t(t.templateName,t.min);t.w=e&&e.size?e.size[0]:0,t.h=e&&e.size?e.size[1]:0},a._imgs2base64=function(t,e,n,r){var i=t.getElementsByTagName(e),o=i.length;o==0&&r();for(var s=0;s<o;s++)(function(){var l=s,c=i[l];a._getDataUri(c.getAttribute(n),function(d){d.success&&c.setAttribute(n,d.result),l==o-1&&r()})})()},a._getDataUri=function(t,e){if(t.indexOf("base64")!=-1)e({success:!1});else{var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){n.status===200?r.readAsDataURL(n.response):n.status===404&&e({success:!1,result:n.status})};var r=new FileReader;r.onloadend=function(){e({success:!0,result:r.result})},n.send()}},a._convertStringToArray=function(t,e){return a.ARRAY_FIELDS.indexOf(t)!=-1?a.isNEU(e)?[]:e.split(","):e},a._convertArrayToString=function(t){return!a.isNEU(t)&&Array.isArray(t)?t.join():t},a._csvToArray=function(t,e){e=e||a.CSV_DELIMITER;for(var n=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),r=[[]],i=null;i=n.exec(t);){var o,s=i[1];s.length&&s!==e&&r.push([]),o=i[2]?i[2].replace(new RegExp('""',"g"),'"'):i[3],r[r.length-1].push(o)}return r},a._json2xml=function(t){for(var e=document.implementation.createDocument("","",null),n=e.createElement("nodes"),r=0;r<t.length;r++){var i=e.createElement("node"),o=t[r];for(var s in o){var l=o[s];i.setAttribute(s,a._convertArrayToString(l))}n.appendChild(i)}return e.appendChild(n),'<?xml version="1.0" encoding="utf-8" ?>'+new XMLSerializer().serializeToString(e.documentElement)},a._xml2json=function(t){for(var e=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("node"),n=[],r=0;r<e.length;r++){for(var i=e[r],o={},s=0;s<i.attributes.length;s++){var l=i.attributes[s];o[l.name]=a._convertStringToArray(l.name,l.value)}n.push(o)}return n},a.convertNodesToCsv=function(t){return a._json2csv(t)},a._json2csv=function(t){for(var e=[],n=function(s){for(var l="",c=0;c<e.length;c++){var d;(d=e[c]=="reportsTo"?null:s[e[c]]==null?"":s[e[c]])instanceof Date&&(d=d.toLocaleString());var u=(d=d===null?"":d.toString()).replace(/"/g,'""'),f=new RegExp(`("|;|
)`,"g");u.search(f)>=0&&(u='"'+u+'"'),c>0&&(l+=a.CSV_DELIMITER),l+=u}return l+`
`},r="",i=0;i<t.length;i++)for(var o in t[i])a._arrayContains(e,o)||(e.push(o),r+=o+a.CSV_DELIMITER);for(r=r.substring(0,r.length-1),r+=`
`,i=0;i<t.length;i++)r+=n(t[i]);return r=r.substring(0,r.length-1)},a.accentFold=function(t){return(t=t.toString().toLowerCase()).replace(/([Ã Ã¡Ã¢Ã£Ã¤Ã¥])|([Ã§])|([Ã¨Ã©ÃªÃ«])|([Ã¬Ã­Ã®Ã¯])|([Ã±])|([Ã²Ã³Ã´ÃµÃ¶Ã¸])|([ÃŸ])|([Ã¹ÃºÃ»Ã¼])|([Ã¿])|([Ã¦])/g,function(e,n,r,i,o,s,l,c,d,u,f){return n?"a":r?"c":i?"e":o?"i":s?"n":l?"o":c?"s":d?"u":u?"y":f?"ae":void 0})},a.copy=function(t){if(t===null||typeof t!="object"||"isActiveClone"in t)return t;if(t instanceof Date)var e=new t.constructor;else e=t.constructor();for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t.isActiveClone=null,e[n]=a.copy(t[n]),delete t.isActiveClone);return e},a._getScrollSensitivity=function(){var t=a._browser();return t.msie&&a.scroll.ie?a.scroll.ie:t.edge&&a.scroll.edge?a.scroll.edge:t.safari&&a.scroll.safari?a.scroll.safari:t.chrome&&a.scroll.chrome?a.scroll.chrome:t.firefox&&a.scroll.firefox?a.scroll.firefox:t.opera&&a.scroll.opera?a.scroll.opera:{smooth:a.scroll.smooth,speed:a.scroll.speed}},a.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},a.isTrial=function(){return a.remote!==void 0},a.childrenCount=function(t,e){for(var n=0,r=0;r<e.childrenIds.length;r++)t.nodes[e.childrenIds[r]]&&n++;return n},a.childrenTotalCount=function(t,e){for(var n=0,r=0;r<e.childrenIds.length;r++){var i=t.nodes[e.childrenIds[r]];i&&(n++,n+=a.childrenTotalCount(t,i))}return n},a.collapsedChildrenCount=function(t,e){for(var n=0,r=0;r<e.childrenIds.length;r++){var i=t.nodes[e.childrenIds[r]];i&&i.collapsed===!0&&n++}return n},a.collapsedChildrenTotalCount=function(t,e,n){for(var r=0,i=0;i<e.childrenIds.length;i++){var o=t.nodes[e.childrenIds[i]];o&&((n||o.collapsed===!0)&&r++,r+=a.collapsedChildrenTotalCount(t,o,!0))}return r},a._setMinMaxXY=function(t,e){(e.minX==null||t.x!=null&&t.x<e.minX)&&(e.minX=t.x),(e.minY==null||t.y!=null&&t.y<e.minY)&&(e.minY=t.y),(e.maxX==null||t.x!=null&&t.x+t.w>e.maxX)&&(e.maxX=t.x+t.w),(e.maxY==null||t.y!=null&&t.y+t.h>e.maxY)&&(e.maxY=t.y+t.h)},a.getStParentNodes=function(t,e){for(e||(e=[]);t.parent;)t=t.parent;return t.stParent&&(e.push(t.stParent),a.getStParentNodes(t.stParent,e)),e},a.getRootOf=function(t){for(;t&&t.parent;)t=t.parent;return t},a._getViewBox=function(t){var e=null;return t?(e=(e="["+(e=t.getAttribute("viewBox"))+"]").replace(/\ /g,","),e=JSON.parse(e)):null},a.isNEU=function(t){return t==null||t===""},a.gradientCircleForDefs=function(t,e,n,r){function i(s,l,c,d){var u=(d-90)*Math.PI/180;return{x:s+c*Math.cos(u),y:l+c*Math.sin(u)}}function o(s,l,c,d,u){var f=i(s,l,c,u),h=i(s,l,c,d),p=u-d<=180?"0":"1";return["M",f.x,f.y,"A",c,c,0,p,0,h.x,h.y].join(" ")}return Array.isArray(e)||(e=[e,e,e,e,e,e]),`<linearGradient id="${t}_linearColors1" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="${e[0]}"></stop>
            <stop offset="100%" stop-color="${e[1]}"></stop>
        </linearGradient>
        <linearGradient id="${t}_linearColors2" x1="0.5" y1="0" x2="0.5" y2="1">
            <stop offset="0%" stop-color="${e[1]}"></stop>
            <stop offset="100%" stop-color="${e[2]}"></stop>
        </linearGradient>
        <linearGradient id="${t}_linearColors3" x1="1" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="${e[2]}"></stop>
            <stop offset="100%" stop-color="${e[3]}"></stop>
        </linearGradient>
        <linearGradient id="${t}_linearColors4" x1="1" y1="1" x2="0" y2="0">
            <stop offset="0%" stop-color="${e[3]}"></stop>
            <stop offset="100%" stop-color="${e[4]}"></stop>
        </linearGradient>
        <linearGradient id="${t}_linearColors5" x1="0.5" y1="1" x2="0.5" y2="0">
            <stop offset="0%" stop-color="${e[4]}"></stop>
            <stop offset="100%" stop-color="${e[5]}"></stop>
        </linearGradient>
        <linearGradient id="${t}_linearColors6" x1="0" y1="1" x2="1" y2="0">
            <stop offset="0%" stop-color="${e[5]}"></stop>
            <stop offset="100%" stop-color="${e[0]}"></stop>
        </linearGradient>        
        <g id="${t}">
            <path stroke-width="${r}" fill="none" stroke="url(#${t}_linearColors1)" d="${o(n,n,n,1,60)}"  />
            <path stroke-width="${r}" fill="none" stroke="url(#${t}_linearColors2)" d="${o(n,n,n,60,120)}"/>
            <path stroke-width="${r}" fill="none" stroke="url(#${t}_linearColors3)" d="${o(n,n,n,120,180)}" />
            <path stroke-width="${r}" fill="none" stroke="url(#${t}_linearColors4)" d="${o(n,n,n,180,240)}" />
            <path stroke-width="${r}" fill="none" stroke="url(#${t}_linearColors5)" d="${o(n,n,n,240,300)}" />
            <path stroke-width="${r}" fill="none" stroke="url(#${t}_linearColors6)" d="${o(n,n,n,300,1)}"/>
        </g>`},a._intersectionObserver=function(t,e){typeof IntersectionObserver=="function"?new IntersectionObserver(function(n,r){n.forEach(function(i){var o=i.intersectionRatio>0;i.intersectionRatio==0&&(o=i.isIntersecting),e(o)})}).observe(t):e(!0)},a.convertCsvToNodes=function(t){for(var e=a._csvToArray(t),n=e[0],r=[],i=1;i<e.length;i++){for(var o={},s=0;s<e[i].length;s++){var l=n[s],c=e[i][s];o[n[s]]=a._convertStringToArray(l,c)}o.id.trim()!=""&&r.push(o)}return r},a._escapeHtml=function(t){return a.ESCAPE_HTML&&typeof t=="string"?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):t},a._escapeDoubleQuotes=function(t){return typeof t=="string"?t.replace(/"/g,"&quot;"):t},a._escapeGreaterLessSign=function(t){return typeof t=="string"?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t},a.roundPathCorners=function(t,e,n){function r(I,x,S){var R=x.x-I.x,T=x.y-I.y,N=Math.sqrt(R*R+T*T);return i(I,x,Math.min(1,S/N))}function i(I,x,S){return{x:I.x+(x.x-I.x)*S,y:I.y+(x.y-I.y)*S}}function o(I,x){I.length>2&&(I[I.length-2]=x.x,I[I.length-1]=x.y)}function s(I){return{x:parseFloat(I[I.length-2]),y:parseFloat(I[I.length-1])}}Array.isArray(t)||(t=(t=t.split(/[,\s]/).reduce(function(I,x){var S=x.match("([a-zA-Z])(.+)");return S?(I.push(S[1]),I.push(S[2])):I.push(x),I},[])).reduce(function(I,x){return parseFloat(x)==x&&I.length?I[I.length-1].push(x):I.push([x]),I},[]));var l=[];if(t.length>1){var c=s(t[0]),d=null;t[t.length-1][0]=="Z"&&t[0].length>2&&(d=["L",c.x,c.y],t[t.length-1]=d),l.push(t[0]);for(var u=1;u<t.length;u++){var f=l[l.length-1],h=t[u],p=h==d?t[1]:t[u+1];if(p&&f&&f.length>2&&h[0]=="L"&&p.length>2&&p[0]=="L"){var v,y,w=s(f),g=s(h),b=s(p);n?(v=i(g,f.origPoint||w,e),y=i(g,p.origPoint||b,e)):(v=r(g,w,e),y=r(g,b,e)),o(h,v),h.origPoint=g,l.push(h);var _=i(v,g,.5),E=i(g,y,.5),A=["C",_.x,_.y,E.x,E.y,y.x,y.y];A.origPoint=g,l.push(A)}else l.push(h)}if(d){var k=s(l[l.length-1]);l.push(["Z"]),o(l[0],k)}}else l=t;return l.reduce(function(I,x){return I+x.join(" ")+" "},"")},a._isMoved=function(t){return t.movex!=null||t.movey!=null},a._getDynamicGridCoulumns=function(t){for(var e=1;e<t&&!(t/e-e<=0);e++);return e%2!=0&&e>2&&e--,e},a._changeRootOption=function(t,e,n){for(var r=[],i=0;i<e.length;i++)for(var o=0;o<n.length;o++)if(n[o].has(e[i])){r=n[o];break}for(i=0;i<r.length;i++){var s=t.indexOf(r[i]);s!=-1&&t.splice(s,1)}e.length&&t.push(e[0])},a._convertStringToArrayOnImport=function(t,e){return t=="tags"||t=="pids"?a.isNEU(e)?[]:e.split(","):e},a===void 0&&(a={}),a.icon={},a.icon.png=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 550.801 550.801"><path fill="'+n+'" d="M146.747,276.708c0-13.998-9.711-22.352-26.887-22.352c-6.99,0-11.726,0.675-14.204,1.355v44.927 c2.932,0.676,6.539,0.896,11.52,0.896C135.449,301.546,146.747,292.28,146.747,276.708z"/><path fill="'+n+'" d="M488.426,197.019H475.2v-63.816c0-0.398-0.063-0.799-0.116-1.202c-0.021-2.534-0.827-5.023-2.562-6.995L366.325,3.694 c-0.032-0.031-0.063-0.042-0.085-0.076c-0.633-0.707-1.371-1.295-2.151-1.804c-0.231-0.155-0.464-0.285-0.706-0.419 c-0.676-0.369-1.393-0.675-2.131-0.896c-0.2-0.056-0.38-0.138-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.873v160.545 c0,17.043,13.824,30.87,30.873,30.87h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87v-160.54C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.513c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M234.344,335.86v45.831h-31.601V229.524h40.184 l31.611,55.759c9.025,16.031,18.064,34.983,24.825,52.154h0.675c-2.257-20.103-2.933-40.643-2.933-63.44v-44.473h31.614v152.167 h-36.117l-32.516-58.703c-9.049-16.253-18.971-35.892-26.438-53.727l-0.665,0.222C233.906,289.58,234.344,311.027,234.344,335.86z M71.556,381.691V231.56c10.613-1.804,25.516-3.159,46.506-3.159c21.215,0,36.353,4.061,46.509,12.192 c9.698,7.673,16.255,20.313,16.255,35.219c0,14.897-4.959,27.549-13.999,36.123c-11.738,11.063-29.123,16.031-49.441,16.031 c-4.522,0-8.593-0.231-11.736-0.675v54.411H71.556V381.691z M453.601,523.353H97.2V419.302h356.4V523.353z M485.652,374.688 c-10.61,3.607-30.713,8.585-50.805,8.585c-27.759,0-47.872-7.003-61.857-20.545c-13.995-13.1-21.684-32.97-21.452-55.318 c0.222-50.569,37.03-79.463,86.917-79.463c19.644,0,34.783,3.829,42.219,7.446l-7.214,27.543c-8.369-3.617-18.752-6.55-35.458-6.55 c-28.656,0-50.341,16.256-50.341,49.22c0,31.382,19.649,49.892,47.872,49.892c7.895,0,14.218-0.901,16.934-2.257v-31.835h-23.493 v-26.869h56.679V374.688z"/></svg>'},a.icon.pdf=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 550.801 550.801"><path fill="'+n+'" d="M160.381,282.225c0-14.832-10.299-23.684-28.474-23.684c-7.414,0-12.437,0.715-15.071,1.432V307.6 c3.114,0.707,6.942,0.949,12.192,0.949C148.419,308.549,160.381,298.74,160.381,282.225z"/><path fill="'+n+'" d="M272.875,259.019c-8.145,0-13.397,0.717-16.519,1.435v105.523c3.116,0.729,8.142,0.729,12.69,0.729 c33.017,0.231,54.554-17.946,54.554-56.474C323.842,276.719,304.215,259.019,272.875,259.019z"/><path fill="'+n+'" d="M488.426,197.019H475.2v-63.816c0-0.398-0.063-0.799-0.116-1.202c-0.021-2.534-0.827-5.023-2.562-6.995L366.325,3.694 c-0.032-0.031-0.063-0.042-0.085-0.076c-0.633-0.707-1.371-1.295-2.151-1.804c-0.231-0.155-0.464-0.285-0.706-0.419 c-0.676-0.369-1.393-0.675-2.131-0.896c-0.2-0.056-0.38-0.138-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.873v160.545 c0,17.043,13.824,30.87,30.873,30.87h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87v-160.54C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.513c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M362.359,309.023c0,30.876-11.243,52.165-26.82,65.333 c-16.971,14.117-42.82,20.814-74.396,20.814c-18.9,0-32.297-1.197-41.401-2.389V234.365c13.399-2.149,30.878-3.346,49.304-3.346 c30.612,0,50.478,5.508,66.039,17.226C351.828,260.69,362.359,280.547,362.359,309.023z M80.7,393.499V234.365 c11.241-1.904,27.042-3.346,49.296-3.346c22.491,0,38.527,4.308,49.291,12.928c10.292,8.131,17.215,21.534,17.215,37.328 c0,15.799-5.25,29.198-14.829,38.285c-12.442,11.728-30.865,16.996-52.407,16.996c-4.778,0-9.1-0.243-12.435-0.723v57.67H80.7 V393.499z M453.601,523.353H97.2V419.302h356.4V523.353z M484.898,262.127h-61.989v36.851h57.913v29.674h-57.913v64.848h-36.593 V232.216h98.582V262.127z"/></svg>'},a.icon.svg=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 550.801 550.801"><path fill="'+n+'" d="M488.426,197.019H475.2v-63.816c0-0.398-0.063-0.799-0.116-1.202c-0.021-2.534-0.827-5.023-2.562-6.995L366.325,3.694 c-0.032-0.031-0.063-0.042-0.085-0.076c-0.633-0.707-1.371-1.295-2.151-1.804c-0.231-0.155-0.464-0.285-0.706-0.419 c-0.676-0.369-1.393-0.675-2.131-0.896c-0.2-0.056-0.38-0.138-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.873v160.545 c0,17.043,13.824,30.87,30.873,30.87h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87v-160.54C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.513c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M338.871,225.672L284.545,386.96h-42.591 l-51.69-161.288h39.967l19.617,68.196c5.508,19.143,10.531,37.567,14.36,57.67h0.717c4.061-19.385,9.089-38.527,14.592-56.953 l20.585-68.918h38.77V225.672z M68.458,379.54l7.415-30.153c9.811,5.021,24.888,10.051,40.439,10.051 c16.751,0,25.607-6.935,25.607-17.465c0-10.052-7.662-15.795-27.05-22.734c-26.8-9.328-44.263-24.168-44.263-47.611 c0-27.524,22.971-48.579,61.014-48.579c18.188,0,31.591,3.823,41.159,8.131l-8.126,29.437c-6.465-3.116-17.945-7.657-33.745-7.657 c-15.791,0-23.454,7.183-23.454,15.552c0,10.296,9.089,14.842,29.917,22.731c28.468,10.536,41.871,25.365,41.871,48.094 c0,27.042-20.812,50.013-65.09,50.013C95.731,389.349,77.538,384.571,68.458,379.54z M453.601,523.353H97.2V419.302h356.4V523.353z M488.911,379.54c-11.243,3.823-32.537,9.103-53.831,9.103c-29.437,0-50.73-7.426-65.57-21.779 c-14.839-13.875-22.971-34.942-22.738-58.625c0.253-53.604,39.255-84.235,92.137-84.235c20.81,0,36.852,4.073,44.74,7.896 l-7.657,29.202c-8.859-3.829-19.849-6.95-37.567-6.95c-30.396,0-53.357,17.233-53.357,52.173c0,33.265,20.81,52.882,50.73,52.882 c8.375,0,15.072-0.96,17.94-2.395v-33.745h-24.875v-28.471h60.049V379.54L488.911,379.54z" /></svg>'},a.icon.csv=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 548.29 548.291" ><path fill="'+n+'" d="M486.2,196.121h-13.164V132.59c0-0.399-0.064-0.795-0.116-1.2c-0.021-2.52-0.824-5-2.551-6.96L364.656,3.677 c-0.031-0.034-0.064-0.044-0.085-0.075c-0.629-0.707-1.364-1.292-2.141-1.796c-0.231-0.157-0.462-0.286-0.704-0.419 c-0.672-0.365-1.386-0.672-2.121-0.893c-0.199-0.052-0.377-0.134-0.576-0.188C358.229,0.118,357.4,0,356.562,0H96.757 C84.893,0,75.256,9.649,75.256,21.502v174.613H62.093c-16.972,0-30.733,13.756-30.733,30.73v159.81 c0,16.966,13.761,30.736,30.733,30.736h13.163V526.79c0,11.854,9.637,21.501,21.501,21.501h354.777 c11.853,0,21.502-9.647,21.502-21.501V417.392H486.2c16.966,0,30.729-13.764,30.729-30.731v-159.81 C516.93,209.872,503.166,196.121,486.2,196.121z M96.757,21.502h249.053v110.006c0,5.94,4.818,10.751,10.751,10.751h94.973v53.861 H96.757V21.502z M258.618,313.18c-26.68-9.291-44.063-24.053-44.063-47.389c0-27.404,22.861-48.368,60.733-48.368 c18.107,0,31.447,3.811,40.968,8.107l-8.09,29.3c-6.43-3.107-17.862-7.632-33.59-7.632c-15.717,0-23.339,7.149-23.339,15.485 c0,10.247,9.047,14.769,29.78,22.632c28.341,10.479,41.681,25.239,41.681,47.874c0,26.909-20.721,49.786-64.792,49.786 c-18.338,0-36.449-4.776-45.497-9.77l7.38-30.016c9.772,5.014,24.775,10.006,40.264,10.006c16.671,0,25.488-6.908,25.488-17.396 C285.536,325.789,277.909,320.078,258.618,313.18z M69.474,302.692c0-54.781,39.074-85.269,87.654-85.269 c18.822,0,33.113,3.811,39.549,7.149l-7.392,28.816c-7.38-3.084-17.632-5.939-30.491-5.939c-28.822,0-51.206,17.375-51.206,53.099 c0,32.158,19.051,52.4,51.456,52.4c10.947,0,23.097-2.378,30.241-5.238l5.483,28.346c-6.672,3.34-21.674,6.919-41.208,6.919 C98.06,382.976,69.474,348.424,69.474,302.692z M451.534,520.962H96.757v-103.57h354.777V520.962z M427.518,380.583h-42.399 l-51.45-160.536h39.787l19.526,67.894c5.479,19.046,10.479,37.386,14.299,57.397h0.709c4.048-19.298,9.045-38.352,14.526-56.693 l20.487-68.598h38.599L427.518,380.583z" /></svg>'},a.icon.json=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 32 32" ><polygon fill="'+n+'"  points="31 11 31 21 29 21 27 15 27 21 25 21 25 11 27 11 29 17 29 11 31 11"/><path fill="'+n+'"  d="M21.3335,21h-2.667A1.6684,1.6684,0,0,1,17,19.3335v-6.667A1.6684,1.6684,0,0,1,18.6665,11h2.667A1.6684,1.6684,0,0,1,23,12.6665v6.667A1.6684,1.6684,0,0,1,21.3335,21ZM19,19h2V13H19Z"/><path fill="'+n+'"  d="M13.3335,21H9V19h4V17H11a2.002,2.002,0,0,1-2-2V12.6665A1.6684,1.6684,0,0,1,10.6665,11H15v2H11v2h2a2.002,2.002,0,0,1,2,2v2.3335A1.6684,1.6684,0,0,1,13.3335,21Z"/><path fill="'+n+'"  d="M5.3335,21H2.6665A1.6684,1.6684,0,0,1,1,19.3335V17H3v2H5V11H7v8.3335A1.6684,1.6684,0,0,1,5.3335,21Z"/><rect fill="'+n+'"  id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" style="fill: none;" width="32" height="32"/></svg>'},a.icon.excel=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 512 512"><path fill="#ECEFF1" d="M496,432.011H272c-8.832,0-16-7.168-16-16s0-311.168,0-320s7.168-16,16-16h224 c8.832,0,16,7.168,16,16v320C512,424.843,504.832,432.011,496,432.011z" /><path fill="'+n+'" d="M336,176.011h-64c-8.832,0-16-7.168-16-16s7.168-16,16-16h64c8.832,0,16,7.168,16,16 S344.832,176.011,336,176.011z" /><path fill="'+n+'" d="M336,240.011h-64c-8.832,0-16-7.168-16-16s7.168-16,16-16h64c8.832,0,16,7.168,16,16 S344.832,240.011,336,240.011z" /><path fill="'+n+'" d="M336,304.011h-64c-8.832,0-16-7.168-16-16s7.168-16,16-16h64c8.832,0,16,7.168,16,16 S344.832,304.011,336,304.011z" /><path fill="'+n+'" d="M336,368.011h-64c-8.832,0-16-7.168-16-16s7.168-16,16-16h64c8.832,0,16,7.168,16,16 S344.832,368.011,336,368.011z" /><path fill="'+n+'" d="M432,176.011h-32c-8.832,0-16-7.168-16-16s7.168-16,16-16h32c8.832,0,16,7.168,16,16 S440.832,176.011,432,176.011z" /><path fill="'+n+'" d="M432,240.011h-32c-8.832,0-16-7.168-16-16s7.168-16,16-16h32c8.832,0,16,7.168,16,16 S440.832,240.011,432,240.011z" /><path fill="'+n+'" d="M432,304.011h-32c-8.832,0-16-7.168-16-16s7.168-16,16-16h32c8.832,0,16,7.168,16,16 S440.832,304.011,432,304.011z" /><path fill="'+n+'" d="M432,368.011h-32c-8.832,0-16-7.168-16-16s7.168-16,16-16h32c8.832,0,16,7.168,16,16 S440.832,368.011,432,368.011z" /><path fill="'+n+'"  d="M282.208,19.691c-3.648-3.04-8.544-4.352-13.152-3.392l-256,48C5.472,65.707,0,72.299,0,80.011v352 c0,7.68,5.472,14.304,13.056,15.712l256,48c0.96,0.192,1.952,0.288,2.944,0.288c3.712,0,7.328-1.28,10.208-3.68 c3.68-3.04,5.792-7.584,5.792-12.32v-448C288,27.243,285.888,22.731,282.208,19.691z" /><path fill="#FAFAFA" d="M220.032,309.483l-50.592-57.824l51.168-65.792c5.44-6.976,4.16-17.024-2.784-22.464 c-6.944-5.44-16.992-4.16-22.464,2.784l-47.392,60.928l-39.936-45.632c-5.856-6.72-15.968-7.328-22.56-1.504 c-6.656,5.824-7.328,15.936-1.504,22.56l44,50.304L83.36,310.187c-5.44,6.976-4.16,17.024,2.784,22.464 c2.944,2.272,6.432,3.36,9.856,3.36c4.768,0,9.472-2.112,12.64-6.176l40.8-52.48l46.528,53.152 c3.168,3.648,7.584,5.504,12.032,5.504c3.744,0,7.488-1.312,10.528-3.968C225.184,326.219,225.856,316.107,220.032,309.483z" /></svg>'},a.icon.edit=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 528.899 528.899"><path fill="'+n+'" d="M328.883,89.125l107.59,107.589l-272.34,272.34L56.604,361.465L328.883,89.125z M518.113,63.177l-47.981-47.981 c-18.543-18.543-48.653-18.543-67.259,0l-45.961,45.961l107.59,107.59l53.611-53.611 C532.495,100.753,532.495,77.559,518.113,63.177z M0.3,512.69c-1.958,8.812,5.998,16.708,14.811,14.565l119.891-29.069 L27.473,390.597L0.3,512.69z" /></svg>'},a.icon.details=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 512 512"><path fill="'+n+'" d="M447.933,103.629c-0.034-3.076-1.224-6.09-3.485-8.352L352.683,3.511c-0.004-0.004-0.007-0.005-0.011-0.008 C350.505,1.338,347.511,0,344.206,0H89.278C75.361,0,64.04,11.32,64.04,25.237v461.525c0,13.916,11.32,25.237,25.237,25.237 h333.444c13.916,0,25.237-11.32,25.237-25.237V103.753C447.96,103.709,447.937,103.672,447.933,103.629z M356.194,40.931 l50.834,50.834h-49.572c-0.695,0-1.262-0.567-1.262-1.262V40.931z M423.983,486.763c0,0.695-0.566,1.261-1.261,1.261H89.278 c-0.695,0-1.261-0.566-1.261-1.261V25.237c0-0.695,0.566-1.261,1.261-1.261h242.94v66.527c0,13.916,11.322,25.239,25.239,25.239 h66.527V486.763z"/><path fill="'+n+'" d="M362.088,164.014H149.912c-6.62,0-11.988,5.367-11.988,11.988c0,6.62,5.368,11.988,11.988,11.988h212.175 c6.62,0,11.988-5.368,11.988-11.988C374.076,169.381,368.707,164.014,362.088,164.014z"/><path fill="'+n+'" d="M362.088,236.353H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.62,5.368,11.988,11.988,11.988h212.175 c6.62,0,11.988-5.368,11.988-11.988C374.076,241.721,368.707,236.353,362.088,236.353z"/><path fill="'+n+'" d="M362.088,308.691H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.621,5.368,11.988,11.988,11.988h212.175 c6.62,0,11.988-5.367,11.988-11.988C374.076,314.06,368.707,308.691,362.088,308.691z"/><path fill="'+n+'" d="M256,381.031H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.621,5.368,11.988,11.988,11.988H256 c6.62,0,11.988-5.367,11.988-11.988C267.988,386.398,262.62,381.031,256,381.031z"/></svg>'},a.icon.remove=function(t,e,n){return'<svg width="'+t+'" height="'+e+'"  viewBox="0 0 900.5 900.5"><path fill="'+n+'" d="M176.415,880.5c0,11.046,8.954,20,20,20h507.67c11.046,0,20-8.954,20-20V232.487h-547.67V880.5L176.415,880.5z M562.75,342.766h75v436.029h-75V342.766z M412.75,342.766h75v436.029h-75V342.766z M262.75,342.766h75v436.029h-75V342.766z"/><path fill="'+n+'" d="M618.825,91.911V20c0-11.046-8.954-20-20-20h-297.15c-11.046,0-20,8.954-20,20v71.911v12.5v12.5H141.874 c-11.046,0-20,8.954-20,20v50.576c0,11.045,8.954,20,20,20h34.541h547.67h34.541c11.046,0,20-8.955,20-20v-50.576 c0-11.046-8.954-20-20-20H618.825v-12.5V91.911z M543.825,112.799h-187.15v-8.389v-12.5V75h187.15v16.911v12.5V112.799z"/></svg>'},a.icon.add=function(t,e,n){return'<svg width="'+t+'" height="'+e+'"   viewBox="0 0 922 922"><path fill="'+n+'" d="M922,453V81c0-11.046-8.954-20-20-20H410c-11.045,0-20,8.954-20,20v149h318c24.812,0,45,20.187,45,45v198h149 C913.046,473.001,922,464.046,922,453z" /><path fill="'+n+'" d="M557,667.001h151c11.046,0,20-8.954,20-20v-174v-198c0-11.046-8.954-20-20-20H390H216c-11.045,0-20,8.954-20,20v149h194 h122c24.812,0,45,20.187,45,45v4V667.001z" /><path fill="'+n+'" d="M0,469v372c0,11.046,8.955,20,20,20h492c11.046,0,20-8.954,20-20V692v-12.501V667V473v-4c0-11.046-8.954-20-20-20H390H196 h-12.5H171H20C8.955,449,0,457.955,0,469z" /></svg>'},a.icon.search=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 485.213 485.213"><path fill="'+n+'" d="M471.882,407.567L360.567,296.243c-16.586,25.795-38.536,47.734-64.331,64.321l111.324,111.324 c17.772,17.768,46.587,17.768,64.321,0C489.654,454.149,489.654,425.334,471.882,407.567z" /><path fill="'+n+'" d="M363.909,181.955C363.909,81.473,282.44,0,181.956,0C81.474,0,0.001,81.473,0.001,181.955s81.473,181.951,181.955,181.951 C282.44,363.906,363.909,282.437,363.909,181.955z M181.956,318.416c-75.252,0-136.465-61.208-136.465-136.46 c0-75.252,61.213-136.465,136.465-136.465c75.25,0,136.468,61.213,136.468,136.465 C318.424,257.208,257.206,318.416,181.956,318.416z" /><path fill="'+n+'" d="M75.817,181.955h30.322c0-41.803,34.014-75.814,75.816-75.814V75.816C123.438,75.816,75.817,123.437,75.817,181.955z" /></svg>'},a.icon.xml=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 550.801 550.801"><path fill="'+n+'"  d="M488.426,197.019H475.2v-63.816c0-0.401-0.063-0.799-0.116-1.205c-0.021-2.534-0.827-5.023-2.562-6.992L366.325,3.691 c-0.032-0.031-0.063-0.042-0.085-0.073c-0.633-0.707-1.371-1.298-2.151-1.804c-0.231-0.158-0.464-0.287-0.706-0.422 c-0.676-0.366-1.393-0.675-2.131-0.896c-0.2-0.053-0.38-0.135-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.87v160.542 c0,17.044,13.824,30.876,30.873,30.876h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87V227.89C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.51c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M369.531,374.53h-32.058l-2.156-55.519 c-0.644-17.434-1.298-38.518-1.298-59.611h-0.633c-4.514,18.516-10.547,39.166-16.137,56.162l-17.645,56.601h-25.618 l-15.494-56.157c-4.725-16.996-9.671-37.658-13.123-56.6h-0.43c-0.854,19.585-1.508,41.961-2.586,60.038l-2.576,55.086h-30.343 l9.26-145.035h43.677l14.207,48.421c4.517,16.774,9.041,34.847,12.258,51.843h0.654c4.081-16.77,9.038-35.923,13.774-52.064 l15.493-48.199h42.82L369.531,374.53z M69.992,374.53l41.955-73.385l-40.444-71.65h37.655l12.688,26.465 c4.316,8.828,7.533,15.928,10.99,24.092h0.422c3.438-9.242,6.23-15.694,9.893-24.092l12.274-26.465h37.434l-40.89,70.796 l43.044,74.239h-37.866l-13.134-26.257c-5.376-10.108-8.817-17.639-12.909-26.04h-0.433c-3.009,8.401-6.674,15.932-11.19,26.04 l-12.042,26.257H69.992z M453.601,523.353H97.2V419.302h356.4V523.353z M485.325,374.53h-90.608V229.495h32.933v117.497h57.682 v27.538H485.325z"/></svg>'},a.icon.link=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 512.092 512.092"  ><path fill="'+n+'" d="M312.453,199.601c-6.066-6.102-12.792-11.511-20.053-16.128c-19.232-12.315-41.59-18.859-64.427-18.859 c-31.697-0.059-62.106,12.535-84.48,34.987L34.949,308.23c-22.336,22.379-34.89,52.7-34.91,84.318 c-0.042,65.98,53.41,119.501,119.39,119.543c31.648,0.11,62.029-12.424,84.395-34.816l89.6-89.6 c1.628-1.614,2.537-3.816,2.524-6.108c-0.027-4.713-3.87-8.511-8.583-8.484h-3.413c-18.72,0.066-37.273-3.529-54.613-10.581 c-3.195-1.315-6.867-0.573-9.301,1.877l-64.427,64.512c-20.006,20.006-52.442,20.006-72.448,0 c-20.006-20.006-20.006-52.442,0-72.448l108.971-108.885c19.99-19.965,52.373-19.965,72.363,0 c13.472,12.679,34.486,12.679,47.957,0c5.796-5.801,9.31-13.495,9.899-21.675C322.976,216.108,319.371,206.535,312.453,199.601z" /><path fill="'+n+'" d="M477.061,34.993c-46.657-46.657-122.303-46.657-168.96,0l-89.515,89.429c-2.458,2.47-3.167,6.185-1.792,9.387 c1.359,3.211,4.535,5.272,8.021,5.205h3.157c18.698-0.034,37.221,3.589,54.528,10.667c3.195,1.315,6.867,0.573,9.301-1.877 l64.256-64.171c20.006-20.006,52.442-20.006,72.448,0c20.006,20.006,20.006,52.442,0,72.448l-80.043,79.957l-0.683,0.768 l-27.989,27.819c-19.99,19.965-52.373,19.965-72.363,0c-13.472-12.679-34.486-12.679-47.957,0 c-5.833,5.845-9.35,13.606-9.899,21.845c-0.624,9.775,2.981,19.348,9.899,26.283c9.877,9.919,21.433,18.008,34.133,23.893 c1.792,0.853,3.584,1.536,5.376,2.304c1.792,0.768,3.669,1.365,5.461,2.048c1.792,0.683,3.669,1.28,5.461,1.792l5.035,1.365 c3.413,0.853,6.827,1.536,10.325,2.133c4.214,0.626,8.458,1.025,12.715,1.195h5.973h0.512l5.12-0.597 c1.877-0.085,3.84-0.512,6.059-0.512h2.901l5.888-0.853l2.731-0.512l4.949-1.024h0.939c20.961-5.265,40.101-16.118,55.381-31.403 l108.629-108.629C523.718,157.296,523.718,81.65,477.061,34.993z" /></svg>'},a.icon.happy=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 512 512"><path fill="'+n+'" d="M256,0C114.615,0,0,114.615,0,256s114.615,256,256,256s256-114.615,256-256S397.385,0,256,0z M256,480 C132.288,480,32,379.712,32,256S132.288,32,256,32s224,100.288,224,224S379.712,480,256,480z"/><path fill="'+n+'" d="M176,176c17.673,0,32,14.327,32,32h32c0-35.346-28.654-64-64-64c-35.346,0-64,28.654-64,64h32 C144,190.327,158.327,176,176,176z"/><path fill="'+n+'" d="M336,144c-35.346,0-64,28.654-64,64h32c0-17.673,14.327-32,32-32c17.673,0,32,14.327,32,32h32 C400,172.654,371.346,144,336,144z"/><path fill="'+n+'" d="M256,368c-53.019,0-96-42.981-96-96h-32c0,70.692,57.308,128,128,128s128-57.308,128-128h-32 C352,325.019,309.019,368,256,368z"/></svg>'},a.icon.sad=function(t,e,n){return'<svg width="'+t+'" height="'+e+'" viewBox="0 0 512 512"><path fill="'+n+'" d="M256,0C114.615,0,0,114.615,0,256s114.615,256,256,256s256-114.615,256-256S397.385,0,256,0z M256,480 C132.288,480,32,379.712,32,256S132.288,32,256,32s224,100.288,224,224S379.712,480,256,480z"/><path fill="'+n+'" d="M336,192c-17.673,0-32-14.327-32-32h-32c0,35.346,28.654,64,64,64c35.346,0,64-28.654,64-64h-32 C368,177.673,353.673,192,336,192z"/><path fill="'+n+'" d="M176,224c35.346,0,64-28.654,64-64h-32c0,17.673-14.327,32-32,32s-32-14.327-32-32h-32C112,195.346,140.654,224,176,224z "/><path fill="'+n+'" d="M256,256c-70.692,0-128,57.308-128,128h32c0-53.019,42.981-96,96-96s96,42.981,96,96h32C384,313.308,326.692,256,256,256 z"/></svg>'},a.icon.share=function(t,e,n,r,i){return r==null&&(r=0),i==null&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 512 512">
                <path fill="${n}" d="M406,332c-29.641,0-55.761,14.581-72.167,36.755L191.99,296.124c2.355-8.027,4.01-16.346,4.01-25.124
                    c0-11.906-2.441-23.225-6.658-33.636l148.445-89.328C354.307,167.424,378.589,180,406,180c49.629,0,90-40.371,90-90
                    c0-49.629-40.371-90-90-90c-49.629,0-90,40.371-90,90c0,11.437,2.355,22.286,6.262,32.358l-148.887,89.59
                    C156.869,193.136,132.937,181,106,181c-49.629,0-90,40.371-90,90c0,49.629,40.371,90,90,90c30.13,0,56.691-15.009,73.035-37.806
                    l141.376,72.395C317.807,403.995,316,412.75,316,422c0,49.629,40.371,90,90,90c49.629,0,90-40.371,90-90
                    C496,372.371,455.629,332,406,332z"/>
                </svg>`},a.icon.user=function(t,e,n,r,i){return a.isNEU(r)&&(r=0),a.isNEU(i)&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 24 24">
                <path fill="${n}" d="M12 11.796C14.7189 11.796 16.9231 9.60308 16.9231 6.89801C16.9231 4.19294 14.7189 2.00005 12 2.00005C9.28106 2.00005 7.07692 4.19294 7.07692 6.89801C7.07692 9.60308 9.28106 11.796 12 11.796Z" fill="#030D45"/>
                <path fill="${n}" d="M14.5641 13.8369H9.4359C6.46154 13.8369 4 16.2859 4 19.245C4 19.9593 4.30769 20.5716 4.92308 20.8777C5.84615 21.3879 7.89744 22.0001 12 22.0001C16.1026 22.0001 18.1538 21.3879 19.0769 20.8777C19.5897 20.5716 20 19.9593 20 19.245C20 16.1838 17.5385 13.8369 14.5641 13.8369Z" fill="#030D45"/>
            </svg>`},a.icon.close=function(t,e,n,r,i){return r==null&&(r=0),i==null&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 512 512">
    <path fill="${n}" d="m256 0c-141.49 0-256 114.5-256 256 0 141.49 114.5 256 256 256 141.49 0 256-114.5 256-256 0-141.49-114.5-256-256-256zm-12.284 317.397-58.121 58.132c-6.565 6.553-15.283 10.166-24.557 10.166-19.196 0-34.734-15.526-34.734-34.734 0-9.274 3.612-17.992 10.166-24.557l58.132-58.121c6.785-6.784 6.785-17.783 0-24.568l-58.132-58.121c-6.553-6.565-10.166-15.283-10.166-24.557 0-19.196 15.526-34.734 34.734-34.734 9.274 0 17.992 3.613 24.557 10.166l58.121 58.132c6.785 6.773 17.784 6.773 24.568 0l58.121-58.132c6.565-6.553 15.283-10.166 24.557-10.166 19.196 0 34.734 15.526 34.734 34.734 0 9.274-3.612 17.992-10.166 24.557l-58.132 58.121c-6.785 6.784-6.785 17.783 0 24.568l58.132 58.121c6.553 6.565 10.166 15.283 10.166 24.557 0 19.196-15.526 34.734-34.734 34.734-9.274 0-17.992-3.613-24.557-10.166l-58.121-58.132c-6.784-6.784-17.784-6.773-24.568 0z"/>
    </svg>`},a.icon.undo=function(t,e,n,r,i){return r==null&&(r=0),i==null&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 24 24">
    <path fill-rule="evenodd" clip-rule="evenodd" fill="${n}" d="M3.46447 3.46447C2 4.92893 2 7.28595 2 12C2 16.714 2 19.0711 3.46447 20.5355C4.92893 22 7.28595 22 12 22C16.714 22 19.0711 22 20.5355 20.5355C22 19.0711 22 16.7141 22 12C22 7.28598 22 4.92893 20.5355 3.46447C19.0711 2 16.714 2 12 2C7.28595 2 4.92893 2 3.46447 3.46447ZM9.25871 7.97395C9.56308 7.693 9.58205 7.21851 9.3011 6.91414C9.02015 6.60978 8.54565 6.5908 8.24129 6.87175L5.99129 8.94867C5.83748 9.09065 5.75 9.29045 5.75 9.49977C5.75 9.7091 5.83748 9.9089 5.99129 10.0509L8.24129 12.1278C8.54565 12.4088 9.02015 12.3898 9.3011 12.0854C9.58205 11.781 9.56308 11.3065 9.25871 11.0256L8.41824 10.2498H14.0385C14.7376 10.2498 15.2069 10.2506 15.5652 10.2862C15.9116 10.3205 16.0724 10.3813 16.1787 10.4501C16.3272 10.5461 16.4537 10.6726 16.5497 10.8211C16.6184 10.9274 16.6793 11.0882 16.7136 11.4345C16.7491 11.7929 16.75 12.2622 16.75 12.9613C16.75 13.6604 16.7491 14.1298 16.7136 14.4881C16.6793 14.8344 16.6185 14.9952 16.5497 15.1015C16.4537 15.2501 16.3272 15.3765 16.1787 15.4726C16.0724 15.5413 15.9116 15.6021 15.5652 15.6365C15.2069 15.672 14.7376 15.6729 14.0385 15.6729H9.5C9.08579 15.6729 8.75 16.0086 8.75 16.4229C8.75 16.8371 9.08579 17.1729 9.5 17.1729H14.0758C14.7279 17.1729 15.2721 17.1729 15.7133 17.1291C16.1748 17.0834 16.6038 16.9839 16.9931 16.7322C17.3199 16.5209 17.5981 16.2427 17.8094 15.916C18.0611 15.5266 18.1605 15.0976 18.2063 14.6361C18.25 14.195 18.25 13.6508 18.25 12.9987V12.924C18.25 12.2718 18.25 11.7276 18.2063 11.2865C18.1605 10.825 18.0611 10.396 17.8093 10.0067C17.5981 9.6799 17.3199 9.40169 16.9931 9.19042C16.6038 8.9387 16.1748 8.83927 15.7133 8.7935C15.2721 8.74975 14.7279 8.74976 14.0758 8.74977L8.41824 8.74977L9.25871 7.97395Z" />
    <rect style="opacity: 0" x="2" y="2" width="20" height="20"></rect>
    </svg>`},a.icon.redo=function(t,e,n,r,i){return r==null&&(r=0),i==null&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 24 24" >
    <path fill="#f9f9f9" fill-rule="evenodd" clip-rule="evenodd" fill="${n}" d="M3.46447 3.46447C2 4.92893 2 7.28595 2 12C2 16.714 2 19.0711 3.46447 20.5355C4.92893 22 7.28595 22 12 22C16.714 22 19.0711 22 20.5355 20.5355C22 19.0711 22 16.7141 22 12C22 7.28598 22 4.92893 20.5355 3.46447C19.0711 2 16.714 2 12 2C7.28595 2 4.92893 2 3.46447 3.46447ZM15.7587 6.87273C15.4543 6.59177 14.9799 6.61075 14.6989 6.91512C14.4179 7.21948 14.4369 7.69398 14.7413 7.97493L15.5818 8.75075H9.96155C7.63558 8.75075 5.75 10.6363 5.75 12.9623C5.75 15.2883 7.63557 17.1738 9.96154 17.1738H14.5C14.9142 17.1738 15.25 16.838 15.25 16.4238C15.25 16.0096 14.9142 15.6738 14.5 15.6738H9.96154C8.464 15.6738 7.25 14.4598 7.25 12.9623C7.25 11.4647 8.464 10.2508 9.96155 10.2508H15.5818L14.7413 11.0266C14.4369 11.3075 14.4179 11.782 14.6989 12.0864C14.9799 12.3908 15.4543 12.4097 15.7587 12.1288L18.0087 10.0519C18.1625 9.90987 18.25 9.71007 18.25 9.50075C18.25 9.29143 18.1625 9.09163 18.0087 8.94965L15.7587 6.87273Z"/>
    <rect style="opacity: 0" x="2" y="2" width="20" height="20"></rect>    
    </svg>`},a.icon.ft=function(t,e,n,r,i){return`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 512 512"  >
                <path fill="${n}" d="m336.061 377.731c-5.086-6.54-14.511-7.717-21.049-2.631l-44.012 34.231v-200.331c0-8.284-6.716-15-15-15s-15 6.716-15 15v200.331l-44.011-34.231c-6.538-5.086-15.962-3.908-21.049 2.631-5.086 6.539-3.908 15.963 2.631 21.049l62.429 48.556v49.664c0 8.284 6.716 15 15 15s15-6.716 15-15v-49.664l62.429-48.556c6.54-5.086 7.717-14.51 2.632-21.049z" />
                <path fill="${n}" d="m271 497v-49.664l62.429-48.556c6.54-5.086 7.717-14.51 2.631-21.049-5.086-6.54-14.511-7.717-21.049-2.631l-44.011 34.231v-200.331c0-8.284-6.716-15-15-15v318c8.284 0 15-6.716 15-15z" />
                <path fill="${n}" d="m320 512h-128c-8.284 0-15-6.716-15-15s6.716-15 15-15h128c8.284 0 15 6.716 15 15s-6.716 15-15 15z" />
                <path fill="${n}" d="m320 482h-64v30h64c8.284 0 15-6.716 15-15s-6.716-15-15-15z" />
                <path fill="${n}" d="m400 439c-61.206 0-111-49.794-111-111s49.794-111 111-111 111 49.794 111 111-49.794 111-111 111z" />
                <path fill="${n}" d="m112 439c-61.206 0-111-49.794-111-111s49.794-111 111-111 111 49.794 111 111-49.794 111-111 111z" />
                <path fill="${n}" d="m256 222c-61.206 0-111-49.794-111-111s49.794-111 111-111 111 49.794 111 111-49.794 111-111 111z" />
                <path fill="${n}" d="m367 111c0-61.206-49.794-111-111-111v222c61.206 0 111-49.794 111-111z" />
            </svg>`},a.icon.addUser=function(t,e,n,r,i){return a.isNEU(r)&&(r=0),a.isNEU(i)&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 512 512" >
                <path fill="${n}" d="M300.434,257.599c-25.945,27.304-60.622,43.875-98.602,43.875c-37.979,0-72.656-16.571-98.602-43.875 c-45.617,28.738-77.826,76.818-85.092,132.736c-1.659,12.77,8.291,24.107,21.201,24.107h225.846 c0-53.371,32.011-99.402,77.838-119.914C330.812,280.165,316.452,267.69,300.434,257.599z"/>
                <ellipse fill="${n}" cx="201.828" cy="133.868" rx="112.229" ry="133.868"/>
                <path fill="${n}" d="M396.486,316.885c-53.794,0-97.558,43.764-97.558,97.558S342.693,512,396.486,512c53.792,0,97.557-43.764,97.557-97.558 S450.279,316.885,396.486,316.885z M435.199,431.315h-21.841v21.841c0,9.318-7.554,16.872-16.872,16.872 c-9.318,0-16.872-7.554-16.872-16.872v-21.841h-21.842c-9.318,0-16.872-7.554-16.872-16.872c0-9.319,7.554-16.872,16.872-16.872 h21.842v-21.841c0-9.318,7.554-16.872,16.872-16.872c9.318,0,16.872,7.554,16.872,16.872v21.841h21.841 c9.318,0,16.872,7.554,16.872,16.872C452.072,423.761,444.518,431.315,435.199,431.315z"/>
            </svg>`},a.icon.daughter=function(t,e,n,r,i){return a.isNEU(r)&&(r=0),a.isNEU(i)&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 512.879 512.879">
                <path fill="${n}" d="M213.773,238.933c4.71,0,8.533-3.823,8.533-8.533v-5.615c0.546,0.529,0.922,0.964,0.964,1.024 c1.519,2.918,4.497,4.591,7.578,4.591c1.323,0,2.671-0.307,3.934-0.964c4.181-2.176,5.803-7.33,3.627-11.511 c-2.534-4.872-10.581-13.124-24.636-13.124c-14.054,0-22.101,8.252-24.636,13.124c-2.125,4.087-0.555,8.969,3.456,11.23 c4.011,2.287,9.156,0.811,11.563-3.123c0.077-0.128,0.495-0.623,1.084-1.195v5.564 C205.239,235.11,209.062,238.933,213.773,238.933z"/>
                <path fill="${n}" d="M256.439,332.8c20.028,0,30.507-9.907,31.633-11.034c3.294-3.294,3.285-8.568,0.043-11.913 c-3.234-3.354-8.61-3.439-12.015-0.247c-0.265,0.247-6.699,6.127-19.661,6.127c-12.774,0-19.209-5.709-19.652-6.118 c-3.336-3.251-8.678-3.217-11.981,0.085c-3.337,3.337-3.337,8.73,0,12.066C225.933,322.893,236.412,332.8,256.439,332.8z"/>
                <path fill="${n}" d="M365.666,293.547c-49.826-66.441-75.093-133.623-75.093-199.68c0-4.71-3.823-8.533-8.533-8.533s-8.533,3.823-8.533,8.533 c0,68.369,25.31,137.489,75.255,205.542c-12.228,21.623-50.483,76.058-92.322,76.058c-45.218,0-86.255-63.59-94.763-80.614 c-8.388-16.768-24.704-66.765-24.704-98.586v-25.754c20.378-0.572,73.404-3.405,121.813-17.246 c4.531-1.289,7.151-6.016,5.854-10.547c-1.289-4.531-6.008-7.159-10.547-5.854C196.254,153.387,129.114,153.6,128.439,153.6 c-4.71,0-8.533,3.823-8.533,8.533v34.133c0,34.935,17.254,87.723,26.496,106.214c0.452,0.905,46.797,90.052,110.037,90.052 s109.585-89.148,110.037-90.052C367.919,299.588,367.603,296.132,365.666,293.547z"/>
                <path fill="${n}" d="M316.173,392.533c-4.71,0-8.533,3.823-8.533,8.533v17.067c0,0.06,0.034,0.111,0.034,0.171 c0,0.051-0.034,0.094-0.034,0.154c-0.034,5.205-1.749,50.876-51.2,50.876s-51.166-45.986-51.2-51.2v-17.067 c0-4.71-3.823-8.533-8.533-8.533s-8.533,3.823-8.533,8.533v8.687c-116.028,1.638-168.917,35.9-178.765,65.417l-8.533,25.6 c-1.493,4.471,0.93,9.301,5.402,10.795C7.172,511.863,8.085,512,8.973,512c3.575,0,6.903-2.261,8.098-5.837l8.533-25.6 c6.076-18.227,48.034-52.335,163.132-53.845c3.106,24.422,19.721,59.682,67.704,59.682c53.999,0,68.267-44.425,68.267-67.917 c0-0.06-0.034-0.111-0.034-0.171c0-0.068,0.034-0.119,0.034-0.179v-17.067C324.706,396.356,320.883,392.533,316.173,392.533z"/>
                <path fill="${n}" d="M256.695,273.067h-0.085c-4.71,0-8.491,3.823-8.491,8.533c0,4.71,3.866,8.533,8.576,8.533 c4.719,0,8.533-3.823,8.533-8.533C265.229,276.89,261.414,273.067,256.695,273.067z"/>
                <path fill="${n}" d="M512.004,501.641l-8.533-25.591c-4.659-13.978-22.34-28.228-49.792-40.141c-4.318-1.877-9.352,0.102-11.23,4.429 c-1.869,4.318,0.111,9.353,4.437,11.221c26.266,11.401,38.178,23.219,40.388,29.884l8.533,25.6 c1.195,3.575,4.523,5.837,8.098,5.837c0.887,0,1.801-0.145,2.697-0.444C511.074,510.942,513.498,506.112,512.004,501.641z"/>
                <path fill="${n}" d="M256.439,0c-115.558,0-179.2,63.642-179.2,179.2V256c0,66.039-24.909,141.611-25.165,142.37 c-1.485,4.471,0.93,9.301,5.402,10.795c4.48,1.476,9.301-0.93,10.795-5.402c1.058-3.191,26.035-78.908,26.035-147.763v-76.8 c0-134.008,88.175-162.133,162.133-162.133c100.454,0,162.133,94.43,162.133,162.133v17.067 c0,34.458-21.111,74.163-41.532,112.572c-18.133,34.116-35.268,66.338-35.268,92.228c0,54.11,35.14,89.873,36.634,91.366 c1.596,1.604,3.772,2.5,6.033,2.5c2.261,0,4.437-0.896,6.033-2.5c1.493-1.493,36.634-37.257,36.634-91.366 c0-53.197-17.562-72.303-19.567-74.3c-3.285-3.285-8.559-3.285-11.904-0.051c-3.354,3.234-3.439,8.61-0.265,12.015 c0.145,0.154,14.669,16.256,14.669,62.336c0,33.937-16.444,60.16-25.617,72.149c-9.19-11.947-25.583-38.05-25.583-72.149 c0-21.632,16.162-52.036,33.271-84.215c21.402-40.252,43.529-81.869,43.529-120.585V179.2C435.639,94.438,362.04,0,256.439,0z"/>
            </svg>`},a.icon.son=function(t,e,n,r,i){return a.isNEU(r)&&(r=0),a.isNEU(i)&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}"  viewBox="0 0 512.002 512.002">
                <path fill="${n}" d="M238.934,213.334c0-4.71-3.823-8.533-8.533-8.533h-34.133c-4.71,0-8.533,3.823-8.533,8.533 c0,4.71,3.823,8.533,8.533,8.533h8.533c0,4.71,3.823,8.533,8.533,8.533c4.71,0,8.533-3.823,8.533-8.533h8.533 C235.111,221.867,238.934,218.044,238.934,213.334z"/>
                <path fill="${n}" d="M121.601,255.19c4.565,13.466,17.178,49.98,24.371,64.358c13.551,27.11,51.977,72.986,110.029,72.986 s96.478-45.875,110.037-72.986c7.185-14.379,19.797-50.893,24.371-64.358c11.025-2.85,19.191-12.885,19.191-24.789v-34.133 c0-11.127-7.134-20.617-17.067-24.141v-44.126c0-33.69-17.741-95.923-83.354-101.931c-0.137-4.028-1.476-7.27-2.953-9.668 c-8.38-13.559-31.94-16.401-50.227-16.401c-151.842,0-153.6,143.616-153.6,145.067c0,4.71,3.814,8.525,8.525,8.525h0.009 c4.702,0,8.525-3.806,8.533-8.516c0.017-5.222,1.937-128.009,136.533-128.009c24.132,0,33.801,5.222,35.703,8.311 c0.282,0.435,0.998,1.604-0.666,4.941c-1.323,2.645-1.178,5.786,0.375,8.303c1.553,2.509,4.301,4.045,7.253,4.045 c75.656,0,76.791,81.86,76.8,85.333v51.2c0,4.71,3.823,8.533,8.533,8.533c4.702,0,8.533,3.831,8.533,8.533v34.133 c0,4.702-3.831,8.533-8.533,8.533c-3.669,0-6.929,2.347-8.098,5.837c-0.162,0.503-16.964,50.816-25.131,67.149 c-1.297,2.594-32.495,63.548-94.771,63.548s-93.466-60.954-94.763-63.548c-8.166-16.333-24.977-66.645-25.139-67.149 c-1.161-3.49-4.42-5.837-8.098-5.837c-4.702,0-8.533-3.831-8.533-8.533v-34.133c0-2.313,0.93-4.412,2.423-5.948 c3.396,7.62,10.607,14.481,23.177,14.481c3.234,0,6.187-1.826,7.637-4.719c7.535-15.061,15.283-30.575,17.399-46.652 c43.665-1.758,108.979-17.323,139.742-41.105c8.201,29.764,32.742,54.596,33.988,55.842c3.337,3.337,8.738,3.337,12.066,0 c3.337-3.336,3.337-8.73,0-12.066c-0.316-0.316-31.633-31.983-31.633-62.234c0-3.831-2.56-7.202-6.255-8.226 c-3.703-1.024-7.62,0.546-9.591,3.831c-14.549,24.243-94.746,47.061-146.287,47.061c-4.71,0-8.533,3.823-8.533,8.533 c0,13.295-6.127,27.102-13.286,41.6c-2.901-1.604-3.703-4.753-3.78-7.467c0-4.71-3.823-8.533-8.533-8.533 c-14.114,0-25.6,11.486-25.6,25.6v34.133C102.401,242.305,110.576,252.34,121.601,255.19z"/>
                <path fill="${n}" d="M256.001,332.801c20.028,0,30.507-9.907,31.633-11.034c3.294-3.294,3.285-8.567,0.051-11.913 c-3.243-3.354-8.619-3.439-12.023-0.247c-0.265,0.247-6.699,6.127-19.661,6.127c-12.774,0-19.209-5.709-19.652-6.118 c-3.336-3.251-8.678-3.217-11.981,0.085c-3.328,3.337-3.328,8.73,0,12.066C225.503,322.893,235.982,332.801,256.001,332.801z"/>
                <path fill="${n}" d="M264.79,281.601c0-4.71-3.814-8.533-8.533-8.533h-0.085c-4.71,0-8.491,3.823-8.491,8.533c0,4.71,3.866,8.533,8.576,8.533 C260.976,290.134,264.79,286.311,264.79,281.601z"/>
                <path fill="${n}" d="M511.745,501.394l-8.713-34.756c-4.386-13.158-30.285-55.484-178.765-56.636v-8.934c0-4.71-3.823-8.533-8.533-8.533 s-8.533,3.823-8.533,8.533v17.067c0,0.06,0.034,0.111,0.034,0.171c0,0.051-0.034,0.094-0.034,0.154 c-0.034,5.205-1.749,50.876-51.2,50.876s-51.166-45.986-51.2-51.2v-17.067c0-4.71-3.823-8.533-8.533-8.533 s-8.533,3.823-8.533,8.533v8.619C77.168,410.556,21.786,428.203,8.79,467.26l-8.533,34.133 c-1.143,4.574,1.638,9.207,6.212,10.351c4.557,1.143,9.199-1.638,10.342-6.204l8.354-33.51 c9.916-29.739,63.309-44.595,163.132-45.338c3.098,24.431,19.712,59.708,67.704,59.708c47.983,0,64.597-35.063,67.703-59.366 c116.958,0.862,157.628,28.467,162.953,44.373l8.533,34.133c0.973,3.874,4.446,6.46,8.269,6.46c0.691,0,1.382-0.077,2.082-0.256 C510.115,510.601,512.888,505.968,511.745,501.394z"/>
                <path fill="${n}" d="M298.668,230.401c4.71,0,8.533-3.823,8.533-8.533h8.533c4.71,0,8.533-3.823,8.533-8.533c0-4.71-3.823-8.533-8.533-8.533 h-34.133c-4.71,0-8.533,3.823-8.533,8.533c0,4.71,3.823,8.533,8.533,8.533h8.533 C290.134,226.578,293.957,230.401,298.668,230.401z"/>
            </svg>`},a.icon.wife=function(t,e,n,r,i){return a.isNEU(r)&&(r=0),a.isNEU(i)&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 512 512" >
                <path fill="${n}" d="M128,307.2c4.719,0,8.533-3.823,8.533-8.533V281.6c0-4.71-3.814-8.533-8.533-8.533c-4.719,0-8.533,3.823-8.533,8.533 v17.067C119.467,303.377,123.281,307.2,128,307.2z"/>
                <path fill="${n}" d="M384,273.067c-4.719,0-8.533,3.823-8.533,8.533v17.067c0,4.71,3.814,8.533,8.533,8.533c4.719,0,8.533-3.823,8.533-8.533 V281.6C392.533,276.89,388.719,273.067,384,273.067z"/>
                <path fill="${n}" d="M392.183,433.109c-0.162-0.606-0.418-1.152-0.7-1.715c-0.162-0.299-0.196-0.64-0.384-0.93 c-0.094-0.128-0.23-0.196-0.324-0.324c-0.358-0.469-0.802-0.845-1.254-1.246c-0.418-0.375-0.819-0.742-1.306-1.016 c-0.145-0.094-0.23-0.23-0.392-0.316l-34.133-17.067c-2.748-1.357-6.008-1.161-8.55,0.538l-51.209,34.133 c-2.372,1.587-3.797,4.25-3.797,7.1v30.259c-5.077,4.062-17.545,12.407-34.133,12.407c-16.427,0-29.013-8.388-34.133-12.433 v-30.234c0-2.85-1.425-5.513-3.797-7.1l-51.2-34.133c-2.543-1.698-5.803-1.894-8.55-0.538l-34.133,17.067 c-0.154,0.077-0.239,0.213-0.375,0.299c-0.512,0.29-0.939,0.674-1.374,1.075c-0.435,0.384-0.853,0.734-1.186,1.178 c-0.102,0.137-0.256,0.213-0.35,0.35c-0.205,0.307-0.239,0.657-0.401,0.99c-0.265,0.529-0.521,1.05-0.674,1.63 c-0.137,0.529-0.179,1.05-0.205,1.596c-0.034,0.538-0.06,1.058,0.008,1.604c0.068,0.597,0.265,1.143,0.461,1.707 c0.119,0.341,0.111,0.7,0.273,1.024c0.077,0.154,0.222,0.247,0.307,0.393c0.282,0.495,0.666,0.913,1.058,1.348 c0.384,0.427,0.742,0.853,1.186,1.195c0.137,0.102,0.213,0.256,0.35,0.35l51.2,34.133c1.459,0.973,3.106,1.434,4.727,1.434 c2.756,0,5.47-1.331,7.108-3.797c2.62-3.925,1.562-9.225-2.364-11.836l-38.972-25.975l16.555-8.277l43.281,28.851V486.4 c0,2.261,0.896,4.437,2.5,6.033C208.102,493.235,227.2,512,256,512s47.898-18.765,48.7-19.567c1.604-1.596,2.5-3.772,2.5-6.033 v-29.568l43.29-28.851l16.546,8.277l-38.972,25.975c-3.925,2.611-4.983,7.91-2.364,11.836c1.638,2.466,4.352,3.797,7.108,3.797 c1.621,0,3.268-0.461,4.727-1.434l51.2-34.133c0.137-0.094,0.205-0.239,0.333-0.341c0.478-0.35,0.853-0.794,1.254-1.246 c0.358-0.427,0.725-0.811,0.998-1.289c0.085-0.154,0.239-0.247,0.324-0.41c0.171-0.35,0.171-0.725,0.29-1.084 c0.179-0.538,0.367-1.05,0.435-1.613c0.077-0.58,0.051-1.126,0.009-1.698C392.354,434.108,392.32,433.613,392.183,433.109z"/>
                <path fill="${n}" d="M57.037,409.165c0.896,0.29,1.809,0.435,2.697,0.435c3.575,0,6.903-2.261,8.09-5.837 C68.89,400.572,93.867,324.855,93.867,256v-76.8C93.867,45.193,182.033,17.067,256,17.067c25.199,0,77.636,0,85.649,11.128 c0.333,0.452,0.828,1.135,0.128,3.243c-0.956,2.842-0.341,5.965,1.604,8.235c1.946,2.278,4.932,3.362,7.885,2.876 c10.863-1.792,20.412,0.93,29.184,8.354c22.895,19.396,37.683,69.76,37.683,128.299V256c0,77.457,25.071,145.22,26.138,148.062 c1.656,4.412,6.571,6.639,10.991,5.001c4.412-1.655,6.647-6.571,5.001-10.991C460.006,397.406,435.2,330.257,435.2,256v-76.8 c0-50.415-11.486-114.014-43.716-141.321c-9.745-8.243-20.932-12.621-32.836-12.902c-0.683-2.773-1.903-5.035-3.149-6.767 C343.356,1.374,303.258,0,256,0C140.442,0,76.8,63.642,76.8,179.2V256c0,66.039-24.909,141.611-25.156,142.37 C50.15,402.842,52.565,407.672,57.037,409.165z"/>
                <path fill="${n}" d="M91.802,426.923C19.814,444.919,1.195,498.492,0.444,500.77c-1.493,4.471,0.922,9.301,5.393,10.795 C6.733,511.864,7.646,512,8.533,512c3.576,0,6.904-2.261,8.09-5.837c0.162-0.469,16.316-46.942,79.309-62.686 c4.574-1.143,7.356-5.777,6.212-10.351C101.001,428.561,96.367,425.771,91.802,426.923z"/>
                <path fill="${n}" d="M213.333,238.933c4.719,0,8.533-3.823,8.533-8.533v-5.615c0.546,0.529,0.922,0.964,0.964,1.024 c1.519,2.918,4.497,4.591,7.578,4.591c1.323,0,2.671-0.307,3.934-0.964c4.173-2.176,5.803-7.33,3.627-11.511 c-2.534-4.873-10.59-13.124-24.636-13.124c-14.046,0-22.101,8.252-24.636,13.124c-2.125,4.087-0.546,8.969,3.456,11.23 c3.985,2.261,9.148,0.819,11.554-3.123c0.085-0.128,0.503-0.623,1.092-1.195v5.564C204.8,235.11,208.614,238.933,213.333,238.933 z"/>
                <path fill="${n}" d="M511.556,500.77c-0.751-2.278-19.371-55.851-91.358-73.847c-4.574-1.161-9.199,1.638-10.342,6.204 c-1.143,4.574,1.638,9.207,6.212,10.351c62.524,15.633,78.66,60.809,79.309,62.686c1.186,3.576,4.514,5.837,8.09,5.837 c0.888,0,1.801-0.137,2.697-0.435C510.635,510.071,513.05,505.242,511.556,500.77z"/>
                <path fill="${n}" d="M256,332.8c20.028,0,30.507-9.907,31.633-11.034c3.294-3.294,3.285-8.567,0.051-11.913 c-3.251-3.345-8.61-3.439-12.015-0.247c-0.273,0.247-6.707,6.127-19.669,6.127c-12.774,0-19.208-5.709-19.652-6.118 c-3.32-3.251-8.67-3.226-11.981,0.085c-3.337,3.337-3.337,8.73,0,12.066C225.493,322.893,235.972,332.8,256,332.8z"/>
                <path fill="${n}" d="M298.667,238.933c4.719,0,8.533-3.823,8.533-8.533v-5.615c0.546,0.529,0.922,0.964,0.964,1.024 c1.519,2.918,4.497,4.591,7.578,4.591c1.323,0,2.671-0.307,3.934-0.964c4.173-2.176,5.803-7.33,3.627-11.511 c-2.534-4.873-10.59-13.124-24.636-13.124c-14.046,0-22.101,8.252-24.636,13.124c-2.125,4.087-0.546,8.969,3.456,11.23 c3.994,2.261,9.156,0.819,11.554-3.123c0.085-0.128,0.503-0.623,1.092-1.195v5.564 C290.133,235.11,293.948,238.933,298.667,238.933z"/>
                <path fill="${n}" d="M389.129,189.449c-8.542-6.443-30.729-26.957-30.729-44.382c0-4.71-3.814-8.533-8.533-8.533s-8.533,3.823-8.533,8.533 c0,24.678,24.354,47.249,34.014,55.228c-1.835,33.476-24.917,95.223-33.118,111.625c-7.654,15.317-48.154,63.548-86.229,63.548 s-78.575-48.23-86.229-63.548c-8.542-17.084-33.237-83.379-33.237-115.652v-25.728c33.835-0.802,157.321-6.929,218.453-52.779 c3.772-2.825,4.54-8.175,1.707-11.947c-2.825-3.772-8.175-4.54-11.947-1.707C279.561,152.994,129.51,153.6,128,153.6 c-4.719,0-8.533,3.823-8.533,8.533v34.133c0,36.625,26.871,106.965,35.029,123.281c10.385,20.77,55.834,72.986,101.504,72.986 s91.119-52.216,101.504-72.986c8.158-16.316,35.029-86.656,35.029-123.281C392.533,193.587,391.27,191.061,389.129,189.449z"/>
            </svg>`},a.icon.husband=function(t,e,n,r,i){return a.isNEU(r)&&(r=0),a.isNEU(i)&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 512.007 512.007" >
                <path fill="${n}" d="M121.835,255.249c6.229,16.196,26.803,68.42,41.737,90.82l1.348,2.039c10.957,16.614,29.295,44.425,91.085,44.425 c61.79,0,80.128-27.81,91.085-44.425l1.348-2.039c14.933-22.4,35.507-74.624,41.737-90.82c11.145-2.773,19.43-12.86,19.43-24.849 v-34.133c0-11.127-7.134-20.617-17.067-24.141V128c0-33.69-17.741-95.923-83.362-101.931c-0.128-4.028-1.459-7.27-2.944-9.668 C297.844,2.85,274.292,0,256.005,0c-151.842,0-153.6,143.616-153.6,145.067c0,4.71,3.814,8.525,8.516,8.525h0.017 c4.702,0,8.516-3.806,8.533-8.508c0.017-5.231,1.937-128.017,136.533-128.017c24.132,0,33.801,5.222,35.712,8.311 c0.265,0.435,0.99,1.604-0.683,4.941c-1.323,2.645-1.178,5.786,0.375,8.303c1.562,2.509,4.301,4.045,7.262,4.045 c75.657,0,76.791,81.86,76.8,85.333v51.2c0,4.71,3.814,8.533,8.533,8.533c4.71,0,8.533,3.831,8.533,8.533V230.4 c0,4.702-3.823,8.533-8.533,8.533c-3.558,0-6.741,2.21-7.996,5.538c-0.247,0.674-25.446,67.644-41.771,92.126l-1.399,2.116 c-10.223,15.514-24.235,36.753-76.834,36.753c-52.599,0-66.611-21.239-76.834-36.753l-1.399-2.116 c-16.324-24.482-41.523-91.452-41.771-92.126c-1.254-3.328-4.437-5.538-7.996-5.538c-4.71,0-8.533-3.831-8.533-8.533v-34.133 c0-2.313,0.922-4.412,2.423-5.948c3.089,6.955,9.421,13.21,20.053,14.268l29.193,21.897c2.27,16.623,16.418,29.517,33.664,29.517 h17.067c18.825,0,34.133-15.309,34.133-34.133c0,18.825,15.309,34.133,34.133,34.133h17.067 c17.237,0,31.394-12.894,33.664-29.517l31.189-23.39c3.772-2.825,4.54-8.175,1.707-11.947c-2.825-3.772-8.175-4.548-11.947-1.707 l-21.751,16.316c-3.251-10.402-12.86-18.022-24.329-18.022h-34.133c-14.114,0-25.6,11.486-25.6,25.6 c0-14.114-11.486-25.6-25.6-25.6h-34.133c-11.469,0-21.077,7.62-24.328,18.022l-16.282-12.211 c6.716-16.23,12.8-40.235,14.524-57.088c26.897-0.478,104.713-3.763,139.332-25.37c7.851,30.31,33.058,55.817,34.321,57.08 c3.336,3.336,8.73,3.336,12.066,0c3.336-3.337,3.336-8.73,0-12.066c-0.316-0.316-31.633-31.983-31.633-62.234 c0-3.831-2.56-7.202-6.255-8.226c-3.661-1.016-7.629,0.546-9.591,3.831c-12.425,20.693-93.022,29.995-146.287,29.995 c-4.719,0-8.533,3.823-8.533,8.533c0,13.858-6.554,41.515-13.508,58.539c-2.722-1.638-3.49-4.693-3.558-7.339 c0-4.71-3.814-8.533-8.533-8.533c-14.114,0-25.6,11.486-25.6,25.6V230.4C102.405,242.389,110.691,252.476,121.835,255.249z M273.071,213.333c0-4.702,3.823-8.533,8.533-8.533h34.133c4.71,0,8.533,3.831,8.533,8.533v8.533 c0,9.412-7.654,17.067-17.067,17.067h-17.067c-9.412,0-17.067-7.654-17.067-17.067V213.333z M187.738,213.333 c0-4.702,3.823-8.533,8.533-8.533h34.133c4.71,0,8.533,3.831,8.533,8.533v8.533c0,9.412-7.654,17.067-17.067,17.067h-17.067 c-9.412,0-17.067-7.654-17.067-17.067V213.333z"/>
                <path fill="${n}" d="M298.663,307.226c0.009-4.702-3.797-8.533-8.499-8.559c-0.162,0-15.42-0.171-30.345-7.629 c-2.398-1.203-5.231-1.203-7.629,0c-14.925,7.458-30.182,7.629-30.319,7.629c-4.719,0-8.533,3.823-8.533,8.533 s3.814,8.533,8.533,8.533c0.725,0,16.853-0.094,34.133-7.646c17.28,7.552,33.408,7.646,34.133,7.646 C294.84,315.733,298.646,311.927,298.663,307.226z"/>
                <path fill="${n}" d="M247.471,324.267c-4.719,0-8.533,3.823-8.533,8.533c0,4.71,3.814,8.533,8.533,8.533h17.067 c4.719,0,8.533-3.823,8.533-8.533c0-4.71-3.814-8.533-8.533-8.533H247.471z"/>
                <path fill="${n}" d="M511.749,501.393l-8.721-34.756c-12.706-38.135-73.114-56.687-184.67-56.687c-0.879,0-1.758,0-2.645,0.009 c-4.053,0.009-7.544,2.867-8.337,6.852l-17.067,84.975c-0.93,4.625,2.065,9.122,6.682,10.052 c4.608,0.896,9.114-2.074,10.044-6.69l15.693-78.114c97.724,0.452,154.436,15.957,163.934,44.373l8.533,34.133 c0.973,3.874,4.446,6.468,8.269,6.46c0.683,0,1.382-0.077,2.074-0.256C510.11,510.601,512.892,505.976,511.749,501.393z"/>
                <path fill="${n}" d="M204.634,416.461c-0.794-3.994-4.292-6.861-8.363-6.861c-116.386,0-174.148,17.596-187.477,57.66l-8.533,34.133 c-1.152,4.582,1.638,9.207,6.212,10.351C7.164,511.923,7.864,512,8.547,512c3.823,0,7.296-2.586,8.269-6.46l8.346-33.51 c9.95-29.841,63.667-44.689,164.122-45.338l15.693,78.447c0.913,4.617,5.367,7.629,10.035,6.699 c4.617-0.93,7.62-5.427,6.69-10.044L204.634,416.461z"/>
                <path fill="${n}" d="M256.005,409.6c-14.114,0-25.6,11.486-25.6,25.6c0,11.11,7.159,20.489,17.067,24.021v44.245 c0,4.71,3.814,8.533,8.533,8.533c4.719,0,8.533-3.823,8.533-8.533V459.23c9.907-3.541,17.067-12.919,17.067-24.03 C281.605,421.086,270.119,409.6,256.005,409.6z M256.005,443.733c-4.71,0-8.533-3.831-8.533-8.533 c0-4.702,3.823-8.533,8.533-8.533c4.71,0,8.533,3.831,8.533,8.533C264.538,439.902,260.715,443.733,256.005,443.733z"/>
            </svg>`},a.icon.father=function(t,e,n,r,i){return a.isNEU(r)&&(r=0),a.isNEU(i)&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 512.002 512.002" >
                <path fill="${n}" d="M366.934,128.001c0-4.71-3.814-8.533-8.533-8.533c-2.091,0-51.2-0.683-51.2-59.733c0-4.71-3.814-8.533-8.533-8.533 s-8.533,3.823-8.533,8.533c0,75.921,67.584,76.8,68.267,76.8C363.12,136.534,366.934,132.711,366.934,128.001z"/>
                <path fill="${n}" d="M256.001,196.268c0-14.114-11.486-25.6-25.6-25.6h-34.133c-11.46,0-21.069,7.62-24.329,18.022l-21.751-16.316 c-3.772-2.825-9.114-2.048-11.947,1.707c-2.825,3.772-2.065,9.122,1.707,11.947l31.189,23.39 c2.278,16.623,16.418,29.517,33.664,29.517h17.067c18.825,0,34.133-15.309,34.133-34.133c0,18.825,15.309,34.133,34.133,34.133 h17.067c17.237,0,31.394-12.894,33.664-29.517l31.189-23.39c3.772-2.825,4.54-8.175,1.707-11.947 c-2.825-3.772-8.175-4.548-11.947-1.707l-21.751,16.316c-3.251-10.402-12.86-18.022-24.329-18.022h-34.133 C267.487,170.668,256.001,182.153,256.001,196.268z M238.934,204.801c0,9.412-7.654,17.067-17.067,17.067h-17.067 c-9.412,0-17.067-7.654-17.067-17.067v-8.533c0-4.702,3.831-8.533,8.533-8.533h34.133c4.702,0,8.533,3.831,8.533,8.533V204.801z M324.268,196.268v8.533c0,9.412-7.654,17.067-17.067,17.067h-17.067c-9.412,0-17.067-7.654-17.067-17.067v-8.533 c0-4.702,3.823-8.533,8.533-8.533h34.133C320.445,187.734,324.268,191.566,324.268,196.268z"/>
                <path fill="${n}" d="M298.659,307.226c0.009-4.702-3.797-8.533-8.499-8.559c-0.162,0-15.42-0.171-30.345-7.629 c-2.398-1.203-5.231-1.203-7.629,0c-14.925,7.458-30.191,7.629-30.319,7.629c-4.71,0-8.533,3.823-8.533,8.533 s3.823,8.533,8.533,8.533c0.725,0,16.845-0.094,34.133-7.646c17.28,7.552,33.408,7.646,34.133,7.646 C294.836,315.734,298.642,311.928,298.659,307.226z"/>
                <path fill="${n}" d="M120.986,237.953c4.378,18.611,18.91,76.877,34.048,99.584c10.974,16.452,36.668,54.997,100.966,54.997 s89.993-38.545,100.966-54.997c15.138-22.707,29.67-80.973,34.048-99.584c10.718-3.055,18.586-12.937,18.586-24.619v-34.133 c0-11.127-7.134-20.617-17.067-24.141v-44.126c0-1.109-1.562-110.933-136.533-110.933c-151.842,0-153.6,126.72-153.6,128 c0,4.702,3.806,8.516,8.516,8.525h0.017c4.693,0,8.516-3.806,8.533-8.499c0.017-4.54,2.048-110.959,136.533-110.959 c117.581,0,119.441,90.061,119.467,93.867v51.2c0,4.71,3.814,8.533,8.533,8.533c4.71,0,8.533,3.831,8.533,8.533v34.133 c0,4.702-3.823,8.533-8.533,8.533c-4.002,0-7.458,2.782-8.337,6.682c-0.162,0.751-16.896,75.52-32.896,99.516 c-10.257,15.386-31.599,47.403-86.767,47.403s-76.51-32.017-86.767-47.403c-15.992-23.979-32.734-98.765-32.905-99.516 c-0.87-3.9-4.326-6.682-8.329-6.682c-4.702,0-8.533-3.831-8.533-8.533v-34.133c0-4.702,3.831-8.533,8.533-8.533 c1.323,0,2.637-0.307,3.814-0.896c2.978-1.493,72.986-37.333,72.986-110.037c0-4.71-3.823-8.533-8.533-8.533 s-8.533,3.823-8.533,8.533c0,56.678-52.523,88.636-62.08,93.978c-13.022,1.186-23.253,12.169-23.253,25.489v34.133 C102.401,225.016,110.269,234.898,120.986,237.953z"/>
                <path fill="${n}" d="M196.097,416.462c-0.794-3.994-4.292-6.861-8.363-6.861c-140.399,0-168.892,27.409-178.944,57.66l-8.533,34.133 c-1.143,4.582,1.638,9.207,6.204,10.351c0.7,0.179,1.391,0.256,2.082,0.256c3.823,0,7.296-2.586,8.269-6.46l8.354-33.51 c7.339-22.025,31.718-44.527,155.58-45.338l15.693,78.447c0.913,4.617,5.393,7.603,10.035,6.699 c4.625-0.93,7.62-5.427,6.69-10.044L196.097,416.462z"/>
                <path fill="${n}" d="M511.745,501.394l-8.721-34.756c-7.117-21.342-39.689-57.216-178.782-56.678c-4.062,0.009-7.544,2.867-8.337,6.852 l-17.067,84.975c-0.93,4.625,2.065,9.122,6.682,10.052c4.591,0.896,9.114-2.074,10.044-6.69l15.693-78.114 c103.714,0.674,148.412,23.484,155.401,44.373l8.533,34.133c0.973,3.874,4.446,6.468,8.269,6.46c0.683,0,1.382-0.077,2.074-0.256 C510.106,510.601,512.888,505.976,511.745,501.394z"/>
                <path fill="${n}" d="M256.257,426.668h-0.085c-4.71,0-8.491,3.823-8.491,8.533s3.866,8.533,8.576,8.533c4.71,0,8.533-3.823,8.533-8.533 S260.967,426.668,256.257,426.668z"/>
                <path fill="${n}" d="M256.257,494.934h-0.085c-4.71,0-8.491,3.823-8.491,8.533s3.866,8.533,8.576,8.533c4.71,0,8.533-3.823,8.533-8.533 S260.967,494.934,256.257,494.934z"/>
                <path fill="${n}" d="M247.468,324.268c-4.71,0-8.533,3.823-8.533,8.533c0,4.71,3.823,8.533,8.533,8.533h17.067 c4.719,0,8.533-3.823,8.533-8.533c0-4.71-3.814-8.533-8.533-8.533H247.468z"/>
                <path fill="${n}" d="M256.257,460.801h-0.085c-4.71,0-8.491,3.823-8.491,8.533c0,4.71,3.866,8.533,8.576,8.533 c4.71,0,8.533-3.823,8.533-8.533C264.79,464.624,260.967,460.801,256.257,460.801z"/>
            </svg>`},a.icon.mother=function(t,e,n,r,i){return a.isNEU(r)&&(r=0),a.isNEU(i)&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 512.011 512.011" >
                <path fill="${n}" d="M299.355,445.356c-1.621,1.536-2.56,3.755-2.56,5.973c0,2.304,0.939,4.437,2.56,6.059 c1.536,1.621,3.755,2.475,5.973,2.475c2.304,0,4.523-0.853,6.059-2.475c1.621-1.536,2.475-3.755,2.475-6.059 c0-2.219-0.853-4.437-2.475-5.973C308.23,442.113,302.512,442.199,299.355,445.356z"/>
                <path fill="${n}" d="M276.23,458.668c-1.621,1.621-2.475,3.755-2.475,6.059c0,2.219,0.939,4.437,2.475,5.973 c1.621,1.621,3.84,2.56,6.059,2.56c2.219,0,4.437-0.939,5.973-2.56c1.621-1.536,2.56-3.755,2.56-5.973 c0-2.304-0.939-4.437-2.56-6.059C285.104,455.511,279.387,455.511,276.23,458.668z"/>
                <path fill="${n}" d="M392.539,196.268c0-2.68-1.263-5.205-3.405-6.818c-8.55-6.443-30.729-26.957-30.729-44.382 c0-4.71-3.823-8.533-8.533-8.533s-8.533,3.823-8.533,8.533c0,24.678,24.354,47.249,34.014,55.228 c-1.835,33.476-24.917,95.223-33.118,111.625c-7.654,15.317-48.154,63.548-86.229,63.548s-78.575-48.23-86.229-63.548 c-8.542-17.084-33.237-83.379-33.237-115.652V170.54c33.835-0.802,157.321-6.929,218.453-52.779 c3.772-2.825,4.531-8.175,1.707-11.947c-2.825-3.763-8.166-4.531-11.947-1.707c-65.186,48.887-215.236,49.493-216.747,49.493 c-4.71,0-8.533,3.823-8.533,8.533v34.133c0,36.625,26.871,106.965,35.029,123.281c10.394,20.77,55.834,72.986,101.504,72.986 s91.11-52.215,101.504-72.986C365.668,303.233,392.539,232.893,392.539,196.268z"/>
                <path fill="${n}" d="M249.947,463.276c-1.536,1.621-2.475,3.84-2.475,6.059c0,2.219,0.939,4.437,2.475,6.059 c1.621,1.536,3.84,2.475,6.059,2.475s4.437-0.939,6.059-2.475c1.536-1.621,2.475-3.84,2.475-6.059 c0-2.219-0.939-4.437-2.475-6.059C258.907,460.119,253.104,460.119,249.947,463.276z"/>
                <path fill="${n}" d="M34.139,230.401c0,18.85,6.75,36.659,19.098,50.688c-1.348,5.76-2.031,11.648-2.031,17.579 c0,42.342,34.458,76.8,76.8,76.8c6.494,0,12.954-0.819,19.191-2.432c4.565-1.178,7.305-5.828,6.127-10.394 c-1.178-4.565-5.828-7.305-10.394-6.127c-4.847,1.254-9.865,1.886-14.925,1.886c-32.939,0-59.733-26.795-59.733-59.733 c0-5.922,0.879-11.793,2.603-17.459c0.922-3.021,0.102-6.298-2.133-8.525c-11.307-11.298-17.536-26.308-17.536-42.283 c0-19.251,9.421-37.453,25.199-48.674c3.78-2.688,4.719-7.893,2.116-11.742c-6.707-9.89-10.249-21.461-10.249-33.451 c0-28.843,20.591-53.53,48.947-58.701c2.432-0.452,4.557-1.929,5.811-4.053c18.987-32.137,40.892-56.713,133.888-56.713 c71.714,0,128.947,23.484,142.413,58.436c0.888,2.304,2.731,4.105,5.052,4.949c23.535,8.559,39.356,31.095,39.356,56.081 c0,11.989-3.541,23.561-10.249,33.451c-2.603,3.849-1.664,9.054,2.116,11.742c15.778,11.221,25.199,29.423,25.199,48.674 c0,15.974-6.229,30.984-17.536,42.283c-2.236,2.227-3.055,5.504-2.133,8.525c1.724,5.666,2.603,11.537,2.603,17.459 c0,32.939-26.795,59.733-59.733,59.733c-5.018,0-10.001-0.623-14.814-1.852c-4.574-1.186-9.207,1.579-10.377,6.144 c-1.169,4.574,1.587,9.216,6.153,10.385c6.195,1.587,12.595,2.389,19.038,2.389c42.342,0,76.8-34.458,76.8-76.8 c0-5.931-0.683-11.819-2.031-17.579c12.348-14.029,19.098-31.838,19.098-50.688c0-22.11-9.643-43.128-26.138-57.643 c5.956-11.102,9.071-23.475,9.071-36.224c0-30.865-18.748-58.82-47.044-70.733C395.475,25.704,334.598,0.001,256.919,0.001 c-90.172,0-121.984,21.7-146.62,61.85c-34.475,8.115-59.093,38.921-59.093,74.684c0,12.749,3.115,25.122,9.071,36.224 C43.782,187.274,34.139,208.291,34.139,230.401z"/>
                <path fill="${n}" d="M316.507,424.876c-1.621,1.621-2.475,3.84-2.475,6.059c0,2.304,0.853,4.437,2.475,6.059 c1.621,1.536,3.755,2.475,5.973,2.475c2.304,0,4.437-0.939,6.059-2.475c1.621-1.621,2.475-3.755,2.475-6.059 c0-2.219-0.853-4.437-2.475-6.059C325.382,421.719,319.664,421.719,316.507,424.876z"/>
                <path fill="${n}" d="M223.664,458.668c-1.536,1.621-2.475,3.755-2.475,6.059c0,2.219,0.939,4.437,2.475,6.059 c1.621,1.536,3.84,2.475,6.059,2.475c2.304,0,4.437-0.939,6.059-2.475c1.621-1.621,2.475-3.84,2.475-6.059 c0-2.219-0.853-4.437-2.475-6.059C232.624,455.511,226.907,455.511,223.664,458.668z"/>
                <path fill="${n}" d="M337.67,411.905c1.621-1.621,2.475-3.755,2.475-6.059c0-2.219-0.853-4.437-2.475-6.059 c-3.157-3.157-8.875-3.072-12.032,0.085c-1.621,1.536-2.56,3.755-2.56,5.973c0,2.304,0.939,4.437,2.56,6.059 c1.536,1.621,3.755,2.475,5.973,2.475C333.915,414.38,336.048,413.527,337.67,411.905z"/>
                <path fill="${n}" d="M213.339,238.935c4.71,0,8.533-3.823,8.533-8.533v-5.615c0.546,0.529,0.922,0.964,0.964,1.024 c1.519,2.918,4.497,4.591,7.578,4.591c1.323,0,2.671-0.307,3.934-0.964c4.181-2.176,5.803-7.33,3.627-11.511 c-2.534-4.873-10.581-13.124-24.636-13.124c-14.054,0-22.101,8.252-24.636,13.124c-2.125,4.087-0.555,8.969,3.456,11.23 c4.011,2.287,9.156,0.811,11.563-3.123c0.077-0.128,0.495-0.623,1.084-1.195v5.564 C204.806,235.112,208.629,238.935,213.339,238.935z"/>
                <path fill="${n}" d="M256.006,332.801c20.028,0,30.507-9.907,31.633-11.034c3.294-3.294,3.285-8.567,0.043-11.913 c-3.234-3.345-8.61-3.439-12.015-0.247c-0.265,0.247-6.699,6.127-19.661,6.127c-12.774,0-19.208-5.709-19.652-6.118 c-3.336-3.251-8.678-3.217-11.981,0.085c-3.337,3.336-3.337,8.73,0,12.066C225.499,322.894,235.978,332.801,256.006,332.801z"/>
                <path fill="${n}" d="M298.672,238.935c4.71,0,8.533-3.823,8.533-8.533v-5.615c0.546,0.529,0.922,0.964,0.964,1.024 c1.519,2.918,4.497,4.591,7.578,4.591c1.323,0,2.671-0.307,3.934-0.964c4.181-2.176,5.803-7.33,3.627-11.511 c-2.534-4.873-10.581-13.124-24.636-13.124s-22.101,8.252-24.636,13.124c-2.125,4.087-0.555,8.969,3.456,11.23 c4.011,2.287,9.165,0.811,11.563-3.123c0.077-0.128,0.495-0.623,1.084-1.195v5.564 C290.139,235.112,293.962,238.935,298.672,238.935z"/>
                <path fill="${n}" d="M511.571,500.771l-8.533-25.6c-8.883-26.658-62.464-65.212-136.098-65.212c-3.482,0-6.613,2.116-7.919,5.333 c-0.316,0.802-33.015,79.642-103.014,79.642c-69.99,0-102.69-79.181-103.014-79.983c-1.306-3.226-4.437-5.35-7.919-5.35 c-106.001,0-130.97,50.185-136.098,65.57l-8.533,25.6c-1.493,4.471,0.93,9.301,5.402,10.795c4.48,1.502,9.301-0.93,10.795-5.402 l8.533-25.6c8.465-25.412,42.974-52.514,114.381-53.845c9.293,19.703,45.577,85.282,116.454,85.282 c70.827,0,107.102-65.229,116.437-84.898c64.051,1.835,108.339,35.294,114.398,53.461l8.533,25.6 c1.195,3.576,4.523,5.837,8.098,5.837c0.887,0,1.801-0.137,2.697-0.435C510.64,510.073,513.064,505.243,511.571,500.771z"/>
                <path fill="${n}" d="M375.472,281.601v17.067c0,4.71,3.823,8.533,8.533,8.533c4.71,0,8.533-3.823,8.533-8.533v-17.067 c0-4.71-3.823-8.533-8.533-8.533C379.295,273.068,375.472,276.891,375.472,281.601z"/>
                <path fill="${n}" d="M188.934,405.847c0-2.219-0.939-4.437-2.56-5.973c-3.157-3.243-8.875-3.243-12.032,0 c-1.621,1.536-2.475,3.755-2.475,5.973c0,2.304,0.853,4.437,2.475,6.059s3.755,2.475,6.059,2.475 c2.219,0,4.437-0.853,5.973-2.475C187.995,410.284,188.934,408.151,188.934,405.847z"/>
                <path fill="${n}" d="M189.531,439.468c2.219,0,4.437-0.939,5.973-2.475c1.621-1.621,2.475-3.755,2.475-6.059c0-2.219-0.853-4.437-2.475-6.059 c-3.157-3.157-8.875-3.157-12.032,0c-1.621,1.621-2.475,3.84-2.475,6.059c0,2.304,0.853,4.437,2.475,6.059 C185.008,438.529,187.227,439.468,189.531,439.468z"/>
                <path fill="${n}" d="M200.624,445.356c-1.621,1.621-2.56,3.755-2.56,6.059c0,2.219,0.939,4.437,2.56,5.973c1.621,1.621,3.755,2.56,6.059,2.56 c2.219,0,4.437-0.939,5.973-2.56c1.621-1.536,2.475-3.755,2.475-5.973c0-2.304-0.853-4.523-2.475-6.059 C209.499,442.199,203.782,442.199,200.624,445.356z"/>
                <path fill="${n}" d="M119.472,281.601v17.067c0,4.71,3.823,8.533,8.533,8.533s8.533-3.823,8.533-8.533v-17.067 c0-4.71-3.823-8.533-8.533-8.533S119.472,276.891,119.472,281.601z"/>
            </svg>`},a.icon.teddy=function(t,e,n,r,i){return a.isNEU(r)&&(r=0),a.isNEU(i)&&(i=0),`<svg width="${t}" height="${e}" x="${r}" y="${i}" viewBox="0 0 512 512">
                <path fill="${n}" d="M234.513,246.613c9.378-1.929,16.555-9.02,21.487-15.863c4.932,6.844,12.109,13.935,21.487,15.863 c1.459,0.299,3.089,0.486,4.873,0.486c6.118,0,13.978-2.304,22.34-10.667c3.337-3.337,3.337-8.73,0-12.066s-8.73-3.337-12.066,0 c-4.361,4.369-8.337,6.212-11.699,5.53c-6.912-1.408-13.611-12.203-16.401-18.364c9.523-3.866,17.067-13.577,17.067-23.799 c0-9.353-9.566-14.933-25.6-14.933c-16.026,0-25.6,5.581-25.6,14.933c0,10.223,7.535,19.934,17.067,23.799 c-2.807,6.178-9.498,16.956-16.401,18.364c-3.405,0.666-7.339-1.178-11.699-5.53c-3.336-3.337-8.73-3.337-12.066,0 s-3.337,8.73,0,12.066C218.104,247.236,228.062,247.91,234.513,246.613z M263.748,190.669c-1.502,2.944-4.873,5.598-7.748,5.598	s-6.246-2.654-7.748-5.598C251.793,189.833,260.207,189.833,263.748,190.669z"/>
                <path fill="${n}" d="M390.033,53.7c1.621,1.613,2.5,3.755,2.5,6.033s-0.879,4.42-2.5,6.025c-3.337,3.337-3.337,8.738,0,12.075 c1.664,1.664,3.849,2.5,6.033,2.5s4.369-0.836,6.033-2.492c4.838-4.838,7.501-11.273,7.501-18.108s-2.662-13.269-7.501-18.099 c-9.984-9.984-26.214-9.984-36.198,0c-3.337,3.328-3.337,8.73,0,12.066s8.73,3.337,12.066,0 C381.303,50.372,386.697,50.372,390.033,53.7z"/>
                <path fill="${n}" d="M311.467,136.533c7.057,0,12.8-5.743,12.8-12.8c0-7.057-5.743-12.8-12.8-12.8s-12.8,5.743-12.8,12.8 C298.667,130.79,304.41,136.533,311.467,136.533z"/>
                <path fill="${n}" d="M200.533,136.533c7.057,0,12.8-5.743,12.8-12.8c0-7.057-5.743-12.8-12.8-12.8s-12.8,5.743-12.8,12.8 C187.733,130.79,193.476,136.533,200.533,136.533z"/>
                <path fill="${n}" d="M115.934,80.333c2.185,0,4.369-0.836,6.042-2.5c3.328-3.337,3.328-8.738-0.009-12.075c-1.613-1.604-2.5-3.746-2.5-6.025 s0.887-4.42,2.509-6.033c3.209-3.226,8.841-3.226,12.058,0c3.328,3.337,8.738,3.328,12.066,0 c3.337-3.328,3.337-8.738,0.009-12.066c-9.677-9.677-26.539-9.668-36.207-0.009c-4.838,4.838-7.501,11.273-7.501,18.108 s2.662,13.269,7.501,18.108C111.565,79.497,113.749,80.333,115.934,80.333z"/>
                <path fill="${n}" d="M498.552,286.191c-28.262-23.945-91.742-14.2-98.884-13.005c-4.651,0.768-7.791,5.171-7.014,9.813 c0.777,4.651,5.171,7.799,9.813,7.014c17.246-2.867,66.133-6.827,85.052,9.199c5.06,4.284,7.415,9.54,7.415,16.521 c0,3.977-1.476,6.946-4.779,9.626c-24.098,19.567-114.33,5.982-147.063-0.913c-3.703-0.776-7.441,0.981-9.242,4.275 c-1.801,3.311-1.212,7.424,1.434,10.095c0.12,0.119,8.499,8.755,12.493,19.951c-2.125-0.222-4.267-0.367-6.443-0.367 c-37.641,0-68.267,34.458-68.267,76.8c0,7.629,1.024,14.993,2.884,21.956c-3.823,1.715-10.197,3.644-19.951,3.644 c-10.052,0-16.367-2.082-19.908-3.814c1.826-6.912,2.842-14.217,2.842-21.786c0-42.342-30.626-76.8-68.267-76.8 c-2.176,0-4.318,0.145-6.443,0.367c3.994-11.196,12.373-19.831,12.476-19.934c2.671-2.671,3.268-6.775,1.468-10.095 c-1.792-3.319-5.521-5.069-9.259-4.292c-32.725,6.895-122.974,20.48-147.063,0.913c-3.302-2.68-4.779-5.649-4.779-9.626 c0-6.98,2.355-12.228,7.407-16.512c18.867-15.991,67.806-12.066,85.06-9.208c4.651,0.794,9.045-2.364,9.813-7.014 c0.776-4.651-2.364-9.045-7.006-9.813c-7.151-1.195-70.613-10.957-98.884,13.005C4.651,293.649,0,303.863,0,315.733 c0,9.079,3.831,16.998,11.093,22.886c27.179,22.05,102.818,12.783,140.535,6.426c-2.825,5.47-5.188,11.896-6.11,18.825 c-25.216,11.29-43.119,38.98-43.119,71.33c0,42.342,30.626,76.8,68.267,76.8c25.446,0,47.642-15.778,59.383-39.057 c5.743,2.56,14.174,4.924,25.95,4.924c11.674,0,20.164-2.287,26.035-4.77C293.794,496.29,315.938,512,341.333,512 c37.641,0,68.267-34.458,68.267-76.8c0-32.35-17.903-60.041-43.119-71.33c-0.922-6.929-3.277-13.355-6.101-18.825 c37.717,6.357,113.365,15.633,140.527-6.426c7.262-5.888,11.093-13.807,11.093-22.886 C512,303.863,507.349,293.649,498.552,286.191z M170.667,494.933c-28.237,0-51.2-26.795-51.2-59.733s22.963-59.733,51.2-59.733 s51.2,26.795,51.2,59.733S198.904,494.933,170.667,494.933z M392.533,435.2c0,32.939-22.963,59.733-51.2,59.733 c-20.983,0-39.04-14.814-46.942-35.942c-0.145-0.614-0.324-1.186-0.606-1.766c-2.338-6.818-3.652-14.242-3.652-22.025 c0-32.939,22.963-59.733,51.2-59.733C369.57,375.467,392.533,402.261,392.533,435.2z"/>
                <path fill="${n}" d="M307.2,443.733c0,18.825,15.309,34.133,34.133,34.133c18.825,0,34.133-15.309,34.133-34.133 c0-18.825-15.309-34.133-34.133-34.133C322.509,409.6,307.2,424.909,307.2,443.733z M358.4,443.733 c0,9.412-7.654,17.067-17.067,17.067c-9.404,0-17.067-7.654-17.067-17.067c0-9.412,7.663-17.067,17.067-17.067 C350.746,426.667,358.4,434.321,358.4,443.733z"/>
                <path fill="${n}" d="M115.541,118.161c-8.619,21.709-13.141,45.525-13.141,69.572c0,67.849,52.762,136.533,153.6,136.533 s153.6-68.685,153.6-136.533c0-24.491-4.412-47.846-13.107-69.581c26.957-5.76,47.24-29.764,47.24-58.419 C443.733,26.795,416.93,0,384,0c-24.67,0-46.14,14.916-55.108,36.745C307.115,23.859,282.368,17.067,256,17.067 c-26.615,0-51.2,6.716-73.259,19.925C174.08,14.754,153.088,0,128,0C95.061,0,68.267,26.795,68.267,59.733 C68.267,88.397,88.559,112.41,115.541,118.161z M128,17.067c19.226,0,35.021,12.177,40.115,30.054 c-11.085,8.61-21.163,18.816-29.901,30.592c-2.807,3.789-2.014,9.131,1.775,11.938c3.789,2.816,9.139,2.022,11.938-1.766 c8.9-12.006,19.26-22.281,30.788-30.507C204.288,41.95,228.949,34.133,256,34.133c41.429,0,78.396,19.098,104.098,53.786 c1.681,2.253,4.25,3.447,6.869,3.447c1.766,0,3.55-0.546,5.077-1.681c3.78-2.799,4.574-8.149,1.775-11.938 c-8.969-12.092-19.157-22.485-30.345-31.104c5.427-17.374,21.632-29.577,40.525-29.577c23.526,0,42.667,19.14,42.667,42.667 S407.526,102.4,384,102.4c-2.935,0-5.658,1.502-7.228,3.985c-1.553,2.483-1.732,5.589-0.461,8.243 c10.761,22.443,16.222,47.044,16.222,73.105C392.533,247.1,345.634,307.2,256,307.2s-136.533-60.1-136.533-119.467 c0-25.617,5.615-50.901,16.23-73.122c1.263-2.637,1.084-5.751-0.478-8.226c-1.562-2.483-4.292-3.985-7.219-3.985 c-23.526,0-42.667-19.14-42.667-42.667S104.474,17.067,128,17.067z"/>
                <path fill="${n}" d="M256,290.133c47.053,0,85.333-30.626,85.333-68.267c0-36.258-36.489-76.8-85.333-76.8s-85.333,40.542-85.333,76.8 C170.667,259.507,208.947,290.133,256,290.133z M256,162.133c38.451,0,68.267,32.111,68.267,59.733 c0,28.237-30.626,51.2-68.267,51.2c-37.641,0-68.267-22.963-68.267-51.2C187.733,194.244,217.557,162.133,256,162.133z"/>
                <path fill="${n}" d="M170.667,409.6c-18.825,0-34.133,15.309-34.133,34.133c0,18.825,15.309,34.133,34.133,34.133 s34.133-15.309,34.133-34.133C204.8,424.909,189.491,409.6,170.667,409.6z M170.667,460.8c-9.412,0-17.067-7.654-17.067-17.067 c0-9.412,7.654-17.067,17.067-17.067c9.412,0,17.067,7.654,17.067,17.067C187.733,453.146,180.079,460.8,170.667,460.8z"/>
            </svg>`},a.prototype.exportPDFProfile=function(t,e){t=this._defaultExportProfileOptions(t,"pdf"),this._exportProfile(t,e)},a.prototype.exportPDFPreview=function(t){a.pdfPrevUI.show(this,t)},a.prototype.exportPNGProfile=function(t,e){t=this._defaultExportProfileOptions(t,"png"),this._exportProfile(t,e)},a.prototype.shareProfile=function(t){var e;typeof t=="object"?t=(e=t).focusId:e=this.editUI.content(t,!0,!0,"100%",!0);var n=new URL(window.location.href);n.searchParams.append("nodeId",t);var r={title:e.title,text:e.shareText,url:n.href};try{navigator.share(r)}catch(i){console.error("error: "+i)}},a.prototype.exportPDF=function(t,e){t=this._defaultExportOptions(t,"pdf"),this._export(t,e)},a.prototype.exportPNG=function(t,e){t=this._defaultExportOptions(t,"png"),this._export(t,e)},a.prototype.exportSVG=function(t,e){t=this._defaultExportOptions(t,"svg"),this._export(t,e)},a.prototype._defaultExportOptions=function(t,e){return t==null&&(t={}),e=="svg"?(t.ext="svg",t.mime="image/svg+xml"):e=="pdf"?(t.mime="application/pdf",t.ext="pdf"):e=="png"&&(t.mime="image/png",t.ext="png"),t.margin==null&&(t.margin=[50,40,50,40]),t.padding==null&&(t.padding=0),t.landscape==null&&(t.landscape=!1),t.filename==null&&(t.filename="FamilyTree."+t.ext),t.scale==null&&(t.scale="fit"),t.format==null&&(t.format="fit"),t.header==null&&(t.header=""),e=="pdf"&&t.footer==null?t.footer="Page {current-page} of {total-pages}":t.footer==null&&(t.footer=""),t.openInNewTab==null&&(t.openInNewTab=!1),t.mode==null&&(t.mode="bft-"+this.config.mode),t},a.prototype._export=function(t,e){var n=this,r={id:t.nodeId,expandChildren:t.expandChildren,min:t.min};t.margin&&t.margin[0]<2&&(t.margin[0]=2),t.margin&&t.margin[1]<2&&(t.margin[1]=2),t.margin&&t.margin[2]<2&&(t.margin[2]=2),t.margin&&t.margin[3]<2&&(t.margin[3]=2),this._draw(!1,a.action.exporting,r,function(i,o){var s=document.createElement("div");if(s.innerHTML=i,t.padding>0){var l=s.querySelector("svg"),c=a._getViewBox(l);c[0]-=t.padding,c[1]-=t.padding,c[2]+=2*t.padding,c[3]+=2*t.padding,l.setAttribute("viewBox",c.join()),l.setAttribute("width",c[2]),l.setAttribute("height",c[3])}if(t.ext=="svg")if(e)e(t,s.innerHTML);else{(l=s.querySelector("svg")).classList.add("bft-"+n.config.mode);var d={content:s.innerHTML,options:t,styles:""},u=a.events.publish("exportstart",[n,d]),f=n.element.querySelector("[data-bft-styles]");if(f&&(d.styles+=f.outerHTML),d.styles&&(s.childNodes[0].insertAdjacentHTML("afterbegin",d.styles),d.content=s.innerHTML),u===!1||(u=a.events.publish("exportend",[n,d]))===!1)return!1;a._downloadFile(t.mime,d.content,d.options.filename,d.options.openInNewTab,d.options.ext)}else n._pages(t,s.querySelector("svg"),o,function(h){var p={content:s.innerHTML,options:t,pages:h,styles:""},v=a.events.publish("exportstart",[n,p]),y=n.element.querySelector("[data-bft-styles]");if(y&&(p.styles+=y.outerHTML),v===!1)return!1;e||a.loading.show(n),e?e(n,p,s.querySelector("svg")):(p=JSON.stringify(p),a._ajax(n.config.exportUrl+"/v3","POST",p,"arraybuffer",function(w){var g=a.events.publish("exportend",[n,w]);if(a.loading.hide(n),g===!1)return!1;a._downloadFile(t.mime,w,t.filename,t.openInNewTab,t.ext)}))})})},a.prototype.exportCSV=function(t){var e=a._defaultExportProfileOptionsForCSV_SVG_JSON(t,"csv"),n=this.getNode(e.nodeId),r=null;n?(r=[],a._exportIterateForJSON_XML_CSV(this,n,e,r)):e.min===!1||e.expandChildren===!1?a._exportIterateForJSON_XML_CSV(this,this.roots,e,r):r=JSON.parse(JSON.stringify(this.config.nodes));var i={ext:"csv",filename:t,options:e,nodes:r};if(a.events.publish("exportstart",[this,i])===!1)return!1;var o=a._json2csv(i.nodes),s={ext:i.ext,filename:i.filename,options:e,nodes:i.nodes,content:o};if(a.events.publish("exportend",[this,s])===!1)return!1;a._downloadFile("text/csv;charset=utf-8;","\uFEFF"+s.content,s.options.filename,s.options.openInNewTab,s.ext)},a.prototype.exportXML=function(t){var e=a._defaultExportProfileOptionsForCSV_SVG_JSON(t,"xml"),n=this.getNode(e.nodeId),r=null;n?(r=[],a._exportIterateForJSON_XML_CSV(this,n,e,r)):e.min===!1||e.expandChildren===!1?a._exportIterateForJSON_XML_CSV(this,this.roots,e,r):r=JSON.parse(JSON.stringify(this.config.nodes));var i={ext:"xml",filename:t,options:e,nodes:r};if(a.events.publish("exportstart",[this,i])===!1)return!1;var o=a._json2xml(i.nodes),s={ext:i.ext,filename:i.filename,options:e,nodes:i.nodes,content:o};if(a.events.publish("exportend",[this,s])===!1)return!1;a._downloadFile("application/xml",s.content,s.options.filename,s.options.openInNewTab,s.ext)},a.prototype.exportJSON=function(t){var e=a._defaultExportProfileOptionsForCSV_SVG_JSON(t,"json"),n=this.getNode(e.nodeId),r=null;n?(r=[],a._exportIterateForJSON_XML_CSV(this,n,e,r)):e.min===!1||e.expandChildren===!1?a._exportIterateForJSON_XML_CSV(this,this.roots,e,r):r=JSON.parse(JSON.stringify(this.config.nodes));var i={ext:"json",filename:e.filename,options:e,nodes:r};if(a.events.publish("exportstart",[this,i])===!1)return!1;var o={ext:i.ext,filename:i.filename,options:e,nodes:i.nodes,content:JSON.stringify(i.nodes)};if(a.events.publish("exportend",[this,o])===!1)return!1;a._downloadFile("application/json",o.content,o.options.filename,o.options.openInNewTab,o.ext)},a._exportIterateForJSON_XML_CSV=function(t,e,n,r){if(Array.isArray(e))for(var i=0;i<e.length;i++)a._exportIterateForJSON_XML_CSV(t,e[i],n,r);else{var o=t.get(e.id);if(r.push(o),n.min)for(i=0;i<e.stChildrenIds.length;i++)a._exportIterateForJSON_XML_CSV(t,t.getNode(e.stChildrenIds[i]),n,r);else for(i=0;i<e.stChildren.length;i++)a._exportIterateForJSON_XML_CSV(t,e.stChildren[i],n,r);if(n.expandChildren)for(i=0;i<e.childrenIds.length;i++)a._exportIterateForJSON_XML_CSV(t,t.getNode(e.childrenIds[i]),n,r);else for(i=0;i<e.children.length;i++)a._exportIterateForJSON_XML_CSV(t,e.children[i],n,r)}},a.prototype._pages=function(t,e,n,r){t.format=="A5"&&t.scale!="fit"||t.format=="A4"&&t.scale!="fit"||t.format=="A3"&&t.scale!="fit"||t.format=="A2"&&t.scale!="fit"||t.format=="A1"&&t.scale!="fit"||t.format=="Letter"&&t.scale!="fit"||t.format=="Legal"&&t.scale!="fit"?r(this._pagesA100(t,e,t.scale)):t.format=="A5"&&t.scale=="fit"||t.format=="A4"&&t.scale=="fit"||t.format=="A3"&&t.scale=="fit"||t.format=="A2"&&t.scale=="fit"||t.format=="A1"&&t.scale=="fit"||t.format=="Letter"&&t.scale=="fit"||t.format=="Legal"&&t.scale=="fit"?r(this._pagesAfit(t,e,n)):t.format=="fit"&&r(this._pagesFit(t,e))},a.prototype._pagesFit=function(t,e){var n=e.getAttribute("width"),r=e.getAttribute("height"),i=a._getViewBox(e),o={w:parseFloat(n),h:parseFloat(r)};return[{vb:i,size:{w:o.w+(t.margin[1]+t.margin[3]),h:o.h+(t.margin[0]+t.margin[2])},innerSize:o}]},a.prototype._pagesAfit=function(t,e,n){var r=e.getAttribute("width"),i=0,o=0;switch(t.format){case"A5":i=a.A5w,o=a.A5h;break;case"A4":i=a.A4w,o=a.A4h;break;case"A3":i=a.A3w,o=a.A3h;break;case"A2":i=a.A2w,o=a.A2h;break;case"A1":i=a.A1w,o=a.A1h;break;case"Letter":i=a.Letterw,o=a.Letterh;break;case"Legal":i=a.Legalw,o=a.Legalh}var s=t.landscape?o-(t.margin[1]+t.margin[3]):i-(t.margin[1]+t.margin[3]),l=(t.landscape,t.margin[0],t.margin[2],s/r);return this._pagesA100(t,e,100*l,n)},a.prototype._pagesA100=function(t,e,n,r){var i=a._getViewBox(e),o=0,s=0;switch(t.format){case"A5":o=a.A5w,s=a.A5h;break;case"A4":o=a.A4w,s=a.A4h;break;case"A3":o=a.A3w,s=a.A3h;break;case"A2":o=a.A2w,s=a.A2h;break;case"A1":o=a.A1w,s=a.A1h;break;case"Letter":o=a.Letterw,s=a.Letterh;break;case"Legal":o=a.Legalw,s=a.Legalh}var l=i[0],c=i[1],d=i[2],u=i[3],f={w:t.landscape?s-(t.margin[1]+t.margin[3]):o-(t.margin[1]+t.margin[3]),h:t.landscape?o-(t.margin[0]+t.margin[2]):s-(t.margin[0]+t.margin[2])},h={w:t.landscape?s:o,h:t.landscape?o:s};e.setAttribute("width",f.w),e.setAttribute("height",f.h);var p=f.w*(100/n),v=f.h*(100/n),y=l,w=c,g=[],b=!0;if(!a.EXPORT_PAGES_CUT_NODES&&t.scale=="fit"){e.setAttribute("preserveAspectRatio","xMinYMin");for(var _=Object.keys(r.bordersByRootIdAndLevel),E=r.bordersByRootIdAndLevel[_[0]],A=Object.keys(E).length,k=1;k<_.length;k++)A<Object.keys(r.bordersByRootIdAndLevel[_[k]]).length&&(E=r.bordersByRootIdAndLevel[_[k]],A=Object.keys(E).length);for(var I=0,x=0;;){for(x=I;!(A<=I);){if((E[I].maxY-E[I].minY)/(100/n)>f.h){b=!1;break}var S=(E[I].minY-E[x].minY)/(100/n);if(I==A-1&&(S=(E[I].maxY-E[x].minY)/(100/n)),S>f.h)break;I++}if(!b)break;var R=(I==A?E[I-1].maxY:E[I-1].minY)-E[x].minY;if(R==0){b=!1;break}if(T=(T=[y,E[x].minY,p,R]).join(),g.push({vb:T,innerSize:{w:f.x,h:R/(100/n)-1},size:h}),I==A)break;I--}g.length&&(g[g.length-1].innerSize.h+=1)}if(!b||a.EXPORT_PAGES_CUT_NODES||t.scale!="fit")for(e.setAttribute("preserveAspectRatio","xMinYMin slice"),g=[];y<d+l;){for(;w<u+c;){var T;T=(T=[y,w,p,v]).join(),g.push({vb:T,innerSize:f,size:h}),w+=v}y+=p,w=c}return g},a.prototype._defaultExportProfileOptions=function(t,e){return a.isNEU(t)||t.id==null||t.nodeId!=null||(t.nodeId=t.id),(a.isNEU(t)||a.isNEU(t.nodeId))&&console.error("options.nodeId is not defilned"),e=="svg"?(t.ext="svg",t.mime="image/svg+xml"):e=="pdf"?(t.mime="application/pdf",t.ext="pdf"):e=="png"&&(t.mime="image/png",t.ext="png"),t.margin==null&&(t.margin=[50,40,50,40]),t.padding==null&&(t.padding=0),t.landscape==null&&(t.landscape=!1),t.filename==null&&(t.filename="Profile."+t.ext),t.scale==null&&(t.scale="fit"),t.format==null&&(t.format="A4"),t.header==null&&(t.header=""),t.footer==null&&(t.footer=""),t.openInNewTab==null&&(t.openInNewTab=!1),t.mode==null&&(t.mode="bft-"+this.config.mode),t},a._defaultExportProfileOptionsForCSV_SVG_JSON=function(t,e){return a.isNEU(t)&&(t={}),typeof t=="string"&&(t={filename:t}),a.isNEU(t.filename)&&(t.filename=`FamilyTree.${e}`),a.isNEU(t.expandChildren)&&(t.expandChildren=!0),a.isNEU(t.min)&&(t.min=!0),a.isNEU(t.openInNewTab)&&(t.openInNewTab=!1),t},a.prototype._exportProfile=function(t,e){var n=this,r=0,i=0;switch(t.format){case"A5":r=a.A5w,i=a.A5h;break;case"A4":r=a.A4w,i=a.A4h;break;case"A3":r=a.A3w,i=a.A3h;break;case"A2":r=a.A2w,i=a.A2h;break;case"A1":r=a.A1w,i=a.A1h;break;case"Letter":r=a.Letterw,i=a.Letterh;break;case"Legal":r=a.Legalw,i=a.Legalh}var o={w:t.landscape?i-(t.margin[1]+t.margin[3]):r-(t.margin[1]+t.margin[3]),h:t.landscape?r-(t.margin[0]+t.margin[2]):i-(t.margin[0]+t.margin[2])},s={w:t.landscape?i:r,h:t.landscape?r:i},l=this.editUI.content(t.nodeId,!0,!0,"100%",!0).element;a.input.init(l);var c={content:l.outerHTML,options:t,pages:[{vb:"",innerSize:o,size:s}],styles:""};if(!e){if(a.events.publish("exportstart",[n,c])===!1)return!1;a.loading.show(n)}var d=this.element.querySelector("[data-bft-styles]");d&&(c.styles+=d.outerHTML);var u=this.getSvg().querySelector("defs");if(u)for(var f=0;f<u.children.length;f++)u.children[f].nodeName.toLowerCase()=="style"&&(c.styles+=u.children[f].outerHTML);c=JSON.stringify(c),a._ajax(this.config.exportUrl+"/v3","POST",c,"arraybuffer",function(h){if(e)e(n,h);else{var p=a.events.publish("exportend",[n,h]);if(a.loading.hide(n),p===!1)return!1;a._downloadFile(t.mime,h,t.filename,t.openInNewTab,t.ext)}})},a===void 0&&(a={}),a.events=function(){var t={};return{on:function(e,n,r){Array.isArray(t[e])||(t[e]=[]),t[e].push({listener:n,event_id:r})},removeAll:function(e){Array.isArray(t[e])||(t[e]=[]),t[e]=[]},remove:function(e,n,r){var i=!1;if(t[e]&&Array.isArray(t[e])&&t[e].length>0)for(var o=t[e].length-1;o>=0;o--)(!a.isNEU(r)&&!a.isNEU(n)&&t[e][o].event_id==r&&t[e][o].listener==n||!a.isNEU(r)&&a.isNEU(n)&&t[e][o].event_id==r||a.isNEU(r)&&!a.isNEU(n)&&t[e][o].listener==n||a.isNEU(r)&&a.isNEU(n))&&(t[e].splice(o,1),i=!0);return i},has:function(e,n){if(t[e]&&Array.isArray(t[e])&&t[e].length>0){if(a.isNEU(n))return!0;for(var r=0;r<t[e].length;r++)if(t[e][r].event_id==n)return!0}return!1},removeForEventId:function(e){for(var n in t)if(Array.isArray(t[n]))for(var r=t[n].length-1;r>=0;r--)t[n][r].event_id==e&&t[n].splice(r,1)},publish:function(e,n){if(t[e]){for(var r=[],i=0;i<t[e].length;i++){var o=t[e][i];o.event_id!=null&&o.event_id!=n[0]._event_id||r.push(o.listener)}if(r.length>0){var s=!0;for(i=0;i<r.length&&(n.length==1?s=r[i](n[0])&&s:n.length==2?s=r[i](n[0],n[1])&&s:n.length==3?s=r[i](n[0],n[1],n[2])&&s:n.length==4?s=r[i](n[0],n[1],n[2],n[3])&&s:n.length==5&&(s=r[i](n[0],n[1],n[2],n[3],n[4])&&s),s!==!1);i++);return s}}}}}(),a.prototype.importCSV=function(){var t=this,e=document.createElement("INPUT");e.setAttribute("type","file"),e.setAttribute("accept",".csv"),e.style.display="none",e.onchange=function(n){var r=n.target,i=new FileReader;i.onload=function(){var o=i.result,s=a._csvToArray(o),l=[],c=s[0];a._importSetColumnNames(c,function(d){for(var u=1;u<s.length;u++){for(var f={},h=0;h<s[u].length;h++){var p=d[h],v=s[u][h];f[p]=a._convertStringToArray(p,v)}f.id.trim()!=""&&l.push(f)}var y={nodes:l,columnNames:s[0]};a.events.publish("import",[t,y])!=0&&(t._putInUndoStack(),t.clearRedo(),t.config.nodes=y.nodes,a.events.publish("updated",[t]),t.filterUI.update(),t.draw())})},i.readAsText(r.files[0])},e.click()},a._importSetColumnNames=function(t,e){if(t.indexOf("id")==-1||t.indexOf("pid")==-1){var n=document.createElement("DIV"),r=document.createElement("P");r.style.padding="5px",r.style.color="rgb(122, 122, 122)",r.innerHTML=a.IMPORT_MESSAGE,n.appendChild(r);var i=document.createElement("div"),o=document.createElement("div"),s=document.createElement("div"),l=document.createElement("span");i.setAttribute("id","bft-sampleDialog"),i.style.height="260px",i.style.width="400px",i.style.background="white",i.style.border="0.5px solid grey",i.style.position="fixed",i.style.overflow="hidden",i.style.zIndex="99",o.setAttribute("id","title"),o.style.backgroundColor="#e5e5e5",o.style.fontWeight="bold",o.style.color="rgb(122, 122, 122)",o.style.height="20px",o.style.padding="3px 0 0 7px",l.setAttribute("id","close"),l.style.cursor="pointer",l.style.position="absolute",l.style.color="rgb(122, 122, 122)",l.style.fontWeight="bold",l.style.top="2px",l.style.zIndex=100,s.setAttribute("id","content"),s.style.padding="2px",o.innerHTML="Import Organizational Chart Data",l.innerHTML="&times;";var c=document.createElement("HR");c.style.height="0.1px",c.style.backgroundColor="#aeaeae",c.style.border="none",c.style.margin="0",i.appendChild(o),i.appendChild(c),s.appendChild(n),i.appendChild(s),i.appendChild(l),document.body.appendChild(i),a._importCenter(i),l.style.left=i.offsetWidth-20+"px";var d=document.createElement("div");d.setAttribute("id","overlay"),d.style.width="100%",d.style.height="100%",d.style.left=0,d.style.top=0,d.style.position="fixed",d.style.background="grey",d.style.opacity="0.5",d.style.zIndex=98,document.body.appendChild(d),i._overlay=d;var u=document.createElement("LABEL"),f=document.createTextNode("Name:");u.setAttribute("for","bft-id-select"),u.appendChild(f),u.style.fontSize="16px",u.style.color="rgb(122, 122, 122)",u.style.padding="5px",u.style.margin="5px",u.style.width="30%",u.style.textAlign="right",u.style.display="inline-block",n.appendChild(u);var h=document.createElement("SELECT");h.id="bft-id-select",h.style.fontSize="16px",h.style.color="rgb(122, 122, 122)",h.style.padding="5px",h.style.margin="5px",h.style.width="60%",h.style.border="1px solid #aeaeae",n.appendChild(h);var p=document.createElement("BR");n.appendChild(p);for(var v=0;v<t.length;v++){(_=document.createElement("option")).setAttribute("value",t[v]);var y=document.createTextNode(t[v]);_.appendChild(y),h.appendChild(_)}var w=document.createElement("LABEL"),g=document.createTextNode("Reports to:");w.setAttribute("for","pid-select"),w.appendChild(g),w.style.fontSize="16px",w.style.color="rgb(122, 122, 122)",w.style.padding="5px",w.style.margin="5px",w.style.width="30%",w.style.textAlign="right",w.style.display="inline-block",n.appendChild(w);var b=document.createElement("SELECT");for(b.id="pid-select",b.style.fontSize="16px",b.style.color="rgb(122, 122, 122)",b.style.padding="5px",b.style.margin="5px",b.style.width="60%",b.style.border="1px solid #aeaeae",n.appendChild(b),v=0;v<t.length;v++){var _;(_=document.createElement("option")).setAttribute("value",t[v]),y=document.createTextNode(t[v]),_.appendChild(y),b.appendChild(_)}var E=document.createElement("BUTTON");E.innerHTML="Import",E.style.fontSize="16px",E.style.color="rgb(122, 122, 122)",E.style.padding="5px 20px",E.style.margin="20px auto",E.style.display="block",E.onclick=function(){i.style.display="none",i._overlay&&i._overlay.parentNode.removeChild(i._overlay);var k=h.options[h.selectedIndex].value,I=t.indexOf(k);t[I]="id";var x=b.options[b.selectedIndex].value,S=t.indexOf(x);t[S]="pid",e(t)};var A=document.createElement("DIV");return A.appendChild(E),n.appendChild(A),l.onclick=function(k){i._overlay&&i._overlay.parentNode.removeChild(i._overlay),i.parentNode.removeChild(i),k.stopPropagation()},o.onmousedown=function(k){k=k||window.event,i._dragging=!0,i._originalLeft=i.offsetLeft,i._originalTop=i.offsetTop,i._mouseLeft=k.clientX,i._mouseTop=k.clientY},document.onmousemove=function(k){k=k||window.event,i._dragging&&(i.style.left=i._originalLeft+k.clientX-i._mouseLeft+"px",i.style.top=i._originalTop+k.clientY-i._mouseTop+"px")},document.onmouseup=function(k){k=k||window.event,i._dragging&&(i.style.left=i._originalLeft+k.clientX-i._mouseLeft+"px",i.style.top=i._originalTop+k.clientY-i._mouseTop+"px",i._dragging=!1)},i}e(t)},a._importCenter=function(t){t&&(t.style.left=(window.innerWidth-t.offsetWidth)/2+"px",t.style.top=(window.innerHeight-t.offsetHeight)/2+"px")},a.prototype.importXML=function(){var t=this,e=document.createElement("INPUT");e.setAttribute("type","file"),e.setAttribute("accept",".xml"),e.style.display="none",e.onchange=function(n){var r=n.target,i=new FileReader;i.onload=function(){var o=i.result,s=a._xml2json(o);a.events.publish("import",[t,s])!=0&&(t._putInUndoStack(),t.clearRedo(),t.config.nodes=s,a.events.publish("updated",[t]),t.filterUI.update(),t.draw())},i.readAsText(r.files[0])},e.click()},a.prototype.importJSON=function(){var t=this,e=document.createElement("INPUT");e.setAttribute("type","file"),e.setAttribute("accept",".json"),e.style.display="none",e.onchange=function(n){var r=n.target,i=new FileReader;i.onload=function(){var o=i.result,s=JSON.parse(o);a.events.publish("import",[t,s])!=0&&(t._putInUndoStack(),t.clearRedo(),t.config.nodes=s,a.events.publish("updated",[t]),t.filterUI.update(),t.draw())},i.readAsText(r.files[0])},e.click()},a.prototype.__importJSON=a.prototype.importJSON,a.prototype.importJSON=function(){this.config.roots=[],this.__importJSON()},a.prototype.__importCSV=a.prototype.importCSV,a.prototype.importCSV=function(){this.config.roots=[],this.__importCSV()},a.prototype.__importXML=a.prototype.importXML,a.prototype.importXML=function(){this.config.roots=[],this.__importXML()},a._importSetColumnNames=function(t,e){e(t)},a.prototype.expand=function(t,e,n){this._resetMovableNodes();var r={id:t,ids:e};this._draw(!1,a.action.expand,r,n)},a.prototype.collapse=function(t,e,n){this._resetMovableNodes();var r={id:t,ids:e};this._draw(!1,a.action.collapse,r,n)},a.prototype.expandCollapse=function(t,e,n,r){this._resetMovableNodes(),Array.isArray(e)||(e=[]),Array.isArray(n)||(n=[]);var i={id:t,expandIds:e,collapseIds:n,ids:e.concat(n)};this._draw(!1,a.action.collapse,i,r)},a.prototype.changeRoots=function(t,e,n){this.config.roots=e;var r={id:t,changeRoots:e};this._draw(!1,a.action.update,r,n)},a.prototype._resetMovableNodes=function(){if(a.RESET_MOVABLE_ONEXPANDCOLLAPSE&&this.config.movable!=null){for(var t=!1,e=0;e<this.config.nodes.length;e++){var n=this.config.nodes[e];n.movex!=null&&(n.movex=0,t=!0),n.movey!=null&&(n.movey=0,t=!0)}t&&a.events.publish("updated",[this])}},a.prototype.maximize=function(t,e,n,r){var i=this,o={id:t,options:{}};a.isNEU(o.id)&&(o.id=this.roots[0].id,o.all=!0),o.options.horizontal=!1,o.options.vertical=!1,e&&(o.options.horizontal=e),n&&(o.options.vertical=n),this._draw(!1,a.action.maximize,o,function(){i.ripple(t),r&&r()})},a.prototype.minimize=function(t,e){var n=this,r={id:t};a.isNEU(r.id)&&(r.id=this.roots[0].id,r.all=!0),this._draw(!1,a.action.minimize,r,function(){n.ripple(t),e&&e()})},a.prototype._expCollHandler=function(t){this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var e=this.getNode(t),n=this.getCollapsedIds(e);if(n.length){if(a.events.publish("expcollclick",[this,!1,t,n])===!1)return!1;this.expand(t,n,!1)}else{if(a.events.publish("expcollclick",[this,!0,t,e.childrenIds])===!1)return!1;this.collapse(t,e.childrenIds,!1)}},a.prototype._upHandler=function(t){this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var e=this._upHandlerCreateArgs(t);if(a.events.publish("up-click",[this,e])===!1)return!1;this.changeRoots(e.id,e.roots,!1)},a.prototype._upHandlerCreateArgs=function(t){var e,n=this.getNode(t),r=Object.assign([],this.config.roots),i=this.getNode(n.pid);if(i&&(e=i),e){if(Array.isArray(r)){var o=r.indexOf(n.id);o!=-1&&r.splice(o,1)}else r=[];r.push(e.id)}return{id:n.id,roots:r}},a.prototype._upHandlerCreateArgs=function(t){var e=this.getNode(t),n=Object.assign([],this.config.roots),r=this.getRecentRootsByNodeId(t);return Array.isArray(n)||(n=[]),a._changeRootOption(n,r,this.manager.rootList),{id:e.id,roots:n}},String.prototype.replaceAll||(String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"g"),e)}),String.prototype.endsWith||(String.prototype.endsWith=function(t){return this.indexOf(t,this.length-t.length)!==-1}),String.prototype.splice||(String.prototype.splice=function(t,e,n){return this.slice(0,t)+n+this.slice(t+Math.abs(e))}),String.prototype.insert||(String.prototype.insert=function(t,e){return t>0?this.substring(0,t)+e+this.substr(t):e+this}),Array.prototype.unique||Object.defineProperty(Array.prototype,"unique",{value:function(){for(var t=this.concat(),e=0;e<t.length;++e)for(var n=e+1;n<t.length;++n)t[e]===t[n]&&t.splice(n--,1);return t},writable:!0,configurable:!0,enumerable:!1}),Array.prototype.has||Object.defineProperty(Array.prototype,"has",{value:function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return!0;return!1},writable:!0,configurable:!0,enumerable:!1}),Array.prototype.compare||Object.defineProperty(Array.prototype,"compare",{value:function(t){if(this.length!=t.length)return!1;for(var e=0;e<this.length;e++)if(!t.has(this[e]))return!1;return!0},writable:!0,configurable:!0,enumerable:!1}),Object.assign||Object.defineProperty(Object,"assign",{value:function(t,e){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1;r<arguments.length;r++){var i=arguments[r];if(i!=null)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},writable:!0,configurable:!0}),a.prototype._globalMouseDownHandler=function(t,e){var n={move:"mousemove",up:"mouseup",leave:"mouseleave"};if(e.type.indexOf("touch")!=-1&&(e.touches.length==1?this._touch={x:e.touches[0].clientX,y:e.touches[0].clientY}:this._touch=null,n={move:"touchmove",up:"touchend",touchstart:"touchstart"}),t==e.target)return e.stopPropagation(),e.preventDefault(),void this._mouseDownHandler(t,e,n);if(this.config.nodeMouseClick==a.action.pan){for(var r=e.target;r!=t&&!r.hasAttribute(a.attr.control_expcoll_id)&&!r.hasAttribute(a.attr.control_up_id);)r=r.parentNode;if(!r.hasAttribute(a.attr.control_expcoll_id)&&!r.hasAttribute(a.attr.control_up_id))return e.stopPropagation(),e.preventDefault(),void this._mouseDownHandler(t,e,n)}for(var i=e.target;i!=t;){if(i.hasAttribute(a.attr.node_id))return void this._nodeMouseDownHandler(i,e,n);if(i.hasAttribute(a.attr.control_node_circle_menu_name))return e.stopPropagation(),e.preventDefault(),void this._nodeCircleNodeMenuItemMouseDownHandler(i,e,n);i=i.parentNode}},a.prototype._globalClickHandler=function(t,e){if(e.type.indexOf("touch")!=-1&&this._touch&&e.changedTouches.length==1){if(e.changedTouches.length){var n={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY},r=a.t(this.config.template,!1,this.getScale()).size,i=this.getScale(),o=Math.abs(n.x-this._touch.x)/i,s=Math.abs(n.y-this._touch.y)/i;if(this._touch=null,o>r[0]/10||s>r[1]/10)return}}else if(e.type.indexOf("touch")!=-1&&this._touch==null)return;for(var l=e.target;l!=t;){if(l.hasAttribute(a.attr.control_expcoll_id)){var c=l.getAttribute(a.attr.control_expcoll_id),d=this.getNode(c);return void this._expCollHandler(d.id)}if(l.hasAttribute(a.attr.node_id))return c=l.getAttribute(a.attr.node_id),d=this.getNode(c),void this._nodeClickHandler(d.id,e);if(l.hasAttribute(a.attr.control_node_menu_id))return e.stopPropagation(),e.preventDefault(),c=l.getAttribute(a.attr.control_node_menu_id),d=this.getNode(c),void this._nodeMenuClickHandler(d.id,l,e);if(l.hasAttribute(a.attr.control_node_circle_menu_id))return e.stopPropagation(),e.preventDefault(),c=l.getAttribute(a.attr.control_node_circle_menu_id),void this._nodeCircleMenuClickHandler(c);if(l.hasAttribute(a.attr.control_node_circle_menu_name))return e.stopPropagation(),e.preventDefault(),void this._nodeCircleMenuItemClickHandler(l,e);if(l.hasAttribute(a.attr.control_add))return void this._lonelyButtonHandler();if(l.hasAttribute(a.attr.control_up_id))return c=l.getAttribute(a.attr.control_up_id),e.stopPropagation(),e.preventDefault(),void this._upHandler(c);if(l.hasAttribute(a.attr.c_link_from))return void a.events.publish("clink-click",[this,{from:l.getAttribute(a.attr.c_link_from),to:l.getAttribute(a.attr.c_link_to),event:e}]);if(l.hasAttribute(a.attr.s_link_from))return void a.events.publish("slink-click",[this,{from:l.getAttribute(a.attr.s_link_from),to:l.getAttribute(a.attr.s_link_to),event:e}]);l=l.parentNode}},a.prototype._globalContextHandler=function(t,e){for(var n=e.target;n!=t;){if(n.hasAttribute(a.attr.node_id)){var r=n.getAttribute(a.attr.node_id),i=this.getNode(r);return void this._nodeContextHandler(i.id,e)}n=n.parentNode}},a.prototype._nodeContextHandler=function(t,e){e.preventDefault(),a.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var n=this.get(t),r=null;if(n!=null&&Array.isArray(n.tags))for(var i=0;i<n.tags.length;i++){var o=n.tags[i];this.config.tags[o]&&this.config.tags[o].nodeContextMenu&&(r=this.config.tags[o].nodeContextMenu)}var s=this.element.getBoundingClientRect(),l=e.clientX-s.left,c=e.clientY-s.top;this.nodeContextMenuUI.show(l,c,t,null,r)},a.prototype._globalDbClickHandler=function(t,e){for(var n=e.target;n!=t;){if(n.hasAttribute(a.attr.node_id)){var r=n.getAttribute(a.attr.node_id),i=this.getNode(r);return void this._nodeDbClickHandler(i.id,e)}n=n.parentNode}},a.prototype._mouseScrollHandler=function(t,e){this.__mouseScrollHandler(this.getSvg(),e)},a.prototype.__mouseScrollHandler=function(t,e){if(e.ctrlKey){if(this.config.mouseScrool==a.action.zoom)return}else if(this.config.mouseScrool==a.action.ctrlZoom||this.config.mouseScrool!=a.action.zoom)return;var n=this,r=!1,i=this.config.zoom.speed,o=this.config.zoom.smooth,s=0,l=this.getScale(),c=a._centerPointInPercent(t,e.pageX,e.pageY),d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(f){setTimeout(f,20)};e.preventDefault();var u=e.delta||e.wheelDelta;u===void 0&&(u=-e.detail),u=Math.max(-1,Math.min(1,u)),s+=-u*i,r||function f(){r=!0;var h=(s-l)/o;h>0?h++:h--,l+=h,n.zoom(1-h/12/50,c),parseInt(l)==parseInt(s)?r=!1:d(f)}()},a.prototype._nodeCircleNodeMenuItemMouseDownHandler=function(t,e,n){var r=t.parentNode.getAttribute(a.attr.control_node_circle_menu_wrraper_id),i=t.getAttribute(a.attr.control_node_circle_menu_name),o=this.nodeCircleMenuUI._menu[i];if(o.draggable){var s=this,l=a._getClientXY(e),c=this.getNode(r);t._dragEventFired=!1;var d=s.getScale(),u=null,f=null;this._gragStartedId=r,document.body.style.mozUserSelect=document.body.style.webkitUserSelect=document.body.style.userSelect="none";var h=this.getSvg(),p={x:l.x,y:l.y},v=t.cloneNode(!0);h.insertBefore(v,h.firstChild);var y=a._getTransform(v),w=y[4],g=y[5],b=function(k){for(;k&&!k.hasAttribute(a.attr.control_node_circle_menu_wrraper_id);)k=k.parentNode;if(k){var I=a._getTransform(k);return{x:I[4],y:I[5]}}console.error("cannot find parent"+a.attr.control_node_circle_menu_wrraper_id)}(t);v.setAttribute("transform","matrix(1,0,0,1,"+(w+b.x)+","+(g+b.y)+")"),v.style.opacity=.7;var _=function(k,I){if(k!=null){I.classList.remove("bft-drag-over");for(var x=a.getStParentNodes(s.getNode(u)),S=0;S<x.length;S++){var R=s.getNodeElement(x[S].id);R&&(R.style.opacity=1)}}},E=function(k){if(p){var I=a._getClientXY(k),x=k.target;a.isMobile()&&(x=document.elementFromPoint(I.x,I.y)),I.x+=b.x*d,I.y+=b.y*d;var S=a._getOffsetXY(s.element,k),R={left:s.width()-(S.x+s.config.padding)<0,right:S.x-s.config.padding<0,up:s.height()-(S.y+s.config.padding)<0,down:S.y-s.config.padding<0};if(R.left||R.right||R.up||R.down){h.classList&&(h.classList.remove("bft-cursor-grab"),h.classList.add("bft-cursor-move"),h.classList.remove("bft-cursor-nodrop"),h.classList.remove("bft-cursor-copy"));var T=y[4],N=y[5],P=p.x,V=p.y,$=I.x,D=I.y;s.moveStart(R,function(Y){y[4]=T+Y.x,y[5]=N+Y.y,p.x=P-Y.xWithoutScale,p.y=V-Y.yWithoutScale,I.x=$-Y.xWithoutScale,I.y=D-Y.yWithoutScale,v.setAttribute("transform","matrix("+y.toString()+")")})}else{for(s.moveEnd(),h.classList&&(h.classList.add("bft-cursor-grab"),h.classList.remove("bft-cursor-move"),h.classList.remove("bft-cursor-nodrop"),h.classList.remove("bft-cursor-copy")),_(u,f),u=null,f=null;x!=null&&x!=h;){if(x.hasAttribute&&x.hasAttribute(a.attr.node_id)){var O=x.getAttribute(a.attr.node_id);u=O,f=x;break}x=x.parentNode}if(u!=null){f.classList.add("bft-drag-over");for(var B=s.getNode(u),j=a.getStParentNodes(B),z=0;z<j.length;z++){var W=s.getNodeElement(j[z].id);W&&(W.style.opacity=.1)}h.classList.remove("bft-cursor-grab"),h.classList.remove("bft-cursor-move"),h.classList.add("bft-cursor-copy"),h.classList.remove("bft-cursor-nodrop")}var G=(I.x-p.x)/d,H=(I.y-p.y)/d;y[4]=w+G,y[5]=g+H,!t._dragEventFired&&(Math.abs(I.x-p.x)>a.FIRE_DRAG_NOT_CLICK_IF_MOVE||Math.abs(I.y-p.y)>a.FIRE_DRAG_NOT_CLICK_IF_MOVE)&&(a.events.publish("drag",[s.nodeCircleMenuUI,{from:O,menuItem:o,menuItemName:i}])===!1&&A(),t._dragEventFired=!0),v.setAttribute("transform","matrix("+y.toString()+")")}}},A=function(k){if(s.moveEnd(),h.classList&&(h.classList.remove("bft-cursor-grab"),h.classList.remove("bft-cursor-move"),h.classList.remove("bft-cursor-nodrop"),h.classList.remove("bft-cursor-copy")),h.removeEventListener(n.move,E),h.removeEventListener(n.up,A),n.leave&&h.removeEventListener(n.leave,A),c.id==u||u==null)return h.removeChild(v),s._gragStartedId=null,void(t._dragEventFired&&a.events.publish("drop",[s.nodeCircleMenuUI,{from:c.id,menuItemName:i,menuItem:o,event:k}]));var I=s.getNode(u);a.events.publish("drop",[s.nodeCircleMenuUI,{from:c.id,to:I.id,menuItem:o,menuItemName:i,event:k}]),_(u,f),h.removeChild(v),s._gragStartedId=null};h.addEventListener(n.move,E),h.addEventListener(n.up,A),n.leave&&h.addEventListener(n.leave,A)}},a.prototype._nodeMouseDownHandler=function(t,e,n){var r=t.getAttribute(a.attr.node_id),i=this.getNode(r);this.config.movable&&!a.getRootOf(i).stParent?this._movableHandler(t,e,n):this.config.enableDragDrop&&this._dragDropHandler(t,e,n)},a.prototype._movableHandler=function(t,e,n){var r=this,i=t.getAttribute(a.attr.node_id),o=[],s=function(D,O){if(Array.isArray(D))for(var B=0;B<D.length;B++)s(D[B],O);else{for(O.push(D.id),B=0;B<D.stChildren.length;B++)s(D.stChildren[B],O);for(B=0;B<D.children.length;B++)s(D.children[B],O)}},l=function(D,O){if(Array.isArray(D))for(var B=0;B<D.length;B++)s(D[B],O);else{for(O.push(D.id),B=0;B<D.stChildrenIds.length;B++)l(r.getNode(D.stChildrenIds[B]),O);for(B=0;B<D.childrenIds.length;B++)l(r.getNode(D.childrenIds[B]),O)}},c=this.getNode(i);s(c,o);for(var d=this.getSvg(),u=a._getClientXY(e),f=[],h=[],p=[],v=[],y=[],w=[],g=[],b=[],_=0;_<o.length;_++){var E=this.getNode(o[_]);f.push(E),p.push({x:E.x,y:E.y});var A=this.getNodeElement(o[_]);if(A){y.push(A);var k=a._getTransform(A);v.push({x:k[4],y:k[5]}),h.push(k);var I=this.element.querySelector(`[data-ctrl-ec-id="${o[_]}"]`);if(I){w.push(I);var x=a._getTransform(I);g.push(x),b.push({x:x[4],y:x[5]})}else w.push(null),g.push(null),b.push(null);if(this.config.movable==a.movable.node)break}}t._dragEventFired=!1;var S=null,R=null;this._gragStartedId=o[0],document.body.style.mozUserSelect=document.body.style.webkitUserSelect=document.body.style.userSelect="none";var T={x:u.x,y:u.y},N=r.getScale(),P=function(D,O){if(D!=null){O.classList.remove("bft-drag-over");for(var B=r.getNode(S),j=a.getStParentNodes(B),z=0;z<j.length;z++){var W=r.getNodeElement(j[z].id);W&&(W.style.opacity=1)}}},V=function(D){if(T){var O=a._getClientXY(D),B=D.target;a.isMobile()&&(B=document.elementFromPoint(O.x,O.y));var j=a._getOffsetXY(r.element,D),z={left:r.width()-(j.x+r.config.padding)<0,right:j.x-r.config.padding<0,up:r.height()-(j.y+r.config.padding)<0,down:j.y-r.config.padding<0};if(z.left||z.right||z.up||z.down){d.classList&&(d.classList.remove("bft-cursor-grab"),d.classList.add("bft-cursor-move"),d.classList.remove("bft-cursor-nodrop"),d.classList.remove("bft-cursor-copy"));for(var W=[],G=[],H=[],Y=[],q=0;q<h.length;q++)W.push(h[q][4]),G.push(h[q][5]),g[q]?(H.push(g[q][4]),Y.push(g[q][5])):(H.push(null),Y.push(null));var Q=T.x,J=T.y,ne=O.x,oe=O.y;r.moveStart(z,function(Ne){for(var de=0;de<h.length;de++){var nt=W[de],De=G[de],Ve=H[de],mt=Y[de];h[de][4]=nt+Ne.x,h[de][5]=De+Ne.y,T.x=Q-Ne.xWithoutScale,T.y=J-Ne.yWithoutScale,O.x=ne-Ne.xWithoutScale,O.y=oe-Ne.yWithoutScale,f[de].x=nt+Ne.x,f[de].y=De+Ne.y,f[de].movex=Ne.x,f[de].movey=Ne.y,g[de]&&(g[de][4]=Ve+Ne.x,g[de][5]=mt+Ne.y);for(var Se=a.ui.link(f[de],r,N,r.response.bordersByRootIdAndLevel,r.nodes,a.action.update,!0),ke=0;ke<Se.length;ke++){var Be=Se[ke];($e=r.element.querySelector(`[data-l-id="[${Be.id}][${Be.childId}]"]`))&&($e.innerHTML=Be.html)}if(f[de].parent)for(Se=a.ui.link(f[de].parent,r,N,r.response.bordersByRootIdAndLevel,r.nodes,a.action.update,!0),ke=0;ke<Se.length;ke++){var $e;Be=Se[ke],($e=r.element.querySelector(`[data-l-id="[${Be.id}][${Be.childId}]"]`))&&($e.innerHTML=Be.html)}y[de].setAttribute("transform","matrix("+h[de].toString()+")"),w[de]&&w[de].setAttribute("transform","matrix("+g[de].toString()+")")}})}else{if(r.moveEnd(),d.classList&&(d.classList.add("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.remove("bft-cursor-nodrop"),d.classList.remove("bft-cursor-copy")),P(S,R),S=null,R=null,r.config.enableDragDrop)for(;B!=null&&B!=d;){if(B.hasAttribute&&B.hasAttribute(a.attr.node_id)){var se=B.getAttribute(a.attr.node_id);if(r._gragStartedId&&se!=r._gragStartedId){S=se,R=B;break}}B=B.parentNode}if(S!=null){R.classList.add("bft-drag-over");for(var ae=r.getNode(S),ie=a.getStParentNodes(ae),we=0;we<ie.length;we++){var Te=r.getNodeElement(ie[we].id);Te&&(Te.style.opacity=.1)}!r.canUpdateLink(f[0].id,S)&&d.classList?(d.classList.remove("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.remove("bft-cursor-copy"),d.classList.add("bft-cursor-nodrop")):d.classList&&(d.classList.remove("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.add("bft-cursor-copy"),d.classList.remove("bft-cursor-nodrop"))}var ye=(O.x-T.x)/N,Fe=(O.y-T.y)/N;for(q=0;q<h.length;q++){h[q][4]=v[q].x+ye,h[q][5]=v[q].y+Fe,g[q]&&(g[q][4]=b[q].x+ye,g[q][5]=b[q].y+Fe),f[q].x=p[q].x+ye,f[q].y=p[q].y+Fe,f[q].movex=ye,f[q].movey=Fe;var Ce=a.ui.link(f[q],r,N,r.response.bordersByRootIdAndLevel,r.nodes,a.action.update,!0);for(we=0;we<Ce.length;we++){var Ae=Ce[we];(fe=r.element.querySelector(`[data-l-id="[${Ae.id}][${Ae.childId}]"]`))&&(fe.innerHTML=Ae.html)}}if(c.parent)if(r.config.movable==a.movable.detachTree)(fe=r.element.querySelector(`[data-l-id="[${c.parent.id}][${c.id}]"]`))&&fe.parentElement.removeChild(fe);else for(Ce=a.ui.link(c.parent,r,N,r.response.bordersByRootIdAndLevel,r.nodes,a.action.update,!0),we=0;we<Ce.length;we++){var fe;Ae=Ce[we],(fe=r.element.querySelector(`[data-l-id="[${Ae.id}][${Ae.childId}]"]`))&&(fe.innerHTML=Ae.html)}if(!t._dragEventFired&&(Math.abs(O.x-T.x)>a.FIRE_DRAG_NOT_CLICK_IF_MOVE||Math.abs(O.y-T.y)>a.FIRE_DRAG_NOT_CLICK_IF_MOVE)){if(a.events.publish("drag",[r,i,D,o])===!1&&$(),r.config.enableDragDrop)for(q=0;q<y.length;q++)d.insertBefore(y[q],d.firstChild);t._dragEventFired=!0}for(q=0;q<h.length;q++)y[q].setAttribute("transform","matrix("+h[q].toString()+")"),w[q]&&w[q].setAttribute("transform","matrix("+g[q].toString()+")")}}},$=function(D){for(var O=0;O<f.length;O++)f[O].x=p[O].x,f[O].y=p[O].y;if(r.moveEnd(),d.classList&&(d.classList.remove("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.remove("bft-cursor-nodrop"),d.classList.remove("bft-cursor-copy")),d.removeEventListener(n.move,V),d.removeEventListener(n.up,$),n.leave&&d.removeEventListener(n.leave,$),f[0].id!=S&&S!=null){var B=r.getNode(S);if((j=a.events.publish("drop",[r,f[0].id,B.id,y[0],D]))===!1)return P(S,R),void(r._gragStartedId=null);r.canUpdateLink(f[0].id,S)?((Y=r.get(f[0].id)).pid=S,Y.stpid=null,r.updateNode(Y,null,!0)):P(S,R),r._gragStartedId=null}else{if(t._dragEventFired){var j=a.events.publish("drop",[r,f[0].id,void 0,y[0],D]);if(r.config.movable&&j!==!1)if(r.config.movable==a.movable.detachTree){var z=a._getTransform(r.getNodeElement(c.id));(Y=r.get(c.id)).pid=null,Y.stpid=null,r.updateNode(Y,null,!0)}else{var W=[];r.config.movable==a.movable.node?W.push(c.id):l(c,W);var G=(z=a._getTransform(r.getNodeElement(c.id)))[4]-c.x,H=z[5]-c.y;for(O=0;O<W.length;O++){var Y;(Y=r.get(W[O]))&&(Y.movex!=null?Y.movex+=G:Y.movex=G,Y.movey!=null?Y.movey+=H:Y.movey=H,r.update(Y))}a.events.publish("updated",[r]),r.draw(a.action.update,{dragNodeIdList:W})}}r._gragStartedId=null}};d.addEventListener(n.move,V),d.addEventListener(n.up,$),n.leave&&d.addEventListener(n.leave,$)},a.prototype._dragDropHandler=function(t,e,n){var r=a._getClientXY(e),i=t.getAttribute(a.attr.node_id),o=this.getNode(i);t._dragEventFired=!1;var s=null,l=null;this._gragStartedId=i,this.element.style.mozUserSelect=this.element.style.webkitUserSelect=this.element.style.userSelect="none";var c=this,d=this.getSvg(),u={x:r.x,y:r.y},f=a._getTransform(t),h=f[4],p=f[5],v=c.getScale(),y=t.cloneNode(!0);y.setAttribute("data-n-id","draging"),d.insertBefore(y,d.firstChild),y.style.opacity=.7;var w=function(_,E){if(_!=null){E.classList.remove("bft-drag-over");for(var A=c.getNode(s),k=a.getStParentNodes(A),I=0;I<k.length;I++){var x=c.getNodeElement(k[I].id);x&&(x.style.opacity=1)}}},g=function(_){if(u){var E=a._getClientXY(_),A=_.target;a.isMobile()&&(A=document.elementFromPoint(E.x,E.y));var k=a._getOffsetXY(c.element,_),I={left:c.width()-(k.x+c.config.padding)<0,right:k.x-c.config.padding<0,up:c.height()-(k.y+c.config.padding)<0,down:k.y-c.config.padding<0};if(I.left||I.right||I.up||I.down){d.classList&&(d.classList.remove("bft-cursor-grab"),d.classList.add("bft-cursor-move"),d.classList.remove("bft-cursor-nodrop"),d.classList.remove("bft-cursor-copy"));var x=f[4],S=f[5],R=u.x,T=u.y,N=E.x,P=E.y;c.moveStart(I,function(W){f[4]=x+W.x,f[5]=S+W.y,u.x=R-W.xWithoutScale,u.y=T-W.yWithoutScale,E.x=N-W.xWithoutScale,E.y=P-W.yWithoutScale,y.setAttribute("transform","matrix("+f.toString()+")")})}else{if(c.moveEnd(),d.classList&&(d.classList.add("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.remove("bft-cursor-nodrop"),d.classList.remove("bft-cursor-copy")),w(s,l),s=null,l=null,c.config.enableDragDrop)for(;A!=null&&A!=d;){if(A.hasAttribute&&A.hasAttribute(a.attr.node_id)){var V=A.getAttribute(a.attr.node_id);if(c._gragStartedId&&V!=c._gragStartedId){s=V,l=A;break}}A=A.parentNode}if(s=="draging"&&(s=null,l=null),s!=null){l.classList.add("bft-drag-over");for(var $=c.getNode(s),D=a.getStParentNodes($),O=0;O<D.length;O++){var B=c.getNodeElement(D[O].id);B&&(B.style.opacity=.1)}!c.canUpdateLink(o.id,s)&&d.classList?(d.classList.remove("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.remove("bft-cursor-copy"),d.classList.add("bft-cursor-nodrop")):d.classList&&(d.classList.remove("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.add("bft-cursor-copy"),d.classList.remove("bft-cursor-nodrop"))}var j=(E.x-u.x)/v,z=(E.y-u.y)/v;f[4]=h+j,f[5]=p+z,!t._dragEventFired&&(Math.abs(E.x-u.x)>a.FIRE_DRAG_NOT_CLICK_IF_MOVE||Math.abs(E.y-u.y)>a.FIRE_DRAG_NOT_CLICK_IF_MOVE)&&(a.events.publish("drag",[c,V,_])===!1&&b(),t._dragEventFired=!0),y.setAttribute("transform","matrix("+f.toString()+")")}}},b=function(_){if(c.moveEnd(),d.classList&&(d.classList.remove("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.remove("bft-cursor-nodrop"),d.classList.remove("bft-cursor-copy")),d.removeEventListener(n.move,g),d.removeEventListener(n.up,b),n.leave&&d.removeEventListener(n.leave,b),o.id==s||s==null)return t._dragEventFired&&a.events.publish("drop",[c,o.id,void 0,y,_]),d.removeChild(y),void(c._gragStartedId=null);var E=c.getNode(s);if(a.events.publish("drop",[c,o.id,E.id,y,_])===!1)return w(s,l),d.removeChild(y),void(c._gragStartedId=null);if(c.canUpdateLink(o.id,s)){var A=c.get(o.id);A.pid=s,A.stpid=null,A.movex!=null&&(A.movex=void 0),A.movey!=null&&(A.movey=void 0),c.updateNode(A,null,!0)}else d.removeChild(y),w(s,l);c._gragStartedId=null};d.addEventListener(n.move,g),d.addEventListener(n.up,b),n.leave&&d.addEventListener(n.leave,b)},a.prototype._resizeHandler=function(t,e){if(this.isVisible){var n=this.getViewBox(),r=this.getSvg(),i=r.getAttribute("width"),o=r.getAttribute("height"),s=i/n[2],l=o/n[3],c=s>l?l:s;r.setAttribute("width",this.width()),r.setAttribute("height",this.height()),n[2]=this.width()/c,n[3]=this.height()/c,this.setViewBox(n),this.xScrollUI.create(this.width()),this.yScrollUI.create(this.height()),this._draw(!1,a.action.resize)}},a.prototype._nodeDbClickHandler=function(t,e){if(a.events.publish("dbclick",[this,this.get(t)])===!1)return!1;this._commonClickHandler(t,e,this.config.nodeMouseDbClick)},a.prototype._nodeClickHandler=function(t,e){var n=this.getNodeElement(t);if(n&&n._dragEventFired)n._dragEventFired=!1;else{if(a.events.publish("click",[this,{node:this.getNode(t),event:e}])===!1)return!1;this._commonClickHandler(t,e,this.config.nodeMouseClick)}},a.prototype._nodeCircleMenuItemClickHandler=function(t,e){var n=t.parentNode.getAttribute(a.attr.control_node_circle_menu_wrraper_id),r=t.getAttribute(a.attr.control_node_circle_menu_name),i=this.nodeCircleMenuUI._menu[r];a.events.publish("click",[this.nodeCircleMenuUI,{nodeId:n,menuItemName:r,menuItem:i,event:e}])},a.prototype._nodeCircleMenuClickHandler=function(t){a.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide();var e=this.getNode(t),n=null;if(Array.isArray(e.tags))for(var r=0;r<e.tags.length;r++){var i=e.tags[r];this.config.tags[i]&&this.config.tags[i].nodeCircleMenu&&(n=this.config.tags[i].nodeCircleMenu)}this.nodeCircleMenuUI.show(t,n)},a.prototype._commonClickHandler=function(t,e,n){var r;a.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide(),n==a.action.expandCollapse&&this.toggleExpandCollapse(t,e),n==a.action.edit&&(r=this.getNode(t))&&(this.editUI.show(r.id),this.ripple(r.id,e.clientX,e.clientY)),n==a.action.details&&(r=this.getNode(t))&&(this.editUI.show(r.id,!0),this.ripple(r.id,e.clientX,e.clientY))},a.prototype._menuHandlerMouseDownHandler=function(t,e){e.stopPropagation(),e.preventDefault()},a.prototype._nodeMenuClickHandler=function(t,e,n){a.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var r=this.getNode(t),i=null;if(Array.isArray(r.tags))for(var o=0;o<r.tags.length;o++){var s=r.tags[o];this.config.tags[s]&&this.config.tags[s].nodeMenu&&(i=this.config.tags[s].nodeMenu)}this.nodeMenuUI.showStickIn(e,t,null,i)},a.prototype._menuClickHandler=function(t,e){e.stopPropagation(),e.preventDefault(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.show(t.offsetLeft,t.offsetTop)},a.prototype._lonelyButtonHandler=function(){var t={id:this.generateId()};this.addNode(t,null,!0)!==!1&&this.center(t.id)},a.prototype.toggleExpandCollapse=function(t,e){var n=this.getNode(t),r=this.getCollapsedIds(n);if(r.length){if(a.events.publish("expcollclick",[this,!1,t,r])===!1)return!1;this.expand(t,r,!1)}else{if(a.events.publish("expcollclick",[this,!0,t,n.childrenIds])===!1)return!1;this.collapse(t,n.childrenIds,!1)}e&&this.ripple(n.id,e.clientX,e.clientY)},a.prototype._move=function(t,e,n){n[0]=e,n[1]=t,this.setViewBox(n),this.xScrollUI.setPosition(),this.yScrollUI.setPosition()},a.prototype.moveStart=function(t,e,n,r){if(t){if(!this._moveInterval){var i=this,o=this.getViewBox().slice(0),s=this.getScale(),l=0,c=0,d=1;a.isNEU(n)&&(n=a.anim.inSin),a.isNEU(r)&&(r=3e3),this._moveInterval=setInterval(function(){var u={x:0,y:0,xWithoutScale:0,yWithoutScale:0};t.left?(l++,u.x=l*a.MOVE_STEP/s,u.xWithoutScale=l*a.MOVE_STEP):t.right&&(l++,u.x=-l*a.MOVE_STEP/s,u.xWithoutScale=-l*a.MOVE_STEP),t.up?(c++,u.y=c*a.MOVE_STEP/s,u.yWithoutScale=c*a.MOVE_STEP):t.down&&(c++,u.y=-c*a.MOVE_STEP/s,u.yWithoutScale=-c*a.MOVE_STEP);var f=n((10*d-10)/r);u.x=u.x*f,u.xWithoutScale=u.xWithoutScale*f,u.y=u.y*f,u.yWithoutScale=u.yWithoutScale*f,i.setViewBox([o[0]+u.x,o[1]+u.y,o[2],o[3]]),e&&e(u),d+=1},10)}}else console.error("movePosition parameter not defined")},a.prototype.moveEnd=function(){this._moveInterval&&(clearInterval(this._moveInterval),this._moveInterval=null)},a===void 0&&(a={}),a.node=function(t,e,n,r){this.templateName=r,this.id=t,this.pid=e,this.children=[],this.childrenIds=[],this.parent=null,this.stpid=null,this.stParent=null,this.stChildren=[],this.stChildrenIds=[],this.tags=n,this.tags||(this.tags=[])},a.prototype._mouseDownHandler=function(t,e,n){var r=this;a.HIDE_EDIT_FORM_ON_PAN&&this.editUI.hide(),a.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var i=this.getViewBox(),o=this.getScale(),s=a._getClientTouchesXY(e,0),l=a._getClientTouchesXY(e,1),c={diffX:0,diffY:0,x0:s.x,y0:s.y,type:"pan",viewBoxLeft:i[0],viewBoxTop:i[1]};e.touches&&e.touches.length>1&&(c.type="pinch",c.dist=Math.sqrt((s.x-l.x)*(s.x-l.x)+(s.y-l.y)*(s.y-l.y))),c.type=="pan"&&(this._hideBeforeAnimation(),this._changeCursorOnPanStart(i,o,e));var d=function(f){var h=a._getClientTouchesXY(f,0);if(c&&c.type=="pan"){r._hideBeforeAnimation(),c.diffX=h.x-c.x0,c.diffY=h.y-c.y0;var p=-c.diffY/o+c.viewBoxTop,v=-c.diffX/o+c.viewBoxLeft;r._move(p,v,i)}else if(c&&c.type=="pinch"){var y=a._getClientTouchesXY(f,1),w=Math.sqrt((h.x-y.x)*(h.x-y.x)+(h.y-y.y)*(h.y-y.y)),g=1+(w-c.dist)/(c.dist/100)/100;c.dist=w;var b=a._pinchMiddlePointInPercent(r.element,r.width(),r.height(),f);r.zoom(g,b)}},u=function(){c.type=="pan"&&r.config.sticky?setTimeout(function(){a._moveToBoundaryArea(t,r.getViewBox(),r.response.boundary,function(){r._draw(!0,a.action.pan)})},0):c.type!="pan"||r.config.sticky||setTimeout(function(){r._draw(!0,a.action.pan)},0),c.type=="pan"&&r._changeCursorOnPanEnd(),c=null,t.removeEventListener(n.move,d),t.removeEventListener(n.up,u),n.leave&&t.removeEventListener(n.leave,u),n.touchstart&&t.removeEventListener(n.touchstart,u)};this.config.enablePan&&(t.addEventListener(n.move,d),t.addEventListener(n.up,u),n.leave&&t.addEventListener(n.leave,u),n.touchstart&&t.addEventListener(n.touchstart,u))},a.prototype._changeCursorOnPanStart=function(t,e,n){var r=this.getPointerElement(),i=a._getOffsetXY(this.element,n),o=i.x/e+t[0]-16/e,s=i.y/e+t[1]-16/e;r.style.display="inherit",r.setAttribute("transform","matrix(0,0,0,0,"+o+","+s+")"),a.animate(r,{transform:[0,0,0,0,o,s],opacity:0},{transform:[1/e,0,0,1/e,o,s],opacity:1},300,a.anim.outBack)},a.prototype._changeCursorOnPanEnd=function(){this.getPointerElement().style.display="none"},a.searchUI=function(){this.lastSearch=[],this._searchAfterEnterPress=!1,this._event_id=a._guid(),this.instance=null},a.searchUI.prototype.init=function(t){this.instance=t,this.obj=this.instance,this._initSearchFields();var e=this,n=this.instance.config.padding-10,r=this.instance.config.padding-10,i=this.instance.getMenuButton();if(i){var o=i.getBoundingClientRect(),s=this.instance.getSvg().getBoundingClientRect();n=s.right-o.left+10,r=o.top-s.top-10}var l=document.createElement("div");l.classList.add("bft-search"),l.style.right=n+"px",l.style.top=r+"px";var c=a.elements.textbox({},{label:a.SEARCH_PLACEHOLDER,btn:"X"},"160px");l.innerHTML+=c.html,this.xBtn=l.querySelector("[data-input-btn]"),this.xBtn.style.display="none",this.searchTableWrapper=document.createElement("div"),l.appendChild(this.searchTableWrapper);var d=this.instance.getSvg().nextSibling;this.instance.element.insertBefore(l,d),a.input.init(l),this.input=document.getElementById(c.id),this.xBtn.addEventListener("click",function(h){h.preventDefault(),e.hide()}),this.input.addEventListener("keypress",function(h){h.key=="Enter"&&h.preventDefault()}),this.input.addEventListener("focus",function(h){e.xBtn.style.display="",e._search()}),this.input.addEventListener("blur",function(h){a.isNEU(e.input.value)&&a.SEARCH_HELP_SYMBOL!=e.input.value&&(e.xBtn.style.display="none")}),this.input.addEventListener("keydown",function(h){(h.key=="ArrowDown"||h.key=="ArrowUp")&&h.preventDefault()}),this.input.addEventListener("keyup",function(h){h.key=="ArrowDown"?u():h.key=="ArrowUp"?f():h.key=="Enter"?e._enterHandler():h.key=="Escape"?e.hide():e._search()});var u=function(){var h=e.instance.element.querySelectorAll("[data-search-item-id]"),p=e.instance.element.querySelector('[data-selected="yes"]');p==null&&h.length>0?h[0].setAttribute("data-selected","yes"):h.length>0&&p.nextSibling&&p.nextSibling.setAttribute&&(p.removeAttribute("data-selected"),p.nextSibling.setAttribute("data-selected","yes"))},f=function(){var h=e.instance.element.querySelectorAll("[data-search-item-id]"),p=e.instance.element.querySelector('[data-selected="yes"]');p==null&&h.length>0?h[h.length-1].setAttribute("data-selected","yes"):h.length>0&&p.previousSibling&&p.previousSibling.setAttribute&&(p.removeAttribute("data-selected"),p.previousSibling.setAttribute("data-selected","yes"))}},a.searchUI.prototype._enterHandler=function(){var t=this.instance.element.querySelector('[data-selected="yes"]');if(t){if(t.hasAttribute("data-search-item-id")){var e=t.getAttribute("data-search-item-id");if(this.input.value!=a.SEARCH_HELP_SYMBOL){var n=a.events.publish("",[this.instance,e]),r=a.events.publish("searchclick",[this,{nodeId:e}]);n===!1&&(r=!1),r!=0&&this.instance.center(e)}else this.input.value=e+" ",this.searchTableWrapper.innerHTML=""}}else this._searchAfterEnterPress=!0,this.__search(),this.searchTableWrapper.innerHTML="",this.instance.draw()},a.searchUI.prototype._initSearchFields=function(){if(this.instance.config.searchFields==null){this._searchFields=[];for(var t=0;t<this.instance.response.allFields.length;t++){var e=this.instance.response.allFields[t];e=="tags"||a._fieldIsImg(this.instance.config,e)||this._searchFields.indexOf(e)==-1&&this._searchFields.push(e)}}else this._searchFields=this.instance.config.searchFields;if(this.instance.config.searchFieldsAbbreviation==null)for(this.searchFieldsAbbreviation={},t=0;t<this._searchFields.length;t++){for(var n=this._searchFields[t],r=0,i=n.slice(0,r+1).toLowerCase();this.searchFieldsAbbreviation[i];)r++,i=n.slice(0,r+1).toLowerCase();this.searchFieldsAbbreviation[i]=n}else this.searchFieldsAbbreviation=this.instance.config.searchFieldsAbbreviation;this._searchFieldsAbbreviation=this.searchFieldsAbbreviation},a.searchUI.prototype.find=function(t){this.input&&(this.input.value=t,document.activeElement==this.input?this._search(t):this.input.focus())},a.searchUI.prototype.addMatchTag=function(t){if(this._searchAfterEnterPress){for(var e=0;e<this.lastSearch.length;e++)if(this.lastSearch[e].id==t)return!0;return!1}return null},a.searchUI.prototype.__search=function(){this.lastSearch=a._search.search(this.instance.config.nodes,this.input.value,this._searchFields,this._searchFields,this.instance.config.searchDisplayField,this.instance.config.searchFieldsWeight,this.searchFieldsAbbreviation)},a.searchUI.prototype._search=function(){var t,e=this;if(this._searchAfterEnterPress=!1,this.input.value==a.SEARCH_HELP_SYMBOL)t=this.helpView();else{this.__search();var n=a._getFistImgField(this.instance.config);t=`<table border="0" cellspacing="0" cellpadding="0">
                        <tbody>
                            ${function(){for(var o="",s=0;s<e.lastSearch.length&&!(s>=a.SEARCH_RESULT_LIMIT);s++){var l=e.lastSearch[s],c="";if(n){var d=e.instance._get(l.id);typeof n=="function"?c=n(e.instance,e.instance.getNode(l.id),d):d[n]&&(c=d[n])}var u="",f="";e.instance.config.searchDisplayField==l.__searchField?u=l.__searchMarks:e.instance.config.searchDisplayField?(u=l[e.instance.config.searchDisplayField],a.isNEU(u)&&(u=""),f=l.__searchMarks):u=l.__searchMarks;var h={img:c,nodeId:l.id,first:u,second:f,searchItem:l,html:a.searchUI.createItem(c,l.id,u,f)};a.events.publish("add-item",[e,h]),o+=h.html}return o}()}  
                        </tbody>
                    </table>`}this.searchTableWrapper.innerHTML=t;for(var r=this.instance.element.querySelectorAll("[data-search-item-id]"),i=0;i<r.length;i++)r[i].addEventListener("click",function(){if(this.hasAttribute("data-search-item-id")){var o=this.getAttribute("data-search-item-id");if(e.input.value!=a.SEARCH_HELP_SYMBOL){var s=a.events.publish("searchclick",[e.instance,o]),l=a.events.publish("searchclick",[e,{nodeId:o}]);if(s===!1&&(l=!1),l!==!1){e.instance.center(this.getAttribute("data-search-item-id"));var c=e.instance.element.querySelector('[data-selected="yes"]');c&&c.removeAttribute("data-selected"),this.setAttribute("data-selected","yes"),e.input.focus()}}else e.input.value=o+" ",e.searchTableWrapper.innerHTML="",e.input.focus()}});a.events.publish("show-items",[this,{}])},a.searchUI.prototype.helpView=function(){var t='<table border="0" cellspacing="0" cellpadding="0">';for(var e in this.searchFieldsAbbreviation)t+=`<tr data-search-item-id="${e}" style="height: 50px;"><td class="bft-search-image-td" style="text-align: center;">${e}</td><td class="bft-search-text-td">${this.searchFieldsAbbreviation[e]}</td></tr>`;return t+="</table>"},a.searchUI.createItem=function(t,e,n,r){return n&&(n="<b>"+n+"</b>"),`<tr data-search-item-id="${e}">
                <td class="bft-search-image-td">
                    ${t=t?`<div class="bft-search-photo" style="background-image: url(${t})"></div>`:`<div class="bft-search-photo">${a.icon.user(32,32,"#aeaeae")}</div>`}
                </td>
                <td class="bft-search-text-td">${n} <br/>${r}</td>
            </tr>`},a.searchUI.prototype.hide=function(){if(a.events.publish("hide",[this])===!1)return!1;this._searchAfterEnterPress&&(this._searchAfterEnterPress=!1,this.instance.draw()),this.lastSearch=[],this.xBtn&&(this.xBtn.style.display="none"),this.searchTableWrapper&&(this.searchTableWrapper.innerHTML=""),this.input&&(this.input.value="",document.activeElement==this.input&&this.input.blur(),document.activeElement==this.xBtn&&a.input.blurHandler(this.input))},a.searchUI.prototype.on=function(t,e){return a.events.on(t,e,this._event_id),this},a===void 0&&(a={}),a.manager=function(t){this.config=t.config,this.layoutConfigs=t._layoutConfigs,this.visibleNodeIds=[],this.viewBox=null,this.action=null,this.actionParams=null,this.nodes={},this.oldNodes={},this.maxX=null,this.maxY=null,this.minX=null,this.minY=null,this.bordersByRootIdAndLevel=null,this.roots=null,this.state=null,this.vbIsInitializedFromState=!1,this.rootList=[],this.instance=t,this._fixAdjustForExport={x:0,y:0}},a.manager.prototype.read=function(t,e,n,r,i,o,s,l){var c=this;a.state._get(this.config.state,e,n,function(d){c.state=d,c.action=i,c.actionParams=o,i!=a.action.init||!c.state||o&&o.method&&o.method=="fit"?(c.viewBox=r,c.vbIsInitializedFromState=!1):(c.viewBox=c.state.vb,c.vbIsInitializedFromState=!0,Array.isArray(c.state.roots)&&(c.config.roots=c.state.roots));var u=c.maxX,f=c.maxY,h=c.minX,p=c.minY,v=c.bordersByRootIdAndLevel,y=c.roots,w=c.nodes;if(t){var g=a.manager._getResponse(e,n,c.visibleNodeIds,c.config,u,f,h,p,c.viewBox,y,c.action,c.actionParams,w,c.oldNodes,c.vbIsInitializedFromState);i!=a.action.exporting&&(c.maxX=u,c.maxY=f,c.minX=h,c.minY=p,c.roots=y,c.nodes=w,c.visibleNodeIds=g.visibleNodeIds),g.bordersByRootIdAndLevel=v,g.roots=y,g.adjustify={x:0,y:0},c.state&&(g.adjustify=c.state.adjustify),s(g)}else c.oldNodes=w||null,c._read(function(b){u=b.maxX,f=b.maxY,h=b.minX,p=b.minY,v=b.bordersByRootIdAndLevel,y=b.roots,w=b.nodes;var _=a.manager._getResponse(e,n,c.visibleNodeIds,c.config,u,f,h,p,c.viewBox,y,c.action,c.actionParams,w,c.oldNodes,c.vbIsInitializedFromState);_.notif=b.limit,_.roots=y,_.bordersByRootIdAndLevel=v,_.adjustify=b.adjustify,i!=a.action.exporting&&(c.maxX=u,c.maxY=f,c.minX=h,c.minY=p,c.roots=y,c.nodes=w,c.visibleNodeIds=_.visibleNodeIds,c.bordersByRootIdAndLevel=v,c.rootList=b.rootList),s(_)},l)})},a.manager.prototype._read=function(t,e){var n=this,r=a.manager._createNodes(this.instance);e(r);var i=r.nodes,o=r.roots,s=a.remote;s==null&&(s=a.local),s._setPositions(o,n.layoutConfigs,function(l){var c=a.manager._doNotChangePositionOfClickedNodeIfAny(o,i,n.action,n.actionParams,n.oldNodes,n.config.orientation);n.state&&n.action==a.action.init&&(c=n.state.adjustify),n.action==a.action.exporting?c=n._fixAdjustForExport:n._fixAdjustForExport=c;for(var d={minX:null,minY:null,maxX:null,maxY:null},u={},f=[],h=0;h<o.length;h++)a.manager._setMinMaxXYAdjustifyIterate(o[h],o[h],d,0,u,c,n.config.orientation,f);for(var p in f)for(var v in f[p]){var y=u[p][v],w=f[p][v];y.minX==null&&y.minY==null&&y.maxX==null&&y.maxY==null&&a._setMinMaxXY(w,y)}t({minX:d.minX,minY:d.minY,maxX:d.maxX,maxY:d.maxY,bordersByRootIdAndLevel:u,nodes:i,roots:o,rootList:r.rootList,limit:l,adjustify:c})},i)},a===void 0&&(a={}),a.manager._initDinamicNode=function(t,e,n){e&&(t.lcn=e),n&&(t.isAssistant=!0);var r=a.t(t.templateName);t.w=r&&r.size?r.size[0]:0,t.h=r&&r.size?r.size[1]:0,t.isSplit=t.templateName=="split",t.isMirror=t.templateName=="mirror",t.isSubLevel=t.templateName=="subLevel"},a.manager._setCollpasedProperty=function(t,e,n,r,i,o,s){t.collapsed==null&&e.collapse&&e.collapse.allChildren?t.collapsed=!0:t.collapsed==null&&(t.collapsed=!1),i==a.action.expand&&n.ids.indexOf(t.id)!=-1&&(t.collapsed=!1),i==a.action.collapse&&(n.expandIds||n.collapseIds)?n.expandIds&&n.expandIds.indexOf(t.id)!=-1?t.collapsed=!1:n.collapseIds&&n.collapseIds.indexOf(t.id)!=-1&&(t.collapsed=!0):i==a.action.collapse&&n.ids.indexOf(t.id)!=-1&&(t.collapsed=!0),i==a.action.expand&&n.ids=="all"&&(t.collapsed=!1),i==a.action.exporting&&n.expandChildren&&(t.collapsed=!1),i==a.action.init&&s!=null?t.collapsed=!s.exp.has(t.id):i==a.action.init?t.collapsed=e.collapse&&o>=e.collapse.level-1&&r.indexOf(t.id)==-1:i==a.action.centerNode||i==a.action.insert||i==a.action.expand||i==a.action.collapse?r.has(t.id)&&(t.collapsed=!1):i==a.action.update&&n&&n.changeRoots&&n.changeRoots.has(t.id)&&(t.collapsed=!1)},a.manager._initNode=function(t,e,n,r,i,o,s){var l=s.manager.config,c=s.manager.layoutConfigs,d=s.manager.action,u=s.manager.actionParams,f=s.manager.state,h=c[n||"base"];t.parent==null&&a.manager._setCollpasedProperty(t,h,u,i,d,r-1,f);for(var p=0;p<t.childrenIds.length;p++){var v=e[t.childrenIds[p]];if(a.manager._setCollpasedProperty(v,h,u,i,d,r,f),!v.collapsed){if(v.parent=t,v.ppid!=null){var y=e[v.ppid];y&&(v.parentPartner=y)}(v.tags.indexOf("left-partner")!=-1||v.tags.indexOf("right-partner")!=-1||v.tags.indexOf("partner")!=-1||v.parentPartner)&&o.indexOf(t.id)==-1&&o.push(t.id),t.children.push(v)}}if(d!=a.action.minimize||t.min?d==a.action.maximize&&t.min===!0?(u.all||u.id==t.id)&&(t.min=!1):d==a.action.exporting&&u.min===!1?t.min=!1:d==a.action.init&&f!=null&&(t.min=f.min.has(t.id)):(u.all||u.id==t.id)&&(t.min=!0),!t.min)for(p=0;p<t.stChildrenIds.length;p++)v=e[t.stChildrenIds[p]],t.tags&&t.tags.has("filter")||(v.stParent=t,t.stChildren.push(v));r!=null&&(t.level=r),n&&(t.lcn=n);var w=a._getSubLevels(t.tags,l.tags);w>0&&(t.subLevels=w),t.tags.indexOf("assistant")!=-1&&t.parent!=null&&(t.isAssistant=!0);var g=a.t(t.templateName,t.min);t.w=g&&g.size?g.size[0]:0,t.h=g&&g.size?g.size[1]:0,t.padding=g&&g.padding?g.padding:[0,0,0,0];var b={node:t};a.events.publish("node-initialized",[s,b]),a.events.publish("node-created",[t])},a.manager._iterate=function(t,e,n,r,i,o,s,l,c,d,u,f){var h=f.manager.layoutConfigs;if(a.manager._initNode(e,n,c,r,d,u,f),e.isAssistant&&(o[e.pid]||(o[e.pid]=[]),o[e.pid].push(e.id)),e.subLevels>0&&s.push(e.id),a.MIXED_LAYOUT_FOR_NODES_WITH_COLLAPSED_CHILDREN&&!e.isAssistant&&e.parent){if(e.parent&&e.parent.children.length&&e.parent.children[e.parent.children.length-1]==e){for(var p=[],v=0,y=0,w=0;w<e.parent.children.length;w++)(g=e.parent.children[w]).tags.indexOf("partner")==-1&&g.tags.indexOf("left-partner")==-1&&g.tags.indexOf("right-partner")==-1&&g.tags.indexOf("assistant")==-1&&g.children.length==0?p.push(g.id):g.tags.indexOf("assistant")!=-1?v++:g.tags.indexOf("partner")==-1&&g.tags.indexOf("left-partner")==-1&&g.tags.indexOf("right-partner")==-1||y++;(a.MIXED_LAYOUT_ALL_NODES&&p.length>1&&p.length==e.parent.children.length-v-y||!a.MIXED_LAYOUT_ALL_NODES&&p.length>1)&&(l[e.pid]=p)}}else if(!e.isAssistant&&e.childrenIds.length==0&&e.parent&&!l[e.pid]){for(p=[],v=0,y=0,w=0;w<e.parent.children.length;w++){var g;(g=e.parent.children[w]).tags.indexOf("partner")==-1&&g.tags.indexOf("left-partner")==-1&&g.tags.indexOf("right-partner")==-1&&g.tags.indexOf("assistant")==-1&&g.childrenIds.length==0?p.push(g.id):g.tags.indexOf("assistant")!=-1?v++:g.tags.indexOf("partner")==-1&&g.tags.indexOf("left-partner")==-1&&g.tags.indexOf("right-partner")==-1||y++}(a.MIXED_LAYOUT_ALL_NODES&&p.length>a.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN&&p.length==e.parent.childrenIds.length-v-y||!a.MIXED_LAYOUT_ALL_NODES&&p.length>a.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN)&&(l[e.pid]=p)}e.stChildren.length&&(t.stContainerNodes||(t.stContainerNodes=[]),t.stContainerNodes.push(e));for(var b=0;b<e.stChildren.length;b++){var _="";for(w=0;w<e.tags.length;w++)if(h[e.tags[w]]){_=e.tags[w];break}i.push(e.stChildren[b].id),a.manager._iterate(t,e.stChildren[b],n,0,i,o,s,l,_,d,u,f)}for(r++,b=0;b<e.children.length;b++)a.manager._iterate(t,e.children[b],n,r,i,o,s,l,c,d,u,f)},a.manager.__createNodes=function(t,e,n,r,i,o,s,l){for(var c=[],d=a._addDottedLines(n),u=0;u<d.length;u++){var f,h=d[u];f=a.STRING_TAGS?h.tags?h.tags.split(","):[]:Array.isArray(h.tags)?h.tags.slice(0):[],l.filterUI.addFilterTag(h)&&f.unshift("filter");var p=l.searchUI.addMatchTag(h.id);p===!0?f.unshift("match"):p===!1&&f.unshift("no-match");var v=a._getTemplate(f,n.tags,n.template),y=new a.node(h.id,h.pid,f,v);a.isNEU(h.ppid)||(y.ppid=h.ppid),a.isNEU(h.stpid)||(y.stpid=h.stpid),n.orderBy!=null&&(y.order=a.manager._getOrderFieldValue(h,n.orderBy)),h.movex!=null&&(y.movex=h.movex),h.movey!=null&&(y.movey=h.movey),t[h.id]=y,c.push(h.id)}for(n.orderBy!=null&&c.sort(function(A,k){var I=t[A].order,x=t[k].order;return typeof I=="number"||typeof x=="number"?(I==null&&(I=-1),x==null&&(x=-1),n.orderBy.desc?x-I:I-x):typeof I=="string"||typeof x=="string"?(I==null&&(I=""),x==null&&(x=""),n.orderBy.desc?x.localeCompare(I):I.localeCompare(x)):void 0}),u=0;u<c.length;u++){var w=c[u],g=(y=t[w],o?o[w]:null),b=t[y.stpid],_=t[y.pid];if(b||(y.stpid=null),_||(y.pid=null),b){var E=o?o[b.id]:null;E&&(b.min=E.min),b.stChildrenIds.push(y.id)}else _?(g&&(y.collapsed=g.collapsed,y.min=g.min),_.childrenIds.push(y.id)):(g&&(y.collapsed=g.collapsed,y.min=g.min),e.push(y),s.push(y.id));r==a.action.init&&(y.min=a._getMin(y,n))}},a.manager._createNodes=function(t){var e=t.manager.config,n=t.manager.layoutConfigs,r=t.manager.action,i=t.manager.actionParams,o=t.manager.oldNodes,s=t.manager.state,l={},c=[],d=[];if(a.manager.__createNodes(l,c,e,r,i,o,d,t),e.roots!=null){c=[];for(var u=0;u<e.roots.length;u++){var f=l[e.roots[u]];if(f&&r==a.action.centerNode){for(var h=f;h.pid!=null||h.stpid!=null;)h=h.pid==null&&h.stpid!=null?l[h.stpid]:l[h.pid];for(var p=l[i.id];(p.pid!=null||p.stpid!=null)&&p!=f;)p=p.pid==null&&p.stpid!=null?l[p.stpid]:l[p.pid];h==p&&(f=h)}if(f){for(var v=!1,y=0;y<c.length;y++)if(c[y].id==f.id){v=!0;break}v||(a.isNEU(f.pid)||(St=(b=l[f.pid]).childrenIds.indexOf(f.id))>-1&&b.childrenIds.splice(St,1),c.push(f))}}for(e.roots=[],u=0;u<c.length;u++)e.roots.push(c[u].id)}r==a.action.exporting&&i.id!=null&&(g=l[i.id])&&(g.pid=null,c=[g]);var w=[];if(r==a.action.init&&e.expand&&e.expand.nodes&&s==null)for(u=0;u<e.expand.nodes.length;u++){var g=l[e.expand.nodes[u]];for(e.expand.allChildren===!0&&a.manager._addExpandedNodeIdsIterate(g,l,w);g;)w.push(g.id),g.pid==null&&g.stpid!=null?(g=l[g.stpid]).min=!1:g=l[g.pid]}else if(r==a.action.expand&&i.ids&&i.ids!="all"||r==a.action.collapse&&i&&i.expandIds)for(de=r==a.action.expand?i.ids:i.expandIds,u=0;u<de.length;u++)for(var b=l[(g=l[de[u]]).pid];b;)w.push(b.id),b.pid==null&&b.stpid!=null?(b=l[b.stpid]).min=!1:b=l[b.pid];else if(r==a.action.centerNode){for(var _=l[i.id];_;){if(w.push(_.id),i.options.parentState===a.COLLAPSE_PARENT_NEIGHBORS&&_)for(u=0;u<_.childrenIds.length;u++)(H=l[_.childrenIds[u]]).collapsed=!0;_.pid==null&&_.stpid!=null?(_=l[_.stpid]).min=!1:_=l[_.pid]}if(_=l[i.id],i.options.childrenState===a.COLLAPSE_SUB_CHILDRENS)for(u=0;u<_.childrenIds.length;u++){(A=l[_.childrenIds[u]]).collapsed=!1;for(var E=0;E<A.childrenIds.length;E++)l[A.childrenIds[E]].collapsed=!0}if(i.options.parentState===a.COLLAPSE_PARENT_SUB_CHILDREN_EXCEPT_CLICKED&&(b=l[_.pid]))for(u=0;u<b.childrenIds.length;u++){var A;if((A=l[b.childrenIds[u]])!=_)for(A.collapsed=!1,E=0;E<A.childrenIds.length;E++)l[A.childrenIds[E]].collapsed=!0}}else if(r==a.action.insert)for(g=l[i.insertedNodeId];g;)w.push(g.id),g.pid==null&&g.stpid!=null?(g=l[g.stpid]).min=!1:g=l[g.pid];var k=[],I={},x=[],S={},R=[];for(u=0;u<c.length;u++)a.manager._iterate(c[u],c[u],l,0,k,I,x,S,"",w,R,t);if(r==a.action.collapse&&i&&Array.isArray(i.expandIds)&&Array.isArray(i.collapseIds))for(u=0;u<i.ids.length;u++)i.expandIds.has(i.collapseIds[u])?console.error(`id ${i.collapseIds[u]} exist in both collapseIds and expandIds`):(g=l[i.collapseIds[u]])&&(g.collapsed=!0);for(u=c.length-1;u>=0;u--)c[u].collapsed&&c.splice(u,1);for(u=0;u<R.length;u++){g=l[R[u]];var T=[],N=[],P=[],V={},$=0,D=0,O=0,B=[],j=[];for(E=0;E<g.children.length;E++)(H=g.children[E]).isAssistant?T.push(H.id):H.tags.indexOf("right-partner")!=-1?(H.isPartner=1,H.children=[],N.push(H.id)):H.tags.indexOf("left-partner")!=-1?(H.isPartner=2,H.children=[],P.push(H.id)):H.tags.indexOf("partner")==-1||$%2?H.tags.indexOf("partner")!=-1&&$%2?(H.isPartner=2,H.children=[],P.push(H.id),$++):H.parentPartner?(V[H.parentPartner.id]||(V[H.parentPartner.id]=[]),V[H.parentPartner.id].push(H.id)):T.push(H.id):(H.isPartner=1,H.children=[],N.push(H.id),$++);g.children=[];var z=[];for(E=0;E<N.length;E++){V[(H=l[N[E]]).id]?g.children.push(H):g.children.splice(0,0,H);for(var W=0;W<H.childrenIds.length;W++)z.push(H.childrenIds[W])}var G=[];for(E=0;E<P.length;E++)for(V[(H=l[P[E]]).id]?g.children.push(H):g.children.splice(0,0,H),W=0;W<H.childrenIds.length;W++)G.push(H.childrenIds[W]);for(E=0;E<G.length;E++)(H=l[G[E]]).collapsed||(H.parentPartner=H.parent,H.parent=g,H.isChildOfPartner=!0,g.children.push(H));for(E=P.length-1;E>=0;E--)if(V[P[E]])for(y=0;y<V[P[E]].length;y++)g.children.push(l[V[P[E]][y]]),D++,j.indexOf(P[E])==-1&&j.push(P[E]);for(E=0;E<T.length;E++){var H=l[T[E]];g.children.push(H)}for(E=0;E<N.length;E++)if(V[N[E]])for(y=0;y<V[N[E]].length;y++)g.children.push(l[V[N[E]][y]]),O++,B.indexOf(N[E])==-1&&B.push(N[E]);for(E=0;E<z.length;E++)(H=l[z[E]]).collapsed||(H.parentPartner=H.parent,H.parent=g,H.isChildOfPartner=!0,g.children.push(H));g.partnerSeparation=Math.max(j.length,B.length)*e.partnerChildrenSplitSeparation+e.minPartnerSeparation,T.length||!D||O?T.length||D||!O?T.length||D!=1||O!=1?T.length||D||O?!T.length||D||O?T.length&&(D||O)?g.hasPartners=7:g.hasPartners=1:g.hasPartners=6:g.hasPartners=5:g.hasPartners=4:g.hasPartners=3:g.hasPartners=2}for(u=0;u<x.length;u++){var Y=n[(g=l[x[u]]).lcn?g.lcn:"base"];for(E=0;E<g.subLevels;E++){var q=new a.node(g.id+"_sub_level_index_"+E,g.pid,[],"subLevel");a.manager._initDinamicNode(q,g.lcn),(b=g.parent)&&((St=b.children.indexOf(g))>-1&&(b.children.splice(St,1),b.children.splice(St,0,q)),q.children.push(g),q.parent=b,g.parent=q,l[q.id]=q)}}for(var Q in I){(b=l[Q]).hasAssistants=!0,q=new a.node(b.id+"_split_assitant_0",b.id,["assistant"],"split"),a.manager._initDinamicNode(q,b.lcn,!0),l[q.id]=q;var J=[];for(E=b.children.length-1;E>=0;E--)(H=b.children[E]).isAssistant?(H.parent=null,b.children.splice(E,1),J.splice(0,0,H.id)):H.isPartner||(H.parent&&S[H.parent.id]&&q&&H.parent.id!=q.id&&(Object.defineProperty(S,q.id,Object.getOwnPropertyDescriptor(S,H.parent.id)),delete S[H.parent.id]),H.parent=q,q.children.unshift(H),b.children.splice(E,1));if(J.length%2){var ne=l[J[J.length-1]],oe=new a.node(ne.id+"_mirror",b.pid,[],"mirror");a.manager._initDinamicNode(oe,ne.lcn,!0),oe.isAssistant=!0,oe.w=ne.w,oe.h=ne.h,l[oe.id]=oe,J.splice(J.length-1,0,oe.id)}var se=1;for(E=J.length-1;E>=0;E--)if(E%2&&E!=J.length-1){var ae=new a.node(b.id+"_split_assitant_"+se,b.pid,[],"split");a.manager._initDinamicNode(ae,b.lcn,!0),l[ae.id]=ae,J.splice(E,0,ae.id),se++}else E%2&&J.splice(E,0,q.id);for(E=0;E<J.length;E+=3){var ie=null;ie=E==0?b:l[J[E-2]];var we=l[J[E]],Te=l[J[E+1]],ye=l[J[E+2]];we.parent=ie,Te.parent=ie,ye.parent=ie,ie.children.push(we),ie.children.push(Te),ie.children.push(ye)}}var Fe=!1;for(var Ce in n)if((Y=n[Ce]).layout!=0){Fe=!0;break}var Ae=a.events.has("node-layout",t._event_id);if(Fe||Ae){var fe={nodes:l,config:e,action:r,actionParams:i};if(x.length){var Ne=!1;for(var Q in S){var de=S[Q];for(u=0;u<de.length;u++)if((g=l[de[u]]).subLevels){Ne=!0;break}if(Ne)break}if(Ne){var nt={},De={},Ve={};for(var Q in S){de=S[Q];var mt=!1,Se=null;for(u=0;u<de.length;u++){var ke=de[u];(Se===null||x.has(ke))&&(Se=l[ke].parent.id,mt||a.isNEU(l[ke].subLevels)||(mt=l[ke].subLevels>0)),nt[Se]||(nt[Se]=[]),nt[Se].push(ke),mt&&(Ve[Se]=Q,De[Se]||(De[Se]=[]),De[Se].push(ke))}}for(var Q in S={},De)if(De[Q].length>a.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN){var Be=Ve[Q];for(u=l[Be].children.length-1;u>=0;u--)H=l[Be].children[u],De[Q].has(H.id)&&l[Be].children.splice(u,1)}for(var Q in nt)nt[Q].length>a.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN&&(S[Q]=nt[Q])}}for(var Q in S){for(var $e=b=l[Q];$e.isSplit;)$e=l[$e.pid];for(;$e.isSubLevel;)$e=l[$e.pid];if((Y=n[b.lcn?b.lcn:"base"]).layout!=0||Ae){fe.pnode=b,fe.layout=Y.layout,fe.layoutGridColumns=e.layoutGridColumns,fe.childrenIds=S[Q],fe.lastChildrenPidIds=S,fe.subLevels=0,fe.layouts=[],a.events.publish("node-layout",[t,fe]),a.events.publish("layout",[fe]),fe.layouts.length||fe.layouts.push({layout:fe.layout,childrenIds:fe.childrenIds,subLevels:fe.subLevels,layoutGridColumns:fe.layoutGridColumns});for(var Ze=0;Ze<fe.layouts.length;Ze++){var ge=fe.layouts[Ze];for(a.isNEU(ge.subLevels)&&(ge.subLevels=0),a.isNEU(ge.layout)&&(ge.layout=Y.layout),$e=b=l[Q];$e.isSplit;)$e=l[$e.pid];for(;$e.isSubLevel;)$e=l[$e.pid];var Qe=b;for(E=0;E<ge.subLevels;E++)q=new a.node(Ze+"_sublevel_layout_"+E,Qe.id,[],"subLevel"),a.manager._initDinamicNode(q,Qe.lcn),q.parent=Qe,Qe.children.push(q),l[q.id]=q,Qe=q;if(ge.subLevels){for(E=0;E<ge.childrenIds.length;E++){var St;H=l[ge.childrenIds[E]],(St=b.children.indexOf(H))!=-1&&b.children.splice(St,1),H.parent=Qe,Qe.children.push(H)}b=Qe}if(ge.layout==a.layout.grid&&ge.childrenIds.length>2){ge.layoutGridColumns=="dynamic"&&(ge.layoutGridColumns=a._getDynamicGridCoulumns(ge.childrenIds.length));var It=b.id;for(u=b.children.length-1;u>=0;u--)for(E=0;E<ge.childrenIds.length;E++)if(ke=ge.childrenIds[E],b.children[u].id==ke){b.children.splice(u,1);break}var Ct=ge.layoutGridColumns;for(Ct%2!=0&&Ct>2&&Ct--,u=0;u<ge.childrenIds.length;u+=Ct){var Tn=null;for(E=0;E<Ct;E++){var ba=u+Ct>=ge.childrenIds.length;if(ge.childrenIds.length-1<u+E)break;(H=l[ke=ge.childrenIds[u+E]]).parent=l[It],l[It].children.push(H),ba||(Ct/2-1==E&&(Tn=new a.node(ge.childrenIds[u+E-1]+"_grid_pseudo_node_"+ge.childrenIds[u+E+1],It,[],"subLevel"),a.manager._initDinamicNode(Tn,b.lcn),Tn.parent=l[It],l[It].children.push(Tn),l[Tn.id]=Tn),Ct-1==E&&(It=Tn.id))}}}if(ge.layout==a.layout.mixed){var er=ge.childrenIds;for(u=er.length-1;u>=0;u--){for(b=(H=l[er[u]]).parent,H.layout=a.layout.mixed,E=b.children.length-1;E>=0;E--)if(H.id==b.children[E].id){b.children.splice(E,1);break}if(u>0){var pi=l[er[u-1]];H.parent=pi,H.layout=a.layout.mixed,pi.children.push(H)}else b.children.push(H)}}else if(ge.layout>1){q=new a.node(Ze+"_"+b.id+"_split_0",$e.id,[],"split"),a.manager._initDinamicNode(q,b.lcn),l[q.id]=q,q.layout=ge.layout;var lt=[];for(u=ge.childrenIds.length-1;u>=0;u--){for(H=l[ge.childrenIds[u]],E=0;E<b.children.length;E++)b.children[E].id==H.id&&b.children.splice(E,1);if(H.parent=null,H.layout=ge.layout,ge.layout!=a.layout.treeRightOffset&&ge.layout!=a.layout.treeRight||lt.splice(0,0,H.id),ge.layout>2){var kn=new a.node(Ze+"_"+H.id+"_mirror",$e.id,[],"mirror");a.manager._initDinamicNode(kn,H.lcn),kn.layout=ge.layout,l[kn.id]=kn,lt.splice(0,0,kn.id)}ge.layout!=a.layout.treeRightOffset&&ge.layout!=a.layout.treeRight&&lt.splice(0,0,H.id)}for(se=1,E=lt.length-1;E>=0;E--)E%2&&E!=lt.length-1?(ae=new a.node(Ze+"_"+b.id+"_split_"+se,$e.id,[],"split"),a.manager._initDinamicNode(ae,b.lcn),ae.layout=ge.layout,l[ae.id]=ae,lt.splice(E,0,ae.id),se++):E%2&&lt.splice(E,0,q.id);for(E=0;E<lt.length;E+=3)ie=null,E==0&&(ie=b),we=l[lt[E]],Te=l[lt[E+1]],ye=l[lt[E+2]],E!=0&&(ie=l[lt[E-3]]),E==0||Te||(ie=l[lt[E-2]]),we.parent=ie,ie.children.push(we),Te&&(E!=0&&(ie=l[lt[E-2]]),Te.parent=ie,ie.children.push(Te)),ye&&(E!=0&&(ie=l[lt[E-1]]),ye.parent=ie,ie.children.push(ye))}}}}}if(a.VERTICAL_CHILDREN_ASSISTANT)for(u=0;u<c.length;u++)a.manager._verticalAssistantIterate(c[u],l);return fe={nodes:l,roots:c},a.events.publish("nodes-initialized",[t,fe]),{nodes:fe.nodes,roots:fe.roots,rootList:d}},a.manager._getOrderFieldValue=function(t,e){var n=e;return e.field&&(n=e.field),t[n]},a.manager._getNodeWidth=function(t,e){switch(e.orientation){case a.orientation.top:case a.orientation.top_left:case a.orientation.bottom:case a.orientation.bottom_left:return t.w;case a.orientation.right:case a.orientation.right_top:case a.orientation.left:case a.orientation.left_top:return t.h}return 0},a.manager._isVisible=function(t,e,n,r){if(t.x!=null&&t.y!=null){if(e.lazyLoading&&r!==a.action.exporting){let s=function(l,c){var d=l.x,u=l.y,f=l.w,h=l.h,p=c[0]-a.LAZY_LOADING_FACTOR,v=c[2]+a.LAZY_LOADING_FACTOR+c[0],y=c[1]-a.LAZY_LOADING_FACTOR,w=c[3]+a.LAZY_LOADING_FACTOR+c[1],g=d+f>p&&v>d;return g&&(g=u+h>y&&w>u),g};var o=s;if(s(t,n))return!0;for(var i=0;i<t.children.length;i++)if(s(t.children[i],n))return!0;return!1}return!0}},a.manager.getAllFields=function(t){var e=[a.TAGS];for(var n in t.nodeBinding)e.push(t.nodeBinding[n]);for(n=0;n<t.nodes.length;n++)for(var r in t.nodes[n])r!==a.ID&&r!==a.TAGS&&r!==a.NODES&&r!==a.PID&&r!==a.STPID&&r!=="movex"&&r!=="movey"&&(t.nodeBinding[r]||e.has(r)||e.push(r));return e},a.manager._getMostDeepChild=function(t){if(t){var e=t;return function n(r){r.sl>e.sl&&(e=r);for(var i=0;i<r.children.length;i++)n(r.children[i])}(t),e}},a.manager._getResponse=function(t,e,n,r,i,o,s,l,c,d,u,f,h,p,v){var y=d[0],w=[],g={top:null,left:null,bottom:null,right:null,minX:null,maxX:null,minY:null,maxY:null},b=[[],[],[]],_=i-s+2*r.padding,E=o-l+2*r.padding,A=a.getScale(c,t,e,r.scaleInitial,r.scaleMax,r.scaleMin,_,E);if(g.top=l-r.padding,g.left=s-r.padding,g.bottom=o+r.padding-e/A,g.right=i+r.padding-t/A,g.maxX=i,g.minX=s,g.maxY=o,g.minY=l,d.length==0||c==null&&!v&&r.align==a.CENTER){var k=Math.ceil(t/A),I=Math.ceil(e/A),x=0,S=0;if(k-2*r.padding>=i-s)switch(x=(i+s)/2-k/2,r.orientation){case a.orientation.right:case a.orientation.right_top:x=(s-i)/2-k/2}else switch(x=y.x-k/2+a.manager._getNodeWidth(y,r)/2,r.orientation){case a.orientation.right:case a.orientation.right_top:(x=-(k/2-(s-i)/2))<r.padding-k&&(x=r.padding-k);break;case a.orientation.left:case a.orientation.bottom_left:case a.orientation.top_left:case a.orientation.left_top:(x=-(k/2-(i-s)/2))>-r.padding&&(x=-r.padding)}if(I-2*r.padding>=o-l)switch(S=(o+l)/2-I/2,r.orientation){case a.orientation.bottom:case a.orientation.bottom_left:S=(l-o)/2-I/2}else switch((S=-(I/2-(o-l)/2))>-r.padding&&(S=-r.padding),r.orientation){case a.orientation.bottom:case a.orientation.bottom_left:(S=-(I/2-(l-o)/2))<r.padding-I&&(S=r.padding-I);break;case a.orientation.left:case a.orientation.right:S=y.y-I/2+a.manager._getNodeWidth(y,r)/2}c=[x,S,k,I]}else if(c==null&&!v&&r.align==a.ORIENTATION){switch(k=Math.ceil(t/A),I=Math.ceil(e/A),x=0,S=0,r.orientation){case a.orientation.top:x=y.x-k/2+a.manager._getNodeWidth(y,r)/2,S=-r.padding;break;case a.orientation.bottom:x=y.x-k/2+a.manager._getNodeWidth(y,r)/2,S=r.padding-I;break;case a.orientation.left:x=-r.padding,S=y.y-I/2+a.manager._getNodeWidth(y,r)/2;break;case a.orientation.right:x=r.padding-k,S=y.y-I/2+a.manager._getNodeWidth(y,r)/2;break;case a.orientation.top_left:x=-r.padding,S=-r.padding;break;case a.orientation.right_top:x=r.padding-k,S=-r.padding;break;case a.orientation.left_top:x=-r.padding,S=-r.padding;break;case a.orientation.bottom_left:x=-r.padding,S=r.padding-I}c=[x,S,k,I],r.sticky&&(c[0]<g.left&&c[0]<g.right&&(c[0]=g.left>g.right?g.right:g.left),c[0]>g.right&&c[0]>g.left&&(c[0]=g.left>g.right?g.left:g.right),c[1]<g.top&&c[1]<g.bottom&&(c[1]=g.top>g.bottom?g.bottom:g.top),c[1]>g.bottom&&c[1]>g.top&&(c[1]=g.top>g.bottom?g.top:g.bottom))}if(u==a.action.centerNode||u==a.action.maximize){var R=h[f.id];f.options.horizontal==1&&(c[0]=R.x+R.w/2-c[2]/2),f.options.vertical==1&&(c[1]=R.y+R.h/2-c[3]/2),r.sticky&&(c[0]<g.left&&c[0]<g.right&&(c[0]=g.left>g.right?g.right:g.left),c[0]>g.right&&c[0]>g.left&&(c[0]=g.left>g.right?g.left:g.right),c[1]<g.top&&c[1]<g.bottom&&(c[1]=g.top>g.bottom?g.bottom:g.top),c[1]>g.bottom&&c[1]>g.top&&(c[1]=g.top>g.bottom?g.top:g.bottom))}if(u==a.action.insert||u==a.action.expand||u==a.action.collapse||u==a.action.update||u==a.action.centerNode){var T=null;if(u==a.action.insert&&f&&f.insertedNodeId!=null&&f.insertedNodeId!=null)T=h[f.insertedNodeId];else if(u==a.action.update&&f&&f.visId!=null&&f.visId!=null)T=h[f.visId];else if(u!=a.action.expand&&u!=a.action.collapse||!f||f.id==null||f.id==null){if(u==a.action.centerNode){switch(r.orientation){case a.orientation.top:case a.orientation.top_left:case a.orientation.bottom:case a.orientation.bottom_left:f.options.vertical||(T=h[f.id]);break;case a.orientation.right:case a.orientation.right_top:case a.orientation.left:case a.orientation.left_top:f.options.horizontal||(T=h[f.id])}T&&(T=a.manager._getMostDeepChild(T,h))}}else T=h[f.id],T=a.manager._getMostDeepChild(T,h);if(!a.FIXED_POSITION_ON_CLICK&&T)switch(r.orientation){case a.orientation.top:case a.orientation.top_left:var N=T.y+T.h-c[3]+r.padding;c[1]<N&&(c[1]=N);break;case a.orientation.bottom:case a.orientation.bottom_left:N=T.y-r.padding,c[1]>N&&(c[1]=N);break;case a.orientation.right:case a.orientation.right_top:N=T.x-r.padding,c[0]>N&&(c[0]=N);break;case a.orientation.left:case a.orientation.left_top:N=T.x+T.w-c[2]+r.padding,c[0]<N&&(c[0]=N)}}for(var P=0;P<d.length;P++)a.manager._iterate2(d[P],h,r,c,u,f,w,p,n,b);return{animations:b,boundary:g,viewBox:c,visibleNodeIds:w,nodes:h,allFields:a.manager.getAllFields(r)}},a.manager._iterate2=function(t,e,n,r,i,o,s,l,c,d){if(a.manager._isVisible(t,n,r,i)){s.push(t.id);var u=null;if((i==a.action.expand||i==a.action.collapse||i==a.action.maximize)&&l&&l[t.id]&&o.method=="expandCollapseToLevel"){if(u={x:(v=l[t.id]).x,y:v.y},v){u={x:v.x,y:v.y};for(var f=t,h=null;f!=null;)l[f.id]&&l[f.id].collapsed&&(h=f),f=f.parent;h&&h.parent&&(u={x:h.parent.x,y:h.parent.y})}if(y=e[o.id]){for(f=t.parent;f!=null;)f=f.parent;f&&(u={x:y.x+y.w/2-t.w/2,y:y.y+y.h/2-t.h/2})}}else if((i==a.action.expand||i==a.action.collapse)&&l&&l[t.id]){if(u={x:(v=l[t.id]).x,y:v.y},o.ids=="all"&&v){for(u={x:v.x,y:v.y},f=t,h=null;f!=null;)l[f.id]&&l[f.id].collapsed&&(h=f),f=f.parent;h&&h.parent&&(u={x:h.parent.x,y:h.parent.y})}if(y=e[o.id]){for(f=t.parent;f!=null&&o.ids.indexOf(t.id)==-1&&o.ids.indexOf(f.id)==-1;)f=f.parent;f&&(u={x:y.x+y.w/2-t.w/2,y:y.y+y.h/2-t.h/2})}}else if(i==a.action.centerNode&&l&&l[t.id])(v=l[t.id]).x!=null&&v.y!=null&&(u={x:v.x,y:v.y}),(p=e[o.id])&&p==t&&(f=t.parent)&&f.id==o.id&&(u={x:p.x+p.w/2-t.w/2,y:p.y+p.h/2-t.h/2});else if(i==a.action.maximize&&l&&l[t.id]){var p;(v=l[t.id]).x!=null&&v.y!=null&&(u={x:v.x,y:v.y}),(p=e[o.id])&&p==t&&(f=t.parent)&&f.id==o.id&&(u={x:p.x+p.w/2-t.w/2,y:p.y+p.h/2-t.h/2})}else if(i==a.action.minimize&&l&&l[t.id])u={x:(v=l[t.id]).x,y:v.y};else if(i==a.action.insert&&o&&o.insertedNodeId==t.id&&t.parent)u={x:t.parent.x,y:t.parent.y};else if(i!=a.action.update&&i!=a.action.insert||!l)i!==a.action.exporting&&i!==a.action.init&&c.indexOf(t.id)==-1&&(d[0].push(t.id),d[1].push({opacity:0}),d[2].push({opacity:1}));else{var v,y;if((!(v=l[t.id])||a.isNEU(v.x)&&a.isNEU(v.y))&&o){if(y=e[o.id]){for(f=y;f&&f.id==t.id;)f=f.parent;f&&(u={x:y.x,y:y.y})}}else v&&(u={x:v.x,y:v.y})}u!=null&&u.x!=null&&u.y!=null&&(u.x!=t.x||u.y!=t.y)&&(o&&o.dragNodeIdList&&o.dragNodeIdList.indexOf(t.id)!=-1||(d[0].push(t.id),d[1].push({transform:[1,0,0,1,u.x,u.y]}),d[2].push({transform:[1,0,0,1,t.x,t.y]})))}for(var w=0;w<t.stChildren.length;w++)a.manager._iterate2(t.stChildren[w],e,n,r,i,o,s,l,c,d);for(w=0;w<t.children.length;w++)a.manager._iterate2(t.children[w],e,n,r,i,o,s,l,c,d)},a.manager._addExpandedNodeIdsIterate=function(t,e,n){for(var r=0;r<t.childrenIds.length;r++)n.push(t.childrenIds[r]),a.manager._addExpandedNodeIdsIterate(e[t.childrenIds[r]],e,n)},a.manager._setMinMaxXYAdjustifyIterate=function(t,e,n,r,i,o,s,l){t.x+=o.x,t.y+=o.y;for(var c=0;c<t.stChildren.length;c++)a.manager._setMinMaxXYAdjustifyIterate(t.stChildren[c],t.stChildren[c],n,0,i,o,s,l);for(t.isPartner?t.sl=r-1:t.sl=r,i[e.id]==null&&(i[e.id]={}),i[e.id][t.sl]==null&&(i[e.id][t.sl]={minX:null,minY:null,maxX:null,maxY:null}),t.layout?(l[e.id]==null&&(l[e.id]={}),l[e.id][t.sl]==null&&(l[e.id][t.sl]=t)):a._setMinMaxXY(t,i[e.id][t.sl]),t.movex!=null&&(t.x+=t.movex),t.movey!=null&&(t.y+=t.movey),a._setMinMaxXY(t,n),r++,c=0;c<t.children.length;c++)a.manager._setMinMaxXYAdjustifyIterate(t.children[c],e,n,r,i,o,s,l)},a.manager._doNotChangePositionOfClickedNodeIfAny=function(t,e,n,r,i,o){if(n!=a.action.expand&&n!=a.action.collapse&&n!=a.action.minimize&&n!=a.action.maximize&&n!=a.action.centerNode&&n!=a.action.update&&n!=a.action.insert)return{x:0,y:0};if(n==a.action.update&&(!r||r.id==null)){if(!t||!t.length)return{x:0,y:0};r={id:t[0].id}}if(r.id==null)return{x:0,y:0};var s=r.id;(n==a.action.minimize&&e[s].parent||n==a.action.maximize&&e[s].parent)&&(s=e[s].pid);var l=e[s],c=i[s];if(!c)return{x:0,y:0};var d=c.movex!=null?c.movex:0,u=c.movey!=null?c.movey:0;return{x:(c.x?c.x-d:0)-l.x,y:(c.y?c.y-u:0)-l.y}},a.manager._verticalAssistantIterate=function(t,e){for(var n=0;n<t.stChildren.length;n++)a.manager._verticalAssistantIterate(t.stChildren[n],e);if(t.children.length==3)a.manager._verticalAssistantIterate(t.children[0],e),a.manager._verticalAssistantIterate(t.children[2],e),a.manager._verticalAssistantIterate(t.children[1],e);else for(n=0;n<t.children.length;n++)a.manager._verticalAssistantIterate(t.children[n],e);if(t.isAssistant&&t.isSplit&&t.children.length){for(var r=t.parent.children[0],i=t.parent.children[2],o=t.parent;!o.hasAssistants;)o=o.parent;var s={max:0},l={max:0};a.manager._verticalAssistantLevelCountIterate(r,0,s),a.manager._verticalAssistantLevelCountIterate(i,0,l);var c=Math.max(s.max,l.max),d=[];for(n=0;n<c;n++){var u=new a.node(t.parent.id+"_split_assitant_level_"+n,t.pid,[],"subLevel");a.manager._initDinamicNode(u,t.lcn,!0),n>0&&(d[n-1].children.push(u),u.parent=d[n-1]),e[u.id]=u,d.push(u)}if(d.length){for(var f=d[d.length-1],h=d[0],p=t.children.length-1;p>=0;p--){var v=t.children[p];f.children.unshift(v),v.parent=f,t.children.splice(p,1)}t.children.push(h),h.parent=t}}},a.manager._verticalAssistantLevelCountIterate=function(t,e,n){n.max<e&&(n.max=e),e++;for(var r=0;r<t.children.length;r++)a.manager._verticalAssistantLevelCountIterate(t.children[r],e,n)},a._addDottedLines=function(t){var e=t.nodes;if((t.groupDottedLines.length||t.dottedLines.length)&&(e=JSON.parse(JSON.stringify(e))),t.groupDottedLines.length)for(var n=[],r=0;r<t.groupDottedLines.length;r++){var i=t.groupDottedLines[r];i.rootId==null&&(i.rootId=i.to);var o=`balkan_group_dotted_${i.rootId}`;if(!n.has(o)){for(var s=0;s<e.length;s++)if(e[s].id==i.rootId){(u=JSON.parse(JSON.stringify(e[s]))).id=`balkan_group_dotted_${i.rootId}_balkan_id_${e[s].id}`,u.pid=void 0,u.stpid=e[s].id,e.push(u),n.push(o),e[s].tags||(e[s].tags=[]),e[s].tags.push("group-dotted-lines"),e[s].tags.push("group-dotted-lines-"+o);break}}for(s=0;s<e.length;s++)if(e[s].id==i.from){if((u=JSON.parse(JSON.stringify(e[s]))).id=`balkan_group_dotted_${i.rootId}_balkan_id_${e[s].id}`,u.pid=`balkan_group_dotted_${i.rootId}_balkan_id_${i.to}`,u.tags){var l=u.tags.indexOf("group-dotted-lines");l!=-1&&u.tags.splice(l,1)}if(u.tags||(u.tags=[]),u.tags.push("bft-dotted-connector"),i.tags)for(var c=0;c<i.tags.length;c++)u.tags.push(i.tags[c]);e.push(u);break}}if(t.dottedLines.length)for(r=0;r<t.dottedLines.length;r++){var d=t.dottedLines[r];for(d.rootId==null&&(d.rootId=d.to),s=0;s<e.length;s++)if(e[s].id==d.from){var u;if((u=JSON.parse(JSON.stringify(e[s]))).id=`balkan_dotted_${d.rootId}_balkan_id_${e[s].id}`,d.rootId==d.to?u.pid=d.to:u.pid=`balkan_dotted_${d.rootId}_balkan_id_${d.to}`,u.tags||(u.tags=[]),u.tags.push("bft-dotted-connector"),d.tags)for(c=0;c<d.tags.length;c++)u.tags.push(d.tags[c]);e.push(u);break}}return e},a.manager.__createNodes=function(t,e,n,r,i,o,s,l){for(var c=n.nodes,d=[],u={},f={},h=0;h<c.length;h++){var p,v=c[h];p=a.STRING_TAGS?v.tags?v.tags.split(","):[]:Array.isArray(v.tags)?v.tags.slice(0):[],l.filterUI.addFilterTag(v)&&p.push("filter");var y=l.searchUI.addMatchTag(v.id);y===!0?p.unshift("match"):y===!1&&p.unshift("no-match"),v.gender&&p.push(v.gender);var w=a._getTemplate(p,n.tags,n.template);v.templateName&&(w=v.templateName);var g=new a.node(v.id,v.pid,p,w);g.ftChildrenIds=[],g.rids=[],a.isNEU(v.ppid)||(g.ppid=v.ppid),a.isNEU(v.stpid)||(g.stpid=v.stpid),a.isNEU(v.mid)||(g.mid=v.mid),a.isNEU(v.fid)||(g.fid=v.fid),a.isNEU(v.gender)||(g.gender=v.gender),Array.isArray(v.pids)?g.pids=v.pids:g.pids=[],n.orderBy!=null&&(g.order=a.manager._getOrderFieldValue(v,n.orderBy)),t[v.id]=g,a.isNEU(g.stpid)?(a.isNEU(g.mid)||(u[g.mid]||(u[g.mid]=[]),u[g.mid].push(g.id)),a.isNEU(g.fid)||(u[g.fid]||(u[g.fid]=[]),u[g.fid].push(g.id)),a.isNEU(g.mid)&&a.isNEU(g.fid)&&a.isNEU(g.stpid)&&(d.has(g.id)||d.push(g.id))):(f[g.stpid]||(f[g.stpid]=[]),f[g.stpid].push(g.id))}if(n.orderBy!=null&&u)for(var b in u)u[b].sort(function(R,T){var N=t[R].order,P=t[T].order;return typeof N=="number"||typeof P=="number"?(N==null&&(N=-1),P==null&&(P=-1),n.orderBy.desc?P-N:N-P):typeof N=="string"||typeof P=="string"?(N==null&&(N=""),P==null&&(P=""),n.orderBy.desc?P.localeCompare(N):N.localeCompare(P)):void 0});for(h=0;h<d.length;h++){var _=t[d[h]];if(_){var E=[];a.manager._iterateSetRootIds(_.id,_.id,f,u,t,E),s.push(E)}}for(h=0;h<s.length;h++)for(var A=0;A<s.length;A++)if(A!=h){for(var k=s[h],I=s[A],x=!1,S=0;S<k.length;S++)if(I.has(k[S])){x=!0;break}x&&(s[h]=k.concat(I).unique(),s[A]=[])}for(h=s.length-1;h>=0;h--)s[h].length||s.splice(h,1);if(!n.roots||!n.roots.length)for(n.roots=[],h=s.length-1;h>=0;h--)n.roots.push(s[h][0]);for(h=0;h<n.roots.length;h++)a.manager._iterateFT(n.roots[h],f,u,t,o,e,r,i,n)},a.manager._iterateSetRootIds=function(t,e,n,r,i,o){var s=i[t];if(s){s.rids.has(e)||s.rids.push(e);for(var l=0;l<s.rids.length;l++)o.has(s.rids[l])||o.push(s.rids[l]);for(l=0;l<s.pids.length;l++){var c=i[s.pids[l]];if(c)for(var d=0;d<c.rids.length;d++)o.has(c.rids[d])||o.push(c.rids[d])}if(n[s.id])for(l=0;l<n[s.id].length;l++)a.manager._iterateSetRootIds(n[s.id][l],e,n,r,i,o);if(r[s.id])for(l=0;l<r[s.id].length;l++)a.manager._iterateSetRootIds(r[s.id][l],e,n,r,i,o)}},a.manager._iterateFT=function(t,e,n,r,i,o,s,l,c){var d,u=r[t],f=i?i[t]:null,h=r[u.stpid],p=r[u.mid],v=r[u.fid];if(h||(u.stpid=null),p?v&&(p.tags.has("partner")||p.tags.has("left-partner")||p.tags.has("right-partner"))?(u.pid=v.id,d=v,u.ppid=p.id):(u.pid=p.id,d=p,v&&(u.ppid=v.id)):v?p&&(v.tags.has("partner")||v.tags.has("left-partner")||v.tags.has("right-partner"))?(u.pid=p.id,d=p,u.ppid=v.id):(u.pid=v.id,d=v,p&&(u.ppid=p.id)):u.pid,h){var y=i?i[h.id]:null;y&&(h.min=y.min),h.stChildrenIds.push(u.id)}else p||v?(f&&(u.collapsed=f.collapsed,u.min=f.min),d&&!d.childrenIds.has(u.id)&&d.childrenIds.push(u.id),p&&!p.ftChildrenIds.has(u.id)&&p.ftChildrenIds.push(u.id),v&&!v.ftChildrenIds.has(u.id)&&v.ftChildrenIds.push(u.id)):(f&&(u.collapsed=f.collapsed,u.min=f.min),o.push(u));s==a.action.init&&(u.min=a._getMin(u,c));for(var w=0;w<u.pids.length;w++){var g=r[u.pids[w]];if(g){g.pid=u.id;var b=i?i[g.id]:null;if(b&&(g.collapsed=b.collapsed,g.min=b.min),s==a.action.init&&(g.min=a._getMin(g,c)),l&&f&&b&&l.id==u.id?b.hasPartners&&f.isPartner==1?g.tags.push("left-partner"):b.hasPartners&&f.isPartner==2||f.isPartner==1?g.tags.push("right-partner"):f.isPartner==2?g.tags.push("left-partner"):g.tags.push("partner"):b&&b.isPartner==2?g.tags.push("left-partner"):b&&b.isPartner==1?g.tags.push("right-partner"):g.tags.push("partner"),!a.isNEU(g)&&n[g.id])for(var _=0;_<n[g.id].length;_++){var E=r[n[g.id][_]];E&&(a.isNEU(E.fid)||a.isNEU(E.mid))&&a.manager._iterateFT(n[g.id][_],e,n,r,i,o,s,l,c)}u.childrenIds.push(g.id)}}if(e[t])for(_=0;_<e[t].length;_++)a.manager._iterateFT(e[t][_],e,n,r,i,o,s,l,c);if(n[t])for(_=0;_<n[t].length;_++)a.manager._iterateFT(n[t][_],e,n,r,i,o,s,l,c)},a.manager.getAllFields=function(t){var e=[a.TAGS];for(var n in t.nodeBinding)e.push(t.nodeBinding[n]);for(n=0;n<t.nodes.length;n++)for(var r in t.nodes[n])r!==a.ID&&r!==a.TAGS&&r!==a.NODES&&r!==a.PID&&r!==a.STPID&&r!=="mid"&&r!=="fid"&&r!=="pids"&&(t.nodeBinding[r]||e.has(r)||e.push(r));return e},a.templates={},a.templates.base={defs:`<g transform="matrix(1,0,0,1,0,0)" id="dot"><circle class="bft-fill" cx="0" cy="0" r="5" stroke="#aeaeae" stroke-width="1"></circle></g>
            <g id="base_node_menu" style="cursor:pointer;"><rect x="0" y="0" fill="transparent" width="22" height="22"></rect><circle cx="4" cy="11" r="2" fill="#aeaeae"></circle><circle cx="11" cy="11" r="2" fill="#aeaeae"></circle><circle cx="18" cy="11" r="2" fill="#aeaeae"></circle></g>
            <g style="cursor: pointer;" id="base_tree_menu">
                <rect x="0" y="0" width="25" height="25" fill="transparent"></rect>
                ${a.icon.addUser(25,25,"#fff",0,0)}
            </g>
            <g style="cursor: pointer;" id="base_tree_menu_close">
                <circle cx="12.5" cy="12.5" r="12" fill="#F57C00"></circle>
                ${a.icon.close(25,25,"#fff",0,0)}
            </g>            
            <g id="base_up">
                <circle cx="15" cy="15" r="15" fill="#fff" stroke="#aeaeae" stroke-width="1"></circle>
                ${a.icon.ft(20,20,"#aeaeae",5,5)}
            </g>
            <clipPath id="base_img_0"><rect id="base_img_0_stroke" stroke-width="3" stroke="#fff" x="170" y="-5" rx="25" ry="25" width="70" height="70"></rect></clipPath>`,size:[250,120],linkAdjuster:{fromX:0,fromY:0,toX:0,toY:0},ripple:{radius:0,color:"#e6e6e6",rect:null},expandCollapseSize:0,svg:'<svg class="{randId} {template}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  style="display:block;" width="{w}" height="{h}" viewBox="{viewBox}">{content}</svg>',link:'<path stroke-linejoin="round" stroke="#aeaeae" stroke-width="1px" fill="none" d="{rounded}" />',assistanseLink:'<path stroke-linejoin="round" stroke="#aeaeae" stroke-width="2px" fill="none" d="M{xa},{ya} {xb},{yb} {xc},{yc} {xd},{yd} L{xe},{ye}"/>',pointer:'<g data-pointer="pointer" transform="matrix(0,0,0,0,100,100)"><radialGradient id="pointerGradient"><stop stop-color="#ffffff" offset="0" /><stop stop-color="#C1C1C1" offset="1" /></radialGradient><circle cx="16" cy="16" r="16" stroke-width="1" stroke="#acacac" fill="url(#pointerGradient)"></circle></g>',node:'<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" stroke="#aeaeae" rx="7" ry="7"></rect>',menuButton:'<div style="position:absolute;right:{p}px;top:{p}px; width:40px;height:50px;cursor:pointer;" '+a.attr.control_export_menu+'=""><hr style="background-color: #7A7A7A; height: 3px; border: none;"><hr style="background-color: #7A7A7A; height: 3px; border: none;"><hr style="background-color: #7A7A7A; height: 3px; border: none;"></div>',padding:[50,20,35,20],nodeMenuButton:`<use ${a.attr.control_node_menu_id}="{id}" x="220" y="95" xlink:href="#base_node_menu"/>`,nodeTreeMenuButton:'<use data-ctrl-n-t-menu-id="{id}" x="10" y="10" xlink:href="#base_tree_menu"/>',nodeTreeMenuCloseButton:'<use data-ctrl-n-t-menu-c="" x="10" y="10" xlink:href="#base_tree_menu_close"/>',up:'<use x="110" y="-10" xlink:href="#base_up"/>',img_0:'<use xlink:href="#base_img_0_stroke" /><image preserveAspectRatio="xMidYMid slice" clip-path="url(#base_img_0)" xlink:href="{val}"  x="170" y="-5"  width="70" height="70"></image>',link_field_0:'<text text-anchor="middle" fill="#aeaeae" '+a.attr.width+'="290" x="0" y="0" style="font-size:10px;">{val}</text>'},a.templates.dot=Object.assign({},a.templates.base),a.templates.dot.node='<circle cx="5" cy="5" r="5" fill="none" stroke-width="1" stroke="#aeaeae"></circle>',a.templates.dot.size=[10,10],a.templates.dot.nodeMenuButton="",a.templates.dot.nodeTreeMenuButton="",a.templates.dot.nodeTreeMenuCloseButton="",a.templates.dot.up="",a.templates.john=Object.assign({},a.templates.base),a.templates.john.nodeMenuButton=`<use ${a.attr.control_node_menu_id}="{id}" x="90" y="50" xlink:href="#base_node_menu"/>`,a.templates.john.defs=`<style>                          
                                        .{randId} .bft-edit-form-header, .{randId} .bft-img-button{
                                            background-color: #aeaeae;
                                        }
                                        .{randId}.male .bft-edit-form-header, .{randId}.male .bft-img-button{
                                            background-color: #039BE5;
                                        }        
                                        .{randId}.male div.bft-img-button:hover{
                                            background-color: #F57C00;
                                        }
                                        .{randId}.female .bft-edit-form-header, .{randId}.female .bft-img-button{
                                            background-color: #F57C00;
                                        }        
                                        .{randId}.female div.bft-img-button:hover{
                                            background-color: #039BE5;
                                        }
                                    </style>
                                    <clipPath id="john_img_0"><rect  x="6" y="6" rx="54" ry="54" width="108" height="108"></rect></clipPath>
                                    ${a.gradientCircleForDefs("circle","#aeaeae",60,5)}
                                    ${a.gradientCircleForDefs("male_circle","#039BE5",60,5)}
                                    ${a.gradientCircleForDefs("female_circle","#F57C00",60,5)}`,a.templates.john.field_0="<text "+a.attr.width+'="230" style="font-size: 16px;font-weight:bold;" fill="#aeaeae" x="60" y="135" text-anchor="middle">{val}</text>',a.templates.john.field_1="<text "+a.attr.width+'="150" style="font-size: 13px;" fill="#aeaeae" x="60" y="150" text-anchor="middle">{val}</text>',a.templates.john.node='<use x="0" y="0" xlink:href="#circle" />',a.templates.john.img_0='<image preserveAspectRatio="xMidYMid slice" clip-path="url(#john_img_0)" xlink:href="{val}"  x="6" y="6"  width="108" height="108"></image>',a.templates.john.ripple={radius:60,color:"#e6e6e6",rect:null},a.templates.john.size=[120,120],a.templates.john_male=Object.assign({},a.templates.john),a.templates.john_male.node+='<use x="0" y="0" xlink:href="#male_circle" />',a.templates.john_male.ripple={radius:60,color:"#039BE5",rect:null},a.templates.john_female=Object.assign({},a.templates.john),a.templates.john_female.node+='<use x="0" y="0" xlink:href="#female_circle" />',a.templates.john_female.ripple={radius:60,color:"#F57C00",rect:null},a.templates.tommy=Object.assign({},a.templates.base),a.templates.tommy.defs=`<style>                          
                                        .{randId} .bft-edit-form-header, .{randId} .bft-img-button{
                                            background-color: #aeaeae;
                                        }
                                        .{randId}.male .bft-edit-form-header, .{randId}.male .bft-img-button{
                                            background-color: #039BE5;
                                        }        
                                        .{randId}.male div.bft-img-button:hover{
                                            background-color: #F57C00;
                                        }
                                        .{randId}.female .bft-edit-form-header, .{randId}.female .bft-img-button{
                                            background-color: #F57C00;
                                        }        
                                        .{randId}.female div.bft-img-button:hover{
                                            background-color: #039BE5;
                                        }
                                    </style>`,a.templates.tommy.field_0="<text "+a.attr.width+'="230" style="font-size: 18px;font-weight:bold;" fill="#ffffff" x="10" y="90" text-anchor="start">{val}</text>',a.templates.tommy.field_1="<text "+a.attr.width+'="150" style="font-size: 14px;" fill="#ffffff" x="10" y="65" text-anchor="start">{val}</text>',a.templates.tommy.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill="#aeaeae" stroke="#aeaeae" rx="7" ry="7"></rect>',a.templates.tommy_male=Object.assign({},a.templates.tommy),a.templates.tommy_male.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill="#039BE5" stroke="#aeaeae" rx="7" ry="7"></rect>',a.templates.tommy_female=Object.assign({},a.templates.tommy),a.templates.tommy_female.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill="#F57C00" stroke="#aeaeae" rx="7" ry="7"></rect>',a.templates.hugo=Object.assign({},a.templates.base),a.templates.hugo.up='<use x="200" y="10" xlink:href="#hugo_up"/>',a.templates.hugo.nodeMenuButton=`<use x="225" y="10" ${a.attr.control_node_menu_id}="{id}" xlink:href="#hugo_node_menu"/>`,a.templates.hugo.defs=`<clipPath id="hugo_img_0"><rect id="hugo_img_0_stroke" stroke-width="2" stroke="#fff" x="90" y="-5" rx="25" ry="25" width="70" height="70"></rect></clipPath>
                                    <linearGradient id="hugo_grad_female" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" style="stop-color:#FF8024;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#FF46A3;stop-opacity:1" />
                                    </linearGradient>
                                    <linearGradient id="hugo_grad_male" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" style="stop-color:#00D3A5;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#00A7D4;stop-opacity:1" />
                                    </linearGradient>
                                    <linearGradient id="hugo_grad" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" style="stop-color:#D0D0D0;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#909090;stop-opacity:1" />
                                    </linearGradient>
                                    <g id="hugo_up">
                                        <circle cx="12" cy="12" r="15" fill="transparent" ></circle>
                                        ${a.icon.ft(24,24,"#fff",0,0)}
                                    </g>
                                    <g id="hugo_node_menu" style="cursor:pointer;"><rect x="0" y="0" fill="transparent" width="22" height="22"></rect><circle cx="11" cy="4" r="2" fill="#ffffff"></circle><circle cx="11" cy="11" r="2" fill="#ffffff"></circle><circle cx="11" cy="18" r="2" fill="#ffffff"></circle></g>
                                    <style>
                                        .{randId} .bft-edit-form-header{
                                            background: linear-gradient(90deg, #D0D0D0 0%, #909090 100%);
                                        }
                                        .{randId}.male .bft-edit-form-header{
                                            background: linear-gradient(90deg, #00D3A5 0%, #00A7D4 100%);
                                        }
                                        .{randId}.female .bft-edit-form-header{
                                            background: linear-gradient(90deg, #FF8024 0%, #FF46A3 100%);
                                        }  
                                        .{randId} .bft-img-button{
                                            background-color: #909090;
                                        }      
                                        .{randId} .bft-img-button:hover{
                                            background-color: #D0D0D0;
                                        }
                                        .{randId}.male .bft-img-button{
                                            background-color: #00A7D4;
                                        }      
                                        .{randId}.male .bft-img-button:hover{
                                            background-color: #00D3A5;
                                        }
                                        .{randId}.female .bft-img-button{
                                            background-color: #FF46A3;
                                        }      
                                        .{randId}.female .bft-img-button:hover{
                                            background-color: #FF8024;
                                        }
                                        
                                    </style>`,a.templates.hugo.img_0='<use xlink:href="#hugo_img_0_stroke" /><image preserveAspectRatio="xMidYMid slice" clip-path="url(#hugo_img_0)" xlink:href="{val}"  x="90" y="-5"  width="70" height="70"></image>',a.templates.hugo.field_0="<text "+a.attr.width+'="230" style="font-size: 18px;font-weight:bold;" fill="#ffffff" x="125" y="85" text-anchor="middle">{val}</text>',a.templates.hugo.field_1="<text "+a.attr.width+'="230" style="font-size: 14px;" fill="#ffffff" x="125" y="105" text-anchor="middle">{val}</text>',a.templates.hugo.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill=url(#hugo_grad) stroke="#aeaeae" rx="7" ry="7"></rect>',a.templates.hugo_male=Object.assign({},a.templates.hugo),a.templates.hugo_male.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill=url(#hugo_grad_male) stroke="#aeaeae" rx="7" ry="7"></rect>',a.templates.hugo_female=Object.assign({},a.templates.hugo),a.templates.hugo_female.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill=url(#hugo_grad_female) stroke="#aeaeae" rx="7" ry="7"></rect>',a.templates.mother=Object.assign({},a.templates.base),a.templates.mother.up="",a.templates.mother.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;"  stroke-width="1" stroke="#F57C00" rx="5" ry="5"></rect><text style="font-size: 18px;" fill="#F57C00" x="240" y="30" text-anchor="end">Add mother</text>'+a.icon.mother(70,70,"#F57C00",10,40),a.templates.mother.field_0="",a.templates.mother.field_1="",a.templates.father=Object.assign({},a.templates.mother),a.templates.father.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#039BE5;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#039BE5" x="240" y="30" text-anchor="end">Add father</text>'+a.icon.father(70,70,"#039BE5",10,40),a.templates.partner=Object.assign({},a.templates.mother),a.templates.partner.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#aeaeae;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#aeaeae" x="240" y="30" text-anchor="end">Add partner</text>',a.templates.son=Object.assign({},a.templates.mother),a.templates.son.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#039BE5;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#039BE5" x="240" y="30" text-anchor="end">Add son</text>'+a.icon.son(70,70,"#039BE5",10,40),a.templates.daughter=Object.assign({},a.templates.mother),a.templates.daughter.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#F57C00;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#F57C00" x="240" y="30" text-anchor="end">Add daughter</text>'+a.icon.daughter(70,70,"#F57C00",10,40),a.templates.husband=Object.assign({},a.templates.mother),a.templates.husband.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#039BE5;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#039BE5" x="240" y="30" text-anchor="end">Add husband</text>'+a.icon.husband(70,70,"#039BE5",10,40),a.templates.wife=Object.assign({},a.templates.mother),a.templates.wife.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#F57C00;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#F57C00" x="240" y="30" text-anchor="end">Add wife</text>'+a.icon.wife(70,70,"#F57C00",10,40),a.templates.pet=Object.assign({},a.templates.mother),a.templates.pet.node='<rect x="0" y="0" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#F57C00;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#F57C00" x="240" y="30" text-anchor="end">Add pet</text>'+a.icon.teddy(70,70,"#F57C00",10,40),a.templates.cgroup=Object.assign({},a.templates.base),a.templates.cgroup.defs="",a.templates.cgroup.size=[250,120],a.templates.cgroup.padding=[0,0,0,0],a.templates.cgroup.node="",a.templates.split=Object.assign({},a.templates.base),a.templates.split.size=[10,10],a.templates.split.node='<circle cx="5" cy="5" r="5" fill="none" stroke-width="1" stroke="#aeaeae"></circle>',a.templates.mirror={linkAdjuster:{},link:"",node:"",nodeMenuButton:"",size:[0,0]},a.ui={_defsIds:{},defs:function(t){var e="";for(var n in a.templates){var r=a.templates[n];r.defs&&(a.ui._defsIds[n]=a.randomId(),e+=r.defs.replaceAll("{randId}",a.ui._defsIds[n]))}return"<defs>"+e+t+"</defs>"},lonely:function(t){return t.nodes&&t.nodes.length?"":a.IT_IS_LONELY_HERE.replace("{link}",a.RES.IT_IS_LONELY_HERE_LINK)},pointer:function(t,e,n){return e===a.action.exporting?"":a.t(t.template,!1,n).pointer},node:function(t,e,n,r,i,o,s,l,c,d){var u=a.t(t.templateName,t.min,c),f=u.node.replaceAll("{w}",t.w).replaceAll("{h}",t.h);u.defs&&(f=f.replaceAll("{randId}",a.ui._defsIds[t.templateName])),s==null&&(s=r.nodeBinding);var h={node:t,data:e};for(var p in s){var v,y=s[p];e&&(v=e[y]);var w=a._lblIsImg(r,p);if(h.value=v,h.element=u[p],h.name=y,h.field=p,a.events.publish("field",[d,h])!==!1&&h.value!=null&&h.value!=null&&h.element!=null&&(!w||w&&!a.isNEU(h.value))){if(!w&&typeof h.value=="string"){var g=h.element;g&&(g=g.replaceAll("{ew}",t.w-(t.padding?t.padding[1]:0)).replaceAll("{cw}",t.w/2)),h.value=a.wrapText(h.value,g)}var b=h.element.replace("{val}",h.value);f+=b=b.replaceAll("{ew}",t.w-(t.padding?t.padding[1]:0)).replaceAll("{cw}",t.w/2).replaceAll("{randId}",a.randomId()).replaceAll("{randId2}",a.randomId())}}var _=a._getPosition(n,t,i,o),E="node";Array.isArray(t.tags)&&t.tags.length&&(E+=" "+t.tags.join(" ")),t.layout&&(E+=" tree-layout");var A="";t.lcn&&(A='lcn="'+t.lcn+'"');var k=a.nodeOpenTag.replace("{lcn}",A).replace("{id}",t.id).replace("{class}",E).replace("{sl}",t.sl).replace("{level}",t.level).replace("{x}",_.x).replace("{y}",_.y),I=a._getOpacity(n,t);return f=(k=k.replace("{opacity}",I))+(f+=a.ui.nodeBtns(r,t,l,u,d))+a.grCloseTag},nodeBtns:function(t,e,n,r,i){var o="";return t.nodeMenu==null||e.isSplit||n===a.action.exporting||(o+=r.nodeMenuButton.replace("{id}",e.id).replace("{cw}",e.w/2).replace("{ch}",e.h/2).replace("{ew}",e.w-(e.padding?e.padding[1]:0)).replace("{eh}",e.h-(e.padding?e.padding[2]:0))),t.nodeCircleMenu==null||e.isSplit||n===a.action.exporting||a.isNEU(r.nodeCircleMenuButton)||(o+='<g style="cursor:pointer;" transform="matrix(1,0,0,1,'+r.nodeCircleMenuButton.x+","+r.nodeCircleMenuButton.y+')" '+a.attr.control_node_circle_menu_id+'="'+e.id+'"><circle cx="0" cy="0" fill="'+r.nodeCircleMenuButton.color+'" r="'+r.nodeCircleMenuButton.radius+'" stroke-width="1" stroke="'+r.nodeCircleMenuButton.stroke+'"></circle><line x1="-'+r.nodeCircleMenuButton.radius/2+'" y1="-6" x2="'+r.nodeCircleMenuButton.radius/2+'" y2="-6" stroke-width="2" stroke="'+r.nodeCircleMenuButton.stroke+'"></line><line x1="-'+r.nodeCircleMenuButton.radius/2+'" y1="0" x2="'+r.nodeCircleMenuButton.radius/2+'" y2="0" stroke-width="2" stroke="'+r.nodeCircleMenuButton.stroke+'"></line><line x1="-'+r.nodeCircleMenuButton.radius/2+'" y1="6" x2="'+r.nodeCircleMenuButton.radius/2+'" y2="6" stroke-width="2" stroke="'+r.nodeCircleMenuButton.stroke+'"></line></g>'),o},expandCollapseBtn:function(t,e,n,r,i){var o="";if(r!==a.action.exporting&&!e.isSplit){var s=n[e.lcn?e.lcn:"base"],l=0,c=0,d=a.t(e.templateName,e.min,i);if(e.childrenIds.length>0){if(e.hasPartners){for(var u=!1,f=0;f<e.childrenIds.length;f++){var h=t.getNode(e.childrenIds[f]);!h||h.parentPartner||h.isPartner||(u=!0)}if(!u)return""}switch(s.orientation){case a.orientation.top:case a.orientation.top_left:l=e.x+e.w/2,c=e.y+e.h;break;case a.orientation.bottom:case a.orientation.bottom_left:l=e.x+e.w/2,c=e.y;break;case a.orientation.right:case a.orientation.right_top:l=e.x,c=e.y+e.h/2;break;case a.orientation.left:case a.orientation.left_top:l=e.x+e.w,c=e.y+e.h/2}if(l-=d.expandCollapseSize/2,c-=d.expandCollapseSize/2,t.getCollapsedIds(e).length?(o+=a.expcollOpenTag.replace("{id}",e.id).replace("{x}",l).replace("{y}",c),o+=d.plus,o+=a.grCloseTag):(o+=a.expcollOpenTag.replace("{id}",e.id).replace("{x}",l).replace("{y}",c),o+=d.minus,o+=a.grCloseTag),o.indexOf("{collapsed-children-count}")!=-1){var p=a.collapsedChildrenCount(t,e);o=o.replace("{collapsed-children-count}",p)}if(o.indexOf("{collapsed-children-total-count}")!=-1){var v=a.collapsedChildrenTotalCount(t,e);o=o.replace("{collapsed-children-total-count}",v)}if(o.indexOf("{children-count}")!=-1){var y=a.childrenCount(t,e);o=o.replace("{children-count}",y)}if(o.indexOf("{children-total-count}")!=-1){var w=a.childrenTotalCount(t,e);o=o.replace("{children-total-count}",w)}}t._nodeHasHiddenParent(e)&&(o+=a.upOpenTag.replace("{id}",e.id).replace("{x}",e.x).replace("{y}",e.y),o+=d.up,o+=a.grCloseTag)}var g={html:o,node:e};return a.events.publish("renderbuttons",[t,g]),g.html},link:function(t,e,n,r,i,o,s){var l=t.lcn?t.lcn:"base",c=e._layoutConfigs[l],d=a.t(t.templateName,t.min,n),u=[],f=[],h=c.levelSeparation/2;t.layout>0&&(h=c.mixedHierarchyNodesSeparation/2);var p=0,v=a.getRootOf(t).id,y=r[v][t.sl],w=void 0;if(t.hasPartners){w={ids:[],indexes:{},ppnodes:{},lastLeft:null,firstRight:null,maxSidePartnersWithChildren:0,rightIds:[],leftIds:[],partnerChildrenSplitSeparation:e.config.partnerChildrenSplitSeparation};for(var g=0;g<t.children.length;g++)(_=t.children[g]).parentPartner?(w.ppnodes[_.id]=_.parentPartner,w.ids.push(_.id),_.parentPartner.isPartner==1?(w.rightIds.indexOf(_.parentPartner.id)==-1&&w.rightIds.push(_.parentPartner.id),w.indexes[_.id]=w.rightIds.indexOf(_.parentPartner.id),w.firstRight||(w.firstRight=_)):_.parentPartner.isPartner==2&&(w.leftIds.indexOf(_.parentPartner.id)==-1&&w.leftIds.push(_.parentPartner.id),w.indexes[_.id]=w.leftIds.indexOf(_.parentPartner.id),w.lastLeft=_)):_.isPartner||(w.lastLeft=_,w.firstRight||(w.firstRight=_));w.maxSidePartnersWithChildren=Math.max(w.leftIds.length,w.rightIds.length),p=w.maxSidePartnersWithChildren==0?e.config.minPartnerSeparation/2:e.config.minPartnerSeparation/2+w.partnerChildrenSplitSeparation*w.maxSidePartnersWithChildren+w.partnerChildrenSplitSeparation/2}for(g=0;g<t.children.length;g++){var b,_=t.children[g],E=r[v][_.sl],A={xa:0,ya:0,xb:0,yb:0,xc:0,yc:0,xd:0,yd:0,x:0,y:0,rotate:0},k=(d=a.t(_.templateName,_.min,n)).link;if(_.isChildOfPartner)switch(c.orientation){case a.orientation.top:case a.orientation.top_left:var I=_.layout==1?void 0:E.minY-(E.minY-y.maxY)/2;A=a.ui._linkTopToBottom(_.parentPartner,_,d,h,I);break;case a.orientation.bottom:case a.orientation.bottom_left:I=_.layout==1?void 0:E.maxY-(E.maxY-y.minY)/2,A=a.ui._linkBottomToTop(_.parentPartner,_,d,h,I);break;case a.orientation.right:case a.orientation.right_top:I=_.layout==1?void 0:E.maxX-(E.maxX-y.minX)/2,A=a.ui._linkRightToLeft(_.parentPartner,_,d,h,I);break;case a.orientation.left:case a.orientation.left_top:I=_.layout==1?void 0:E.minX-(E.minX-y.maxX)/2,A=a.ui._linkLeftToRight(_.parentPartner,_,d,h,I)}else if(w&&w.ids.indexOf(_.id)!=-1)switch(c.orientation){case a.orientation.top:case a.orientation.top_left:A=a.ui._linkPpTop(w,t,_,E,y,d);break;case a.orientation.bottom:case a.orientation.bottom_left:A=a.ui._linkPpBottom(w,t,_,E,y,d);break;case a.orientation.right:case a.orientation.right_top:A=a.ui._linkPpRight(w,t,_,E,y,d);break;case a.orientation.left:case a.orientation.left_top:A=a.ui._linkPpLeft(w,t,_,E,y,d)}else{var x=_.isAssistant&&_.rightNeighbor&&_.rightNeighbor.isAssistant&&_.parent==_.rightNeighbor.parent,S=_.isAssistant&&_.leftNeighbor&&_.leftNeighbor.isAssistant&&_.parent==_.leftNeighbor.parent;if((x||_.layout>1)&&_.rightNeighbor&&_.rightNeighbor.isSplit)switch(c.orientation){case a.orientation.top:case a.orientation.top_left:case a.orientation.bottom:case a.orientation.bottom_left:A=a.ui._linkRightToLeft(_.rightNeighbor,_,d,h);break;case a.orientation.right:case a.orientation.right_top:case a.orientation.left:case a.orientation.left_top:A=a.ui._linkBottomToTop(_.rightNeighbor,_,d,h)}else if((S||_.layout>1)&&_.leftNeighbor&&_.leftNeighbor.isSplit)switch(c.orientation){case a.orientation.top:case a.orientation.top_left:case a.orientation.bottom:case a.orientation.bottom_left:A=a.ui._linkLeftToRight(_.leftNeighbor,_,d,h);break;case a.orientation.right:case a.orientation.right_top:case a.orientation.left:case a.orientation.left_top:A=a.ui._linkTopToBottom(_.leftNeighbor,_,d,h)}else switch(c.orientation){case a.orientation.top:case a.orientation.top_left:_.isPartner==1?A=a.ui._linkLeftToRight(t,_,d,p):_.isPartner==2?A=a.ui._linkRightToLeft(t,_,d,p):(I=_.layout==1?void 0:E.minY-(E.minY-y.maxY)/2,A=a.ui._linkTopToBottom(t,_,d,h,I));break;case a.orientation.bottom:case a.orientation.bottom_left:_.isPartner==1?A=a.ui._linkLeftToRight(t,_,d,p):_.isPartner==2?A=a.ui._linkRightToLeft(t,_,d,p):(I=_.layout==1?void 0:E.maxY-(E.maxY-y.minY)/2,A=a.ui._linkBottomToTop(t,_,d,h,I));break;case a.orientation.right:case a.orientation.right_top:_.isPartner==1?A=a.ui._linkTopToBottom(t,_,d,p):_.isPartner==2?A=a.ui._linkBottomToTop(t,_,d,p):(I=_.layout==1?void 0:E.maxX-(E.maxX-y.minX)/2,A=a.ui._linkRightToLeft(t,_,d,h,I));break;case a.orientation.left:case a.orientation.left_top:_.isPartner==1?A=a.ui._linkTopToBottom(t,_,d,p):_.isPartner==2?A=a.ui._linkBottomToTop(t,_,d,p):(I=_.layout==1?void 0:E.minX-(E.minX-y.maxX)/2,A=a.ui._linkLeftToRight(t,_,d,h,I))}}var R=a.ui._draggableLinkPath(e,t,_,A,h,c.orientation);if(R)b=R,k=k.replaceAll("{rounded}",R).replaceAll("{edge}",R).replaceAll("{curve}",b);else if(k.indexOf("{rounded}")!=-1)if(A.xa==A.xb&&A.xa==A.xc&&A.xa==A.xd||A.ya==A.yb&&A.ya==A.yc&&A.ya==A.yd)b="M"+A.xa+","+A.ya+" L"+A.xd+","+A.yd,k=k.replaceAll("{rounded}",b);else if(Math.abs(A.xa-A.xd)<=a.LINK_ROUNDED_CORNERS&&Math.abs(A.xa-A.xc)<=a.LINK_ROUNDED_CORNERS&&Math.abs(A.xa-A.xb)<=a.LINK_ROUNDED_CORNERS)b="M"+A.xa+","+A.ya+" L"+A.xa+","+A.yd,k=k.replaceAll("{rounded}",b);else if(Math.abs(A.ya-A.yd)<=a.LINK_ROUNDED_CORNERS&&Math.abs(A.ya-A.yc)<=a.LINK_ROUNDED_CORNERS&&Math.abs(A.ya-A.yb)<=a.LINK_ROUNDED_CORNERS)b="M"+A.xa+","+A.ya+" L"+A.xd+","+A.ya,k=k.replaceAll("{rounded}",b);else{var T=a.ui._roundedEdge(A.xa,A.ya,A.xb,A.yb,A.xc,A.yc),N=a.ui._roundedEdge(A.xb,A.yb,A.xc,A.yc,A.xd,A.yd);b="M"+T.x1+","+T.y1+" "+T.x2+","+T.y2+" Q"+T.qx1+","+T.qy1+" "+T.qx2+","+T.qy2+" L"+N.x2+","+N.y2+" Q"+N.qx1+","+N.qy1+" "+N.qx2+","+N.qy2+" L"+N.x3+","+N.y3,k=k.replaceAll("{rounded}",b)}else k.indexOf("{edge}")!=-1?(b="M"+A.xa+","+A.ya+" "+A.xb+","+A.yb+" "+A.xc+","+A.yc+" L"+A.xd+","+A.yd,k=k.replaceAll("{edge}",b)):k.indexOf("{curve}")!=-1?(b="M"+A.xa+","+A.ya+" C"+A.xb+","+A.yb+" "+A.xc+","+A.yc+" "+A.xd+","+A.yd,k=k.replaceAll("{curve}",b)):(b=k.replaceAll("{xa}",A.xa).replaceAll("{ya}",A.ya).replaceAll("{xb}",A.xb).replaceAll("{yb}",A.yb).replaceAll("{xc}",A.xc).replaceAll("{yc}",A.yc).replaceAll("{xd}",A.xd).replaceAll("{yd}",A.yd),k=b);u.push(a.linkOpenTag.replaceAll("{id}",t.id).replaceAll("{class}","link "+_.tags.join(" ")).replaceAll("{child-id}",_.id));var P={node:t,cnode:_,p:A,html:k,action:o};a.events.publish("render-link",[e,P]),u.push(P.html),s&&f.push({id:t.id,childId:_.id,html:P.html});var V="";for(var $ in e.config.linkBinding){var D=e.config.linkBinding[$],O=e._get(_.id);if(O){var B=O[D];P.value=B,P.element=d[$],P.name=D,a.events.publish("label",[e,P])!==!1&&(a.isNEU(P.value)||a.isNEU(P.element)||(V+=P.element.replace("{val}",P.value)))}}if(V!=""){var j=A.x,z=A.y;_.movey!=null&&(z+=_.movey),V=a.linkFieldsOpenTag.replace("{x}",j).replace("{y}",z).replace("{rotate}",0)+V+a.grCloseTag,u.push(V)}u.push(a.grCloseTag)}return s?f:u.join("")},svg:function(t,e,n,r,i,o){return a.t(r.template,!1,o).svg.replace("{w}",t).replace("{h}",e).replace("{viewBox}",n).replace("{randId}",a.ui._defsIds[r.template]).replace("{mode}",r.mode).replace("{template}",r.template).replace("{content}",function(){return i})},menuButton:function(t){return t.menu==null?"":a.t(t.template,!1).menuButton.replaceAll("{p}",t.padding)},_roundedEdge:function(t,e,n,r,i,o){var s,l,c,d=a.LINK_ROUNDED_CORNERS,u=0;return t==n&&t==i||e==r&&e==o?(s=c=n,l=u=r):(t!=i&&n==i&&(s=c=n,l=r,e<o?u=r+d:e>o&&(u=r-d)),t<i&&n==i?n-=d:t>i&&n==i&&(n+=d),e!=o&&r==o&&(s=n,l=u=r,t<i?c=n+d:t>i&&(c=n-d)),e<o&&r==o?r-=d:e>o&&r==o&&(r+=d)),{x1:t,y1:e,x2:n,y2:r,x3:i,y3:o,qx1:s,qy1:l,qx2:c,qy2:u}},_linkTopToBottom:function(t,e,n,r,i){var o,s,l,c,d,u=0;return o=t.x+t.w/2+n.linkAdjuster.toX,s=t.y+t.h+n.linkAdjuster.toY,c=l=e.x+e.w/2+n.linkAdjuster.fromX,d=e.y+n.linkAdjuster.fromY,{xa:o,ya:s,xb:o,yb:u=t.rightNeighbor&&t.rightNeighbor.isAssistant&&e.templateName=="split"?t.rightNeighbor.y+t.rightNeighbor.h+r:t.templateName=="split"&&(e.isAssistant||e.layout>1)?d:e.templateName=="split"?s+r:i??d-r,xc:l,yc:u,xd:c,yd:d,x:l,y:a.isNEU(e.parentPartner)?u+16:u,rotate:0}},_linkBottomToTop:function(t,e,n,r,i){var o,s,l,c,d,u=0;return o=t.x+t.w/2+n.linkAdjuster.toX,s=t.y+n.linkAdjuster.toY,c=l=e.x+e.w/2+n.linkAdjuster.fromX,d=e.y+e.h+n.linkAdjuster.fromY,{xa:o,ya:s,xb:o,yb:u=t.rightNeighbor&&t.rightNeighbor.isAssistant&&e.templateName=="split"?t.rightNeighbor.y-r:t.templateName=="split"&&(e.isAssistant||e.layout>1)?d:e.templateName=="split"?s-r:i??d+r,xc:l,yc:u,xd:c,yd:d,x:l,y:u-14,rotate:0}},_linkRightToLeft:function(t,e,n,r,i){var o,s,l,c,d,u,f=0;return o=t.x+n.linkAdjuster.toX,s=t.y+t.h/2+n.linkAdjuster.toY,d=e.x+e.w+n.linkAdjuster.fromX,u=c=e.y+e.h/2+n.linkAdjuster.fromY,l=s,{xa:o,ya:s,xb:f=t.rightNeighbor&&t.rightNeighbor.isAssistant&&e.templateName=="split"?t.rightNeighbor.x-r:t.templateName=="split"&&(e.isAssistant||e.layout>1)?d:e.templateName=="split"?o-r:i??d+r,yb:l,xc:f,yc:c,xd:d,yd:u,x:f-16,y:c,rotate:90}},_linkLeftToRight:function(t,e,n,r,i){var o,s,l,c,d,u,f=0;return o=t.x+t.w+n.linkAdjuster.toX,s=t.y+t.h/2+n.linkAdjuster.toY,d=e.x+n.linkAdjuster.fromX,u=c=e.y+e.h/2+n.linkAdjuster.fromY,l=s,{xa:o,ya:s,xb:f=t.rightNeighbor&&t.rightNeighbor.isAssistant&&e.templateName=="split"?t.rightNeighbor.x+t.rightNeighbor.w+r:t.templateName=="split"&&(e.isAssistant||e.layout>1)?d:e.templateName=="split"?o+r:i??d-r,yb:l,xc:f,yc:c,xd:d,yd:u,x:f+14,y:c,rotate:270}},_linkPpTop:function(t,e,n,r,i,o){var s=t.ppnodes[n.id],l=s.y+s.h/2,c=r.minY-(r.minY-i.maxY)/2,d=(r.minY-i.maxY)/t.maxSidePartnersWithChildren/4,u=a.ui.__linkPpBottomTop(t,e,n,c,d,s),f=u.x;return c=u.mid,a.ui._linkTopToBottom({x:f,y:l,w:0,h:0},n,o,0,c)},_linkPpBottom:function(t,e,n,r,i,o){var s=t.ppnodes[n.id],l=s.y+s.h/2,c=r.maxY-(r.maxY-i.minY)/2,d=(r.maxY-i.minY)/t.maxSidePartnersWithChildren/4,u=a.ui.__linkPpBottomTop(t,e,n,c,d,s),f=u.x;return c=u.mid,a.ui._linkBottomToTop({x:f,y:l,w:0,h:0},n,o,0,c)},_linkPpLeft:function(t,e,n,r,i,o){var s=t.ppnodes[n.id],l=r.minX-(r.minX-i.maxX)/2,c=(r.minX-i.maxX)/t.maxSidePartnersWithChildren/4,d=s.x+s.w/2,u=a.ui.__linkPpLeftRight(t,e,n,l,c,s),f=u.y;return l=u.mid,a.ui._linkLeftToRight({x:d,y:f,w:0,h:0},n,o,0,l)},_linkPpRight:function(t,e,n,r,i,o){var s=t.ppnodes[n.id],l=r.maxX-(r.maxX-i.minX)/2,c=(r.maxX-i.minX)/t.maxSidePartnersWithChildren/4,d=s.x+s.w/2,u=a.ui.__linkPpLeftRight(t,e,n,l,c,s),f=u.y;return l=u.mid,a.ui._linkRightToLeft({x:d,y:f,w:0,h:0},n,o,0,l)},__linkPpBottomTop:function(t,e,n,r,i,o){var s=0;return o.isPartner==1?(s=o.x-e.partnerSeparation/2+t.indexes[n.id]*t.partnerChildrenSplitSeparation-(t.rightIds.length-1)*t.partnerChildrenSplitSeparation/2,t.lastLeft&&s<t.lastLeft.x+t.lastLeft.w/2?s<n.x+n.w/2?r-=(t.indexes[n.id]+1)*i:r-=(t.rightIds.length-t.indexes[n.id])*i:s<n.x+n.w/2?r+=(t.rightIds.length-t.indexes[n.id])*i:r+=(t.indexes[n.id]+1)*i):o.isPartner==2&&(s=o.x+o.w+e.partnerSeparation/2+t.indexes[n.id]*t.partnerChildrenSplitSeparation-(t.leftIds.length-1)*t.partnerChildrenSplitSeparation/2,t.firstRight&&s>t.firstRight.x+t.firstRight.w/2?s<n.x+n.w/2?r-=(t.indexes[n.id]+1)*i:r-=(t.leftIds.length-t.indexes[n.id])*i:s<n.x+n.w/2?r+=(t.leftIds.length-t.indexes[n.id])*i:r+=(t.indexes[n.id]+1)*i),{x:s,mid:r}},__linkPpLeftRight:function(t,e,n,r,i,o){var s=0;return o.isPartner==1?(s=o.y-e.partnerSeparation/2+t.indexes[n.id]*t.partnerChildrenSplitSeparation-(t.rightIds.length-1)*t.partnerChildrenSplitSeparation/2,t.lastLeft&&s<t.lastLeft.y+t.lastLeft.h/2?s<n.y+n.h/2?r-=(t.indexes[n.id]+1)*i:r-=(t.rightIds.length-t.indexes[n.id])*i:s<n.y+n.h/2?r+=(t.rightIds.length-t.indexes[n.id])*i:r+=(t.indexes[n.id]+1)*i):o.isPartner==2&&(s=o.y+o.h+e.partnerSeparation/2+t.indexes[n.id]*t.partnerChildrenSplitSeparation-(t.leftIds.length-1)*t.partnerChildrenSplitSeparation/2,t.firstRight&&s>t.firstRight.y+t.firstRight.h/2?s<n.y+n.h/2?r-=(t.indexes[n.id]+1)*i:r-=(t.leftIds.length-t.indexes[n.id])*i:s<n.y+n.h/2?r+=(t.leftIds.length-t.indexes[n.id])*i:r+=(t.indexes[n.id]+1)*i),{y:s,mid:r}},_draggableLinkPath:function(t,e,n,r,i,o){if(n.isPartner||n.isAssistant)return null;if(a._isMoved(n)&&!a._isMoved(e)){var s=[];switch(o){case a.orientation.top:case a.orientation.top_left:if(r.yb+i/2<r.yd)return null;c=r.xa<r.xd?n.x-i/2:n.x+n.w+i/2,d=n.y-i/2;break;case a.orientation.bottom:case a.orientation.bottom_left:if(r.yb-i/2>r.yd)return null;c=r.xa<r.xd?n.x-i/2:n.x+n.w+i/2,d=n.y+n.h+i/2;break;case a.orientation.right:case a.orientation.right_top:if(r.xb-i/2>r.xd)return null;d=r.ya<r.yd?n.y-i/2:n.y+n.h+i/2,c=n.x+n.w+i/2;break;case a.orientation.left:case a.orientation.left_top:if(r.xb+i/2<r.xd)return null;d=r.ya<r.yd?n.y-i/2:n.y+n.h+i/2,c=n.x-i/2}switch(o){case a.orientation.top:case a.orientation.top_left:case a.orientation.bottom:case a.orientation.bottom_left:s.push(["M",r.xa,r.ya]),s.push(["L",r.xb,r.yb]),s.push(["L",c,r.yb]),s.push(["L",c,d]),s.push(["L",r.xd,d]),s.push(["L",r.xd,r.yd]);break;case a.orientation.right:case a.orientation.right_top:case a.orientation.left:case a.orientation.left_top:(s=[]).push(["M",r.xa,r.ya]),s.push(["L",r.xb,r.yb]),s.push(["L",r.xb,d]),s.push(["L",c,d]),s.push(["L",c,r.yd]),s.push(["L",r.xd,r.yd])}return a.roundPathCorners(s,a.LINK_ROUNDED_CORNERS,!1)}if(!a._isMoved(n)&&a._isMoved(e)){var l=!1;switch(s=[],o){case a.orientation.top:case a.orientation.top_left:if(r.ya+i/2>r.yb)l=!0,c=r.xa<r.xd?e.x+e.w+i/2:e.x-i/2,d=e.y+e.h+i;else{if(r.yb+i/2<r.yd)return null;c=r.xa<r.xd?n.x-i/2:n.x+n.w+i/2,d=n.y-i/2}break;case a.orientation.bottom:case a.orientation.bottom_left:if(r.ya-i/2<r.yb)l=!0,c=r.xa<r.xd?e.x+e.w+i/2:e.x-i/2,d=e.y-i;else{if(r.yb-i/2>r.yd)return null;c=r.xa<r.xd?n.x-i/2:n.x+n.w+i/2,d=n.y+n.h+i/2}break;case a.orientation.right:case a.orientation.right_top:if(r.xa-i/2<r.xb)l=!0,d=r.ya<r.yd?e.y+e.h+i/2:e.y-i/2,c=e.x-i;else{if(r.xb-i/2>r.xd)return null;d=r.ya<r.yd?n.y-i/2:n.y+n.h+i/2,c=n.x+n.w+i/2}break;case a.orientation.left:case a.orientation.left_top:if(r.xa+i/2>r.xb)l=!0,d=r.ya<r.yd?e.y+e.h+i/2:e.y-i/2,c=e.x+e.w+i;else{if(r.xb+i/2<r.xd)return null;d=r.ya<r.yd?n.y-i/2:n.y+n.h+i/2,c=n.x-i/2}}if(l)switch(o){case a.orientation.top:case a.orientation.top_left:case a.orientation.bottom:case a.orientation.bottom_left:s.push(["M",r.xa,r.ya]),s.push(["L",r.xa,d]),s.push(["L",c,d]),s.push(["L",c,r.yc]),s.push(["L",r.xc,r.yc]),s.push(["L",r.xd,r.yd]);break;case a.orientation.right:case a.orientation.right_top:case a.orientation.left:case a.orientation.left_top:s.push(["M",r.xa,r.ya]),s.push(["L",c,r.ya]),s.push(["L",c,d]),s.push(["L",r.xc,d]),s.push(["L",r.xc,r.yc]),s.push(["L",r.xd,r.yd])}else switch(o){case a.orientation.top:case a.orientation.top_left:case a.orientation.bottom:case a.orientation.bottom_left:s.push(["M",r.xa,r.ya]),s.push(["L",r.xb,r.yb]),s.push(["L",c,r.yb]),s.push(["L",c,d]),s.push(["L",r.xd,d]),s.push(["L",r.xd,r.yd]);break;case a.orientation.right:case a.orientation.right_top:case a.orientation.left:case a.orientation.left_top:s.push(["M",r.xa,r.ya]),s.push(["L",r.xb,r.yb]),s.push(["L",r.xb,d]),s.push(["L",c,d]),s.push(["L",c,r.yd]),s.push(["L",r.xd,r.yd])}return a.roundPathCorners(s,a.LINK_ROUNDED_CORNERS,!1)}if(a._isMoved(n)&&a._isMoved(e)){switch(s=[],o){case a.orientation.top:case a.orientation.top_left:if(r.ya+i>r.yd){var c=r.xa<r.xd?e.x+e.w+i/2:e.x-i/2,d=e.y+e.h+i,u=n.y-i;s.push(["M",r.xa,r.ya]),s.push(["L",r.xa,d]),s.push(["L",c,d]),s.push(["L",c,u]),s.push(["L",r.xc,u]),s.push(["L",r.xd,r.yd])}else s.push(["M",r.xa,r.ya]),s.push(["L",r.xa,e.y+e.h+i]),s.push(["L",r.xc,e.y+e.h+i]),s.push(["L",r.xd,r.yd]);break;case a.orientation.bottom:case a.orientation.bottom_left:r.ya-i<r.yd?(c=r.xa<r.xd?e.x+e.w+i/2:e.x-i/2,d=e.y-i,u=n.y+n.h+i,s.push(["M",r.xa,r.ya]),s.push(["L",r.xa,d]),s.push(["L",c,d]),s.push(["L",c,u]),s.push(["L",r.xc,u]),s.push(["L",r.xd,r.yd])):(s.push(["M",r.xa,r.ya]),s.push(["L",r.xa,e.y-i]),s.push(["L",r.xc,e.y-i]),s.push(["L",r.xd,r.yd]));break;case a.orientation.right:case a.orientation.right_top:if(r.xa-i<r.xd){d=r.ya<r.yd?e.y+e.h+i/2:e.y-i/2,c=e.x-i;var f=n.x+n.w+i;s.push(["M",r.xa,r.ya]),s.push(["L",c,r.ya]),s.push(["L",c,d]),s.push(["L",f,d]),s.push(["L",f,r.yc]),s.push(["L",r.xd,r.yd])}else s.push(["M",r.xa,r.ya]),s.push(["L",e.x-i,r.ya]),s.push(["L",e.x-i,r.yc]),s.push(["L",r.xd,r.yd]);break;case a.orientation.left:case a.orientation.left_top:r.xa+i>r.xd?(d=r.ya<r.yd?e.y+e.h+i/2:e.y-i/2,c=e.x+e.w+i,f=n.x-i,s.push(["M",r.xa,r.ya]),s.push(["L",c,r.ya]),s.push(["L",c,d]),s.push(["L",f,d]),s.push(["L",f,r.yc]),s.push(["L",r.xd,r.yd])):(s.push(["M",r.xa,r.ya]),s.push(["L",e.x+e.w+i,r.ya]),s.push(["L",e.x+e.w+i,r.yc]),s.push(["L",r.xd,r.yd]))}return a.roundPathCorners(s,a.LINK_ROUNDED_CORNERS,!1)}return null}},a.ui._base_nodeBtns=a.ui.nodeBtns,a.ui.nodeBtns=function(t,e,n,r,i){var o="";return i._tree_menu_temp?!e.isSplit&&n!==a.action.exporting&&r.nodeTreeMenuCloseButton&&i._tree_menu_temp.id==e.id&&(o+=r.nodeTreeMenuCloseButton):(o=a.ui._base_nodeBtns(t,e,n,r,i),t.nodeTreeMenu!=null&&!e.isSplit&&n!==a.action.exporting&&r.nodeTreeMenuButton&&(o+=r.nodeTreeMenuButton.replace("{id}",e.id))),o},a.ui._base_expandCollapseBtn=a.ui.expandCollapseBtn,a.ui.expandCollapseBtn=function(t,e,n,r,i){return t._tree_menu_temp?"":a.ui._base_expandCollapseBtn(t,e,n,r,i)},a.xScrollUI=function(t,e,n,r,i){this.element=t,this.requestParams=n,this.config=e,this.onSetViewBoxCallback=r,this.onDrawCallback=i,this.position=0,this.bar=null,this._event_id=a._guid()},a.xScrollUI.prototype.addListener=function(t){var e=this;if((this.config.mouseScrool==a.action.xScroll||this.config.mouseScrool==a.action.scroll)&&this.bar){var n=navigator.userAgent.indexOf("Mac OS")!==-1,r=a._getScrollSensitivity();(function(i,o,s){var l=!1;function c(){l=!0;var u=(e.position-e.bar.scrollLeft)/s;if(u>0)u++;else{if(u==0)return void(l=!1);u--}Math.ceil(e.bar.scrollLeft)==Math.ceil(e.position)?l=!1:(e.bar.scrollLeft+=u,d(c))}i.addEventListener("wheel",function(u){if(!u.ctrlKey){var f=0;if(e.config.mouseScrool==a.action.xScroll)(f=u.deltaX||u.wheelDeltaX)||(f=u.deltaY||u.wheelDeltaY);else if(e.config.mouseScrool==a.action.scroll&&!(f=n||!u.shiftKey?u.deltaX||u.wheelDeltaX:u.deltaY||u.wheelDeltaY))return;f=-f,f=Math.max(-1,Math.min(1,f)),e.position+=-f*o;var h=parseFloat(e.innerBar.clientWidth)-parseFloat(e.bar.clientWidth);e.position<0&&(e.position=0),e.position>h&&(e.position=h),l||c()}},{passive:!0});var d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(u){setTimeout(u,20)}})(t,r.speed,r.smooth)}},a.xScrollUI.prototype.create=function(t){if(this.config.showXScroll===a.scroll.visible||this.config.mouseScrool===a.action.scroll||this.config.mouseScrool===a.action.xScroll){var e=this;this.bar&&this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.bar=document.createElement("div"),this.innerBar=document.createElement("div"),this.requestParams(),this.innerBar.innerHTML="&nbsp",Object.assign(this.bar.style,{position:"absolute",left:0,bottom:0,width:t+"px","overflow-x":"scroll",height:"20px"}),this.element.appendChild(this.bar),this.bar.appendChild(this.innerBar),this.bar.addEventListener("scroll",function(){if(this.ignore)this.ignore=!1;else{var n=e.requestParams(),r=(parseFloat(e.innerBar.clientWidth)-parseFloat(e.bar.clientWidth))/100,i=this.scrollLeft/r,o=(n.boundary.right-n.boundary.left)/100;n.viewBox[0]=i*o+n.boundary.left,e.onSetViewBoxCallback(n.viewBox),clearTimeout(this._timeout),this._timeout=setTimeout(function(){e.onDrawCallback()},500)}})}},a.xScrollUI.prototype.setPosition=function(){if(this.bar){var t=this.requestParams(),e=(Math.abs(t.boundary.maxX-t.boundary.minX)+2*this.config.padding)*t.scale;switch(this.config.orientation){case a.orientation.right:case a.orientation.right_top:e=Math.abs(t.boundary.minX*t.scale)}this.innerBar.style.width=e+"px";var n=(t.boundary.right-t.boundary.left)/100,r=(t.viewBox[0]-t.boundary.left)/n;r<0?r=0:r>100&&(r=100);var i=(parseFloat(this.innerBar.clientWidth)-parseFloat(this.bar.clientWidth))/100,o=r*i;this.bar.ignore=!0,this.bar.scrollLeft=o,this.position=this.bar.scrollLeft,this.bar.style.visibility=i<=0?"hidden":"",this.config.showXScroll!==a.scroll.visible&&(this.bar.style.visibility="hidden"),a.events.publish("change",[this,{isScrollBarVisible:this.bar.style.visibility!="hidden"}])}},a.xScrollUI.prototype.on=function(t,e){return a.events.on(t,e,this._event_id),this},a.yScrollUI=function(t,e,n,r,i){this.element=t,this.requestParams=n,this.config=e,this.onSetViewBoxCallback=r,this.onDrawCallback=i,this.position=0,this.bar=null,this._event_id=a._guid()},a.yScrollUI.prototype.addListener=function(t){var e=this;if((this.config.mouseScrool==a.action.yScroll||this.config.mouseScrool==a.action.scroll)&&this.bar){var n=navigator.userAgent.indexOf("Mac OS")!==-1,r=a._getScrollSensitivity();(function(i,o,s){var l=!1;function c(){l=!0;var u=(e.position-e.bar.scrollTop)/s;if(u>0)u++;else{if(u==0)return void(l=!1);u--}Math.ceil(e.bar.scrollTop)==Math.ceil(e.position)?l=!1:(e.bar.scrollTop+=u,d(c))}i.addEventListener("wheel",function(u){if(!u.ctrlKey){var f=0;if(e.config.mouseScrool==a.action.yScroll)(f=u.deltaY||u.wheelDeltaY)||(f=u.deltaX||u.wheelDeltaX);else if(e.config.mouseScrool==a.action.scroll&&!(f=n||!u.shiftKey?u.deltaY||u.wheelDeltaY:u.deltaX||u.wheelDeltaX))return;f=-f,f=Math.max(-1,Math.min(1,f)),e.position+=-f*o;var h=parseFloat(e.innerBar.clientHeight)-parseFloat(e.bar.clientHeight);e.position<0&&(e.position=0),e.position>h&&(e.position=h),l||c()}},{passive:!0});var d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(u){setTimeout(u,20)}})(t,r.speed,r.smooth)}},a.yScrollUI.prototype.create=function(t){if(this.config.showYScroll===a.scroll.visible||this.config.mouseScrool===a.action.scroll||this.config.mouseScrool===a.action.yScroll){var e=this;this.bar&&this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.bar=document.createElement("div"),this.innerBar=document.createElement("div"),this.innerBar.innerHTML="&nbsp",Object.assign(this.bar.style,{position:"absolute",right:0,bottom:0,height:t+"px","overflow-y":"scroll",width:"20px"}),this.element.appendChild(this.bar),this.bar.appendChild(this.innerBar),this.bar.addEventListener("scroll",function(){if(this.ignore)this.ignore=!1;else{var n=e.requestParams(),r=(parseFloat(e.innerBar.clientHeight)-parseFloat(e.bar.clientHeight))/100,i=this.scrollTop/r,o=(n.boundary.bottom-n.boundary.top)/100;n.viewBox[1]=i*o+n.boundary.top,e.onSetViewBoxCallback(n.viewBox),clearTimeout(this._timeout),this._timeout=setTimeout(function(){e.onDrawCallback()},500)}})}},a.yScrollUI.prototype.setPosition=function(){if(this.bar){var t=this.requestParams(),e=(Math.abs(t.boundary.maxY-t.boundary.minY)+2*this.config.padding)*t.scale;switch(this.config.orientation){case a.orientation.bottom:case a.orientation.bottom_left:e=Math.abs(t.boundary.minY*t.scale)}this.innerBar.style.height=e+"px";var n=(t.boundary.bottom-t.boundary.top)/100,r=(t.viewBox[1]-t.boundary.top)/Math.abs(n);r<0?r=0:r>100&&(r=100);var i=(parseFloat(this.innerBar.clientHeight)-parseFloat(this.bar.clientHeight))/100,o=r*i;this.bar.ignore=!0,this.bar.scrollTop=o,this.position=this.bar.scrollTop,this.bar.style.visibility=i<=0?"hidden":"",this.config.showYScroll!==a.scroll.visible&&(this.bar.style.visibility="hidden"),a.events.publish("change",[this,{isScrollBarVisible:this.bar.style.visibility!="hidden"}])}},a.yScrollUI.prototype.on=function(t,e){return a.events.on(t,e,this._event_id),this},a.prototype.zoom=function(t,e,n,r){var i=this.getViewBox().slice(0),o=i,s=i[2],l=i[3];t===!0?(i[2]=i[2]/a.SCALE_FACTOR,i[3]=i[3]/a.SCALE_FACTOR):t===!1?(i[2]=i[2]*a.SCALE_FACTOR,i[3]=i[3]*a.SCALE_FACTOR):(i[2]=i[2]/t,i[3]=i[3]/t),e||(e=[50,50]),i[0]=o[0]-(i[2]-s)/(100/e[0]),i[1]=o[1]-(i[3]-l)/(100/e[1]);var c=this.getScale(i);if(i[2]=this.width()/c,i[3]=this.height()/c,t===!0&&c<this.config.scaleMax||t===!1&&c>this.config.scaleMin||t!=0&&t!=1&&c<this.config.scaleMax&&c>this.config.scaleMin){this._hideBeforeAnimation();var d=this;n?(clearTimeout(d._timeout),a.animate(this.getSvg(),{viewbox:this.getViewBox()},{viewbox:i},this.config.anim.duration,this.config.anim.func,function(){clearTimeout(d._timeout),d._timeout=setTimeout(function(){d._draw(!0,a.action.zoom,null,r)},500)})):(this.setViewBox(i),clearTimeout(d._timeout),d._timeout=setTimeout(function(){d._draw(!0,a.action.zoom,null,r)},500))}},a.loading={},a.loading.show=function(t){var e=document.createElement("div");e.id="bft-loading",e.innerHTML='<style>@-webkit-keyframes dot-keyframes {0% { opacity: .4; -webkit-transform: scale(1, 1);transform: scale(1, 1);}50% {opacity: 1;-webkit-transform: scale(1.2, 1.2);transform: scale(1.2, 1.2);}100% {opacity: .4;-webkit-transform: scale(1, 1);transform: scale(1, 1);}}@keyframes dot-keyframes {0% {opacity: .4;-webkit-transform: scale(1, 1);transform: scale(1, 1);}50% {opacity: 1;-webkit-transform: scale(1.2, 1.2);transform: scale(1.2, 1.2);}100% {opacity: .4;-webkit-transform: scale(1, 1);transform: scale(1, 1);}}.bft-loading-dots div {margin: 10px;}      .bft-dot-1 {background-color: #039BE5;}.bft-dot-2 {background-color: #F57C00;}.bft-dot-3 {background-color: #FFCA28;}      .bft-loading-dots {text-align: center;width: 100%; position: absolute; top: 0;}.bft-loading-dots--dot {-webkit-animation: dot-keyframes 1.5s infinite ease-in-out;animation: dot-keyframes 1.5s infinite ease-in-out;        border-radius: 10px;display: inline-block;height: 10px;width: 10px;}.bft-loading-dots--dot:nth-child(2) {-webkit-animation-delay: .5s;animation-delay: .5s;}.bft-loading-dots--dot:nth-child(3) {-webkit-animation-delay: 1s;animation-delay: 1s;}</style><div class="bft-loading-dots"><div class="bft-loading-dots--dot bft-dot-1"></div><div class="bft-loading-dots--dot bft-dot-2"></div><div class="bft-loading-dots--dot bft-dot-3"></div></div>',t.element.appendChild(e)},a.loading.hide=function(t){var e=t.element.querySelector("#bft-loading");e&&e.parentNode.removeChild(e)},a.pdfPrevUI={},a.loc||(a.loc={}),a.loc.ppdfCmdTitle="PDF Preview",a.loc.ppdfSave="Save",a.loc.ppdfCancel="Cancel",a.loc.ppdfFormat="Format",a.loc.ppdfFitToDrwaing="Fit",a.loc.ppdfA4="A4",a.loc.ppdfA3="A3",a.loc.ppdfA2="A2",a.loc.ppdfA1="A1",a.loc.ppdfLetter="Letter",a.loc.ppdfLegal="Legal",a.loc.ppdfLayout="Layout",a.loc.ppdfPortrait="Portrait",a.loc.ppdfLandscape="Landscape",a.loc.ppdfFittopagewidth="Fit to page width",a.loc.ppdfMargin="Margin",a.loc.ppdfHeader="Header",a.loc.ppdfFooter="Footer",a.loc.ppdfScale="Scale",a.pdfPrevUI.show=function(t,e){a.pdfPrevUI.hide(t),e=t._defaultExportOptions(e,"pdf");var n=document.createElement("div");n.classList.add(t.config.mode),n.id="bft-ppdf-btns",Object.assign(n.style,{position:"absolute",top:0,left:0,"background-color":"#fff","z-index":5,margin:"0 0 0 -265px","box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",width:"265px",height:"100%","font-family":"Roboto,Helvetica",color:"#757575","text-align":"right",padding:"10px"}),t.element.appendChild(n),n.innerHTML="<h1>"+a.loc.ppdfCmdTitle+'</h1><div><button type="button" id="bft-prev-save" style="font-size: 14px; width: 90px;">'+a.loc.ppdfSave+'</button>&nbsp;<button type="button" id="bft-prev-cancel" style="width: 90px;font-size: 14px;">'+a.loc.ppdfCancel+'</button></div><div style="margin-top:30px; height:10px;border-bottom:1px solid #eeeeee;"></div><div style="padding-top:30px;"><label for="bft-size">'+a.loc.ppdfFormat+': </label><select id="bft-ppdf-size" style="color: #757575; width: 150px; font-size: 14px;" id="bft-size"><option value="fit">'+a.loc.ppdfFitToDrwaing+'</option><option value="A4">'+a.loc.ppdfA4+'</option><option value="A3">'+a.loc.ppdfA3+'</option><option value="A2">'+a.loc.ppdfA2+'</option><option value="A1">'+a.loc.ppdfA1+'</option><option value="Letter">'+a.loc.ppdfLetter+'</option><option value="Legal">'+a.loc.ppdfLegal+'</option></select></div><div style="padding-top:10px;"><label for="bft-ppdf-layout">'+a.loc.ppdfLayout+': </label><select id="bft-ppdf-layout" style="color: #757575; width: 150px;font-size: 14px;" ><option value="false">'+a.loc.ppdfPortrait+'</option><option value="true">'+a.loc.ppdfLandscape+'</option></select></div><div style="padding-top:10px;"><label for="bft-scale">'+a.loc.ppdfScale+': </label><select id="bft-ppdf-scale" style="color: #757575; width: 150px;font-size: 14px;" id="bft-scale"><option value="fit">'+a.loc.ppdfFittopagewidth+'</option><option value="10">10%</option><option value="20">20%</option><option value="30">30%</option><option value="40">40%</option><option value="50">50%</option><option value="60">60%</option><option value="70">70%</option><option value="80">80%</option><option value="90">90%</option><option value="100">100%</option><option value="110">110%</option><option value="120">120%</option><option value="130">130%</option><option value="140">140%</option><option value="150">150%</option><option value="160">160%</option><option value="170">170%</option><option value="180">180%</option><option value="190">190%</option><option value="200">200%</option></select></div><div style="margin-top:10px;margin-bottom:10px; height:10px;border-bottom:1px solid #eeeeee;"></div><div style="padding-top:10px;"><label for="bft-ppdf-header">'+a.loc.ppdfHeader+': </label><input id="bft-ppdf-header" type="text" style="color: #757575; width: 100px;font-size: 14px;" ></div><div style="padding-top:10px;"><label for="bft-ppdf-footer">'+a.loc.ppdfFooter+': </label><input id="bft-ppdf-footer" type="text" style="color: #757575; width: 100px;font-size: 14px;" ></div><div style="padding-top:10px;"><label for="bft-ppdf-margin">'+a.loc.ppdfMargin+': </label><input id="bft-ppdf-margin" type="text" style="color: #757575; width: 100px;font-size: 14px;" ></div>';var r=document.createElement("div");r.id="bft-ppdf-wrapper",Object.assign(r.style,{"overflow-y":"scroll","z-index":11,position:"absolute",top:0,left:"285px","background-color":"#eee",width:t.width()-270+"px",height:"100%"}),t.element.appendChild(r),r.innerHTML='<div id="bft-ppdf-content" style="width: 100%;margin-top:10px;margin-bottom:10px;opacity:0;"></div>';var i,o,s,l=t.element.querySelector("#bft-ppdf-size"),c=t.element.querySelector("#bft-ppdf-layout"),d=t.element.querySelector("#bft-ppdf-scale"),u=t.element.querySelector("#bft-ppdf-margin"),f=t.element.querySelector("#bft-ppdf-header"),h=t.element.querySelector("#bft-ppdf-footer");l.value=e.format,c.value=e.landscape,d.value=e.scale,u.value=e.margin,f.value=e.header,h.value=e.footer,a.animate(t.element.querySelector("#bft-ppdf-btns"),{margin:[0,0,0,-250]},{margin:[0,0,0,0]},300,a.anim.outSin,function(){t.exportPDF(e,a.pdfPrevUI._handler)}),t.element.querySelector("#bft-prev-cancel").addEventListener("click",function(){a.pdfPrevUI.hide(t)}),t.element.querySelector("#bft-prev-save").addEventListener("click",function(){t.exportPDF(e),a.pdfPrevUI.hide(t)}),a.pdfPrevUI._showHide(l,c,d),l.addEventListener("change",function(){a.animate(t.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,a.anim.inSin,function(){t.element.querySelector("#bft-ppdf-content").innerHTML="",e.format=l.value,t.exportPDF(e,a.pdfPrevUI._handler),a.pdfPrevUI._showHide(l,c,d)})}),c.addEventListener("change",function(){a.animate(t.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,a.anim.inSin,function(){t.element.querySelector("#bft-ppdf-content").innerHTML="",e.landscape=c.value=="true",t.exportPDF(e,a.pdfPrevUI._handler),a.pdfPrevUI._showHide(l,c,d)})}),d.addEventListener("change",function(){a.animate(t.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,a.anim.inSin,function(){t.element.querySelector("#bft-ppdf-content").innerHTML="",e.scale=d.value,t.exportPDF(e,a.pdfPrevUI._handler),a.pdfPrevUI._showHide(l,c,d)})}),u.addEventListener("keyup",function(){clearTimeout(i),i=setTimeout(function(){a.animate(t.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,a.anim.inSin,function(){t.element.querySelector("#bft-ppdf-content").innerHTML="";var p=u.value.split(",");if(p.length==4){for(var v=0;v<p.length;v++)p[v]=parseInt(p[v]);e.margin=p,t.exportPDF(e,a.pdfPrevUI._handler)}})},1e3)}),f.addEventListener("keyup",function(){clearTimeout(o),o=setTimeout(function(){a.animate(t.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,a.anim.inSin,function(){t.element.querySelector("#bft-ppdf-content").innerHTML="",e.header=f.value,t.exportPDF(e,a.pdfPrevUI._handler)})},1e3)}),h.addEventListener("keyup",function(){clearTimeout(s),s=setTimeout(function(){a.animate(t.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,a.anim.inSin,function(){t.element.querySelector("#bft-ppdf-content").innerHTML="",e.footer=h.value,t.exportPDF(e,a.pdfPrevUI._handler)})},1e3)})},a.pdfPrevUI._showHide=function(t,e,n){t.value=="A4"||t.value=="A3"||t.value=="A2"||t.value=="A1"||t.value=="Letter"||t.value=="Legal"?(e.parentNode.style.display="block",n.parentNode.style.display="block"):(e.parentNode.style.display="none",n.parentNode.style.display="none")},a.pdfPrevUI._handler=function(t,e,n){var r=e.options,i=e.pages,o=r.margin[0],s=r.margin[2],l=document.createElement("div");l.classList.add(t.config.mode),l.innerHTML=n.outerHTML,a._browser().msie&&(l.innerHTML=new XMLSerializer().serializeToString(n));for(var c=l.querySelector("svg"),d=t.element.querySelector("#bft-ppdf-content"),u=0;u<i.length;u++){var f=document.createElement("iframe");Object.assign(f.style,{display:"block",margin:"10px auto",border:"1px solid #eeeeee","box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"}),d.appendChild(f),c&&c.style.backgroundColor?f.style.backgroundColor=c.style.backgroundColor:f.style.backgroundColor="#fff";var h=f.contentWindow.document;h.open(),f.style.width=i[u].size.w+"px",f.style.height=i[u].size.h+"px",f.style.margin="10 auto",i[u].backgroundColor&&(f.style.backgroundColor=i[u].backgroundColor);var p=r.header;i[u].header&&(p=i[u].header),p&&(p=p.replace("{current-page}",u+1).replace("{total-pages}",i.length));var v=r.footer;i[u].footer&&(v=i[u].footer),v&&(v=v.replace("{current-page}",u+1).replace("{total-pages}",i.length)),i[u].html?h.write(a._exportHtml(i[u].html,e.styles,r,i[u].innerSize.w,i[u].innerSize.h,p,v,t.config.mode)):(c.setAttribute("viewBox",i[u].vb),h.write(a._exportHtml(l.innerHTML,e.styles,r,i[u].innerSize.w,i[u].innerSize.h,p,v,t.config.mode)));var y=h.getElementById("bft-header"),w=h.getElementById("bft-footer");if(y){var g=o-y.offsetHeight-7;y.style.top=g+"px"}if(w){var b=s-w.offsetHeight-7;w.style.bottom=b+"px"}h.close()}var _=t.element.querySelector("#bft-ppdf-content");a.animate(_,{opacity:0},{opacity:1},300,a.anim.outSin)},a.pdfPrevUI._getViewBox=function(t){var e=null;return t?(e=(e="["+(e=t.getAttribute("viewBox"))+"]").replace(/\ /g,","),e=JSON.parse(e)):null},a._exportHtml=function(t,e,n,r,i,o,s,l){for(var c="",d=0;d<n.margin.length;d++)c+=n.margin[d]+"px ";var u='<!DOCTYPE html><html style="margin:0;padding:0;"><head></head>'+e+'<body class="bft-'+l+'" style="margin:0; padding:0;"><div style="margin: '+c+";overflow:hidden;width:"+r+"px;height:"+i+'px">';return o&&(u+='<div id="bft-header" style="width:'+r+"px;color:#757575;position:absolute;left:"+n.margin[3]+'px;top:0;">'+o+"</div>"),u+=t,s&&(u+='<div id="bft-footer" style="width:'+r+"px;color:#757575;position:absolute;left:"+n.margin[3]+'px;bottom:0;">'+s+"</div>"),u+="</div>",u+="</body></html>"},a.pdfPrevUI.hide=function(t){var e=t.element.querySelector("#bft-ppdf-wrapper");if(e){e.parentNode.removeChild(e),e.style.opacity=0;var n=t.element.querySelector("#bft-ppdf-btns");n.parentNode.removeChild(n)}},a===void 0&&(a={}),a.events.on("renderdefs",function(t,e){for(var n=0;n<t.config.clinks.length;n++){var r=t.config.clinks[n].template;r||(r="orange");var i=a.clinkTemplates[r];e.defs+=i.defs}}),a.events.on("prerender",function(t,e){a.RENDER_CLINKS_BEFORE_NODES&&t._clink(t,e)}),a.events.on("render",function(t,e){a.RENDER_CLINKS_BEFORE_NODES||t._clink(t,e)}),a.events.on("drag",function(t,e,n,r){if(t instanceof a&&t.config.movable&&r)for(var i=0;i<r.length;i++){for(var o=r[i],s=t.element.querySelectorAll(`[data-c-l-from="${o}"]`),l=t.element.querySelectorAll(`[data-c-l-to="${o}"]`),c=0;c<s.length;c++)s[c].parentNode.removeChild(s[c]);for(c=0;c<l.length;c++)l[c].parentNode.removeChild(l[c])}}),a.prototype._clink=function(t,e){for(var n="",r=0;r<this.config.clinks.length;r++){let x=function(S,R,T){T==null&&(T=1);var N=R.x-S.x,P=R.y-S.y,V=Math.sqrt(Math.pow(R.x-S.x,2)+Math.pow(R.y-S.y,2))/3;return V=V/(Math.sqrt(N*N+P*P)*T)*a.clinkCurve(i),{x:S.x+N/2-P*V,y:S.y+P/2+N*V}};var I=x,i=this.config.clinks[r],o=t.getNode(i.from),s=t.getNode(i.to);if(o&&e.res.visibleNodeIds.indexOf(o.id)!=-1&&s&&e.res.visibleNodeIds.indexOf(s.id)!=-1){var l=o.x,c=o.y,d=s.x,u=s.y,f={},h={},p=l+o.w/2,v=d+s.w/2,y=c+o.h/2,w=u+s.h/2,g=1;switch(this.config.orientation){case a.orientation.top:case a.orientation.top_left:p<=v?(g=1,f.x=p+o.w/10,h.x=v-s.w/10):(g=-1,f.x=p-o.w/10,h.x=v+s.w/10),c==u?(g=1,f.y=c,h.y=u):c>u?(f.y=c,h.y=u+s.h):(f.y=c+o.h,h.y=u);break;case a.orientation.bottom:case a.orientation.bottom_left:p<=v?(g=-1,f.x=p+o.w/10,h.x=v+s.w/10):(g=1,f.x=p-o.w/10,h.x=v+s.w/10),c==u?(g=-1,f.y=c+o.h,h.y=u+s.h):c>u?(f.y=c,h.y=u+s.h):(f.y=c+o.h,h.y=u);break;case a.orientation.left:case a.orientation.left_top:y<=w?(g=-1,f.y=y+o.h/5,h.y=w+s.h/5):(g=1,f.y=y-o.h/5,h.y=w+s.h/5),l==d?(g=-1,f.x=l,h.x=d):l>d?(f.x=l,h.x=d+s.w):(f.x=l+o.w,h.x=d);break;case a.orientation.right:case a.orientation.right_top:y<=w?(g=1,f.y=y+o.h/5,h.y=w+s.h/5):(g=-1,f.y=y-o.h/5,h.y=w+s.h/5),l==d?(g=1,f.x=l+o.w,h.x=d+s.w):l>d?(f.x=l,h.x=d+s.w):(f.x=l+o.w,h.x=d)}var b=x(f,h,g),_=i.template;_||(_="orange");var E=a.clinkTemplates[_];if(i.label){var A=a.clinkLabelPosition(i,f,h,b);n+=E.label.replace("{x}",A.x).replace("{y}",A.y).replace("{val}",i.label)}var k="M"+f.x+","+f.y+"C"+f.x+","+f.y+" "+b.x+","+b.y+" "+h.x+","+h.y;n+=("<g "+a.attr.c_link_from+'="{from}" '+a.attr.c_link_to+'="{to}">').replace("{from}",o.id).replace("{to}",s.id)+E.link.replaceAll("{d}",k)+'<path stroke="transparent" stroke-width="15" fill="none" d="'+k+'" />',n+=a.grCloseTag}}e.content+=n},a.clinkLabelPosition=function(t,e,n,r){var i=(n.x-e.x)/2+e.x,o=(n.y-e.y)/2+e.y;return{x:(i-r.x)/2+r.x,y:(o-r.y)/2+r.y}},a.clinkCurve=function(t){return a.CLINK_CURVE},a.prototype.addClink=function(t,e,n,r){this._putInUndoStack(),this.clearRedo();for(var i=this.config.clinks.length-1;i>=0;i--){var o=this.config.clinks[i];o.from==t&&o.to==e&&this.config.clinks.splice(i,1)}return this.config.clinks.push({from:t,to:e,label:n,template:r}),a.events.publish("updated",[this]),this},a.prototype.removeClink=function(t,e){this._putInUndoStack(),this.clearRedo();for(var n=this.config.clinks.length-1;n>=0;n--){var r=this.config.clinks[n];r.from==t&&r.to==e&&this.config.clinks.splice(n,1)}return a.events.publish("updated",[this]),this},a.clinkTemplates={},a.clinkTemplates.orange={defs:'<marker id="arrowOrange" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#F57C00" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotOrange" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#F57C00" /></marker>',link:'<path marker-start="url(#dotOrange)" marker-end="url(#arrowOrange)" stroke="#F57C00" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#F57C00" text-anchor="middle" x="{x}" y="{y}">{val}</text>'},a.clinkTemplates.blue={defs:'<marker id="arrowBlue" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#039BE5" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotBlue" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#039BE5" /></marker>',link:'<path marker-start="url(#dotBlue)" marker-end="url(#arrowBlue)" stroke="#039BE5" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#039BE5"  text-anchor="middle" x="{x}" y="{y}">{val}</text>'},a.clinkTemplates.yellow={defs:'<marker id="arrowYellow" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#FFCA28" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotYellow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#FFCA28" /></marker>',link:'<path marker-start="url(#dotYellow)" marker-end="url(#arrowYellow)" stroke="#FFCA28" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#FFCA28"  text-anchor="middle" x="{x}" y="{y}">{val}</text>'},a===void 0&&(a={}),a.events.on("renderdefs",function(t,e){for(var n=0;n<t.config.slinks.length;n++){var r=t.config.slinks[n].template;r||(r="orange");var i=a.slinkTemplates[r];e.defs+=i.defs}}),a.events.on("render",function(t,e){t._slinks(t,e)}),a.events.on("drag",function(t,e,n,r){if(t instanceof a&&t.config.movable&&r)for(var i=0;i<r.length;i++){for(var o=r[i],s=t.element.querySelectorAll(`[data-s-l-from="${o}"]`),l=t.element.querySelectorAll(`[data-s-l-to="${o}"]`),c=0;c<s.length;c++)s[c].parentNode.removeChild(s[c]);for(c=0;c<l.length;c++)l[c].parentNode.removeChild(l[c])}}),a.prototype._slinks=function(t,e){var n="",r=this.getScale(),i=e.res.boundary;function o(u,f,h){var p=[],v=null,y="left",w=u.lcn?u.lcn:"base",g=t._layoutConfigs[w];switch(g.orientation){case a.orientation.top:case a.orientation.top_left:case a.orientation.bottom:case a.orientation.bottom_left:f.x>u.x&&(y="right");break;case a.orientation.left:case a.orientation.left_top:case a.orientation.right:case a.orientation.right_top:y="top",f.y>u.y&&(y="bottom")}var b=a.t(u.templateName,u.min,r),_=g.levelSeparation;u.parent&&u.parent.layout&&(_=g.mixedHierarchyNodesSeparation);var E={p:u.x+u.w/2+b.expandCollapseSize,q:u.y,r:u.x+u.w/2+b.expandCollapseSize,s:i.minY+_};if(u.sl==f.sl)switch(v=f,g.orientation){case a.orientation.top:case a.orientation.top_left:p.push([E.p,E.q]),p.push([E.p,E.q-_/3]),b=a.t(v.templateName,v.min,r),p.push([v.x+v.w/2+b.expandCollapseSize,p[p.length-1][1]]),p.push([p[p.length-1][0],v.y]);break;case a.orientation.bottom:case a.orientation.bottom_left:E.q=u.y+u.h,E.s=i.maxY-_,p.push([E.p,E.q]),p.push([E.r,u.y+u.h+_/3]),b=a.t(v.templateName,v.min,r),p.push([v.x+v.w/2+b.expandCollapseSize,p[p.length-1][1]]),p.push([p[p.length-1][0],v.y+v.h]);break;case a.orientation.left:case a.orientation.left_top:E.p=u.x,E.q=u.y+u.h/2+b.expandCollapseSize,E.r=i.minX-_,E.s=u.y+u.h/2+b.expandCollapseSize,p.push([E.p,E.q]),p.push([u.x-_/3,E.q]),b=a.t(v.templateName,v.min,r),p.push([p[p.length-1][0],v.y+v.h/2+b.expandCollapseSize]),p.push([v.x,p[p.length-1][1]]);break;case a.orientation.right:case a.orientation.right_top:E.p=u.x+u.w,E.q=u.y+u.h/2+b.expandCollapseSize,E.r=i.maxX+_,E.s=u.y+u.h/2+b.expandCollapseSize,p.push([E.p,E.q]),p.push([u.x+u.w+_/3,E.q]),b=a.t(v.templateName,v.min,r),p.push([p[p.length-1][0],v.y+v.h/2+b.expandCollapseSize]),p.push([v.x+v.w,p[p.length-1][1]])}else{switch(g.orientation){case a.orientation.top:case a.orientation.top_left:p.push([E.p,E.q]),p.push([E.r,u.y-_/3]);break;case a.orientation.bottom:case a.orientation.bottom_left:E.q=u.y+u.h,E.s=i.maxY-_,p.push([E.p,E.q]),p.push([E.r,u.y+u.h+_/3]);break;case a.orientation.left:case a.orientation.left_top:E.p=u.x,E.q=u.y+u.h/2+b.expandCollapseSize,E.r=i.minX-_,E.s=u.y+u.h/2+b.expandCollapseSize,p.push([E.p,E.q]),p.push([u.x-_/3,E.q]);break;case a.orientation.right:case a.orientation.right_top:E.p=u.x+u.w,E.q=u.y+u.h/2+b.expandCollapseSize,E.r=i.maxX+_,E.s=u.y+u.h/2+b.expandCollapseSize,p.push([E.p,E.q]),p.push([u.x+u.w+_/3,E.q])}for(var A=u,k=u;k.parent;)k=k.parent;for(;v==null;){var I=!1,x=A.parent,S=x.leftNeighbor,R=x.rightNeighbor;if(x.id==f.id?v=x:a._intersects(x,E,g)&&(E=a._addPoint(x,p,g,E,y),I=!0),x.id!=f.id){for(;S;){if(S.id==f.id){v=S;break}a._intersects(S,E,g)&&(E=a._addPoint(S,p,g,E,y),I=!0),S=S.leftNeighbor}for(;R;){if(R.id==f.id){v=R;break}a._intersects(R,E,g)&&(E=a._addPoint(R,p,g,E,y),I=!0),R=R.rightNeighbor}}if(!I){var T=p[p.length-1][0],N=0;if(x.parent){_=g.levelSeparation,x.parent.layout&&(_=g.mixedHierarchyNodesSeparation);var P=t.manager.bordersByRootIdAndLevel[k.id][x.parent.sl];switch(g.orientation){case a.orientation.top:case a.orientation.top_left:N=P.maxY+_*(2/3);break;case a.orientation.bottom:case a.orientation.bottom_left:N=P.minY-_*(2/3);break;case a.orientation.left:case a.orientation.left_top:T=P.maxX+_*(2/3),N=p[p.length-1][1];break;case a.orientation.right:case a.orientation.right_top:T=P.minX-_*(2/3),N=p[p.length-1][1]}}p.push([T,N])}A=x}switch(b=a.t(v.templateName,v.min,r),p.splice(p.length-1,1),g.orientation){case a.orientation.top:case a.orientation.top_left:p.push([v.x+v.w/2+b.expandCollapseSize,p[p.length-1][1]]),p.push([p[p.length-1][0],v.y+v.h]);break;case a.orientation.bottom:case a.orientation.bottom_left:p.push([v.x+v.w/2+b.expandCollapseSize,p[p.length-1][1]]),p.push([p[p.length-1][0],v.y]);break;case a.orientation.left:case a.orientation.left_top:p.push([p[p.length-1][0],v.y+v.h/2+b.expandCollapseSize]),p.push([v.x+v.w,p[p.length-1][1]]);break;case a.orientation.right:case a.orientation.right_top:p.push([p[p.length-1][0],v.y+v.h/2+b.expandCollapseSize]),p.push([v.x,p[p.length-1][1]])}}var V=l.template;V||(V="orange");var $,D,O=null;switch((b=a.slinkTemplates[V]).labelPosition){case"start":O={x:p[1][0],y:p[1][1]};break;case"middle":var B=Math.ceil(p.length/2);$=p[B],D=p[B-1],O={x:($[0]+D[0])/2,y:($[1]+D[1])/2};break;case"end":O={x:p[p.length-2][0],y:p[p.length-2][1]}}h&&(p=p.reverse()),p[0].unshift("M");for(var j=1;j<p.length;j++)p[j].unshift("L");var z=a.roundPathCorners(p,a.LINK_ROUNDED_CORNERS,!1);if(l.label){var W=b.label.replace("{x}",O.x).replace("{y}",O.y).replace("{val}",l.label),G=a._getLabelSize(W),H=-G.height/2;switch(g.orientation){case a.orientation.bottom:case a.orientation.bottom_left:H=G.height}n+=b.label.replace("{x}",O.x).replace("{y}",O.y+H).replace("{val}",l.label)}var Y=u.id,q=f.id;h&&(Y=f.id,q=u.id),n+=("<g "+a.attr.s_link_from+'="{from}" '+a.attr.s_link_to+'="{to}">').replace("{from}",Y).replace("{to}",q)+b.link.replaceAll("{d}",z)+'<path stroke="transparent" stroke-width="15" fill="none" d="'+z+'" />',n+=a.grCloseTag}for(var s=0;s<this.config.slinks.length;s++){var l=this.config.slinks[s],c=t.getNode(l.from),d=t.getNode(l.to);c&&d&&e.res.visibleNodeIds.indexOf(d.id)!=-1&&e.res.visibleNodeIds.indexOf(c.id)!=-1&&(c.sl>=d.sl?o(c,d,!1):o(d,c,!0))}e.content+=n},a.prototype.addSlink=function(t,e,n,r){this._putInUndoStack(),this.clearRedo();for(var i=this.config.slinks.length-1;i>=0;i--){var o=this.config.slinks[i];o.from==t&&o.to==e&&this.config.slinks.splice(i,1)}return this.config.slinks.push({from:t,to:e,label:n,template:r}),a.events.publish("updated",[this]),this},a.prototype.removeSlink=function(t,e){this._putInUndoStack(),this.clearRedo();for(var n=this.config.slinks.length-1;n>=0;n--){var r=this.config.slinks[n];r.from==t&&r.to==e&&this.config.slinks.splice(n,1)}return a.events.publish("updated",[this]),this},a.slinkTemplates={},a.slinkTemplates.orange={defs:'<marker id="arrowSlinkOrange" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#F57C00" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotSlinkOrange" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#F57C00" /></marker>',link:'<path stroke-dasharray="4, 2" marker-start="url(#dotSlinkOrange)" marker-end="url(#arrowSlinkOrange)" stroke-linejoin="round" stroke="#F57C00" stroke-width="2" fill="none" d="{d}" />',label:'<text dominant-baseline="middle" fill="#F57C00" alignment-baseline="middle" text-anchor="middle" x="{x}" y="{y}">{val}</text>',labelPosition:"middle"},a.slinkTemplates.blue={defs:'<marker id="arrowSlinkBlue" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#039BE5" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotSlinkBlue" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#039BE5" /></marker>',link:'<path stroke-dasharray="4, 2" marker-start="url(#dotSlinkBlue)" marker-end="url(#arrowSlinkBlue)" stroke-linejoin="round" stroke="#039BE5" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#039BE5" text-anchor="middle" x="{x}" y="{y}">{val}</text>',labelPosition:"middle"},a.slinkTemplates.yellow={defs:'<marker id="arrowSlinkYellow" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#FFCA28" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotSlinkYellow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#FFCA28" /></marker>',link:'<path stroke-dasharray="4, 2" marker-start="url(#dotSlinkYellow)" marker-end="url(#arrowSlinkYellow)" stroke-linejoin="round" stroke="#FFCA28" stroke-width="2" fill="none" d="{d}" />',label:'<text  fill="#FFCA28" text-anchor="middle" x="{x}" y="{y}">{val}</text>',labelPosition:"middle"},a.events.on("renderbuttons",function(t,e){if(e.node&&e.node.tags&&e.node.tags.has("group-dotted-lines")){var n=t.getScale(),r=a.t(e.node.templateName,e.node.min,n),i="";e.node.min?(r.nodeGroupDottedOpenButton||console.error(`[${e.node.templateName}].nodeGroupDottedOpenButton is not defined`),i+=`<g style="cursor:pointer;"  data-ctrl-n-dotted-open="${e.node.id}" transform="matrix(1,0,0,1,${e.node.x},${e.node.y})">`,i+=r.nodeGroupDottedOpenButton):(r.nodeGroupDottedCloseButton||console.error(`[${e.node.templateName}].nodeGroupDottedCloseButton is not defined`),i+=`<g style="cursor:pointer;" transform="matrix(1,0,0,1,${e.node.x},${e.node.y})" data-ctrl-n-dotted-close="${e.node.id}">`,i+=r.nodeGroupDottedCloseButton),i=(i+="</g>").replaceAll("{cw}",e.node.w/2).replaceAll("{ch}",e.node.h/2).replaceAll("{ew}",e.node.w-(e.node.padding?e.node.padding[1]:0)).replaceAll("{eh}",e.node.h-(e.node.padding?e.node.padding[2]:0));var o=t.getNode(e.node.stChildrenIds[0]);if(i.indexOf("{collapsed-children-count}")!=-1){var s=a.collapsedChildrenCount(t,o);i=i.replace("{collapsed-children-count}",s)}if(i.indexOf("{collapsed-children-total-count}")!=-1){var l=a.collapsedChildrenTotalCount(t,o);i=i.replace("{collapsed-children-total-count}",l)}if(i.indexOf("{children-count}")!=-1){var c=a.childrenCount(t,o);i=i.replace("{children-count}",c)}if(i.indexOf("{children-total-count}")!=-1){var d=a.childrenTotalCount(t,o);i=i.replace("{children-total-count}",d)}e.html+=i}}),a.events.on("redraw",function(t,e){if(t.config.groupDottedLines.length){for(var n=t.element.querySelectorAll("[data-ctrl-n-dotted-close]"),r=0;r<n.length;r++)n[r].addEventListener("click",function(){var o=this.getAttribute("data-ctrl-n-dotted-close");t.minimize(o)});var i=t.element.querySelectorAll("[data-ctrl-n-dotted-open]");for(r=0;r<i.length;r++)i[r].addEventListener("click",function(){var o=this.getAttribute("data-ctrl-n-dotted-open");t.maximize(o)})}}),a===void 0&&(a={}),a.prototype.undo=function(t){if(this.config.undoRedoStorageName){var e=this.undoStepsCount();if(e!=0){this._putInRedoStack();var n=`${this.config.undoRedoStorageName}_undo_`+(e-1),r=sessionStorage.getItem(n);sessionStorage.removeItem(n);var i=JSON.parse(r);this.config.nodes=i.nodes,this.config.clinks=i.clinks,this.config.slinks=i.slinks,this.config.groupDottedLines=i.groupDottedLines,this.config.dottedLines=i.dottedLines,a.events.publish("updated",[this]),this.filterUI.update(),this.draw(a.action.update,void 0,t),this.undoRedoUI.refresh()}}},a.prototype.redo=function(t){if(this.config.undoRedoStorageName){var e=this.redoStepsCount();if(e!=0){this._putInUndoStack();var n=`${this.config.undoRedoStorageName}_redo_`+(e-1),r=sessionStorage.getItem(n);sessionStorage.removeItem(n);var i=JSON.parse(r);this.config.nodes=i.nodes,this.config.clinks=i.clinks,this.config.slinks=i.slinks,this.config.groupDottedLines=i.groupDottedLines,this.config.dottedLines=i.dottedLines,a.events.publish("updated",[this]),this.filterUI.update(),this.draw(a.action.update,void 0,t),this.undoRedoUI.refresh()}}},a.prototype.clearRedo=function(){if(this.config.undoRedoStorageName){for(var t=`${this.config.undoRedoStorageName}_redo_`,e=Object.keys(sessionStorage),n=0;e.indexOf(t+n)!=-1;)sessionStorage.removeItem(t+n),n++;this.undoRedoUI.refresh()}},a.prototype.clearUndo=function(){if(this.config.undoRedoStorageName){for(var t=`${this.config.undoRedoStorageName}_undo_`,e=Object.keys(sessionStorage),n=0;e.indexOf(t+n)!=-1;)sessionStorage.removeItem(t+n),n++;this.undoRedoUI.refresh()}},a.prototype.undoStepsCount=function(){for(var t=`${this.config.undoRedoStorageName}_undo_`,e=Object.keys(sessionStorage),n=0;e.indexOf(t+n)!=-1;)n++;return n},a.prototype.redoStepsCount=function(){for(var t=`${this.config.undoRedoStorageName}_redo_`,e=Object.keys(sessionStorage),n=0;e.indexOf(t+n)!=-1;)n++;return n},a.prototype._putInUndoStack=function(){if(this.config.undoRedoStorageName){var t=`${this.config.undoRedoStorageName}_undo_`+this.undoStepsCount();sessionStorage.setItem(t,JSON.stringify({nodes:this.config.nodes,clinks:this.config.clinks,slinks:this.config.slinks,groupDottedLines:this.config.groupDottedLines,dottedLines:this.config.dottedLines}))}},a.prototype._putInRedoStack=function(){if(this.config.undoRedoStorageName){var t=`${this.config.undoRedoStorageName}_redo_`+this.redoStepsCount();sessionStorage.setItem(t,JSON.stringify({nodes:this.config.nodes,clinks:this.config.clinks,slinks:this.config.slinks,groupDottedLines:this.config.groupDottedLines,dottedLines:this.config.dottedLines}))}},a===void 0&&(a={}),a.undoRedoUI=function(){this.instance=null,this._event_id=a._guid()},a.undoRedoUI.prototype.init=function(t){t.config.undoRedoStorageName&&(this.instance=t,this.refresh())},a.undoRedoUI.prototype.refresh=function(){var t=this;if(this.instance.config.undoRedoStorageName){var e={undoStepsCount:this.instance.undoStepsCount(),redoStepsCount:this.instance.redoStepsCount()};if(a.events.publish("change",[this,e])!==!1){var n=this.instance.element.querySelector("[data-undo]"),r=this.instance.element.querySelector("[data-redo]");if(!n||!r){var i=document.createElement("div");i.classList.add("bft-undo-redo"),i.innerHTML=`<span data-undo>${a.icon.undo(50,50,"")}<span class="bft-undo-i"></span></span>
                            <span data-redo>${a.icon.redo(50,50,"")}<span class="bft-redo-i"></span></span>`,this.instance.element.appendChild(i),n=this.instance.element.querySelector("[data-undo]"),r=this.instance.element.querySelector("[data-redo]"),n.addEventListener("click",function(){t.instance.undo()}),r.addEventListener("click",function(){t.instance.redo()})}e.undoStepsCount>0?(n.classList.add("bft-ur-clickable"),n.querySelector(".bft-undo-i").innerHTML=e.undoStepsCount,n.querySelector(".bft-undo-i").style.display="inline-block"):(n.classList.remove("bft-ur-clickable"),n.querySelector(".bft-undo-i").style.display="none"),e.redoStepsCount>0?(r.classList.add("bft-ur-clickable"),r.querySelector(".bft-redo-i").innerHTML=e.redoStepsCount,r.querySelector(".bft-redo-i").style.display="inline-block"):(r.classList.remove("bft-ur-clickable"),r.querySelector(".bft-redo-i").style.display="none")}}},a.undoRedoUI.prototype.on=function(t,e){return a.events.on(t,e,this._event_id),this},a.undoRedoUI.prototype.onChange=function(t){return this.on("change",function(e,n){return t.call(e,n)})},a.events.on("redraw",function(t,e){if(t.config.miniMap){if(t.manager.action!=a.action.move){a.miniMap._settings._scale=Math.min(a.miniMap.width/(t.response.boundary.maxX-t.response.boundary.minX),a.miniMap.height/(t.response.boundary.maxY-t.response.boundary.minY)),a.miniMap._settings._translateX=-t.response.boundary.minX*a.miniMap._settings._scale+(a.miniMap.width-(t.response.boundary.maxX-t.response.boundary.minX)*a.miniMap._settings._scale)/2,a.miniMap._settings._translateY=-t.response.boundary.minY*a.miniMap._settings._scale+(a.miniMap.height-(t.response.boundary.maxY-t.response.boundary.minY)*a.miniMap._settings._scale)/2;var n=t.getViewBox();a.miniMap._init(t),a.miniMap._drawMainCanvas(t),a.miniMap._drawRectSelectorCanvas(t,n);var r,i,o,s,l=t.element.querySelector('[data-id="mini-map-focus"]'),c=!1,d=null;l.onmousedown=function(f){var h,p,v,y=l.getBoundingClientRect(),w=y.left,g=y.top;if(r=parseInt(f.clientX-w),i=parseInt(f.clientY-g),h=i,p=(r-a.miniMap._settings._translateX)/a.miniMap._settings._scale,v=(h-a.miniMap._settings._translateY)/a.miniMap._settings._scale,p>n[0]&&p<n[0]+n[2]&&v>n[1]&&v<n[1]+n[3])return f.preventDefault(),f.stopPropagation(),void(c=!0)},l.onmousemove=function(f){if(c){f.preventDefault(),f.stopPropagation(),a.miniMap._mouseMove=!0;var h=l.getBoundingClientRect(),p=h.left,v=h.top;o=parseInt(f.clientX-p),s=parseInt(f.clientY-v);var y=(o-r)/a.miniMap._settings._scale,w=(s-i)/a.miniMap._settings._scale;n[0]=y+n[0],n[1]=w+n[1],t.setViewBox(n),d&&(clearTimeout(d),d=null),d=setTimeout(function(){t._draw(!0,a.action.move)},300),a.miniMap._drawRectSelectorCanvas(t,n),r=o,i=s}},l.onmouseup=function(f){c&&(f.preventDefault(),f.stopPropagation(),c=!1)},l.onmouseout=function(f){c&&(f.preventDefault(),f.stopPropagation(),c=!1,a.miniMap._mouseMove=!1)},l.onclick=function(f){if(f.preventDefault(),f.stopPropagation(),a.miniMap._mouseMove)a.miniMap._mouseMove=!1;else{var h=l.getBoundingClientRect(),p=h.left,v=h.top;o=parseInt(f.clientX-p),s=parseInt(f.clientY-v);var y=o/a.miniMap._settings._scale,w=s/a.miniMap._settings._scale;n[0]=y-(n[0]+n[2]-n[0])/2-a.miniMap._settings._translateX/a.miniMap._settings._scale,n[1]=w-(n[1]+n[3]-n[1])/2-a.miniMap._settings._translateY/a.miniMap._settings._scale,t.setViewBox(n),d&&(clearTimeout(d),d=null),d=setTimeout(function(){t._draw(!0,a.action.move)},300),a.miniMap._drawRectSelectorCanvas(t,n)}}}}else{var u=t.element.querySelector('[data-id="mini-map"]');u&&u.parentNode.removeChild(u)}}),a.miniMap={},a.miniMap._settings={_translateX:0,_translateY:0,_scale:1},a.miniMap._drawMainCanvas=function(t){var e=t.element.querySelector('[data-id="mini-map-main"]'),n=e.getContext("2d");a.miniMap._initCtx(t,e,1);var r=0,i=[];(function o(s,l){if(Array.isArray(l))for(var c=0;c<l.length;c++)o(s,l[c]);else{for(n.fillStyle=a.miniMap.colors[3],n.beginPath(),n.lineWidth="0.5",n.fillRect(l.x,l.y,l.w,l.h),n.strokeRect(l.x,l.y,l.w,l.h),c=0;c<l.stChildrenIds.length;c++)r++,i.includes(l.id)||(r==1?n.fillStyle=a.miniMap.colors[0]:r==2?n.fillStyle=a.miniMap.colors[1]:r==3&&(n.fillStyle=a.miniMap.colors[2]),n.beginPath(),n.fillRect(l.x,l.y,l.w,l.h),n.strokeRect(l.x,l.y,l.w,l.h),i.push(l.id)),o(s,s.getNode(l.stChildrenIds[c])),r--;for(c=0;c<l.childrenIds.length;c++)o(s,s.getNode(l.childrenIds[c]))}})(t,t.roots)},a.miniMap._drawRectSelectorCanvas=function(t,e){var n=t.element.querySelector('[data-id="mini-map-focus"]'),r=n.getContext("2d");a.miniMap._initCtx(t,n,a.miniMap.opacity);var i=e[0],o=e[1],s=e[2],l=e[3];r.lineWidth=.5/a.miniMap._settings._scale,r.strokeStyle=a.miniMap.focusStroke,r.globalAlpha=1,r.clearRect(i,o,s,l),r.strokeRect(i,o,s,l)},a.miniMap._initCtx=function(t,e,n){var r=e.getContext("2d");e.width=e.width,e.height=e.height,r.clearRect(0,0,a.miniMap.width,a.miniMap.height),r.globalAlpha=n,n!=1&&(r.fillStyle=a.miniMap.selectorBackgroundColor,r.fillRect(0,0,a.miniMap.width,a.miniMap.height)),r.translate(a.miniMap._settings._translateX,a.miniMap._settings._translateY),r.scale(a.miniMap._settings._scale,a.miniMap._settings._scale)},a.miniMap._init=function(t){if(!t.element.querySelector('[data-id="mini-map"]')){var e=document.createElement("canvas");e.width=a.miniMap.width,e.height=a.miniMap.height,e.setAttribute("data-id","mini-map-main"),e.style.display="inline-block",e.style.backgroundColor=a.miniMap.backgroundColor,e.style.position="absolute",e.style.top=0,e.style.left=0;var n=document.createElement("canvas");n.width=a.miniMap.width,n.height=a.miniMap.height,n.setAttribute("data-id","mini-map-focus"),n.style.display="inline-block",n.style.position="absolute",n.style.top=0,n.style.left=0;var r=document.createElement("div");r.setAttribute("data-id","mini-map"),r.style.position="absolute";for(var i=["top","right","left","bottom"],o=0;o<i.length;o++){var s=i[o];a.isNEU(a.miniMap.position[s])||(a.miniMap.position[s]=="padding"?r.style[s]=t.config.padding+"px":r.style[s]=a.miniMap.position[s]+"px")}r.style.border=a.miniMap.border,r.style.padding=a.miniMap.padding+"px",r.style.backgroundColor=a.miniMap.backgroundColor;var l=document.createElement("div");l.style.position="relative",l.style.width=a.miniMap.width+"px",l.style.height=a.miniMap.height+"px",l.appendChild(e),l.appendChild(n),r.appendChild(l),t.element.appendChild(r);var c=function(p,v){t.__mouseScrollHandler(r,v)};t._addEvent(r,"DOMMouseScroll",c),t._addEvent(r,"mousewheel",c);var d=0,u=0,f=function(p){a.miniMap._mouseMove=!0;var v=p.clientX-d,y=p.clientY-u;if(!a.isNEU(r.style.left)){var w=parseFloat(r.style.left)+v;r.style.left=`${w}px`}if(!a.isNEU(r.style.right)){var g=parseFloat(r.style.right)-v;r.style.right=`${g}px`}if(!a.isNEU(r.style.bottom)){var b=parseFloat(r.style.bottom)-y;r.style.bottom=`${b}px`}if(!a.isNEU(r.style.top)){var _=parseFloat(r.style.top)+y;r.style.top=`${_}px`}d=p.clientX,u=p.clientY},h=function(){document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",h)};a.miniMap.draggable&&r.addEventListener("mousedown",function(p){d=p.clientX,u=p.clientY,document.addEventListener("mousemove",f),document.addEventListener("mouseup",h)})}},a.miniMap.colors=["#E0E0E0","#BDBDBD","#9E9E9E","#757575"],a.miniMap.selectorBackgroundColor="white",a.miniMap.backgroundColor="white",a.miniMap.focusStroke="#f57c00",a.miniMap.opacity=.4,a.miniMap.border="1px solid #aeaeae",a.miniMap.width=250,a.miniMap.height=140,a.miniMap.padding=5,a.miniMap.position={top:void 0,left:"padding",right:void 0,bottom:"padding"},a.miniMap.draggable=!0,a._search={},a._search.search=function(t,e,n,r,i,o,s){var l=[],c=e.toLowerCase(),d=c.split(" ");if(s&&d.length>1){var u=d[0];s[u]&&(n=[s[u]],d=(c=c.replace(u,"").trim()).split(" "))}d=d.filter(function(_,E,A){return A.indexOf(_)===E});for(var f={},h=0;h<t.length;h++)for(var p=t[h],v=0;v<n.length;v++){var y=n[v];if(!a.isNEU(p[y])){var w=p[y];if((e=a._search.searchAndComputeScore(d,w,y,o))!=null){var g=p.id;if(f[g]){if(f[g]&&f[g]<e.__score){f[g]=e.__score;for(var b=l.length-1;b>=0;b--)l[b].id==g&&l.splice(b,1);a._search.addNodeToResult(l,r,p,e,y,i)}}else f[g]=e.__score,a._search.addNodeToResult(l,r,p,e,y,i)}}}return l.sort(function(_,E){return _.__score<E.__score?1:_.__score>E.__score?-1:0}),l},a._search.addNodeToResult=function(t,e,n,r,i,o){var s={};s.id=n.id,a.isNEU(n[o])||(s[o]=n[o]);for(var l=0;l<e.length;l++){var c=e[l];a.isNEU(n[c])||a.isNEU(s[c])&&(s[c]=n[c])}r!=null&&(a.isNEU(s.__score)&&(s.__score=r.__score),a.isNEU(s.__searchField)&&(s.__searchField=i),a.isNEU(s.__searchMarks)&&(s.__searchMarks=r.__searchMarks)),t.push(s)},a._search.searchAndComputeScore=function(t,e,n,r){if(a.isNEU(e)||a.isNEU(t)||!t.length)return null;typeof e!="string"&&(e=e.toString());var i=e.toLowerCase(),o=a._search.searchIndexesOf(i,t);if(!o.length)return null;for(var s=i.length/100,l=0,c=0,d=l>0?100:0,u=0,f=0;f<t.length;f++)for(var h=t[f],p=0;p<o.length;p++)if(h.indexOf(o[p].searchPhrase)!=-1){u++;break}var v=100/(t.length/u);if(o.length){for(c=o[0].start,p=0;p<o.length;p++)if(l+=o[p].length,o[p].start<c&&(c=o[p].start),p>=1&&o[p-1].start>o[p].start){d=0;break}}var y=0;l!=0&&(y=l/s);var w=l>0?100:0;c!=0&&(w=100-c/s);var g=0;r&&r[n]&&(g=r[n]),v&&(v=v/100*50),y>0&&(y=y/100*10),w>0&&(w=w/100*10),d>0&&(d=d/100*10),g>0&&(g=g/100*20);var b=Math.round(1e4*(v+y+w+d+g));for(o.sort(function(E,A){return E.start<A.start?-1:E.start>A.start?1:0}),p=o.length-1;p>=0;p--)for(f=0;f<o.length;f++)f<p&&o[f].start+o[f].length>o[p].start&&o.splice(p,1);var _=e;for(p=o.length-1;p>=0;p--)_=(_=_.insert(o[p].start+o[p].length,"</mark>")).insert(o[p].start,"<mark>");return{__searchMarks:_,__score:b}},a._search.searchIndexesOf=function(t,e){var n=[];if(!a.isNEU(t))for(var r=0;r<e.length;r++){var i=e[r];if(!a.isNEU(i))for(var o=0;(o=t.indexOf(i,o))>-1;)n.push({length:i.length,start:o,searchPhrase:i}),o+=i.length}return n.sort(function(s,l){return s.length<l.length?1:s.length>l.length||s.start<l.start?-1:s.start>l.start?1:0}),n=n.filter(function(s){for(var l=!1,c=0;c<n.length;c++){var d=n[c].start,u=n[c].start+n[c].length-1,f=s.start,h=s.start+s.length-1;if(d==f&&u==h){l=!1;break}if(d>=f&&u<=h){l=!0;break}if(d<=f&&u>=h){l=!0;break}}return!l})},a.events.on("redraw",function(t,e){if(t.config.state){var n=[],r=[];(function i(o){if(Array.isArray(o))for(var s=0;s<o.length;s++)i(o[s]);else{for((typeof o.id!="string"||typeof o.id=="string"&&o.id.indexOf("split")==-1&&o.id.indexOf("mirror")==-1)&&(n.push(o.id),o.min==1&&r.push(o.id)),s=0;s<o.stChildren.length;s++)i(o.stChildren[s]);for(s=0;s<o.children.length;s++)i(o.children[s])}})(t.roots),a.state._put(t.config.roots,t.width(),t.height(),t.response.viewBox,n,r,t.response.adjustify,t.config.state)}}),a.state={},a.state._buildStateNames=function(t){return{paramScale:t+"-scale",paramX:t+"-x",paramY:t+"-y",paramExp:t+"-exp",paramMin:t+"-min",paramRoots:t+"-roots",paramAdjustify:t+"-adjustify"}},a.state._put=function(t,e,n,r,i,o,s,l){if(l&&!a.isNEU(i)&&i.length!=0){var c=a.state._buildStateNames(l.name),d={roots:t,scale:Math.min(e/r[2],n/r[3]),x:r[0],y:r[1],exp:i,min:o,adjustify:s};if(l.writeToUrlParams){var u=new URLSearchParams(window.location.search);u.has(c.paramScale)?u.set(c.paramScale,d.scale):u.append(c.paramScale,d.scale),u.has(c.paramX)?u.set(c.paramX,d.x):u.append(c.paramX,d.x),u.has(c.paramY)?u.set(c.paramY,d.y):u.append(c.paramY,d.y),u.has(c.paramExp)?u.set(c.paramExp,d.exp.join("*")):u.append(c.paramExp,d.exp.join("*")),u.has(c.paramRoots)&&Array.isArray(d.roots)?u.set(c.paramRoots,d.roots.join("*")):Array.isArray(d.roots)&&u.append(c.paramRoots,d.roots.join("*")),u.has(c.paramMin)?u.set(c.paramMin,d.min.join("*")):u.append(c.paramMin,d.min.join("*")),u.has(c.paramAdjustify)?u.set(c.paramAdjustify,d.adjustify.x+"*"+d.adjustify.y):u.append(c.paramAdjustify,d.adjustify.x+"*"+d.adjustify.y),window.history.replaceState(null,null,"?"+u)}l.writeToIndexedDB&&(d.id=l.name,a.idb.put(d,function(f){f==0&&console.error("Cannot write row - "+l.name)})),l.writeToLocalStorage&&a.localStorage.setItem(l.name,JSON.stringify(d))}},a.state._get=function(t,e,n,r){if(t){var i=a.state._buildStateNames(t.name);if(t.readFromUrlParams){var o=new URLSearchParams(window.location.search);if(o.has(i.paramScale)&&o.has(i.paramX)&&o.has(i.paramY)&&o.has(i.paramExp)&&o.has(i.paramMin)&&o.has(i.paramAdjustify)){var s={},l=parseFloat(o.get(i.paramScale)),c=parseFloat(o.get(i.paramX)),d=parseFloat(o.get(i.paramY));(f=[])[0]=c,f[1]=d,f[2]=e/l,f[3]=n/l,s.vb=f,s.scale=l,s.x=c,s.y=d,s.roots=null,o.has(i.paramRoots)&&(s.roots=o.get(i.paramRoots).split("*")),s.exp=o.get(i.paramExp).split("*"),s.min=o.get(i.paramMin).split("*");var u=o.get(i.paramAdjustify).split("*");return s.adjustify={x:parseFloat(u[0]),y:parseFloat(u[1])},void r(s)}if(!t.readFromIndexedDB&&!t.readFromLocalStorage)return void r(null)}if(t.readFromLocalStorage){var f;if((s=a.localStorage.getItem(t.name))!=null)return s=JSON.parse(s),(f=[])[0]=s.x,f[1]=s.y,f[2]=e/s.scale,f[3]=n/s.scale,s.vb=f,void r(s);if(!t.readFromIndexedDB)return void r(null)}t.readFromIndexedDB&&a.idb.read(t.name,function(h,p){if(h==0)console.error("Cannot read from - "+t.name),r(null);else if(h==null)r(null);else{var v=[];v[0]=p.x,v[1]=p.y,v[2]=e/p.scale,v[3]=n/p.scale,p.vb=v,r(p)}})}else r(null)},a.state.clear=function(t){if(!t)return!1;try{localStorage.removeItem(t);var e=a.state._buildStateNames(t),n=new URLSearchParams(window.location.search);n.has(e.paramScale)&&n.delete(e.paramScale),n.has(e.paramX)&&n.delete(e.paramX),n.has(e.paramY)&&n.delete(e.paramY),n.has(e.paramExp)&&n.delete(e.paramExp),n.has(e.paramRoots)&&n.delete(e.paramRoots),n.has(e.paramMin)&&n.delete(e.paramMin),n.has(e.paramAdjustify)&&n.delete(e.paramAdjustify),window.history.replaceState(null,null,"?"+n),a.idb.delete(t,function(r){r==0&&console.error("Cannot delete row - "+t)})}catch{}},a._magnify={},a.prototype.magnify=function(t,e,n,r,i){r||(r=this.config.anim);var o=this.getNode(t),s=this.getNodeElement(t);if(o||s){var l=a._magnify[t];l&&(l.timer!=null&&clearInterval(l.timer),l.timerBack!=null&&clearInterval(l.timerBack),s.setAttribute("transform","matrix("+l.transformStart.toString()+")"),a._magnify[t]=null),n&&(s=s.cloneNode(!0),this.getSvg().appendChild(s));var c=a._getTransform(s),d=JSON.parse(JSON.stringify(c));d[0]=e,d[3]=e;var u=o.w+o.w*(e-1),f=o.h+o.h*(e-1);d[4]+=(o.w-u)/2,d[5]+=(o.h-f)/2;var h=a.animate(s,{transform:c},{transform:d},r.duration,r.func);a._magnify[t]={timer:h,transformStart:c,nodeElement:s,front:n},i&&i(s)}},a.prototype.magnifyBack=function(t,e,n){e||(e=this.config.anim);var r=a._magnify[t];if(r){r.timer!=null&&clearInterval(r.timer),r.timerBack!=null&&clearInterval(r.timerBack);var i=a._getTransform(r.nodeElement);r.timerBack=a.animate(r.nodeElement,{transform:i},{transform:r.transformStart},e.duration,e.func,function(o){var s=o[0].getAttribute(a.attr.node_id);a._magnify[s]&&a._magnify[s].front&&(o[0].parentNode.removeChild(o[0]),a._magnify[s]=null),n&&n(o[0])})}},a===void 0&&(a={}),a.events.on("init",function(t,e){if(t.config.keyNavigation&&(t._addEvent(window,"keydown",t._windowKeyDownHandler),a.isNEU(t._keyNavigationActiveNodeId)&&t.roots&&t.roots.length)){var n=t.roots[0].id;a.isNEU(t.config.keyNavigation.focusId)||(n=t.config.keyNavigation.focusId),t._keyNavigationActiveNodeId=n,t.center(t._keyNavigationActiveNodeId)}}),a.prototype._windowKeyDownHandler=function(t,e){for(var n=e.target,r=null;n&&n!=this.element;){if(n.hasAttribute&&n.hasAttribute(a.attr.node_id)){r=n.getAttribute(a.attr.node_id);break}n=n.parentNode}if(n){var i=r?this.getNode(r):null,o={node:i,data:r?this.get(r):null,event:e};if(a.events.publish("key-down",[this,o])!==!1&&i){if(e.code=="KeyF")this.searchUI.find("");else if(e.code=="ArrowRight"||i.isAssistant&&e.code=="ArrowDown"||i.isPartner&&e.code=="ArrowDown"){if(c=this.getNode(i.pid)){var s=c.childrenIds.indexOf(i.id);if(++s<c.childrenIds.length){var l=c.childrenIds[s];this._keyNavigationActiveNodeId=l,this.center(l)}}}else if(e.code=="ArrowLeft")(c=this.getNode(i.pid))&&(s=c.childrenIds.indexOf(i.id),--s>=0&&(l=c.childrenIds[s],this._keyNavigationActiveNodeId=l,this.center(l)));else if(e.code=="ArrowUp"){var c;(c=this.getNode(i.pid))&&(l=c.id,(i.isAssistant||c.hasAssistants||i.isPartner||c.hasPartners)&&(s=c.childrenIds.indexOf(i.id),--s>=0&&(l=c.childrenIds[s])),this._keyNavigationActiveNodeId=l,this.center(l))}else if(e.code=="ArrowDown")i.childrenIds.length&&(this._keyNavigationActiveNodeId=i.childrenIds[0],this.center(i.childrenIds[0]));else if(e.code=="Space"){var d=n.getAttribute(a.attr.node_id);return void this.toggleExpandCollapse(d,e)}}}},a.events.on("redraw",function(t,e){t.config.keyNavigation&&a._keyNavigation(t)}),a.events.on("click",function(t,e){t.config&&t.config.keyNavigation&&(t._keyNavigationActiveNodeId=e.node.id,t.center(e.node.id))}),a._keyNavigation=function(t){var e=t.element.querySelector(":focus");if(e&&e.parentElement&&e.parentElement.hasAttribute(a.attr.node_id)){var n=e.parentElement;(i=(r=e).querySelector("title"))&&i.parentNode.removeChild(i),r.removeAttribute("tabindex")}if(!a.isNEU(t._keyNavigationActiveNodeId)&&(n=t.getNodeElement(t._keyNavigationActiveNodeId))&&n.children.length){var r;(r=n.children[0]).setAttribute("tabindex",2);var i,o={text:"",id:t._keyNavigationActiveNodeId};a.events.publish("screen-reader-text",[t,o]),!a.isNEU(o.text)&&((i=document.createElementNS("http://www.w3.org/2000/svg","title")).innerHTML=o.text,r.appendChild(i)),a.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&t.searchUI.hide(),r.focus()}},a.elements={},a.elements.textbox=function(t,e,n,r){var i=a.elements._vidrf(t,e,r);if(i.doNotRender)return{html:""};var o="";return e.btn&&(o=`<a href="#" data-input-btn="" class="bft-link bft-link-bft-button">${e.btn}</a>`),{html:`<div class="bft-form-field" style="min-width: ${n};">
                    <div class="bft-input" data-bft-input="" ${i.disabledAttribute} ${i.vlidators}>
                        <label for="${i.id}">${a._escapeGreaterLessSign(i.label)}</label>
                        <input ${i.readOnlyAttribute} data-binding="${a._escapeDoubleQuotes(i.binding)}" maxlength="256" id="${i.id}" name="${i.id}" type="text" value="${a._escapeDoubleQuotes(i.value)}" autocomplete="off">
                        ${o}
                    </div>
                </div>`,id:i.id,value:i.value}},a.elements.checkbox=function(t,e,n,r){var i=a.elements._vidrf(t,e,r);if(i.doNotRender)return{html:""};var o=i.value?"checked":"",s=r?'onclick="return false;"':"";return{html:`<div class="bft-form-field"  style="min-width: ${n};" >
                        <label class="bft-checkbox" data-bft-input="" ${i.disabledAttribute}>
                            <input ${o} ${s} data-binding="${a._escapeDoubleQuotes(i.binding)}" type="checkbox"><span class="bft-checkbox-checkmark" type="checkbox"></span>${a._escapeGreaterLessSign(i.label)}
                        </label>
                    </div>`,id:i.id,value:o}},a.elements.select=function(t,e,n,r){if(r)return a.elements.textbox(t,e,n,r);var i=a.elements._vidrf(t,e,r);return i.doNotRender?{html:""}:{html:`<div class="bft-form-field" style="min-width: ${n};">
                    <div class="bft-input" data-bft-input="" ${i.disabledAttribute} ${i.vlidators}>
                        <label for="${i.id}">${a._escapeGreaterLessSign(i.label)}</label>
                        <select data-binding="${a._escapeDoubleQuotes(i.binding)}" ${i.readOnlyAttribute} id="${i.id}" name="${i.id}">
                            ${function(){for(var o="",s=0;s<i.options.length;s++){var l=i.options[s];o+=`<option ${l.value==i.value?"selected":""} value="${a._escapeDoubleQuotes(l.value)}">${a._escapeGreaterLessSign(l.text)}</option>`}return o}()}                           
                        </select>
                    </div>
                </div>`,id:i.id,value:i.value}},a.elements.multiSelect=function(t,e,n,r){if(r)return a.elements.textbox(t,e,n,r);var i=a.elements._vidrf(t,e,r);return i.doNotRender?{html:""}:{html:`<div class="bft-form-field" style="min-width: ${n};">
                    <div class="bft-input" data-bft-input="" ${i.disabledAttribute} ${i.vlidators}>
                        <label for="${i.id}">${a._escapeGreaterLessSign(i.label)}</label>
                        <select class="multiple" data-binding="${a._escapeDoubleQuotes(i.binding)}" ${i.readOnlyAttribute} id="${i.id}" name="${i.id}" multiple>
                            ${function(){for(var o="",s=0;s<i.options.length;s++){var l=i.options[s];o+=`<option ${i.value.includes(l.value)?"selected":""} value="${a._escapeDoubleQuotes(l.value)}">${a._escapeGreaterLessSign(l.text)}</option>`}return o}()}                           
                        </select>
                    </div>
                </div>`,id:i.id,value:i.value}},a.elements.date=function(t,e,n,r){var i=a.elements._vidrf(t,e,r);return i.doNotRender?{html:""}:{html:`<div class="bft-form-field" style="min-width: ${n};">
                    <div class="bft-input" data-bft-input="" ${i.disabledAttribute} ${i.vlidators}>
                        <label for="${i.id}" class="hasval">${a._escapeGreaterLessSign(i.label)}</label>
                        <input data-binding="${a._escapeDoubleQuotes(i.binding)}" ${i.readOnlyAttribute} maxlength="256" id="${i.id}" name="${i.id}" type="date" value="${a._escapeDoubleQuotes(i.value)}" autocomplete="off">
                    </div>
                </div>`,id:i.id,value:i.value}},a.elements._vidrf=function(t,e,n){var r={};if(e.binding||(e.binding=""),e.label||(e.label=""),e.type!="select"||Array.isArray(e.options)?r.options=e.options:r.options=[],r.value=t&&!a.isNEU(t[e.binding])?t[e.binding]:"",n&&r.options){for(var i=0;i<r.options.length;i++)if(r.options[i].value==r.value){r.value=r.options[i].text;break}}if(r.id=a.elements.generateId(),r.disabledAttribute=n?"data-bft-input-disabled":"",r.readOnlyAttribute=n?"readonly":"",r.id=r.id,n&&a.isNEU(r.value)&&(r.doNotRender=!0),n&&e.binding=="photo"&&(r.id=null,r.doNotRender=!0),r.binding=e.binding,r.label=e.label,r.vlidators="",e.vlidators)for(var o in e.vlidators)r.vlidators+=`data-v-${o}="${e.vlidators[o]}" `;return r},a.elements.ids=[],a.elements.generateId=function(){for(;;){var t="_"+("0000"+(Math.random()*Math.pow(36,4)|0).toString(36)).slice(-4);if(!a.elements.ids.has(t))return a.elements.ids.push(t),t}},a.input={},a.input._timeout=null,a.input.initWithTimeout=function(){a.input._timeout&&(clearTimeout(a.input._timeout),a.input._timeout=null),a.input._timeout=setTimeout(a.input.init,200)},a.input.init=function(t){var e;e=t?t.querySelectorAll("[data-bft-input]"):document.querySelectorAll("[data-bft-input]");for(var n=0;n<e.length;n++){var r=e[n],i=null;r.type&&r.type.toLowerCase()=="hidden"&&(i=r),i||(i=r.querySelector("input")),i||(i=r.querySelector("select"));var o=r.querySelector("label");o&&(i.value||i.type=="select-one"&&i.selectedOptions&&i.selectedOptions.length&&i.selectedOptions[0].value==""&&i.selectedOptions[0].innerHTML)&&o.classList.add("hasval"),i.type.toLowerCase()!="checkbox"&&i.addEventListener("focus",function(){this.classList.remove("bft-validation-error");var s=this.parentNode.querySelector("label");s.classList.add("focused");var l=s.querySelector(".bft-validation-error-message");l&&l.parentNode.removeChild(l)}),i.type.toLowerCase()!="checkbox"&&i.addEventListener("blur",function(){a.input.blurHandler(this)})}},a.input.blurHandler=function(t){var e=t.parentNode.querySelector("label");e.classList.remove("focused"),t.value||t.type=="date"?e.classList.add("hasval"):e.classList.remove("hasval")},a.input.validate=function(t){var e=null;t.type&&t.type.toLowerCase()=="hidden"&&(e=t),e||(e=t.querySelector("input")),e||(e=t.querySelector("select"));var n=t.querySelector("label");if(e.classList.remove("bft-validation-error"),n){var r=n.querySelector(".bft-validation-error-message");r&&r.parentNode.removeChild(r)}!e.selectedOptions&&e.value&&(e.value=e.value.trim());var i=t.getAttribute("data-v-required"),o=t.getAttribute("data-v-password"),s=t.getAttribute("data-v-email"),l=t.getAttribute("data-v-emails");return i&&e.value==""?(n.innerHTML+='<span class="bft-validation-error-message">&nbsp;'+i+"</span>",e.classList.add("bft-validation-error"),!1):o&&!a.input.validatePassword(e.value)?(n.innerHTML+='<span class="bft-validation-error-message">&nbsp;'+o+"</span>",e.classList.add("bft-validation-error"),!1):s&&!a.input.isValidEmail(e.value)?(n.innerHTML+='<span class="bft-validation-error-message">&nbsp;'+s+"</span>",e.classList.add("bft-validation-error"),!1):!(l&&!a.input.isValidEmails(e.value))||(n.innerHTML+='<span class="bft-validation-error-message">&nbsp;'+l+"</span>",e.classList.add("bft-validation-error"),!1)},a.input.validateAndGetData=function(t){for(var e=t.querySelectorAll("[data-bft-input]"),n=!0,r=0;r<e.length;r++){var i=e[r];a.input.validate(i)||(n=!1)}if(!n)return!1;var o=t.querySelectorAll("[data-binding]"),s={};for(r=0;r<o.length;r++){var l=o[r],c=l.getAttribute("data-binding");if(l.type.toLowerCase()=="checkbox")s[c]=l.checked;else if(l.selectedOptions&&l.hasAttribute("multiple")){var d=l.selectedOptions;s[c]=Array.from(d).map(({value:u})=>u)}else s[c]=l.value}return s},a.input.validatePassword=function(t){return t&&(t=t.trim()),!(t.length<5)&&!(t.length>18)&&t.indexOf(" ")==-1},a.input.isValidEmails=function(t){if(t)for(var e=t.split(","),n=0;n<e.length;n++){var r=e[n].trim();if(!a.input.isValidEmail(r))return!1}return!0},a.input.isValidEmail=function(t){return t&&(t=t.trim()),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase())},a.prototype.hideTreeMenu=function(t,e){if(this._tree_menu_temp){var n=this._tree_menu_temp;if(this.manager.oldNodes=this.nodes,this.nodes=n.nodes,this.manager.maxX=n.maxX,this.manager.maxY=n.maxY,this.manager.minX=n.minX,this.manager.minY=n.minY,this.manager.roots=n.roots,this.manager.nodes=n.nodes,this.manager.rootList=n.rootList,this.manager.visibleNodeIds=n.visibleNodeIds,this.manager.bordersByRootIdAndLevel=n.bordersByRootIdAndLevel,this.config.roots=n.config.roots,this.config.nodes=n.config.nodes,this._tree_menu_temp=null,t){var r={id:n.id,animFromClickedNode:!1};this._draw(!0,a.action.update,r,function(){e&&e()})}}},a.prototype.showTreeMenu=function(t){this.editUI.hide(),t==null&&console.error("Call addNode without id");var e=this.getNode(t);e||console.error("Cannot get node id: "+t);var n=this.getNode(e.fid),r=this.getNode(e.mid),i=null,o=null,s=[],l=[];n&&(i=this.get(n.id)),r&&(o=this.get(r.id));for(var c=0;c<e.pids.length;c++){var d=this.get(e.pids[c]);d&&s.push(d)}for(c=0;c<e.ftChildrenIds.length;c++)l.push(this.get(e.ftChildrenIds[c]));var u=this.get(t);this._tree_menu_temp={maxX:this.manager.maxX,maxY:this.manager.maxY,minX:this.manager.minX,minY:this.manager.minY,roots:this.manager.roots,nodes:this.manager.nodes,rootList:this.manager.rootList,visibleNodeIds:this.manager.visibleNodeIds,bordersByRootIdAndLevel:this.manager.bordersByRootIdAndLevel,id:t,config:{roots:this.config.roots,nodes:this.config.nodes}},this.config.nodes=[];var f=[];if(o)f.push(o);else{var h={id:"_ft_mother",templateName:"mother",_ft_method:"addParentNode",_ft_childId:t,_ft_type:"mid",_ft_data:{gender:"female"}};u.mid=h.id,i?(i.pids=[h.id],h.pids=[i.id],h._ft_data.pids=[i.id]):h.pids=["_ft_father"],f.push(h)}if(i)f.push(i);else{var p={id:"_ft_father",templateName:"father",_ft_method:"addParentNode",_ft_childId:t,_ft_type:"fid",_ft_data:{gender:"male"}};u.fid=p.id,o?(o.pids=[p.id],p.pids=[o.id],p._ft_data.pids=[o.id]):p.pids=["_ft_mother"],f.push(p)}for(c=0;c<s.length;c++)f.push(s[c]);u.pids||(u.pids=[]);var v={id:"_ft_partner",pids:[t],templateName:"partner",_ft_method:"addPartnerNode",_ft_data:{pids:[t]}};if(u.gender=="male"?(v.templateName="wife",v._ft_data.gender="female"):u.gender=="female"&&(v.templateName="husband",v._ft_data.gender="male"),u.pids.push(v.id),f.push(v),u.pids)for(c=0;c<u.pids.length;c++){if(f.push({id:"_ft_child_group_"+c,mid:t,fid:u.pids[c],tags:["children-group"]}),u.pids[c]=="_ft_partner"){var y={id:"_ft_son_"+c,stpid:"_ft_child_group_"+c,templateName:"son",_ft_method:"addChildAndPartnerNodes",_ft_childData:{mid:e.id,fid:v.id,gender:"male"},_ft_partnerData:{pids:[t]},_ft_id:t},w={id:"_ft_daughter_"+c,stpid:"_ft_child_group_"+c,templateName:"daughter",_ft_method:"addChildAndPartnerNodes",_ft_childData:{mid:e.id,fid:v.id,gender:"female"},_ft_partnerData:{pids:[t]},_ft_id:t};u.gender=="male"&&v._ft_data.gender=="female"?(y._ft_childData.mid=v.id,y._ft_childData.fid=u.id,y._ft_partnerData.gender=v._ft_data.gender,w._ft_childData.mid=v.id,w._ft_childData.fid=u.id,w._ft_partnerData.gender=v._ft_data.gender):u.gender=="female"&&v._ft_data.gender=="male"&&(y._ft_childData.mid=u.id,y._ft_childData.fid=v.id,y._ft_partnerData.gender=v._ft_data.gender,w._ft_childData.mid=u.id,w._ft_childData.fid=v.id,w._ft_partnerData.gender=v._ft_data.gender),f.push(y),f.push(w)}else f.push({id:"_ft_son_"+c,stpid:"_ft_child_group_"+c,templateName:"son",_ft_method:"addChildNode",_ft_data:{mid:t,fid:u.pids[c],gender:"male"}}),f.push({id:"_ft_daughter_"+c,stpid:"_ft_child_group_"+c,templateName:"daughter",_ft_method:"addChildNode",_ft_data:{mid:t,fid:u.pids[c],gender:"female"}});for(var g=0;g<l.length;g++)l[g].mid!=u.pids[c]&&l[g].fid!=u.pids[c]||(l[g].mid=void 0,l[g].fid=void 0,l[g].stpid="_ft_child_group_"+c,f.push(l[g]))}var b=[];for(g=0;g<l.length;g++)(l[g].fid==u.id&&a.isNEU(l[g].mid)||l[g].mid==u.id&&a.isNEU(l[g].fid))&&(l[g].fid==u.id?l[g].mid="_ft_partner_for_single_child":l[g].mid==u.id&&(l[g].fid="_ft_partner_for_single_child"),f.push(l[g]),b.push(l[g].id));if(b.length){var _={id:"_ft_partner_for_single_child",pids:[t],templateName:"partner",_ft_method:"addPartnerAndParentNodes",_ft_childIds:b,_ft_partnerData:{pids:[t]},_ft_id:t};u.gender=="male"?(_.templateName="wife",_._ft_partnerData.gender="female"):u.gender=="female"&&(_.templateName="husband",_._ft_partnerData.gender="male"),u.pids.push(_.id),f.push(_)}var E={nodes:f,node:u};a.events.publish("node-tree-menu-show",[this,E]),E.nodes.push(E.node),this.config.nodes=E.nodes,u=this.get(t);var A=this;a.isNEU(u.mid)?a.isNEU(u.fid)||(this.config.roots=[u.fid]):this.config.roots=[u.mid];var k={id:t,treeMenuMode:!0};this._draw(!1,a.action.update,k,function(){a._moveToBoundaryArea(A.getSvg(),A.getViewBox(),A.response.boundary)})},a.ui.css=function(){return'<style data-bft-styles>.bft-button{background-color:#039be5;cursor:pointer;width:calc(100%);height:50px;color:#fff;padding-top:5px;padding-left:7px;padding-right:7px;text-align:center;text-transform:uppercase;border:1px solid #3fc0ff;display:inline-block;border-radius:5px}.bft-button.orange{background-color:#f57c00;border:1px solid #ffa03e}.bft-button.yellow{background-color:#ffca28;border:1px solid #ffdf7c}.bft-button.lower{text-transform:unset}.bft-button.transparent{background-color:transparent}.bft-button:hover{background-color:#35afea}.bft-button.orange:hover{background-color:#f79632}.bft-button.yellow:hover{background-color:#ffd452}.bft-button:active{transform:matrix(.98,0,0,.98,0,0)}.bft-button-icon{text-align:initial;cursor:pointer;margin-bottom:15px;color:#039be5}.bft-dark .bft-button-icon:hover{background-color:#2d2d2d}.bft-light .bft-button-icon:hover{background-color:#ececec}.bft-button-icon>img{height:24px;width:24px;vertical-align:middle;padding:7px}.bft-button:focus{outline:0}.bft-button-icon>img{filter:invert(46%) sepia(66%) saturate(2530%) hue-rotate(171deg) brightness(95%) contrast(98%)}.bft-light .bft-button.transparent{color:#039be5}.bft-light .bft-button.transparent:hover{color:#fff}.bft-button-loading{background-color:transparent;cursor:pointer;width:calc(100% - 2px);height:50px;color:#fff;text-align:center;text-transform:uppercase;border:1px solid #027cb7;display:inline-block;display:flex;justify-content:center;align-items:center;display:none}.bft-button-loading .bft-loading-dots div{margin:0 10px}.bft-link-bft-button{position:absolute;right:10px;top:-1px}@media screen and (max-width:1000px){.bft-link-bft-button{right:50px}}[data-bft-input-disabled] .bft-link-bft-button{display:none}[dir=rtl] .bft-link-bft-button{left:10px;right:unset}.bft-img-button{width:48px;height:48px;cursor:pointer;border-radius:50%;background-color:#039be5;background-repeat:no-repeat;background-size:24px 24px;background-position:center center;margin:3px;display:inline-block}.bft-img-button:hover{background-color:#f57c00}.bft-checkbox{display:block;position:relative;padding-left:35px;margin-bottom:12px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}.bft-checkbox input{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.bft-checkbox-checkmark{position:absolute;top:0;left:0;height:25px;width:25px;border-radius:5px}.bft-dark [data-bft-input-disabled] .bft-checkbox-checkmark,.bft-dark [data-bft-input-disabled].bft-checkbox input:checked~.bft-checkbox-checkmark,.bft-light [data-bft-input-disabled] .bft-checkbox-checkmark,.bft-light [data-bft-input-disabled].bft-checkbox input:checked~.bft-checkbox-checkmark{background-color:#aeaeae!important}[data-bft-input-disabled].bft-checkbox{cursor:default}[dir=rtl] .bft-checkbox-checkmark{right:0}[dir=rtl] .bft-checkbox{padding-left:unset;padding-right:35px}.bft-dark .bft-checkbox-checkmark{background-color:#333;border:1px solid #5b5b5b}.bft-light .bft-checkbox-checkmark{background-color:#fff;border:1px solid #c7c7c7}.bft-dark .bft-checkbox:hover input~.bft-checkbox-checkmark{background-color:#3c3c3c}.bft-light .bft-checkbox:hover input~.bft-checkbox-checkmark{background-color:#f8f9f9}.bft-dark .bft-checkbox input:checked~.bft-checkbox-checkmark{background-color:#039be5}.bft-light .bft-checkbox input:checked~.bft-checkbox-checkmark{background-color:#039be5}.bft-checkbox-checkmark:after{content:"";position:absolute;display:none}.bft-checkbox input:checked~.bft-checkbox-checkmark:after{display:block}.bft-checkbox .bft-checkbox-checkmark:after{left:9px;top:5px;width:5px;height:10px;border:solid #fff;border-width:0 3px 3px 0;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.bft-filter{user-select:none}.bft-light .bft-filter{color:#757575}.bft-dark .bft-filter{color:#ccc}.bft-filter>div>div{display:inline-block;padding:3px 10px;cursor:pointer}.bft-filter-menu fieldset,.bft-filter>div,.filter-field-selected{border-radius:5px}.bft-filter-menu fieldset{overflow-y:auto;max-height:300px}.bft-filter>div.bft-filter-menu{padding:10px}.bft-light .bft-filter>div.bft-filter-menu,.bft-light .filter-field-selected{background-color:#f8f9f9}.bft-dark .bft-filter>div.bft-filter-menu,.bft-dark .filter-field-selected{background-color:#3c3c3c}.bft-light .bft-filter>div{background-color:#eee}.bft-dark .bft-filter>div{background-color:#333}.bft-form-perspective{transform-style:preserve-3d;perspective:500px;position:absolute;top:32px}.bft-form{box-shadow:rgba(0,0,0,.2) 0 6px 6px 0,rgba(0,0,0,.19) 0 13px 20px 0;padding:14px;transform-origin:top center;user-select:none;display:none;position:relative;max-height:calc(100vh - 100px);overflow-y:auto;border-bottom-left-radius:5px;border-bottom-right-radius:5px}.bft-form-bottom{border-bottom-left-radius:unset;border-bottom-right-radius:unset;border-top-left-radius:5px;border-top-right-radius:5px}.bft-form .separator{margin:0 10px}@media screen and (max-width:1000px){.bft-form-perspective{min-width:100%;max-height:calc(100% - 32px);left:unset!important;right:unset!important;transform:none!important}.bft-form .set{max-height:calc(100vh - 74px)}.bft-form-fieldset{max-width:unset!important}}.bft-light .bft-form .separator{border-bottom:1px solid #c7c7c7}.bft-dark .bft-form .separator{border-bottom:1px solid #5b5b5b}.bft-light .bft-form{background-color:#fff}.bft-dark .bft-form{background-color:#252526}.bft-item{padding:6px 12px 6px 12px;display:flex;flex-direction:row}.bft-light .bft-form .bft-item.selected,.bft-light .bft-form .bft-item:hover{background-color:#0074e8;color:#fff}.bft-dark .bft-form .bft-item.selected,.bft-dark .bft-form .bft-item:hover{background-color:#094771;color:#fff}.bft-item.selected img,.bft-item:hover img{filter:invert(100%)}.bft-item.selected img{visibility:visible!important}.bft-form-fieldset{display:flex;flex-wrap:wrap;margin:0!important}.bft-form-field{flex:1 0 21%;margin:3px;width:80px;margin-left:auto}.bft-form-field-100{flex:1 0 96%;margin:3px;width:80px;margin-left:auto}.bft-input{position:relative}.bft-input>input,.bft-input>select{height:50px;padding:18px 10px 2px 9px;width:100%;box-sizing:border-box;border-style:solid;border-width:1px}.bft-input select{height:50px;padding:20px 5px 4px 5px}[data-bft-input-disabled].bft-input>input,[data-bft-input-disabled].bft-input>select{border-color:transparent!important}.bft-light [data-bft-input-disabled]>input,.bft-light [data-bft-input-disabled]>select{background-color:#fff!important}.bft-dark [data-bft-input-disabled]>input,.bft-dark [data-bft-input-disabled]>select{background-color:#252526!important}[data-bft-input-disabled]>select{appearance:none;padding-left:8px}.bft-input>label{display:inline-block;position:absolute;padding-left:10px;padding-right:10px;color:#acacac;cursor:text;-webkit-transition:all .1s ease-out;-moz-transition:all .1s ease-out;-ms-transition:all .1s ease-out;-o-transition:all .1s ease-out;transition:all .1 ease-out;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:initial;text-align:initial;white-space:nowrap}.bft-input>label{top:12px;overflow:hidden;text-overflow:ellipsis;max-width:calc(100% - 14px)}.bft-input>label.focused,.bft-input>label.hasval{top:-1px}.bft-input>input,.bft-input>select{outline:0;border-radius:5px}.bft-dark .bft-input>label.focused,.bft-light .bft-input>label.focused{color:#039be5}.bft-dark .bft-input>input,.bft-dark .bft-input>select{color:#ccc;background-color:#333;border-color:#5b5b5b}.bft-light .bft-input>input,.bft-light .bft-input>select{color:#757575;background-color:#fff;border-color:#c7c7c7}.bft-light .bft-input>input:focus,.bft-light .bft-input>select:focus{border-color:#039be5;background-color:#f8f9f9}.bft-dark .bft-input>input:focus,.bft-dark .bft-input>select:focus{border-color:#039be5;background-color:#3c3c3c}.bft-dark .bft-input>input.bft-validation-error,.bft-dark .bft-input>select.bft-validation-error,.bft-light .bft-input>input.bft-validation-error,.bft-light .bft-input>select.bft-validation-error{border-color:#ca2a2a}.bft-dark .bft-validation-error-message,.bft-light .bft-validation-error-message{color:#ca2a2a}.bft-input select.multiple{height:initial}.bft-link{color:#039be5;cursor:pointer;text-decoration:underline}.bft-link:hover{color:#f57c00}.bft-dark ::-webkit-scrollbar,.bft-light ::-webkit-scrollbar{width:15px;height:15px}.bft-dark ::-webkit-scrollbar-corner{background:#1e1e1e}.bft-dark ::-webkit-scrollbar-track{background:#1e1e1e;border-left:1px solid #333;border-top:1px solid #333}.bft-dark ::-webkit-scrollbar-thumb{background:#424242}.bft-dark ::-webkit-scrollbar-thumb:hover{background:#4f4f4f}.bft-dark ::-webkit-scrollbar-thumb:active{background:#5e5e5e}.bft-light ::-webkit-scrollbar-corner{background:#fff}.bft-light ::-webkit-scrollbar-track{background:#fff;border-left:1px solid #ddd;border-top:1px solid #ddd}.bft-light ::-webkit-scrollbar-thumb{background:#c1c1c1}.bft-light ::-webkit-scrollbar-thumb:hover{background:#929292}.bft-light ::-webkit-scrollbar-thumb:active{background:#666}.bft-edit-form{position:fixed;top:0;right:0;height:100%;width:100%;box-shadow:rgba(0,0,0,.2) 0 6px 6px 0,rgba(0,0,0,.19) 0 13px 20px 0;display:flex;flex-direction:column;height:100%;width:400px}@media screen and (max-width:1000px){.bft-edit-form{width:100%}}.bft-dark .bft-edit-form{background-color:#252526}.bft-light .bft-edit-form{background-color:#fff}.bft-edit-form-header{height:200px;text-align:center;border-radius:10px}.export-service .bft-edit-form-header{border-radius:unset}.bft-edit-form-title{color:#fff;margin:0;padding:14px 17px 7px 17px}.bft-edit-form-avatar{border-radius:50%;width:150px;height:150px;position:absolute;top:75px;border:5px solid #fff;left:50%;transform:translateX(-50%);background-color:#cacaca;box-shadow:rgba(0,0,0,.2) 0 6px 6px 0,rgba(0,0,0,.19) 0 13px 20px 0}.bft-edit-form-close{position:absolute;right:14px;top:14px;width:34px;height:34px;cursor:pointer}.bft-edit-form-fields{flex-grow:1;overflow-y:auto;overflow-x:hidden}.bft-edit-form-fields-inner{margin:0 7px 20px 7px; border-width: 3px; border-style: solid; border-radius:8px}.bft-family-menu{opacity:0;display:inline-block;position:absolute;text-align:left;user-select:none;min-width:270px;box-shadow:rgba(0,0,0,.2) 0 4px 8px 0,rgba(0,0,0,.19) 0 6px 20px 0;font:13px/28px Helvetica,"Segoe UI",Arial,sans-serif;border-radius:10px}.bft-family-menu>div:hover img{filter:invert(100%)}.bft-family-menu [data-item]{text-align:start;padding:7px 10px}.bft-dark .bft-family-menu [data-item]{background-color:#252526;color:#acacac;border-bottom:1px solid #333}.bft-dark .bft-family-menu [data-item]:hover{background-color:#094771!important;color:#fff!important}.bft-dark .bft-family-menu [data-item]:hover svg{filter:brightness(0) invert(1)}.bft-light .bft-family-menu [data-item]{background-color:#fff;color:#333;border-bottom:1px solid #c7c7c7}.bft-light .bft-family-menu [data-item]:hover{background-color:#0074e8!important;color:#fff!important}.bft-light .bft-family-menu [data-item]:hover svg{filter:brightness(0) invert(1)}.bft-family-menu [data-item] svg{vertical-align:middle}.bft-family-menu [data-item]:first-child{border-top-left-radius:7px;border-top-right-radius:7px}.bft-family-menu [data-item]:last-child{border-bottom-width:0;border-bottom-style:none;border-bottom-left-radius:7px;border-bottom-right-radius:7px}.bft-search{position:absolute}@media screen and (max-width:500px){.bft-search{width:calc(100% - 30px);left:15px}}.bft-search .bft-input{margin-bottom:0}.bft-search-input{color:#7a7a7a;width:100%;border:none;outline:0;padding-top:10px;padding-right:47px}.bft-search-image-td{width:43px}.bft-search-text-td{padding-inline-end:7px;line-height:15px;text-align:start}.bft-search table{box-shadow:rgba(0,0,0,.2) 0 4px 8px 0,rgba(0,0,0,.19) 0 6px 20px 0;margin:0 3.5px 0 3.5px;width:calc(100% - 7px);border-radius:7px}.bft-search table tr:first-child td:first-child{border-top-left-radius:7px}.bft-search table tr:first-child td:last-child{border-top-right-radius:7px}[dir=rtl] .bft-search table tr:first-child td:first-child{border-top-left-radius:unset;border-top-right-radius:7px}[dir=rtl] .bft-search table tr:first-child td:last-child{border-top-right-radius:unset;border-top-left-radius:7px}.bft-search table tr:last-child td:first-child{border-bottom-left-radius:7px}.bft-search table tr:last-child td:last-child{border-bottom-right-radius:7px}[dir=rtl] .bft-search table tr:last-child td:first-child{border-bottom-left-radius:unset;border-bottom-right-radius:7px}[dir=rtl] .bft-search table tr:last-child td:last-child{border-bottom-right-radius:unset;border-bottom-left-radius:7px}.bft-dark .bft-search table{background-color:#252526;color:#acacac}.bft-search [data-search-item-id]{cursor:pointer}.bft-search-photo{margin:7px 7px 0 7px;width:32px;height:32px;background-size:cover;background-position:top center;border-radius:50%;display:inline-block;border:1px solid #8c8c8c}.bft-search [data-search-item-id]:hover .bft-link{color:#ffca28}.bft-search [data-search-item-id]:hover .bft-link:hover{color:#f57c00}.bft-dark .bft-search [data-search-item-id] td{border-top:1px solid #333}.bft-dark .bft-search [data-search-item-id]:hover,.bft-dark .bft-search [data-selected=yes]{background-color:#094771;color:#fff}.bft-light .bft-search table{background-color:#fff;color:#333}.bft-light .bft-search [data-search-item-id] td{border-top:1px solid #c7c7c7}.bft-light .bft-search [data-search-item-id]:hover,.bft-light .bft-search [data-selected=yes]{background-color:#0074e8;color:#fff}.bft-search [data-search-item-id]:first-child td{border-top:unset}.bft-ripple-container{position:absolute;top:0;right:0;bottom:0;left:0}.bft-drag-over rect{opacity:.5}.bft-ripple-container span{transform:scale(0);border-radius:100%;position:absolute;opacity:.75;background-color:#fff;animation:bft-ripple 1s}@-moz-keyframes bft-ripple{to{opacity:0;transform:scale(2)}}@-webkit-keyframes bft-ripple{to{opacity:0;transform:scale(2)}}@-o-keyframes bft-ripple{to{opacity:0;transform:scale(2)}}@keyframes bft-ripple{to{opacity:0;transform:scale(2)}}.bft-slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;-webkit-transition:.4s;transition:.4s}.bft-slider:before{position:absolute;content:"";height:16px;width:16px;left:4px;bottom:4px;background-color:#fff;-webkit-transition:.4s;transition:.4s}.bft-slider.round{border-radius:24px}.bft-slider.round:before{border-radius:50%}svg text:hover{cursor:default}svg.bft-cursor-grab,svg.bft-cursor-grab text:hover{cursor:grab}svg.bft-cursor-nodrop,svg.bft-cursor-nodrop text:hover{cursor:no-drop}svg.bft-cursor-copy,svg.bft-cursor-copy text:hover{cursor:copy}svg.bft-cursor-move,svg.bft-cursor-move text:hover{cursor:move}#bft-close-btn:focus,#bft-close-btn:hover{color:#000;text-decoration:none;cursor:pointer}#bft-id-select:focus{outline:.5px solid #aeaeae}#bft-sampleDialog #title:hover{cursor:default;background:gray}.bft-light{background-color:#fff;font:13px/28px Helvetica,"Segoe UI",Arial,sans-serif}.bft-dark{background-color:#1e1e1e;font:13px/28px Helvetica,"Segoe UI",Arial,sans-serif}.bft-light .bft-fill{fill:#fff}.bft-dark .bft-fill{fill:#1e1e1e}.bft-dark input,.bft-dark select,.bft-light input,.bft-light select{font:16px Helvetica,"Segoe UI",Arial,sans-serif}.bft-dark h1,.bft-light h1{font-size:30px;line-height:1}.bft-edit-form{position:absolute;border-radius:10px}.export-service .bft-edit-form{border-radius:unset}.bft-dark .bft-edit-form{color:#acacac}.bft-light .bft-edit-form{color:#333}.bft-dark ::-webkit-calendar-picker-indicator{filter:invert(70%)}.bft-light ::-webkit-calendar-picker-indicator{filter:invert(50%)}.bft-edit-form-instruments{margin:42px 10px 0 10px;text-align:center;min-height:70px}.bft-img-button svg{position:relative;top:12px}.bft-light .bft-toolbar-container svg circle,.bft-light .bft-toolbar-container svg line,.bft-light .bft-toolbar-container svg path{stroke:#8c8c8c!important}.bft-dark .bft-toolbar-container svg circle,.bft-dark .bft-toolbar-container svg line,.bft-dark .bft-toolbar-container svg path{stroke:#8c8c8c!important}.bft-dark .bft-toolbar-container svg rect{fill:#252526!important}.bft-dark .bft-toolbar-container [data-tlbr=minus] svg{border-left:1px solid #5b5b5b!important;border-right:1px solid #5b5b5b!important;border-bottom:1px solid #5b5b5b!important}.bft-dark .bft-toolbar-container [data-tlbr=plus] svg{border-left:1px solid #5b5b5b!important;border-right:1px solid #5b5b5b!important;border-top:1px solid #5b5b5b!important}.bft-dark .bft-toolbar-container [data-tlbr]>svg{border:1px solid #5b5b5b!important;background-color:#252526!important}.bft-toolbar-layout{height:123px;padding-top:20px;position:absolute;width:100%;left:"0";bottom:"-145px"}.bft-light .bft-toolbar-layout{border-top:1px solid #c7c7c7;background-color:#f9f9f9}.bft-dark .bft-toolbar-layout{border-top:1px solid #5b5b5b;background-color:#2b2b2b}.bft-dotted-connector path{stroke-dasharray:7}.bft-undo-redo{position:absolute;top:23px;left:23px}@media screen and (max-width:500px){.bft-undo-redo{position:absolute;top:83px;left:23px}}.bft-light .bft-undo-redo path{fill:#cacaca}.bft-dark .bft-undo-redo path{fill:#5b5b5b}.bft-light .bft-undo-redo .bft-ur-clickable path{fill:#9c9c9c}.bft-dark .bft-undo-redo .bft-ur-clickable path{fill:#8c8c8c}.bft-undo-redo .bft-ur-clickable rect{cursor:pointer}.bft-undo-redo>span{position:relative;display:inline-block;user-select:none}.bft-undo-redo .bft-undo-i{left:-6px;top:-6px}.bft-undo-redo .bft-redo-i{right:-6px;bottom:6px}.bft-undo-redo>span>span{color:#fff;position:absolute;display:inline-block;min-width:20px;min-height:20px;border-radius:50%;line-height:20px;text-align:center;padding:1px;user-select:none;cursor:pointer}.bft-light .bft-undo-redo>span>span{background-color:#9c9c9c}.bft-dark .bft-undo-redo>span>span{background-color:#8c8c8c}</style>'},a.events.on("render",function(t,e){if(t.recentRoots||(t.recentRoots=[]),t.config.roots)for(var n=0;n<t.config.roots.length;n++){var r=t.recentRoots.indexOf(t.config.roots[n]);r!=-1&&t.recentRoots.splice(r,1),t.recentRoots.unshift(t.config.roots[n])}}),a.events.on("show",function(t,e){if(t instanceof a.editUI&&t.obj._tree_menu_temp)return!1}),a.events.on("render-link",function(t,e){e.cnode.ppid!=null&&e.cnode.layout!=a.mixed&&(e.html+='<use xlink:href="#dot" x="'+e.p.xa+'" y="'+e.p.ya+'"/>')}),a.events.on("click",function(t,e){if(t instanceof a){var n=t._get(e.node.id);if(n._ft_method)return n._ft_method=="addParentNode"?t[n._ft_method](n._ft_childId,n._ft_type,n._ft_data,null,!0):n._ft_method=="addChildAndPartnerNodes"?t[n._ft_method](n._ft_id,n._ft_childData,n._ft_partnerData,null,!0):n._ft_method=="addPartnerAndParentNodes"?t[n._ft_method](n._ft_id,n._ft_childIds,n._ft_partnerData,null,!0):t[n._ft_method](n._ft_data,null,!0),!1;for(var r=e.event.target;r;){if(r.getAttribute&&(r.hasAttribute("data-ctrl-n-t-menu-id")||r.hasAttribute("data-ctrl-n-t-menu-c"))){var i=r.getAttribute("data-ctrl-n-t-menu-id");return a.isNEU(i)?t.hideTreeMenu(!0):t.showTreeMenu(i),e.event.stopPropagation(),e.event.preventDefault(),!1}r=r.parentNode}}}),a===void 0&&(a={}),a.prototype.onField=function(t){return this.on("field",function(e,n){return t.call(e,n)})},a.prototype.onInit=function(t){return this.on("init",function(e){return t.call(e)})},a.prototype.onRedraw=function(t){return this.on("redraw",function(e){return t.call(e)})},a.prototype.onUpdateNode=function(t){return this.on("update",function(e,n,r){var i={oldData:n,newData:r};return t.call(e,i)})},a.prototype.onUpdated=function(t){return this.on("updated",function(e){return t.call(e)})},a.prototype.onRemoveNode=function(t){return this.on("remove",function(e,n,r){var i={id:n,newPidsAndStpidsForIds:r};return t.call(e,i)})},a.prototype.onAddNode=function(t){return this.on("add",function(e,n){var r={data:n};return t.call(e,r)})},a.prototype.onDrop=function(t){return this.on("drop",function(e,n,r,i,o){var s={dragId:n,dropId:r,dragNodeElement:i,event:o};return t.call(e,s)})},a.prototype.onDrag=function(t){return this.on("drag",function(e,n,r,i){var o={dragId:n,event:r,nodeIds:i};return t.call(e,o)})},a.prototype.onExpandCollpaseButtonClick=function(t){return this.on("expcollclick",function(e,n,r,i){var o={collapsing:n,id:r,ids:i};return t.call(e,o)})},a.prototype.onExportStart=function(t){return this.on("exportstart",function(e,n){return t.call(e,n)})},a.prototype.onExportEnd=function(t){return this.on("exportend",function(e,n){return t.call(e,n)})},a.prototype.onNodeClick=function(t){return this.on("click",function(e,n){return t.call(e,n)})},a.prototype.onNodeDoubleClick=function(t){return this.on("dbclick",function(e,n){var r={data:n};return t.call(e,r)})},a.prototype.onUpdateNode=function(t){return this.on("update",function(e,n){return t.call(e,n)})},a.prototype.onNodeTreeMenuShow=function(t){return this.on("node-tree-menu-show",function(e,n){return t.call(e,n)})},a.prototype.onRemoveNode=null,a.prototype.onAddNode=null,a.filterUI=function(){},a.filterUI.prototype.init=function(t){this.instance=t,this.element=null,this.filterBy=null,this._event_id=a._guid()},a.filterUI.prototype.addFilterTag=function(t){if(!this.instance.config.filterBy||a.isNEU(t))return!1;if(this.filterBy!==null||typeof this.instance.config.filterBy!="object"||Array.isArray(this.instance.config.filterBy)||(this.filterBy=JSON.parse(JSON.stringify(this.instance.config.filterBy))),this.filterBy!=null)for(var e in this.filterBy){var n=t[e];if(n!=null){var r=this.filterBy[e];if(r!=null){var i=r[n];if(i!=null&&i.checked===!1)return!0}}}return!1},a.filterUI.prototype.show=function(t){var e=this.element.querySelector('[data-filter-field="'+t+'"]');e&&e.click()},a.filterUI.prototype.hide=function(){var t=this.instance.element.querySelector("[data-filter-close]");t&&t.click()},a.filterUI.prototype.update=function(){if(this.instance.config.filterBy){var t={};if(this.instance.config.filterBy=="all")for(var e=a.manager.getAllFields(this.instance.config),n=0;n<e.length;n++){var r=e[n];r!="tags"&&r!="id"&&r!="pid"&&r!="ppid"&&r!="stpid"&&(t[r]={})}else if(Array.isArray(this.instance.config.filterBy))for(n=0;n<this.instance.config.filterBy.length;n++)t[this.instance.config.filterBy[n]]={};else if(typeof this.instance.config.filterBy=="object")for(var i in this.instance.config.filterBy)t[i]={};for(var o in t){var s=t[o];for(n=0;n<this.instance.config.nodes.length;n++){var l=this.instance.config.nodes[n][o];l!=null&&(s[l]||(s[l]={checked:!0,text:l}))}}if(this.filterBy!=null){for(var c in t)if(this.filterBy[c])for(var d in t[c])this.filterBy[c][d]&&(t[c][d]=this.filterBy[c][d])}if(a.FILTER_ALPHABETICALLY){var u=Object.keys(t).sort(),f=t;for(t={},n=0;n<u.length;n++)t[h=u[n]]=f[h];for(var o in t)for(s=t[o],t[o]={},u=Object.keys(s).sort(),n=0;n<u.length;n++){var h=u[n];t[o][h]=s[h]}}this.filterBy=t;var p=this;this.element=this.instance.element.querySelector("[data-filter]"),this.element&&this.element.parentNode.removeChild(this.element),this.element=document.createElement("div"),this.element.setAttribute("data-filter",""),this.element.style.position="absolute",this.element.setAttribute("class","bft-filter"),this.instance.config.undoRedoStorageName?(this.element.style.top=0,this.element.style.left="50%",this.element.style.transform="translate(-50%)"):(this.element.style.top=this.instance.config.padding+"px",this.element.style.left=this.instance.config.padding+"px");var v="";for(var c in this.filterBy){var y={name:c,html:`<div data-filter-field="${c}">${c}</div>`};a.events.publish("add-filter",[p,y]),v+=y.html}this.element.innerHTML=`<div>${v}</div>`,this.element.addEventListener("click",function(w){if(w.target.hasAttribute("data-filter-close")||w.target.hasAttribute("data-filter-field")){for(var g=w.target.getAttribute("data-filter-field"),b=p.instance.element.querySelectorAll("[data-filter-menu]"),_=0;_<b.length;_++)b[_].style.display="none";var E=p.instance.element.querySelectorAll(".filter-field-selected");for(_=0;_<E.length;_++)E[_].classList.remove("filter-field-selected");var A=p.instance.element.querySelector("[data-filter-close]");if(A&&A.parentNode.removeChild(A),w.target.hasAttribute("data-filter-close")||!w.target.hasAttribute("data-filter-field"))return;var k=p.instance.element.querySelector(`[data-filter-menu="${g}"]`);if(!k){var I={name:g,text:"[All]",value:g,checked:!0,html:`<div>
                        <input data-all type="checkbox" id="${g}" name="${g}" checked>
                        <label for="${g}">[All]</label>
                    </div>`};a.events.publish("add-item",[p,I]);var x=I.html;for(var S in p.filterBy[g]){var R=p.filterBy[g][S],T=R.text;T==null&&(T=S),I={name:g,text:T,value:S,checked:R.checked,html:`<div>
                            <input  type="checkbox" id="${S}" name="${S}" ${R.checked?"checked":""}>
                            <label for="${S}">${T}</label>
                        </div>`},a.events.publish("add-item",[p,I]),x+=I.html}k=document.createElement("div");var N=a.filterUI.textFilterBy;k.innerHTML=`<fieldset>
                                                    <legend>${N} ${g}:</legend>
                                                    ${x}
                                                </fieldset>`,k.setAttribute("data-filter-menu",g),k.classList.add("bft-filter-menu"),w.target.parentNode.parentNode.appendChild(k);var P=k.querySelectorAll("input");for(_=0;_<P.length;_++)P[_].addEventListener("change",function(V){for(var $=V.target;$&&!$.hasAttribute("data-filter-menu");)$=$.parentNode;if($){var D=$.getAttribute("data-filter-menu");if(V.target.hasAttribute("data-all")){for(var O=V.target.parentNode.parentNode.querySelectorAll("input"),B=0;B<O.length;B++)if(O[B]!=V.target)for(var j in O[B].checked=V.target.checked,p.filterBy[D])p.filterBy[D][j].checked=V.target.checked}else if(p.filterBy[D][this.name]!=null&&(p.filterBy[D][this.name].checked=this.checked),this.checked){for(var z=p.instance.config.nodes,W=0;W<z.length;W++)if(z[W][D]==this.name){for(var G=z[W];G;)if(a.isNEU(G.stpid))G=a.isNEU(G.pid)?null:p.instance._get(G.pid);else if((G=p.instance._get(G.stpid))[D]){var H=V.target.parentNode.parentNode.querySelector('[name="'+G[D]+'"]');H?(H.checked=this.checked,p.filterBy[D][G[D]].checked=this.checked):console.error('Cannot find element with selector: [name="'+G[D]+'"]')}}}p.instance.draw()}})}k.style.display="block",w.target.classList.add("filter-field-selected"),(A=document.createElement("div")).classList.add("close"),A.innerHTML="x",A.setAttribute("data-filter-close",""),w.target.parentNode.appendChild(A),a.events.publish("show-items",[p,{name:g}])}}),this.instance.element.appendChild(this.element),a.events.publish("update",[this,{}])}},a.filterUI.prototype.on=function(t,e){return a.events.on(t,e,this._event_id),this},a.filterUI.textFilterBy="Filter by",a===void 0&&(a={}),a.remote===void 0&&(a.remote={}),a.LIMIT_NODES=!0,a.remote._fromResDTO=function(t,e,n,r,i){var o=e[t.id];t.x=o.p[0],t.y=o.p[1],t.w=o.p[2],t.h=o.p[3],o.ln!=null&&(t.leftNeighbor=i[o.ln]),o.rn!=null&&(t.rightNeighbor=i[o.rn]);for(var s=0;s<t.stChildren.length;s++)a.remote._fromResDTO(t.stChildren[s],e,n,r,i);for(s=0;s<t.children.length;s++)a.remote._fromResDTO(t.children[s],e,n,r,i)},a.remote._toReqDTO=function(t,e){var n={p:[t.id,t.parent!=null?t.parent.id:null,t.stParent!=null?t.stParent.id:null,t.w,t.h]};t.children.length>0&&(n.c=a.remote._convertToIdArray(t.children)),t.stChildren.length>0&&(n.v=a.remote._convertToIdArray(t.stChildren)),t.layout!=null&&t.layout!=0&&(n.l=t.layout),t.isAssistant&&(n.a=1),t.isSplit&&(n.s=t.isSplit),t.isMirror&&(n.im=t.isMirror),t.padding&&(n.q=t.padding),t.lcn&&(n.k=t.lcn),t.stContainerNodes&&(n.b=a.remote._convertToIdArray(t.stContainerNodes)),t.isPartner&&(n.i=t.isPartner),t.hasPartners&&(n.g=t.hasPartners),t.partnerSeparation&&(n.e=t.partnerSeparation),e.push(n);for(var r=0;r<t.stChildren.length;r++)a.remote._toReqDTO(t.stChildren[r],e);for(r=0;r<t.children.length;r++)a.remote._toReqDTO(t.children[r],e)},a.remote._toReqLayoutConfigsDTO=function(t){var e={};for(var n in t){var r=t[n];e[n]||(e[n]=[]),e[n][0]=r.orientation,e[n][1]=r.levelSeparation,e[n][2]=r.mixedHierarchyNodesSeparation,e[n][3]=r.subtreeSeparation,e[n][4]=r.siblingSeparation,e[n][5]=r.layout,e[n][6]=r.columns,e[n][7]=r.collapse,e[n][8]=r.assistantSeparation,e[n][9]=r.partnerNodeSeparation}return e};a.remote._convertToIdArray=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].id);return e},a.remote._setPositions=function(t,e,n,r){for(var i=[],o=[],s=a.remote._toReqLayoutConfigsDTO(e),l=0;l<t.length;l++)o.push(t[l].id),a.remote._toReqDTO(t[l],i);var c={n:i,c:s,r:o,v:"8.14.00"};if(a.LIMIT_NODES||(c.l=!0),a.remote._fromReqDTO!=null)a.remote._fromReqDTO(c.n,c.r,c.c,function(u){for(var f=0;f<t.length;f++)a.remote._fromResDTO(t[f],u,0,t,r);n()});else{c=JSON.stringify(c);var d=a.localStorage.getItem(c);d&&(d=JSON.parse(d)),d&&!d.limit?a.remote._proceed(t,d,r,n):a.remote._findRegion(function(u){a._ajax(u,"post",c,"json",function(f){f.error?n(2):(a.remote._proceed(t,f,r,n),a.localStorage.setItem(c,JSON.stringify(f)))})})}},a.remote._proceed=function(t,e,n,r){if(typeof e=="string"&&(e=JSON.parse(e)),e.limit&&e.limit==1)r(e.limit);else{for(var i=0;i<t.length;i++)a.remote._fromResDTO(t[i],e,0,t,n);r()}},a.remote._findRegion=function(t){var e=a.localStorage.getItem(a.FUNC_URL_NAME);if(e)t(e);else{for(var n=["defunc2","cusfunc2","bsfunc2","acfunc2","kcfunc2","safunc2","wifunc2"],r=[],i=0;i<n.length;i++)r.push(new XMLHttpRequest);for(i=0;i<n.length;i++)(function(){var o="https://"+n[i]+a.SERVER_PREFIX,s=r[i];s.onreadystatechange=function(){if(this.readyState==4&&this.status==200){a.localStorage.setItem(a.FUNC_URL_NAME,o),t(o);for(var l=0;l<r.length;l++)r[l].abort()}},s.open("GET",o,!0),s.send()})()}};const Xe=a;Xe.templates.atul=Object.assign({},Xe.templates.base);Xe.templates.atul.defs=`<style>
                                    .{randId} .bft-edit-form-header, .{randId} .bft-img-button{
                                        background-color: #aeaeae;
                                    }
                                    .{randId}.male .bft-edit-form-header, .{randId}.male .bft-img-button{
                                        background-color: #039BE5;
                                    }        
                                    .{randId}.male div.bft-img-button:hover{
                                        background-color: #F57C00;
                                    }
                                    .{randId}.female .bft-edit-form-header, .{randId}.female .bft-img-button{
                                        background-color: #F57C00;
                                    }        
                                    .{randId}.female div.bft-img-button:hover{
                                        background-color: #039BE5;
                                    }
                                </style>
                                <clipPath id="atul_img_0"><rect x="6" y="6" rx="54" ry="54" width="108" height="108"></rect></clipPath>
                                ${Xe.gradientCircleForDefs("circle","#aeaeae",60,5)}
                                ${Xe.gradientCircleForDefs("male_circle","#039BE5",60,5)}
                                ${Xe.gradientCircleForDefs("female_circle","#F57C00",60,5)}`;Xe.templates.atul.field_0="<text "+Xe.attr.width+' ="230" class="user_name" style="font-size: 16px;font-weight:bold;" fill="#aeaeae" x="60" y="145" text-anchor="middle">{val}</text>';Xe.templates.atul.field_0=`
        <foreignObject x="-10" y="125" width="130" height="40">
            <div xmlns="http://www.w3.org/1999/xhtml" 
                style="background-color:#f0f0f0; 
                       text-align:center; 
                       font-size:13px; 
                       font-weight:bold; 
                       line-height:20px; 
                       white-space:wrap; 
                       overflow:hidden; 
                       text-overflow:ellipsis;">
                {val}
            </div>
        </foreignObject>
`;Xe.templates.atul.field_4=`
    <!-- place button slightly to the top-right outside the profile image to avoid overlap -->
    <foreignObject x="96" y="-22" width="48" height="48">
        <div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:center;justify-content:center;">
            {val}
        </div>
    </foreignObject>
`;Xe.templates.atul.node='<use x="0" y="0" xlink:href="#circle" />';Xe.templates.atul.img_0='<image preserveAspectRatio="xMidYMid slice" clip-path="url(#atul_img_0)" xlink:href="{val}" x="6" y="6" width="108" height="108"></image>';Xe.templates.atul.ripple={radius:60,color:"#e6e6e6",rect:void 0};Xe.templates.atul.size=[120,120];Xe.templates.atul_male=Object.assign({},Xe.templates.atul);Xe.templates.atul_male.node+='<use x="0" y="0" xlink:href="#male_circle" />';Xe.templates.atul_male.ripple={radius:60,color:"#039BE5",rect:void 0};Xe.templates.atul_female=Object.assign({},Xe.templates.atul);Xe.templates.atul_female.node+='<use x="0" y="0" xlink:href="#female_circle" />';Xe.templates.atul_female.ripple={radius:60,color:"#F57C00",rect:void 0};Xe.templates.atul.nodeMenuButton=`<use ${Xe.attr.control_node_menu_id}="{id}" x="90" y="50" xlink:href="#base_node_menu" />`;function US(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Lb(...t){return e=>t.forEach(n=>US(n,e))}function ht(...t){return M.useCallback(Lb(...t),t)}var Do=M.forwardRef((t,e)=>{const{children:n,...r}=t,i=M.Children.toArray(n),o=i.find(BS);if(o){const s=o.props.children,l=i.map(c=>c===o?M.Children.count(s)>1?M.Children.only(null):M.isValidElement(s)?s.props.children:null:c);return F.jsx(w1,{...r,ref:e,children:M.isValidElement(s)?M.cloneElement(s,void 0,l):null})}return F.jsx(w1,{...r,ref:e,children:n})});Do.displayName="Slot";var w1=M.forwardRef((t,e)=>{const{children:n,...r}=t;if(M.isValidElement(n)){const i=$S(n);return M.cloneElement(n,{...jS(r,n.props),ref:e?Lb(e,i):i})}return M.Children.count(n)>1?M.Children.only(null):null});w1.displayName="SlotClone";var FS=({children:t})=>F.jsx(F.Fragment,{children:t});function BS(t){return M.isValidElement(t)&&t.type===FS}function jS(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...l)=>{o(...l),i(...l)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function $S(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Mb(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=Mb(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function zS(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=Mb(t))&&(r&&(r+=" "),r+=e);return r}const J2=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,Z2=zS,mm=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return Z2(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:o}=e,s=Object.keys(i).map(d=>{const u=n==null?void 0:n[d],f=o==null?void 0:o[d];if(u===null)return null;const h=J2(u)||J2(f);return i[d][h]}),l=n&&Object.entries(n).reduce((d,u)=>{let[f,h]=u;return h===void 0||(d[f]=h),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:f,className:h,...p}=u;return Object.entries(p).every(v=>{let[y,w]=v;return Array.isArray(w)?w.includes({...o,...l}[y]):{...o,...l}[y]===w})?[...d,f,h]:d},[]);return Z2(t,s,c,n==null?void 0:n.class,n==null?void 0:n.className)};function Ob(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Ob(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function HS(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Ob(t))&&(r&&(r+=" "),r+=e);return r}const gm="-",qS=t=>{const e=GS(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{const l=s.split(gm);return l[0]===""&&l.length!==1&&l.shift(),Db(l,e)||WS(s)},getConflictingClassGroupIds:(s,l)=>{const c=n[s]||[];return l&&r[s]?[...c,...r[s]]:c}}},Db=(t,e)=>{var s;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?Db(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=t.join(gm);return(s=e.validators.find(({validator:l})=>l(o)))==null?void 0:s.classGroupId},ey=/^\[(.+)\]$/,WS=t=>{if(ey.test(t)){const e=ey.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},GS=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return KS(Object.entries(t.classGroups),n).forEach(([o,s])=>{x1(s,r,o,e)}),r},x1=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const o=i===""?e:ty(e,i);o.classGroupId=n;return}if(typeof i=="function"){if(YS(i)){x1(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,s])=>{x1(s,ty(e,o),n,r)})})},ty=(t,e)=>{let n=t;return e.split(gm).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},YS=t=>t.isThemeGetter,KS=(t,e)=>e?t.map(([n,r])=>{const i=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([s,l])=>[e+s,l])):o);return[n,i]}):t,XS=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(o,s)=>{n.set(o,s),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let s=n.get(o);if(s!==void 0)return s;if((s=r.get(o))!==void 0)return i(o,s),s},set(o,s){n.has(o)?n.set(o,s):i(o,s)}}},Vb="!",QS=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],o=e.length,s=l=>{const c=[];let d=0,u=0,f;for(let w=0;w<l.length;w++){let g=l[w];if(d===0){if(g===i&&(r||l.slice(w,w+o)===e)){c.push(l.slice(u,w)),u=w+o;continue}if(g==="/"){f=w;continue}}g==="["?d++:g==="]"&&d--}const h=c.length===0?l:l.substring(u),p=h.startsWith(Vb),v=p?h.substring(1):h,y=f&&f>u?f-u:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:y}};return n?l=>n({className:l,parseClassName:s}):s},JS=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},ZS=t=>({cache:XS(t.cacheSize),parseClassName:QS(t),...qS(t)}),eI=/\s+/,tI=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,o=[],s=t.trim().split(eI);let l="";for(let c=s.length-1;c>=0;c-=1){const d=s[c],{modifiers:u,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:p}=n(d);let v=!!p,y=r(v?h.substring(0,p):h);if(!y){if(!v){l=d+(l.length>0?" "+l:l);continue}if(y=r(h),!y){l=d+(l.length>0?" "+l:l);continue}v=!1}const w=JS(u).join(":"),g=f?w+Vb:w,b=g+y;if(o.includes(b))continue;o.push(b);const _=i(y,v);for(let E=0;E<_.length;++E){const A=_[E];o.push(g+A)}l=d+(l.length>0?" "+l:l)}return l};function nI(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=Ub(e))&&(r&&(r+=" "),r+=n);return r}const Ub=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Ub(t[r]))&&(n&&(n+=" "),n+=e);return n};function rI(t,...e){let n,r,i,o=s;function s(c){const d=e.reduce((u,f)=>f(u),t());return n=ZS(d),r=n.cache.get,i=n.cache.set,o=l,l(c)}function l(c){const d=r(c);if(d)return d;const u=tI(c,n);return i(c,u),u}return function(){return o(nI.apply(null,arguments))}}const it=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Fb=/^\[(?:([a-z-]+):)?(.+)\]$/i,iI=/^\d+\/\d+$/,oI=new Set(["px","full","screen"]),sI=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aI=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,lI=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,cI=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,uI=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,jr=t=>Ps(t)||oI.has(t)||iI.test(t),bi=t=>da(t,"length",yI),Ps=t=>!!t&&!Number.isNaN(Number(t)),Wh=t=>da(t,"number",Ps),Fa=t=>!!t&&Number.isInteger(Number(t)),dI=t=>t.endsWith("%")&&Ps(t.slice(0,-1)),Ie=t=>Fb.test(t),wi=t=>sI.test(t),fI=new Set(["length","size","percentage"]),hI=t=>da(t,fI,Bb),pI=t=>da(t,"position",Bb),mI=new Set(["image","url"]),gI=t=>da(t,mI,bI),vI=t=>da(t,"",_I),Ba=()=>!0,da=(t,e,n)=>{const r=Fb.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},yI=t=>aI.test(t)&&!lI.test(t),Bb=()=>!1,_I=t=>cI.test(t),bI=t=>uI.test(t),wI=()=>{const t=it("colors"),e=it("spacing"),n=it("blur"),r=it("brightness"),i=it("borderColor"),o=it("borderRadius"),s=it("borderSpacing"),l=it("borderWidth"),c=it("contrast"),d=it("grayscale"),u=it("hueRotate"),f=it("invert"),h=it("gap"),p=it("gradientColorStops"),v=it("gradientColorStopPositions"),y=it("inset"),w=it("margin"),g=it("opacity"),b=it("padding"),_=it("saturate"),E=it("scale"),A=it("sepia"),k=it("skew"),I=it("space"),x=it("translate"),S=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto",Ie,e],N=()=>[Ie,e],P=()=>["",jr,bi],V=()=>["auto",Ps,Ie],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],D=()=>["solid","dashed","dotted","double","none"],O=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],B=()=>["start","end","center","between","around","evenly","stretch"],j=()=>["","0",Ie],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[Ps,Ie];return{cacheSize:500,separator:":",theme:{colors:[Ba],spacing:[jr,bi],blur:["none","",wi,Ie],brightness:W(),borderColor:[t],borderRadius:["none","","full",wi,Ie],borderSpacing:N(),borderWidth:P(),contrast:W(),grayscale:j(),hueRotate:W(),invert:j(),gap:N(),gradientColorStops:[t],gradientColorStopPositions:[dI,bi],inset:T(),margin:T(),opacity:W(),padding:N(),saturate:W(),scale:W(),sepia:j(),skew:W(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",Ie]}],container:["container"],columns:[{columns:[wi]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),Ie]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Fa,Ie]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ie]}],grow:[{grow:j()}],shrink:[{shrink:j()}],order:[{order:["first","last","none",Fa,Ie]}],"grid-cols":[{"grid-cols":[Ba]}],"col-start-end":[{col:["auto",{span:["full",Fa,Ie]},Ie]}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":[Ba]}],"row-start-end":[{row:["auto",{span:[Fa,Ie]},Ie]}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ie]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ie]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...B()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...B(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...B(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ie,e]}],"min-w":[{"min-w":[Ie,e,"min","max","fit"]}],"max-w":[{"max-w":[Ie,e,"none","full","min","max","fit","prose",{screen:[wi]},wi]}],h:[{h:[Ie,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ie,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ie,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ie,e,"auto","min","max","fit"]}],"font-size":[{text:["base",wi,bi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Wh]}],"font-family":[{font:[Ba]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ie]}],"line-clamp":[{"line-clamp":["none",Ps,Wh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",jr,Ie]}],"list-image":[{"list-image":["none",Ie]}],"list-style-type":[{list:["none","disc","decimal",Ie]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...D(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",jr,bi]}],"underline-offset":[{"underline-offset":["auto",jr,Ie]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ie]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ie]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),pI]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",hI]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},gI]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...D(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:D()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...D()]}],"outline-offset":[{"outline-offset":[jr,Ie]}],"outline-w":[{outline:[jr,bi]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[jr,bi]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",wi,vI]}],"shadow-color":[{shadow:[Ba]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...O(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":O()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",wi,Ie]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[_]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ie]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",Ie]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ie]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Fa,Ie]}],"translate-x":[{"translate-x":[x]}],"translate-y":[{"translate-y":[x]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ie]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ie]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ie]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[jr,bi,Wh]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},xI=rI(wI);function tt(...t){return xI(HS(t))}const EI=mm("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),nn=M.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},o)=>{const s=r?Do:"button";return F.jsx(s,{className:tt(EI({variant:e,size:n,className:t})),ref:o,...i})});nn.displayName="Button";const Ss=M.forwardRef(({className:t,type:e,...n},r)=>F.jsx("input",{type:e,className:tt("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));Ss.displayName="Input";var SI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Oe=SI.reduce((t,e)=>{const n=M.forwardRef((r,i)=>{const{asChild:o,...s}=r,l=o?Do:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),F.jsx(l,{...s,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function jb(t,e){t&&oo.flushSync(()=>t.dispatchEvent(e))}var II="Label",$b=M.forwardRef((t,e)=>F.jsx(Oe.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));$b.displayName=II;var zb=$b;const CI=mm("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),$r=M.forwardRef(({className:t,...e},n)=>F.jsx(zb,{ref:n,className:tt(CI(),t),...e}));$r.displayName=zb.displayName;function so(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var AI=["color"],TI=M.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=so(t,AI);return M.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),M.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),kI=["color"],RI=M.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=so(t,kI);return M.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),M.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),NI=["color"],PI=M.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=so(t,NI);return M.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),M.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),LI=["color"],MI=M.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=so(t,LI);return M.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),M.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),OI=["color"],DI=M.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=so(t,OI);return M.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),M.createElement("path",{d:"M12.8536 2.85355C13.0488 2.65829 13.0488 2.34171 12.8536 2.14645C12.6583 1.95118 12.3417 1.95118 12.1464 2.14645L7.5 6.79289L2.85355 2.14645C2.65829 1.95118 2.34171 1.95118 2.14645 2.14645C1.95118 2.34171 1.95118 2.65829 2.14645 2.85355L6.79289 7.5L2.14645 12.1464C1.95118 12.3417 1.95118 12.6583 2.14645 12.8536C2.34171 13.0488 2.65829 13.0488 2.85355 12.8536L7.5 8.20711L12.1464 12.8536C12.3417 13.0488 12.6583 13.0488 12.8536 12.8536C13.0488 12.6583 13.0488 12.3417 12.8536 12.1464L8.20711 7.5L12.8536 2.85355Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),VI=["color"],Hb=M.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=so(t,VI);return M.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),M.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),UI=["color"],FI=M.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=so(t,UI);return M.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),M.createElement("path",{d:"M7.07095 0.650238C6.67391 0.650238 6.32977 0.925096 6.24198 1.31231L6.0039 2.36247C5.6249 2.47269 5.26335 2.62363 4.92436 2.81013L4.01335 2.23585C3.67748 2.02413 3.23978 2.07312 2.95903 2.35386L2.35294 2.95996C2.0722 3.2407 2.0232 3.6784 2.23493 4.01427L2.80942 4.92561C2.62307 5.2645 2.47227 5.62594 2.36216 6.00481L1.31209 6.24287C0.924883 6.33065 0.650024 6.6748 0.650024 7.07183V7.92897C0.650024 8.32601 0.924883 8.67015 1.31209 8.75794L2.36228 8.99603C2.47246 9.375 2.62335 9.73652 2.80979 10.0755L2.2354 10.9867C2.02367 11.3225 2.07267 11.7602 2.35341 12.041L2.95951 12.6471C3.24025 12.9278 3.67795 12.9768 4.01382 12.7651L4.92506 12.1907C5.26384 12.377 5.62516 12.5278 6.0039 12.6379L6.24198 13.6881C6.32977 14.0753 6.67391 14.3502 7.07095 14.3502H7.92809C8.32512 14.3502 8.66927 14.0753 8.75705 13.6881L8.99505 12.6383C9.37411 12.5282 9.73573 12.3773 10.0748 12.1909L10.986 12.7653C11.3218 12.977 11.7595 12.928 12.0403 12.6473L12.6464 12.0412C12.9271 11.7604 12.9761 11.3227 12.7644 10.9869L12.1902 10.076C12.3768 9.73688 12.5278 9.37515 12.638 8.99596L13.6879 8.75794C14.0751 8.67015 14.35 8.32601 14.35 7.92897V7.07183C14.35 6.6748 14.0751 6.33065 13.6879 6.24287L12.6381 6.00488C12.528 5.62578 12.3771 5.26414 12.1906 4.92507L12.7648 4.01407C12.9766 3.6782 12.9276 3.2405 12.6468 2.95975L12.0407 2.35366C11.76 2.07292 11.3223 2.02392 10.9864 2.23565L10.0755 2.80989C9.73622 2.62328 9.37437 2.47229 8.99505 2.36209L8.75705 1.31231C8.66927 0.925096 8.32512 0.650238 7.92809 0.650238H7.07095ZM4.92053 3.81251C5.44724 3.44339 6.05665 3.18424 6.71543 3.06839L7.07095 1.50024H7.92809L8.28355 3.06816C8.94267 3.18387 9.5524 3.44302 10.0794 3.81224L11.4397 2.9547L12.0458 3.56079L11.1882 4.92117C11.5573 5.44798 11.8164 6.0575 11.9321 6.71638L13.5 7.07183V7.92897L11.932 8.28444C11.8162 8.94342 11.557 9.55301 11.1878 10.0798L12.0453 11.4402L11.4392 12.0462L10.0787 11.1886C9.55192 11.5576 8.94241 11.8166 8.28355 11.9323L7.92809 13.5002H7.07095L6.71543 11.932C6.0569 11.8162 5.44772 11.5572 4.92116 11.1883L3.56055 12.046L2.95445 11.4399L3.81213 10.0794C3.4431 9.55266 3.18403 8.94326 3.06825 8.2845L1.50002 7.92897V7.07183L3.06818 6.71632C3.18388 6.05765 3.44283 5.44833 3.81171 4.92165L2.95398 3.561L3.56008 2.95491L4.92053 3.81251ZM9.02496 7.50008C9.02496 8.34226 8.34223 9.02499 7.50005 9.02499C6.65786 9.02499 5.97513 8.34226 5.97513 7.50008C5.97513 6.65789 6.65786 5.97516 7.50005 5.97516C8.34223 5.97516 9.02496 6.65789 9.02496 7.50008ZM9.92496 7.50008C9.92496 8.83932 8.83929 9.92499 7.50005 9.92499C6.1608 9.92499 5.07513 8.83932 5.07513 7.50008C5.07513 6.16084 6.1608 5.07516 7.50005 5.07516C8.83929 5.07516 9.92496 6.16084 9.92496 7.50008Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),BI=["color"],jI=M.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=so(t,BI);return M.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),M.createElement("path",{d:"M5.5 1C5.22386 1 5 1.22386 5 1.5C5 1.77614 5.22386 2 5.5 2H9.5C9.77614 2 10 1.77614 10 1.5C10 1.22386 9.77614 1 9.5 1H5.5ZM3 3.5C3 3.22386 3.22386 3 3.5 3H5H10H11.5C11.7761 3 12 3.22386 12 3.5C12 3.77614 11.7761 4 11.5 4H11V12C11 12.5523 10.5523 13 10 13H5C4.44772 13 4 12.5523 4 12V4L3.5 4C3.22386 4 3 3.77614 3 3.5ZM5 4H10V12H5V4Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});function ny(t,[e,n]){return Math.min(n,Math.max(e,t))}function Me(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function $I(t,e=[]){let n=[];function r(o,s){const l=M.createContext(s),c=n.length;n=[...n,s];function d(f){const{scope:h,children:p,...v}=f,y=(h==null?void 0:h[t][c])||l,w=M.useMemo(()=>v,Object.values(v));return F.jsx(y.Provider,{value:w,children:p})}function u(f,h){const p=(h==null?void 0:h[t][c])||l,v=M.useContext(p);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,u]}const i=()=>{const o=n.map(s=>M.createContext(s));return function(l){const c=(l==null?void 0:l[t])||o;return M.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,zI(i,...e)]}function zI(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(o)[`__scope${d}`];return{...l,...f}},{});return M.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}function qb(t){const e=t+"CollectionProvider",[n,r]=$I(e),[i,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=p=>{const{scope:v,children:y}=p,w=_r.useRef(null),g=_r.useRef(new Map).current;return F.jsx(i,{scope:v,itemMap:g,collectionRef:w,children:y})};s.displayName=e;const l=t+"CollectionSlot",c=_r.forwardRef((p,v)=>{const{scope:y,children:w}=p,g=o(l,y),b=ht(v,g.collectionRef);return F.jsx(Do,{ref:b,children:w})});c.displayName=l;const d=t+"CollectionItemSlot",u="data-radix-collection-item",f=_r.forwardRef((p,v)=>{const{scope:y,children:w,...g}=p,b=_r.useRef(null),_=ht(v,b),E=o(d,y);return _r.useEffect(()=>(E.itemMap.set(b,{ref:b,...g}),()=>void E.itemMap.delete(b))),F.jsx(Do,{[u]:"",ref:_,children:w})});f.displayName=d;function h(p){const v=o(t+"CollectionConsumer",p);return _r.useCallback(()=>{const w=v.collectionRef.current;if(!w)return[];const g=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(v.itemMap.values()).sort((E,A)=>g.indexOf(E.ref.current)-g.indexOf(A.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:s,Slot:c,ItemSlot:f},h,r]}function HI(t,e){const n=M.createContext(e),r=o=>{const{children:s,...l}=o,c=M.useMemo(()=>l,Object.values(l));return F.jsx(n.Provider,{value:c,children:s})};r.displayName=t+"Provider";function i(o){const s=M.useContext(n);if(s)return s;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[r,i]}function uf(t,e=[]){let n=[];function r(o,s){const l=M.createContext(s),c=n.length;n=[...n,s];const d=f=>{var g;const{scope:h,children:p,...v}=f,y=((g=h==null?void 0:h[t])==null?void 0:g[c])||l,w=M.useMemo(()=>v,Object.values(v));return F.jsx(y.Provider,{value:w,children:p})};d.displayName=o+"Provider";function u(f,h){var y;const p=((y=h==null?void 0:h[t])==null?void 0:y[c])||l,v=M.useContext(p);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[d,u]}const i=()=>{const o=n.map(s=>M.createContext(s));return function(l){const c=(l==null?void 0:l[t])||o;return M.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,qI(i,...e)]}function qI(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(o)[`__scope${d}`];return{...l,...f}},{});return M.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}var WI=M.createContext(void 0);function GI(t){const e=M.useContext(WI);return t||e||"ltr"}function Cn(t){const e=M.useRef(t);return M.useEffect(()=>{e.current=t}),M.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function YI(t,e=globalThis==null?void 0:globalThis.document){const n=Cn(t);M.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var KI="DismissableLayer",E1="dismissableLayer.update",XI="dismissableLayer.pointerDownOutside",QI="dismissableLayer.focusOutside",ry,Wb=M.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),df=M.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:l,...c}=t,d=M.useContext(Wb),[u,f]=M.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=M.useState({}),v=ht(e,I=>f(I)),y=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),g=y.indexOf(w),b=u?y.indexOf(u):-1,_=d.layersWithOutsidePointerEventsDisabled.size>0,E=b>=g,A=ZI(I=>{const x=I.target,S=[...d.branches].some(R=>R.contains(x));!E||S||(i==null||i(I),s==null||s(I),I.defaultPrevented||l==null||l())},h),k=eC(I=>{const x=I.target;[...d.branches].some(R=>R.contains(x))||(o==null||o(I),s==null||s(I),I.defaultPrevented||l==null||l())},h);return YI(I=>{b===d.layers.size-1&&(r==null||r(I),!I.defaultPrevented&&l&&(I.preventDefault(),l()))},h),M.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(ry=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),iy(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=ry)}},[u,h,n,d]),M.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),iy())},[u,d]),M.useEffect(()=>{const I=()=>p({});return document.addEventListener(E1,I),()=>document.removeEventListener(E1,I)},[]),F.jsx(Oe.div,{...c,ref:v,style:{pointerEvents:_?E?"auto":"none":void 0,...t.style},onFocusCapture:Me(t.onFocusCapture,k.onFocusCapture),onBlurCapture:Me(t.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Me(t.onPointerDownCapture,A.onPointerDownCapture)})});df.displayName=KI;var JI="DismissableLayerBranch",Gb=M.forwardRef((t,e)=>{const n=M.useContext(Wb),r=M.useRef(null),i=ht(e,r);return M.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),F.jsx(Oe.div,{...t,ref:i})});Gb.displayName=JI;function ZI(t,e=globalThis==null?void 0:globalThis.document){const n=Cn(t),r=M.useRef(!1),i=M.useRef(()=>{});return M.useEffect(()=>{const o=l=>{if(l.target&&!r.current){let c=function(){Yb(XI,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function eC(t,e=globalThis==null?void 0:globalThis.document){const n=Cn(t),r=M.useRef(!1);return M.useEffect(()=>{const i=o=>{o.target&&!r.current&&Yb(QI,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function iy(){const t=new CustomEvent(E1);document.dispatchEvent(t)}function Yb(t,e,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?jb(i,o):i.dispatchEvent(o)}var tC=df,nC=Gb,Gh=0;function Kb(){M.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??oy()),document.body.insertAdjacentElement("beforeend",t[1]??oy()),Gh++,()=>{Gh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Gh--}},[])}function oy(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Yh="focusScope.autoFocusOnMount",Kh="focusScope.autoFocusOnUnmount",sy={bubbles:!1,cancelable:!0},rC="FocusScope",vm=M.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...s}=t,[l,c]=M.useState(null),d=Cn(i),u=Cn(o),f=M.useRef(null),h=ht(e,y=>c(y)),p=M.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;M.useEffect(()=>{if(r){let y=function(_){if(p.paused||!l)return;const E=_.target;l.contains(E)?f.current=E:Ei(f.current,{select:!0})},w=function(_){if(p.paused||!l)return;const E=_.relatedTarget;E!==null&&(l.contains(E)||Ei(f.current,{select:!0}))},g=function(_){if(document.activeElement===document.body)for(const A of _)A.removedNodes.length>0&&Ei(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const b=new MutationObserver(g);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),b.disconnect()}}},[r,l,p.paused]),M.useEffect(()=>{if(l){ly.add(p);const y=document.activeElement;if(!l.contains(y)){const g=new CustomEvent(Yh,sy);l.addEventListener(Yh,d),l.dispatchEvent(g),g.defaultPrevented||(iC(cC(Xb(l)),{select:!0}),document.activeElement===y&&Ei(l))}return()=>{l.removeEventListener(Yh,d),setTimeout(()=>{const g=new CustomEvent(Kh,sy);l.addEventListener(Kh,u),l.dispatchEvent(g),g.defaultPrevented||Ei(y??document.body,{select:!0}),l.removeEventListener(Kh,u),ly.remove(p)},0)}}},[l,d,u,p]);const v=M.useCallback(y=>{if(!n&&!r||p.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,g=document.activeElement;if(w&&g){const b=y.currentTarget,[_,E]=oC(b);_&&E?!y.shiftKey&&g===E?(y.preventDefault(),n&&Ei(_,{select:!0})):y.shiftKey&&g===_&&(y.preventDefault(),n&&Ei(E,{select:!0})):g===b&&y.preventDefault()}},[n,r,p.paused]);return F.jsx(Oe.div,{tabIndex:-1,...s,ref:h,onKeyDown:v})});vm.displayName=rC;function iC(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ei(r,{select:e}),document.activeElement!==n)return}function oC(t){const e=Xb(t),n=ay(e,t),r=ay(e.reverse(),t);return[n,r]}function Xb(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function ay(t,e){for(const n of t)if(!sC(n,{upTo:e}))return n}function sC(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function aC(t){return t instanceof HTMLInputElement&&"select"in t}function Ei(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&aC(t)&&e&&t.select()}}var ly=lC();function lC(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=cy(t,e),t.unshift(e)},remove(e){var n;t=cy(t,e),(n=t[0])==null||n.resume()}}}function cy(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function cC(t){return t.filter(e=>e.tagName!=="A")}var Ut=globalThis!=null&&globalThis.document?M.useLayoutEffect:()=>{},uC=Tp.useId||(()=>{}),dC=0;function Ls(t){const[e,n]=M.useState(uC());return Ut(()=>{n(r=>r??String(dC++))},[t]),e?`radix-${e}`:""}const fC=["top","right","bottom","left"],Yi=Math.min,Ln=Math.max,hd=Math.round,Gc=Math.floor,Ki=t=>({x:t,y:t}),hC={left:"right",right:"left",bottom:"top",top:"bottom"},pC={start:"end",end:"start"};function S1(t,e,n){return Ln(t,Yi(e,n))}function oi(t,e){return typeof t=="function"?t(e):t}function si(t){return t.split("-")[0]}function fa(t){return t.split("-")[1]}function ym(t){return t==="x"?"y":"x"}function _m(t){return t==="y"?"height":"width"}function Xi(t){return["top","bottom"].includes(si(t))?"y":"x"}function bm(t){return ym(Xi(t))}function mC(t,e,n){n===void 0&&(n=!1);const r=fa(t),i=bm(t),o=_m(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=pd(s)),[s,pd(s)]}function gC(t){const e=pd(t);return[I1(t),e,I1(e)]}function I1(t){return t.replace(/start|end/g,e=>pC[e])}function vC(t,e,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?o:s;default:return[]}}function yC(t,e,n,r){const i=fa(t);let o=vC(si(t),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),e&&(o=o.concat(o.map(I1)))),o}function pd(t){return t.replace(/left|right|bottom|top/g,e=>hC[e])}function _C(t){return{top:0,right:0,bottom:0,left:0,...t}}function Qb(t){return typeof t!="number"?_C(t):{top:t,right:t,bottom:t,left:t}}function md(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function uy(t,e,n){let{reference:r,floating:i}=t;const o=Xi(e),s=bm(e),l=_m(s),c=si(e),d=o==="y",u=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,h=r[l]/2-i[l]/2;let p;switch(c){case"top":p={x:u,y:r.y-i.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-i.width,y:f};break;default:p={x:r.x,y:r.y}}switch(fa(e)){case"start":p[s]-=h*(n&&d?-1:1);break;case"end":p[s]+=h*(n&&d?-1:1);break}return p}const bC=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,l=o.filter(Boolean),c=await(s.isRTL==null?void 0:s.isRTL(e));let d=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:f}=uy(d,r,c),h=r,p={},v=0;for(let y=0;y<l.length;y++){const{name:w,fn:g}=l[y],{x:b,y:_,data:E,reset:A}=await g({x:u,y:f,initialPlacement:r,placement:h,strategy:i,middlewareData:p,rects:d,platform:s,elements:{reference:t,floating:e}});u=b??u,f=_??f,p={...p,[w]:{...p[w],...E}},A&&v<=50&&(v++,typeof A=="object"&&(A.placement&&(h=A.placement),A.rects&&(d=A.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):A.rects),{x:u,y:f}=uy(d,h,c)),y=-1)}return{x:u,y:f,placement:h,strategy:i,middlewareData:p}};async function Ml(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:s,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=oi(e,t),v=Qb(p),w=l[h?f==="floating"?"reference":"floating":f],g=md(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(w)))==null||n?w:w.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),b=f==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),E=await(o.isElement==null?void 0:o.isElement(_))?await(o.getScale==null?void 0:o.getScale(_))||{x:1,y:1}:{x:1,y:1},A=md(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:_,strategy:c}):b);return{top:(g.top-A.top+v.top)/E.y,bottom:(A.bottom-g.bottom+v.bottom)/E.y,left:(g.left-A.left+v.left)/E.x,right:(A.right-g.right+v.right)/E.x}}const wC=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:s,elements:l,middlewareData:c}=e,{element:d,padding:u=0}=oi(t,e)||{};if(d==null)return{};const f=Qb(u),h={x:n,y:r},p=bm(i),v=_m(p),y=await s.getDimensions(d),w=p==="y",g=w?"top":"left",b=w?"bottom":"right",_=w?"clientHeight":"clientWidth",E=o.reference[v]+o.reference[p]-h[p]-o.floating[v],A=h[p]-o.reference[p],k=await(s.getOffsetParent==null?void 0:s.getOffsetParent(d));let I=k?k[_]:0;(!I||!await(s.isElement==null?void 0:s.isElement(k)))&&(I=l.floating[_]||o.floating[v]);const x=E/2-A/2,S=I/2-y[v]/2-1,R=Yi(f[g],S),T=Yi(f[b],S),N=R,P=I-y[v]-T,V=I/2-y[v]/2+x,$=S1(N,V,P),D=!c.arrow&&fa(i)!=null&&V!==$&&o.reference[v]/2-(V<N?R:T)-y[v]/2<0,O=D?V<N?V-N:V-P:0;return{[p]:h[p]+O,data:{[p]:$,centerOffset:V-$-O,...D&&{alignmentOffset:O}},reset:D}}}),xC=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,...w}=oi(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const g=si(i),b=Xi(l),_=si(l)===l,E=await(c.isRTL==null?void 0:c.isRTL(d.floating)),A=h||(_||!y?[pd(l)]:gC(l)),k=v!=="none";!h&&k&&A.push(...yC(l,y,v,E));const I=[l,...A],x=await Ml(e,w),S=[];let R=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&S.push(x[g]),f){const V=mC(i,s,E);S.push(x[V[0]],x[V[1]])}if(R=[...R,{placement:i,overflows:S}],!S.every(V=>V<=0)){var T,N;const V=(((T=o.flip)==null?void 0:T.index)||0)+1,$=I[V];if($)return{data:{index:V,overflows:R},reset:{placement:$}};let D=(N=R.filter(O=>O.overflows[0]<=0).sort((O,B)=>O.overflows[1]-B.overflows[1])[0])==null?void 0:N.placement;if(!D)switch(p){case"bestFit":{var P;const O=(P=R.filter(B=>{if(k){const j=Xi(B.placement);return j===b||j==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(j=>j>0).reduce((j,z)=>j+z,0)]).sort((B,j)=>B[1]-j[1])[0])==null?void 0:P[0];O&&(D=O);break}case"initialPlacement":D=l;break}if(i!==D)return{reset:{placement:D}}}return{}}}};function dy(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function fy(t){return fC.some(e=>t[e]>=0)}const EC=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=oi(t,e);switch(r){case"referenceHidden":{const o=await Ml(e,{...i,elementContext:"reference"}),s=dy(o,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:fy(s)}}}case"escaped":{const o=await Ml(e,{...i,altBoundary:!0}),s=dy(o,n.floating);return{data:{escapedOffsets:s,escaped:fy(s)}}}default:return{}}}}};async function SC(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=si(n),l=fa(n),c=Xi(n)==="y",d=["left","top"].includes(s)?-1:1,u=o&&c?-1:1,f=oi(e,t);let{mainAxis:h,crossAxis:p,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof v=="number"&&(p=l==="end"?v*-1:v),c?{x:p*u,y:h*d}:{x:h*d,y:p*u}}const IC=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:s,middlewareData:l}=e,c=await SC(e,t);return s===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:s}}}}},CC=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:l={fn:w=>{let{x:g,y:b}=w;return{x:g,y:b}}},...c}=oi(t,e),d={x:n,y:r},u=await Ml(e,c),f=Xi(si(i)),h=ym(f);let p=d[h],v=d[f];if(o){const w=h==="y"?"top":"left",g=h==="y"?"bottom":"right",b=p+u[w],_=p-u[g];p=S1(b,p,_)}if(s){const w=f==="y"?"top":"left",g=f==="y"?"bottom":"right",b=v+u[w],_=v-u[g];v=S1(b,v,_)}const y=l.fn({...e,[h]:p,[f]:v});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[h]:o,[f]:s}}}}}},AC=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:o,middlewareData:s}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=oi(t,e),u={x:n,y:r},f=Xi(i),h=ym(f);let p=u[h],v=u[f];const y=oi(l,e),w=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const _=h==="y"?"height":"width",E=o.reference[h]-o.floating[_]+w.mainAxis,A=o.reference[h]+o.reference[_]-w.mainAxis;p<E?p=E:p>A&&(p=A)}if(d){var g,b;const _=h==="y"?"width":"height",E=["top","left"].includes(si(i)),A=o.reference[f]-o.floating[_]+(E&&((g=s.offset)==null?void 0:g[f])||0)+(E?0:w.crossAxis),k=o.reference[f]+o.reference[_]+(E?0:((b=s.offset)==null?void 0:b[f])||0)-(E?w.crossAxis:0);v<A?v=A:v>k&&(v=k)}return{[h]:p,[f]:v}}}},TC=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:o,platform:s,elements:l}=e,{apply:c=()=>{},...d}=oi(t,e),u=await Ml(e,d),f=si(i),h=fa(i),p=Xi(i)==="y",{width:v,height:y}=o.floating;let w,g;f==="top"||f==="bottom"?(w=f,g=h===(await(s.isRTL==null?void 0:s.isRTL(l.floating))?"start":"end")?"left":"right"):(g=f,w=h==="end"?"top":"bottom");const b=y-u.top-u.bottom,_=v-u.left-u.right,E=Yi(y-u[w],b),A=Yi(v-u[g],_),k=!e.middlewareData.shift;let I=E,x=A;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(x=_),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(I=b),k&&!h){const R=Ln(u.left,0),T=Ln(u.right,0),N=Ln(u.top,0),P=Ln(u.bottom,0);p?x=v-2*(R!==0||T!==0?R+T:Ln(u.left,u.right)):I=y-2*(N!==0||P!==0?N+P:Ln(u.top,u.bottom))}await c({...e,availableWidth:x,availableHeight:I});const S=await s.getDimensions(l.floating);return v!==S.width||y!==S.height?{reset:{rects:!0}}:{}}}};function ff(){return typeof window<"u"}function ha(t){return Jb(t)?(t.nodeName||"").toLowerCase():"#document"}function Un(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Vr(t){var e;return(e=(Jb(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Jb(t){return ff()?t instanceof Node||t instanceof Un(t).Node:!1}function fr(t){return ff()?t instanceof Element||t instanceof Un(t).Element:!1}function Mr(t){return ff()?t instanceof HTMLElement||t instanceof Un(t).HTMLElement:!1}function hy(t){return!ff()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Un(t).ShadowRoot}function Jl(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=hr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function kC(t){return["table","td","th"].includes(ha(t))}function hf(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function wm(t){const e=xm(),n=fr(t)?hr(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function RC(t){let e=Qi(t);for(;Mr(e)&&!Xs(e);){if(wm(e))return e;if(hf(e))return null;e=Qi(e)}return null}function xm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Xs(t){return["html","body","#document"].includes(ha(t))}function hr(t){return Un(t).getComputedStyle(t)}function pf(t){return fr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Qi(t){if(ha(t)==="html")return t;const e=t.assignedSlot||t.parentNode||hy(t)&&t.host||Vr(t);return hy(e)?e.host:e}function Zb(t){const e=Qi(t);return Xs(e)?t.ownerDocument?t.ownerDocument.body:t.body:Mr(e)&&Jl(e)?e:Zb(e)}function Ol(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=Zb(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),s=Un(i);if(o){const l=C1(s);return e.concat(s,s.visualViewport||[],Jl(i)?i:[],l&&n?Ol(l):[])}return e.concat(i,Ol(i,[],n))}function C1(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function e4(t){const e=hr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Mr(t),o=i?t.offsetWidth:n,s=i?t.offsetHeight:r,l=hd(n)!==o||hd(r)!==s;return l&&(n=o,r=s),{width:n,height:r,$:l}}function Em(t){return fr(t)?t:t.contextElement}function Ms(t){const e=Em(t);if(!Mr(e))return Ki(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=e4(e);let s=(o?hd(n.width):n.width)/r,l=(o?hd(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!l||!Number.isFinite(l))&&(l=1),{x:s,y:l}}const NC=Ki(0);function t4(t){const e=Un(t);return!xm()||!e.visualViewport?NC:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function PC(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Un(t)?!1:e}function Vo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=Em(t);let s=Ki(1);e&&(r?fr(r)&&(s=Ms(r)):s=Ms(t));const l=PC(o,n,r)?t4(o):Ki(0);let c=(i.left+l.x)/s.x,d=(i.top+l.y)/s.y,u=i.width/s.x,f=i.height/s.y;if(o){const h=Un(o),p=r&&fr(r)?Un(r):r;let v=h,y=C1(v);for(;y&&r&&p!==v;){const w=Ms(y),g=y.getBoundingClientRect(),b=hr(y),_=g.left+(y.clientLeft+parseFloat(b.paddingLeft))*w.x,E=g.top+(y.clientTop+parseFloat(b.paddingTop))*w.y;c*=w.x,d*=w.y,u*=w.x,f*=w.y,c+=_,d+=E,v=Un(y),y=C1(v)}}return md({width:u,height:f,x:c,y:d})}function LC(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",s=Vr(r),l=e?hf(e.floating):!1;if(r===s||l&&o)return n;let c={scrollLeft:0,scrollTop:0},d=Ki(1);const u=Ki(0),f=Mr(r);if((f||!f&&!o)&&((ha(r)!=="body"||Jl(s))&&(c=pf(r)),Mr(r))){const h=Vo(r);d=Ms(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+u.x,y:n.y*d.y-c.scrollTop*d.y+u.y}}function MC(t){return Array.from(t.getClientRects())}function A1(t,e){const n=pf(t).scrollLeft;return e?e.left+n:Vo(Vr(t)).left+n}function OC(t){const e=Vr(t),n=pf(t),r=t.ownerDocument.body,i=Ln(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Ln(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+A1(t);const l=-n.scrollTop;return hr(r).direction==="rtl"&&(s+=Ln(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:l}}function DC(t,e){const n=Un(t),r=Vr(t),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,l=0,c=0;if(i){o=i.width,s=i.height;const d=xm();(!d||d&&e==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:o,height:s,x:l,y:c}}function VC(t,e){const n=Vo(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=Mr(t)?Ms(t):Ki(1),s=t.clientWidth*o.x,l=t.clientHeight*o.y,c=i*o.x,d=r*o.y;return{width:s,height:l,x:c,y:d}}function py(t,e,n){let r;if(e==="viewport")r=DC(t,n);else if(e==="document")r=OC(Vr(t));else if(fr(e))r=VC(e,n);else{const i=t4(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return md(r)}function n4(t,e){const n=Qi(t);return n===e||!fr(n)||Xs(n)?!1:hr(n).position==="fixed"||n4(n,e)}function UC(t,e){const n=e.get(t);if(n)return n;let r=Ol(t,[],!1).filter(l=>fr(l)&&ha(l)!=="body"),i=null;const o=hr(t).position==="fixed";let s=o?Qi(t):t;for(;fr(s)&&!Xs(s);){const l=hr(s),c=wm(s);!c&&l.position==="fixed"&&(i=null),(o?!c&&!i:!c&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Jl(s)&&!c&&n4(t,s))?r=r.filter(u=>u!==s):i=l,s=Qi(s)}return e.set(t,r),r}function FC(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?hf(e)?[]:UC(e,this._c):[].concat(n),r],l=s[0],c=s.reduce((d,u)=>{const f=py(e,u,i);return d.top=Ln(f.top,d.top),d.right=Yi(f.right,d.right),d.bottom=Yi(f.bottom,d.bottom),d.left=Ln(f.left,d.left),d},py(e,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function BC(t){const{width:e,height:n}=e4(t);return{width:e,height:n}}function jC(t,e,n){const r=Mr(e),i=Vr(e),o=n==="fixed",s=Vo(t,!0,o,e);let l={scrollLeft:0,scrollTop:0};const c=Ki(0);if(r||!r&&!o)if((ha(e)!=="body"||Jl(i))&&(l=pf(e)),r){const p=Vo(e,!0,o,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else i&&(c.x=A1(i));let d=0,u=0;if(i&&!r&&!o){const p=i.getBoundingClientRect();u=p.top+l.scrollTop,d=p.left+l.scrollLeft-A1(i,p)}const f=s.left+l.scrollLeft-c.x-d,h=s.top+l.scrollTop-c.y-u;return{x:f,y:h,width:s.width,height:s.height}}function Xh(t){return hr(t).position==="static"}function my(t,e){if(!Mr(t)||hr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Vr(t)===n&&(n=n.ownerDocument.body),n}function r4(t,e){const n=Un(t);if(hf(t))return n;if(!Mr(t)){let i=Qi(t);for(;i&&!Xs(i);){if(fr(i)&&!Xh(i))return i;i=Qi(i)}return n}let r=my(t,e);for(;r&&kC(r)&&Xh(r);)r=my(r,e);return r&&Xs(r)&&Xh(r)&&!wm(r)?n:r||RC(t)||n}const $C=async function(t){const e=this.getOffsetParent||r4,n=this.getDimensions,r=await n(t.floating);return{reference:jC(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function zC(t){return hr(t).direction==="rtl"}const HC={convertOffsetParentRelativeRectToViewportRelativeRect:LC,getDocumentElement:Vr,getClippingRect:FC,getOffsetParent:r4,getElementRects:$C,getClientRects:MC,getDimensions:BC,getScale:Ms,isElement:fr,isRTL:zC};function qC(t,e){let n=null,r;const i=Vr(t);function o(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function s(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const{left:d,top:u,width:f,height:h}=t.getBoundingClientRect();if(l||e(),!f||!h)return;const p=Gc(u),v=Gc(i.clientWidth-(d+f)),y=Gc(i.clientHeight-(u+h)),w=Gc(d),b={rootMargin:-p+"px "+-v+"px "+-y+"px "+-w+"px",threshold:Ln(0,Yi(1,c))||1};let _=!0;function E(A){const k=A[0].intersectionRatio;if(k!==c){if(!_)return s();k?s(!1,k):r=setTimeout(()=>{s(!1,1e-7)},1e3)}_=!1}try{n=new IntersectionObserver(E,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,b)}n.observe(t)}return s(!0),o}function i4(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=Em(t),u=i||o?[...d?Ol(d):[],...Ol(e)]:[];u.forEach(g=>{i&&g.addEventListener("scroll",n,{passive:!0}),o&&g.addEventListener("resize",n)});const f=d&&l?qC(d,n):null;let h=-1,p=null;s&&(p=new ResizeObserver(g=>{let[b]=g;b&&b.target===d&&p&&(p.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(e)})),n()}),d&&!c&&p.observe(d),p.observe(e));let v,y=c?Vo(t):null;c&&w();function w(){const g=Vo(t);y&&(g.x!==y.x||g.y!==y.y||g.width!==y.width||g.height!==y.height)&&n(),y=g,v=requestAnimationFrame(w)}return n(),()=>{var g;u.forEach(b=>{i&&b.removeEventListener("scroll",n),o&&b.removeEventListener("resize",n)}),f==null||f(),(g=p)==null||g.disconnect(),p=null,c&&cancelAnimationFrame(v)}}const WC=IC,GC=CC,YC=xC,KC=TC,XC=EC,gy=wC,QC=AC,JC=(t,e,n)=>{const r=new Map,i={platform:HC,...n},o={...i.platform,_c:r};return bC(t,e,{...i,platform:o})};var Eu=typeof document<"u"?M.useLayoutEffect:M.useEffect;function gd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!gd(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&t.$$typeof)&&!gd(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function o4(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function vy(t,e){const n=o4(t);return Math.round(e*n)/n}function Qh(t){const e=M.useRef(t);return Eu(()=>{e.current=t}),e}function ZC(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[u,f]=M.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,p]=M.useState(r);gd(h,r)||p(r);const[v,y]=M.useState(null),[w,g]=M.useState(null),b=M.useCallback(B=>{B!==k.current&&(k.current=B,y(B))},[]),_=M.useCallback(B=>{B!==I.current&&(I.current=B,g(B))},[]),E=o||v,A=s||w,k=M.useRef(null),I=M.useRef(null),x=M.useRef(u),S=c!=null,R=Qh(c),T=Qh(i),N=Qh(d),P=M.useCallback(()=>{if(!k.current||!I.current)return;const B={placement:e,strategy:n,middleware:h};T.current&&(B.platform=T.current),JC(k.current,I.current,B).then(j=>{const z={...j,isPositioned:N.current!==!1};V.current&&!gd(x.current,z)&&(x.current=z,oo.flushSync(()=>{f(z)}))})},[h,e,n,T,N]);Eu(()=>{d===!1&&x.current.isPositioned&&(x.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[d]);const V=M.useRef(!1);Eu(()=>(V.current=!0,()=>{V.current=!1}),[]),Eu(()=>{if(E&&(k.current=E),A&&(I.current=A),E&&A){if(R.current)return R.current(E,A,P);P()}},[E,A,P,R,S]);const $=M.useMemo(()=>({reference:k,floating:I,setReference:b,setFloating:_}),[b,_]),D=M.useMemo(()=>({reference:E,floating:A}),[E,A]),O=M.useMemo(()=>{const B={position:n,left:0,top:0};if(!D.floating)return B;const j=vy(D.floating,u.x),z=vy(D.floating,u.y);return l?{...B,transform:"translate("+j+"px, "+z+"px)",...o4(D.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:j,top:z}},[n,l,D.floating,u.x,u.y]);return M.useMemo(()=>({...u,update:P,refs:$,elements:D,floatingStyles:O}),[u,P,$,D,O])}const eA=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?gy({element:r.current,padding:i}).fn(n):{}:r?gy({element:r,padding:i}).fn(n):{}}}},tA=(t,e)=>({...WC(t),options:[t,e]}),nA=(t,e)=>({...GC(t),options:[t,e]}),rA=(t,e)=>({...QC(t),options:[t,e]}),iA=(t,e)=>({...YC(t),options:[t,e]}),oA=(t,e)=>({...KC(t),options:[t,e]}),sA=(t,e)=>({...XC(t),options:[t,e]}),aA=(t,e)=>({...eA(t),options:[t,e]});var lA="Arrow",s4=M.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...o}=t;return F.jsx(Oe.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:F.jsx("polygon",{points:"0,0 30,0 15,10"})})});s4.displayName=lA;var cA=s4;function uA(t,e=[]){let n=[];function r(o,s){const l=M.createContext(s),c=n.length;n=[...n,s];function d(f){const{scope:h,children:p,...v}=f,y=(h==null?void 0:h[t][c])||l,w=M.useMemo(()=>v,Object.values(v));return F.jsx(y.Provider,{value:w,children:p})}function u(f,h){const p=(h==null?void 0:h[t][c])||l,v=M.useContext(p);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,u]}const i=()=>{const o=n.map(s=>M.createContext(s));return function(l){const c=(l==null?void 0:l[t])||o;return M.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,dA(i,...e)]}function dA(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(o)[`__scope${d}`];return{...l,...f}},{});return M.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}function fA(t){const[e,n]=M.useState(void 0);return Ut(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let s,l;if("borderBoxSize"in o){const c=o.borderBoxSize,d=Array.isArray(c)?c[0]:c;s=d.inlineSize,l=d.blockSize}else s=t.offsetWidth,l=t.offsetHeight;n({width:s,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Sm="Popper",[a4,l4]=uA(Sm),[hA,c4]=a4(Sm),u4=t=>{const{__scopePopper:e,children:n}=t,[r,i]=M.useState(null);return F.jsx(hA,{scope:e,anchor:r,onAnchorChange:i,children:n})};u4.displayName=Sm;var d4="PopperAnchor",f4=M.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,o=c4(d4,n),s=M.useRef(null),l=ht(e,s);return M.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:F.jsx(Oe.div,{...i,ref:l})});f4.displayName=d4;var Im="PopperContent",[pA,mA]=a4(Im),h4=M.forwardRef((t,e)=>{var J,ne,oe,se,ae,ie;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:s=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:v,...y}=t,w=c4(Im,n),[g,b]=M.useState(null),_=ht(e,we=>b(we)),[E,A]=M.useState(null),k=fA(E),I=(k==null?void 0:k.width)??0,x=(k==null?void 0:k.height)??0,S=r+(o!=="center"?"-"+o:""),R=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},T=Array.isArray(d)?d:[d],N=T.length>0,P={padding:R,boundary:T.filter(vA),altBoundary:N},{refs:V,floatingStyles:$,placement:D,isPositioned:O,middlewareData:B}=ZC({strategy:"fixed",placement:S,whileElementsMounted:(...we)=>i4(...we,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[tA({mainAxis:i+x,alignmentAxis:s}),c&&nA({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?rA():void 0,...P}),c&&iA({...P}),oA({...P,apply:({elements:we,rects:Te,availableWidth:ye,availableHeight:Fe})=>{const{width:Ce,height:Ae}=Te.reference,fe=we.floating.style;fe.setProperty("--radix-popper-available-width",`${ye}px`),fe.setProperty("--radix-popper-available-height",`${Fe}px`),fe.setProperty("--radix-popper-anchor-width",`${Ce}px`),fe.setProperty("--radix-popper-anchor-height",`${Ae}px`)}}),E&&aA({element:E,padding:l}),yA({arrowWidth:I,arrowHeight:x}),h&&sA({strategy:"referenceHidden",...P})]}),[j,z]=g4(D),W=Cn(v);Ut(()=>{O&&(W==null||W())},[O,W]);const G=(J=B.arrow)==null?void 0:J.x,H=(ne=B.arrow)==null?void 0:ne.y,Y=((oe=B.arrow)==null?void 0:oe.centerOffset)!==0,[q,Q]=M.useState();return Ut(()=>{g&&Q(window.getComputedStyle(g).zIndex)},[g]),F.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:O?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:q,"--radix-popper-transform-origin":[(se=B.transformOrigin)==null?void 0:se.x,(ae=B.transformOrigin)==null?void 0:ae.y].join(" "),...((ie=B.hide)==null?void 0:ie.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:F.jsx(pA,{scope:n,placedSide:j,onArrowChange:A,arrowX:G,arrowY:H,shouldHideArrow:Y,children:F.jsx(Oe.div,{"data-side":j,"data-align":z,...y,ref:_,style:{...y.style,animation:O?void 0:"none"}})})})});h4.displayName=Im;var p4="PopperArrow",gA={top:"bottom",right:"left",bottom:"top",left:"right"},m4=M.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,o=mA(p4,r),s=gA[o.placedSide];return F.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:F.jsx(cA,{...i,ref:n,style:{...i.style,display:"block"}})})});m4.displayName=p4;function vA(t){return t!==null}var yA=t=>({name:"transformOrigin",options:t,fn(e){var w,g,b;const{placement:n,rects:r,middlewareData:i}=e,s=((w=i.arrow)==null?void 0:w.centerOffset)!==0,l=s?0:t.arrowWidth,c=s?0:t.arrowHeight,[d,u]=g4(n),f={start:"0%",center:"50%",end:"100%"}[u],h=(((g=i.arrow)==null?void 0:g.x)??0)+l/2,p=(((b=i.arrow)==null?void 0:b.y)??0)+c/2;let v="",y="";return d==="bottom"?(v=s?f:`${h}px`,y=`${-c}px`):d==="top"?(v=s?f:`${h}px`,y=`${r.floating.height+c}px`):d==="right"?(v=`${-c}px`,y=s?f:`${p}px`):d==="left"&&(v=`${r.floating.width+c}px`,y=s?f:`${p}px`),{data:{x:v,y}}}});function g4(t){const[e,n="center"]=t.split("-");return[e,n]}var _A=u4,bA=f4,wA=h4,xA=m4,EA="Portal",mf=M.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[i,o]=M.useState(!1);Ut(()=>o(!0),[]);const s=n||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return s?VS.createPortal(F.jsx(Oe.div,{...r,ref:e}),s):null});mf.displayName=EA;function vd({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=SA({defaultProp:e,onChange:n}),o=t!==void 0,s=o?t:r,l=Cn(n),c=M.useCallback(d=>{if(o){const f=typeof d=="function"?d(t):d;f!==t&&l(f)}else i(d)},[o,t,i,l]);return[s,c]}function SA({defaultProp:t,onChange:e}){const n=M.useState(t),[r]=n,i=M.useRef(r),o=Cn(e);return M.useEffect(()=>{i.current!==r&&(o(r),i.current=r)},[r,i,o]),n}function IA(t){const e=M.useRef({value:t,previous:t});return M.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var CA="VisuallyHidden",gf=M.forwardRef((t,e)=>F.jsx(Oe.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));gf.displayName=CA;var AA=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},os=new WeakMap,Yc=new WeakMap,Kc={},Jh=0,v4=function(t){return t&&(t.host||v4(t.parentNode))},TA=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=v4(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},kA=function(t,e,n,r){var i=TA(e,Array.isArray(t)?t:[t]);Kc[n]||(Kc[n]=new WeakMap);var o=Kc[n],s=[],l=new Set,c=new Set(i),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};i.forEach(d);var u=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(l.has(h))u(h);else try{var p=h.getAttribute(r),v=p!==null&&p!=="false",y=(os.get(h)||0)+1,w=(o.get(h)||0)+1;os.set(h,y),o.set(h,w),s.push(h),y===1&&v&&Yc.set(h,!0),w===1&&h.setAttribute(n,"true"),v||h.setAttribute(r,"true")}catch(g){console.error("aria-hidden: cannot operate on ",h,g)}})};return u(e),l.clear(),Jh++,function(){s.forEach(function(f){var h=os.get(f)-1,p=o.get(f)-1;os.set(f,h),o.set(f,p),h||(Yc.has(f)||f.removeAttribute(r),Yc.delete(f)),p||f.removeAttribute(n)}),Jh--,Jh||(os=new WeakMap,os=new WeakMap,Yc=new WeakMap,Kc={})}},y4=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=AA(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),kA(r,i,n,"aria-hidden")):function(){return null}},Ir=function(){return Ir=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ir.apply(this,arguments)};function Zl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function RA(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var Su="right-scroll-bar-position",Iu="width-before-scroll-bar",NA="with-scroll-bars-hidden",PA="--removed-body-scroll-bar-size";function Zh(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function LA(t,e){var n=M.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var MA=typeof window<"u"?M.useLayoutEffect:M.useEffect,yy=new WeakMap;function OA(t,e){var n=LA(null,function(r){return t.forEach(function(i){return Zh(i,r)})});return MA(function(){var r=yy.get(n);if(r){var i=new Set(r),o=new Set(t),s=n.current;i.forEach(function(l){o.has(l)||Zh(l,null)}),o.forEach(function(l){i.has(l)||Zh(l,s)})}yy.set(n,t)},[t]),n}function DA(t){return t}function VA(t,e){e===void 0&&(e=DA);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var s=e(o,r);return n.push(s),function(){n=n.filter(function(l){return l!==s})}},assignSyncMedium:function(o){for(r=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(l){return o(l)},filter:function(){return n}}},assignMedium:function(o){r=!0;var s=[];if(n.length){var l=n;n=[],l.forEach(o),s=n}var c=function(){var u=s;s=[],u.forEach(o)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(u){s.push(u),d()},filter:function(u){return s=s.filter(u),n}}}};return i}function UA(t){t===void 0&&(t={});var e=VA(null);return e.options=Ir({async:!0,ssr:!1},t),e}var _4=function(t){var e=t.sideCar,n=Zl(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return M.createElement(r,Ir({},n))};_4.isSideCarExport=!0;function FA(t,e){return t.useMedium(e),_4}var b4=UA(),ep=function(){},vf=M.forwardRef(function(t,e){var n=M.useRef(null),r=M.useState({onScrollCapture:ep,onWheelCapture:ep,onTouchMoveCapture:ep}),i=r[0],o=r[1],s=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,u=t.enabled,f=t.shards,h=t.sideCar,p=t.noIsolation,v=t.inert,y=t.allowPinchZoom,w=t.as,g=w===void 0?"div":w,b=t.gapMode,_=Zl(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=h,A=OA([n,e]),k=Ir(Ir({},_),i);return M.createElement(M.Fragment,null,u&&M.createElement(E,{sideCar:b4,removeScrollBar:d,shards:f,noIsolation:p,inert:v,setCallbacks:o,allowPinchZoom:!!y,lockRef:n,gapMode:b}),s?M.cloneElement(M.Children.only(l),Ir(Ir({},k),{ref:A})):M.createElement(g,Ir({},k,{className:c,ref:A}),l))});vf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};vf.classNames={fullWidth:Iu,zeroRight:Su};var BA=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function jA(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=BA();return e&&t.setAttribute("nonce",e),t}function $A(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function zA(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var HA=function(){var t=0,e=null;return{add:function(n){t==0&&(e=jA())&&($A(e,n),zA(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},qA=function(){var t=HA();return function(e,n){M.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},w4=function(){var t=qA(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},WA={left:0,top:0,right:0,gap:0},tp=function(t){return parseInt(t||"",10)||0},GA=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[tp(n),tp(r),tp(i)]},YA=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return WA;var e=GA(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},KA=w4(),Os="data-scroll-locked",XA=function(t,e,n,r){var i=t.left,o=t.top,s=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(NA,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Os,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Su,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Iu,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Su," .").concat(Su,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Iu," .").concat(Iu,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Os,`] {
    `).concat(PA,": ").concat(l,`px;
  }
`)},_y=function(){var t=parseInt(document.body.getAttribute(Os)||"0",10);return isFinite(t)?t:0},QA=function(){M.useEffect(function(){return document.body.setAttribute(Os,(_y()+1).toString()),function(){var t=_y()-1;t<=0?document.body.removeAttribute(Os):document.body.setAttribute(Os,t.toString())}},[])},JA=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;QA();var o=M.useMemo(function(){return YA(i)},[i]);return M.createElement(KA,{styles:XA(o,!e,i,n?"":"!important")})},T1=!1;if(typeof window<"u")try{var Xc=Object.defineProperty({},"passive",{get:function(){return T1=!0,!0}});window.addEventListener("test",Xc,Xc),window.removeEventListener("test",Xc,Xc)}catch{T1=!1}var ss=T1?{passive:!1}:!1,ZA=function(t){return t.tagName==="TEXTAREA"},x4=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!ZA(t)&&n[e]==="visible")},eT=function(t){return x4(t,"overflowY")},tT=function(t){return x4(t,"overflowX")},by=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=E4(t,r);if(i){var o=S4(t,r),s=o[1],l=o[2];if(s>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},nT=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},rT=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},E4=function(t,e){return t==="v"?eT(e):tT(e)},S4=function(t,e){return t==="v"?nT(e):rT(e)},iT=function(t,e){return t==="h"&&e==="rtl"?-1:1},oT=function(t,e,n,r,i){var o=iT(t,window.getComputedStyle(e).direction),s=o*r,l=n.target,c=e.contains(l),d=!1,u=s>0,f=0,h=0;do{var p=S4(t,l),v=p[0],y=p[1],w=p[2],g=y-w-o*v;(v||g)&&E4(t,l)&&(f+=g,h+=v),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(u&&(Math.abs(f)<1||!i)||!u&&(Math.abs(h)<1||!i))&&(d=!0),d},Qc=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},wy=function(t){return[t.deltaX,t.deltaY]},xy=function(t){return t&&"current"in t?t.current:t},sT=function(t,e){return t[0]===e[0]&&t[1]===e[1]},aT=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},lT=0,as=[];function cT(t){var e=M.useRef([]),n=M.useRef([0,0]),r=M.useRef(),i=M.useState(lT++)[0],o=M.useState(w4)[0],s=M.useRef(t);M.useEffect(function(){s.current=t},[t]),M.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var y=RA([t.lockRef.current],(t.shards||[]).map(xy),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var l=M.useCallback(function(y,w){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!s.current.allowPinchZoom;var g=Qc(y),b=n.current,_="deltaX"in y?y.deltaX:b[0]-g[0],E="deltaY"in y?y.deltaY:b[1]-g[1],A,k=y.target,I=Math.abs(_)>Math.abs(E)?"h":"v";if("touches"in y&&I==="h"&&k.type==="range")return!1;var x=by(I,k);if(!x)return!0;if(x?A=I:(A=I==="v"?"h":"v",x=by(I,k)),!x)return!1;if(!r.current&&"changedTouches"in y&&(_||E)&&(r.current=A),!A)return!0;var S=r.current||A;return oT(S,w,y,S==="h"?_:E,!0)},[]),c=M.useCallback(function(y){var w=y;if(!(!as.length||as[as.length-1]!==o)){var g="deltaY"in w?wy(w):Qc(w),b=e.current.filter(function(A){return A.name===w.type&&(A.target===w.target||w.target===A.shadowParent)&&sT(A.delta,g)})[0];if(b&&b.should){w.cancelable&&w.preventDefault();return}if(!b){var _=(s.current.shards||[]).map(xy).filter(Boolean).filter(function(A){return A.contains(w.target)}),E=_.length>0?l(w,_[0]):!s.current.noIsolation;E&&w.cancelable&&w.preventDefault()}}},[]),d=M.useCallback(function(y,w,g,b){var _={name:y,delta:w,target:g,should:b,shadowParent:uT(g)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(E){return E!==_})},1)},[]),u=M.useCallback(function(y){n.current=Qc(y),r.current=void 0},[]),f=M.useCallback(function(y){d(y.type,wy(y),y.target,l(y,t.lockRef.current))},[]),h=M.useCallback(function(y){d(y.type,Qc(y),y.target,l(y,t.lockRef.current))},[]);M.useEffect(function(){return as.push(o),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,ss),document.addEventListener("touchmove",c,ss),document.addEventListener("touchstart",u,ss),function(){as=as.filter(function(y){return y!==o}),document.removeEventListener("wheel",c,ss),document.removeEventListener("touchmove",c,ss),document.removeEventListener("touchstart",u,ss)}},[]);var p=t.removeScrollBar,v=t.inert;return M.createElement(M.Fragment,null,v?M.createElement(o,{styles:aT(i)}):null,p?M.createElement(JA,{gapMode:t.gapMode}):null)}function uT(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const dT=FA(b4,cT);var Cm=M.forwardRef(function(t,e){return M.createElement(vf,Ir({},t,{ref:e,sideCar:dT}))});Cm.classNames=vf.classNames;var fT=[" ","Enter","ArrowUp","ArrowDown"],hT=[" ","Enter"],ec="Select",[yf,_f,pT]=qb(ec),[pa,zj]=uf(ec,[pT,l4]),bf=l4(),[mT,ao]=pa(ec),[gT,vT]=pa(ec),I4=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:o,value:s,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:f,disabled:h,required:p,form:v}=t,y=bf(e),[w,g]=M.useState(null),[b,_]=M.useState(null),[E,A]=M.useState(!1),k=GI(d),[I=!1,x]=vd({prop:r,defaultProp:i,onChange:o}),[S,R]=vd({prop:s,defaultProp:l,onChange:c}),T=M.useRef(null),N=w?v||!!w.closest("form"):!0,[P,V]=M.useState(new Set),$=Array.from(P).map(D=>D.props.value).join(";");return F.jsx(_A,{...y,children:F.jsxs(mT,{required:p,scope:e,trigger:w,onTriggerChange:g,valueNode:b,onValueNodeChange:_,valueNodeHasChildren:E,onValueNodeHasChildrenChange:A,contentId:Ls(),value:S,onValueChange:R,open:I,onOpenChange:x,dir:k,triggerPointerDownPosRef:T,disabled:h,children:[F.jsx(yf.Provider,{scope:e,children:F.jsx(gT,{scope:t.__scopeSelect,onNativeOptionAdd:M.useCallback(D=>{V(O=>new Set(O).add(D))},[]),onNativeOptionRemove:M.useCallback(D=>{V(O=>{const B=new Set(O);return B.delete(D),B})},[]),children:n})}),N?F.jsxs(X4,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:f,value:S,onChange:D=>R(D.target.value),disabled:h,form:v,children:[S===void 0?F.jsx("option",{value:""}):null,Array.from(P)]},$):null]})})};I4.displayName=ec;var C4="SelectTrigger",A4=M.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,o=bf(n),s=ao(C4,n),l=s.disabled||r,c=ht(e,s.onTriggerChange),d=_f(n),u=M.useRef("touch"),[f,h,p]=Q4(y=>{const w=d().filter(_=>!_.disabled),g=w.find(_=>_.value===s.value),b=J4(w,y,g);b!==void 0&&s.onValueChange(b.value)}),v=y=>{l||(s.onOpenChange(!0),p()),y&&(s.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return F.jsx(bA,{asChild:!0,...o,children:F.jsx(Oe.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":K4(s.value)?"":void 0,...i,ref:c,onClick:Me(i.onClick,y=>{y.currentTarget.focus(),u.current!=="mouse"&&v(y)}),onPointerDown:Me(i.onPointerDown,y=>{u.current=y.pointerType;const w=y.target;w.hasPointerCapture(y.pointerId)&&w.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(v(y),y.preventDefault())}),onKeyDown:Me(i.onKeyDown,y=>{const w=f.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&h(y.key),!(w&&y.key===" ")&&fT.includes(y.key)&&(v(),y.preventDefault())})})})});A4.displayName=C4;var T4="SelectValue",k4=M.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:o,placeholder:s="",...l}=t,c=ao(T4,n),{onValueNodeHasChildrenChange:d}=c,u=o!==void 0,f=ht(e,c.onValueNodeChange);return Ut(()=>{d(u)},[d,u]),F.jsx(Oe.span,{...l,ref:f,style:{pointerEvents:"none"},children:K4(c.value)?F.jsx(F.Fragment,{children:s}):o})});k4.displayName=T4;var yT="SelectIcon",R4=M.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return F.jsx(Oe.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});R4.displayName=yT;var _T="SelectPortal",N4=t=>F.jsx(mf,{asChild:!0,...t});N4.displayName=_T;var Uo="SelectContent",P4=M.forwardRef((t,e)=>{const n=ao(Uo,t.__scopeSelect),[r,i]=M.useState();if(Ut(()=>{i(new DocumentFragment)},[]),!n.open){const o=r;return o?oo.createPortal(F.jsx(L4,{scope:t.__scopeSelect,children:F.jsx(yf.Slot,{scope:t.__scopeSelect,children:F.jsx("div",{children:t.children})})}),o):null}return F.jsx(M4,{...t,ref:e})});P4.displayName=Uo;var ir=10,[L4,lo]=pa(Uo),bT="SelectContentImpl",M4=M.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:s,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:v,hideWhenDetached:y,avoidCollisions:w,...g}=t,b=ao(Uo,n),[_,E]=M.useState(null),[A,k]=M.useState(null),I=ht(e,J=>E(J)),[x,S]=M.useState(null),[R,T]=M.useState(null),N=_f(n),[P,V]=M.useState(!1),$=M.useRef(!1);M.useEffect(()=>{if(_)return y4(_)},[_]),Kb();const D=M.useCallback(J=>{const[ne,...oe]=N().map(ie=>ie.ref.current),[se]=oe.slice(-1),ae=document.activeElement;for(const ie of J)if(ie===ae||(ie==null||ie.scrollIntoView({block:"nearest"}),ie===ne&&A&&(A.scrollTop=0),ie===se&&A&&(A.scrollTop=A.scrollHeight),ie==null||ie.focus(),document.activeElement!==ae))return},[N,A]),O=M.useCallback(()=>D([x,_]),[D,x,_]);M.useEffect(()=>{P&&O()},[P,O]);const{onOpenChange:B,triggerPointerDownPosRef:j}=b;M.useEffect(()=>{if(_){let J={x:0,y:0};const ne=se=>{var ae,ie;J={x:Math.abs(Math.round(se.pageX)-(((ae=j.current)==null?void 0:ae.x)??0)),y:Math.abs(Math.round(se.pageY)-(((ie=j.current)==null?void 0:ie.y)??0))}},oe=se=>{J.x<=10&&J.y<=10?se.preventDefault():_.contains(se.target)||B(!1),document.removeEventListener("pointermove",ne),j.current=null};return j.current!==null&&(document.addEventListener("pointermove",ne),document.addEventListener("pointerup",oe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ne),document.removeEventListener("pointerup",oe,{capture:!0})}}},[_,B,j]),M.useEffect(()=>{const J=()=>B(!1);return window.addEventListener("blur",J),window.addEventListener("resize",J),()=>{window.removeEventListener("blur",J),window.removeEventListener("resize",J)}},[B]);const[z,W]=Q4(J=>{const ne=N().filter(ae=>!ae.disabled),oe=ne.find(ae=>ae.ref.current===document.activeElement),se=J4(ne,J,oe);se&&setTimeout(()=>se.ref.current.focus())}),G=M.useCallback((J,ne,oe)=>{const se=!$.current&&!oe;(b.value!==void 0&&b.value===ne||se)&&(S(J),se&&($.current=!0))},[b.value]),H=M.useCallback(()=>_==null?void 0:_.focus(),[_]),Y=M.useCallback((J,ne,oe)=>{const se=!$.current&&!oe;(b.value!==void 0&&b.value===ne||se)&&T(J)},[b.value]),q=r==="popper"?k1:O4,Q=q===k1?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:v,hideWhenDetached:y,avoidCollisions:w}:{};return F.jsx(L4,{scope:n,content:_,viewport:A,onViewportChange:k,itemRefCallback:G,selectedItem:x,onItemLeave:H,itemTextRefCallback:Y,focusSelectedItem:O,selectedItemText:R,position:r,isPositioned:P,searchRef:z,children:F.jsx(Cm,{as:Do,allowPinchZoom:!0,children:F.jsx(vm,{asChild:!0,trapped:b.open,onMountAutoFocus:J=>{J.preventDefault()},onUnmountAutoFocus:Me(i,J=>{var ne;(ne=b.trigger)==null||ne.focus({preventScroll:!0}),J.preventDefault()}),children:F.jsx(df,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:J=>J.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:F.jsx(q,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:J=>J.preventDefault(),...g,...Q,onPlaced:()=>V(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:Me(g.onKeyDown,J=>{const ne=J.ctrlKey||J.altKey||J.metaKey;if(J.key==="Tab"&&J.preventDefault(),!ne&&J.key.length===1&&W(J.key),["ArrowUp","ArrowDown","Home","End"].includes(J.key)){let se=N().filter(ae=>!ae.disabled).map(ae=>ae.ref.current);if(["ArrowUp","End"].includes(J.key)&&(se=se.slice().reverse()),["ArrowUp","ArrowDown"].includes(J.key)){const ae=J.target,ie=se.indexOf(ae);se=se.slice(ie+1)}setTimeout(()=>D(se)),J.preventDefault()}})})})})})})});M4.displayName=bT;var wT="SelectItemAlignedPosition",O4=M.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,o=ao(Uo,n),s=lo(Uo,n),[l,c]=M.useState(null),[d,u]=M.useState(null),f=ht(e,I=>u(I)),h=_f(n),p=M.useRef(!1),v=M.useRef(!0),{viewport:y,selectedItem:w,selectedItemText:g,focusSelectedItem:b}=s,_=M.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&d&&y&&w&&g){const I=o.trigger.getBoundingClientRect(),x=d.getBoundingClientRect(),S=o.valueNode.getBoundingClientRect(),R=g.getBoundingClientRect();if(o.dir!=="rtl"){const ae=R.left-x.left,ie=S.left-ae,we=I.left-ie,Te=I.width+we,ye=Math.max(Te,x.width),Fe=window.innerWidth-ir,Ce=ny(ie,[ir,Math.max(ir,Fe-ye)]);l.style.minWidth=Te+"px",l.style.left=Ce+"px"}else{const ae=x.right-R.right,ie=window.innerWidth-S.right-ae,we=window.innerWidth-I.right-ie,Te=I.width+we,ye=Math.max(Te,x.width),Fe=window.innerWidth-ir,Ce=ny(ie,[ir,Math.max(ir,Fe-ye)]);l.style.minWidth=Te+"px",l.style.right=Ce+"px"}const T=h(),N=window.innerHeight-ir*2,P=y.scrollHeight,V=window.getComputedStyle(d),$=parseInt(V.borderTopWidth,10),D=parseInt(V.paddingTop,10),O=parseInt(V.borderBottomWidth,10),B=parseInt(V.paddingBottom,10),j=$+D+P+B+O,z=Math.min(w.offsetHeight*5,j),W=window.getComputedStyle(y),G=parseInt(W.paddingTop,10),H=parseInt(W.paddingBottom,10),Y=I.top+I.height/2-ir,q=N-Y,Q=w.offsetHeight/2,J=w.offsetTop+Q,ne=$+D+J,oe=j-ne;if(ne<=Y){const ae=T.length>0&&w===T[T.length-1].ref.current;l.style.bottom="0px";const ie=d.clientHeight-y.offsetTop-y.offsetHeight,we=Math.max(q,Q+(ae?H:0)+ie+O),Te=ne+we;l.style.height=Te+"px"}else{const ae=T.length>0&&w===T[0].ref.current;l.style.top="0px";const we=Math.max(Y,$+y.offsetTop+(ae?G:0)+Q)+oe;l.style.height=we+"px",y.scrollTop=ne-Y+y.offsetTop}l.style.margin=`${ir}px 0`,l.style.minHeight=z+"px",l.style.maxHeight=N+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[h,o.trigger,o.valueNode,l,d,y,w,g,o.dir,r]);Ut(()=>_(),[_]);const[E,A]=M.useState();Ut(()=>{d&&A(window.getComputedStyle(d).zIndex)},[d]);const k=M.useCallback(I=>{I&&v.current===!0&&(_(),b==null||b(),v.current=!1)},[_,b]);return F.jsx(ET,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:k,children:F.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:E},children:F.jsx(Oe.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});O4.displayName=wT;var xT="SelectPopperPosition",k1=M.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=ir,...o}=t,s=bf(n);return F.jsx(wA,{...s,...o,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});k1.displayName=xT;var[ET,Am]=pa(Uo,{}),R1="SelectViewport",D4=M.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,o=lo(R1,n),s=Am(R1,n),l=ht(e,o.onViewportChange),c=M.useRef(0);return F.jsxs(F.Fragment,{children:[F.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),F.jsx(yf.Slot,{scope:n,children:F.jsx(Oe.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Me(i.onScroll,d=>{const u=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=s;if(h!=null&&h.current&&f){const p=Math.abs(c.current-u.scrollTop);if(p>0){const v=window.innerHeight-ir*2,y=parseFloat(f.style.minHeight),w=parseFloat(f.style.height),g=Math.max(y,w);if(g<v){const b=g+p,_=Math.min(v,b),E=b-_;f.style.height=_+"px",f.style.bottom==="0px"&&(u.scrollTop=E>0?E:0,f.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});D4.displayName=R1;var V4="SelectGroup",[ST,IT]=pa(V4),CT=M.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Ls();return F.jsx(ST,{scope:n,id:i,children:F.jsx(Oe.div,{role:"group","aria-labelledby":i,...r,ref:e})})});CT.displayName=V4;var U4="SelectLabel",F4=M.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=IT(U4,n);return F.jsx(Oe.div,{id:i.id,...r,ref:e})});F4.displayName=U4;var yd="SelectItem",[AT,B4]=pa(yd),j4=M.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:o,...s}=t,l=ao(yd,n),c=lo(yd,n),d=l.value===r,[u,f]=M.useState(o??""),[h,p]=M.useState(!1),v=ht(e,b=>{var _;return(_=c.itemRefCallback)==null?void 0:_.call(c,b,r,i)}),y=Ls(),w=M.useRef("touch"),g=()=>{i||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return F.jsx(AT,{scope:n,value:r,disabled:i,textId:y,isSelected:d,onItemTextChange:M.useCallback(b=>{f(_=>_||((b==null?void 0:b.textContent)??"").trim())},[]),children:F.jsx(yf.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:F.jsx(Oe.div,{role:"option","aria-labelledby":y,"data-highlighted":h?"":void 0,"aria-selected":d&&h,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...s,ref:v,onFocus:Me(s.onFocus,()=>p(!0)),onBlur:Me(s.onBlur,()=>p(!1)),onClick:Me(s.onClick,()=>{w.current!=="mouse"&&g()}),onPointerUp:Me(s.onPointerUp,()=>{w.current==="mouse"&&g()}),onPointerDown:Me(s.onPointerDown,b=>{w.current=b.pointerType}),onPointerMove:Me(s.onPointerMove,b=>{var _;w.current=b.pointerType,i?(_=c.onItemLeave)==null||_.call(c):w.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Me(s.onPointerLeave,b=>{var _;b.currentTarget===document.activeElement&&((_=c.onItemLeave)==null||_.call(c))}),onKeyDown:Me(s.onKeyDown,b=>{var E;((E=c.searchRef)==null?void 0:E.current)!==""&&b.key===" "||(hT.includes(b.key)&&g(),b.key===" "&&b.preventDefault())})})})})});j4.displayName=yd;var Ka="SelectItemText",$4=M.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...o}=t,s=ao(Ka,n),l=lo(Ka,n),c=B4(Ka,n),d=vT(Ka,n),[u,f]=M.useState(null),h=ht(e,g=>f(g),c.onItemTextChange,g=>{var b;return(b=l.itemTextRefCallback)==null?void 0:b.call(l,g,c.value,c.disabled)}),p=u==null?void 0:u.textContent,v=M.useMemo(()=>F.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:y,onNativeOptionRemove:w}=d;return Ut(()=>(y(v),()=>w(v)),[y,w,v]),F.jsxs(F.Fragment,{children:[F.jsx(Oe.span,{id:c.textId,...o,ref:h}),c.isSelected&&s.valueNode&&!s.valueNodeHasChildren?oo.createPortal(o.children,s.valueNode):null]})});$4.displayName=Ka;var z4="SelectItemIndicator",H4=M.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return B4(z4,n).isSelected?F.jsx(Oe.span,{"aria-hidden":!0,...r,ref:e}):null});H4.displayName=z4;var N1="SelectScrollUpButton",q4=M.forwardRef((t,e)=>{const n=lo(N1,t.__scopeSelect),r=Am(N1,t.__scopeSelect),[i,o]=M.useState(!1),s=ht(e,r.onScrollButtonChange);return Ut(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;o(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?F.jsx(G4,{...t,ref:s,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});q4.displayName=N1;var P1="SelectScrollDownButton",W4=M.forwardRef((t,e)=>{const n=lo(P1,t.__scopeSelect),r=Am(P1,t.__scopeSelect),[i,o]=M.useState(!1),s=ht(e,r.onScrollButtonChange);return Ut(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;o(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?F.jsx(G4,{...t,ref:s,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});W4.displayName=P1;var G4=M.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,o=lo("SelectScrollButton",n),s=M.useRef(null),l=_f(n),c=M.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return M.useEffect(()=>()=>c(),[c]),Ut(()=>{var u;const d=l().find(f=>f.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),F.jsx(Oe.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Me(i.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:Me(i.onPointerMove,()=>{var d;(d=o.onItemLeave)==null||d.call(o),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:Me(i.onPointerLeave,()=>{c()})})}),TT="SelectSeparator",Y4=M.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return F.jsx(Oe.div,{"aria-hidden":!0,...r,ref:e})});Y4.displayName=TT;var L1="SelectArrow",kT=M.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=bf(n),o=ao(L1,n),s=lo(L1,n);return o.open&&s.position==="popper"?F.jsx(xA,{...i,...r,ref:e}):null});kT.displayName=L1;function K4(t){return t===""||t===void 0}var X4=M.forwardRef((t,e)=>{const{value:n,...r}=t,i=M.useRef(null),o=ht(e,i),s=IA(n);return M.useEffect(()=>{const l=i.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(s!==n&&u){const f=new Event("change",{bubbles:!0});u.call(l,n),l.dispatchEvent(f)}},[s,n]),F.jsx(gf,{asChild:!0,children:F.jsx("select",{...r,ref:o,defaultValue:n})})});X4.displayName="BubbleSelect";function Q4(t){const e=Cn(t),n=M.useRef(""),r=M.useRef(0),i=M.useCallback(s=>{const l=n.current+s;e(l),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),o=M.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return M.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,o]}function J4(t,e,n){const i=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let s=RT(t,Math.max(o,0));i.length===1&&(s=s.filter(d=>d!==n));const c=s.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function RT(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var NT=I4,Z4=A4,PT=k4,LT=R4,MT=N4,ew=P4,OT=D4,tw=F4,nw=j4,DT=$4,VT=H4,rw=q4,iw=W4,ow=Y4;const Ds=NT,Vs=PT,Co=M.forwardRef(({className:t,children:e,...n},r)=>F.jsxs(Z4,{ref:r,className:tt("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,F.jsx(LT,{asChild:!0,children:F.jsx(TI,{className:"h-4 w-4 opacity-50"})})]}));Co.displayName=Z4.displayName;const sw=M.forwardRef(({className:t,...e},n)=>F.jsx(rw,{ref:n,className:tt("flex cursor-default items-center justify-center py-1",t),...e,children:F.jsx(MI,{})}));sw.displayName=rw.displayName;const aw=M.forwardRef(({className:t,...e},n)=>F.jsx(iw,{ref:n,className:tt("flex cursor-default items-center justify-center py-1",t),...e,children:F.jsx(PI,{})}));aw.displayName=iw.displayName;const Ao=M.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>F.jsx(MT,{children:F.jsxs(ew,{ref:i,className:tt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[F.jsx(sw,{}),F.jsx(OT,{className:tt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),F.jsx(aw,{})]})}));Ao.displayName=ew.displayName;const UT=M.forwardRef(({className:t,...e},n)=>F.jsx(tw,{ref:n,className:tt("px-2 py-1.5 text-sm font-semibold",t),...e}));UT.displayName=tw.displayName;const br=M.forwardRef(({className:t,children:e,...n},r)=>F.jsxs(nw,{ref:r,className:tt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[F.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:F.jsx(VT,{children:F.jsx(RI,{className:"h-4 w-4"})})}),F.jsx(DT,{children:e})]}));br.displayName=nw.displayName;const FT=M.forwardRef(({className:t,...e},n)=>F.jsx(ow,{ref:n,className:tt("-mx-1 my-1 h-px bg-muted",t),...e}));FT.displayName=ow.displayName;var Ey={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},BT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],l=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},cw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,l=s?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,u=o>>2,f=(o&3)<<4|l>>4;let h=(l&15)<<2|d>>6,p=d&63;c||(p=64,s||(h=64)),r.push(n[u],n[f],n[h],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(lw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):BT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||l==null||d==null||f==null)throw new jT;const h=o<<2|l>>4;if(r.push(h),d!==64){const p=l<<4&240|d>>2;if(r.push(p),f!==64){const v=d<<6&192|f;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class jT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $T=function(t){const e=lw(t);return cw.encodeByteArray(e,!0)},_d=function(t){return $T(t).replace(/\./g,"")},uw=function(t){try{return cw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=()=>zT().__FIREBASE_DEFAULTS__,qT=()=>{if(typeof process>"u"||typeof Ey>"u")return;const t=Ey.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},WT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&uw(t[1]);return e&&JSON.parse(e)},wf=()=>{try{return HT()||qT()||WT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},dw=t=>{var e,n;return(n=(e=wf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},fw=t=>{const e=dw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},hw=()=>{var t;return(t=wf())===null||t===void 0?void 0:t.config},pw=t=>{var e;return(e=wf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[_d(JSON.stringify(n)),_d(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function KT(){var t;const e=(t=wf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function JT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZT(){const t=cn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ek(){return!KT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tk(){try{return typeof indexedDB=="object"}catch{return!1}}function nk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk="FirebaseError";class Ur extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=rk,Object.setPrototypeOf(this,Ur.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tc.prototype.create)}}class tc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?ik(o,r):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new Ur(i,l,r)}}function ik(t,e){return t.replace(ok,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ok=/\{\$([^}]+)}/g;function sk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(Sy(o)&&Sy(s)){if(!bd(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Sy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ak(t,e){const n=new lk(t,e);return n.subscribe.bind(n)}class lk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ck(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=np),i.error===void 0&&(i.error=np),i.complete===void 0&&(i.complete=np);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ck(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function np(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(t){return t&&t._delegate?t._delegate:t}class Ji{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uk=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new GT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fk(e))try{this.getOrInitializeService({instanceIdentifier:vo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=vo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vo){return this.instances.has(e)}getOptions(e=vo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vo){return this.component?this.component.multipleInstances?e:vo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function dk(t){return t===vo?void 0:t}function fk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new uk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Le||(Le={}));const pk={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},mk=Le.INFO,gk={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},vk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=gk[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tm{constructor(e){this.name=e,this._logLevel=mk,this._logHandler=vk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const yk=(t,e)=>e.some(n=>t instanceof n);let Iy,Cy;function _k(){return Iy||(Iy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bk(){return Cy||(Cy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gw=new WeakMap,M1=new WeakMap,vw=new WeakMap,rp=new WeakMap,km=new WeakMap;function wk(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(zi(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&gw.set(n,t)}).catch(()=>{}),km.set(e,t),e}function xk(t){if(M1.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});M1.set(t,e)}let O1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return M1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||vw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ek(t){O1=t(O1)}function Sk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ip(this),e,...n);return vw.set(r,e.sort?e.sort():[e]),zi(r)}:bk().includes(t)?function(...e){return t.apply(ip(this),e),zi(gw.get(this))}:function(...e){return zi(t.apply(ip(this),e))}}function Ik(t){return typeof t=="function"?Sk(t):(t instanceof IDBTransaction&&xk(t),yk(t,_k())?new Proxy(t,O1):t)}function zi(t){if(t instanceof IDBRequest)return wk(t);if(rp.has(t))return rp.get(t);const e=Ik(t);return e!==t&&(rp.set(t,e),km.set(e,t)),e}const ip=t=>km.get(t);function Ck(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),l=zi(s);return r&&s.addEventListener("upgradeneeded",c=>{r(zi(s.result),c.oldVersion,c.newVersion,zi(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const Ak=["get","getKey","getAll","getAllKeys","count"],Tk=["put","add","delete","clear"],op=new Map;function Ay(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(op.get(e))return op.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Tk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Ak.includes(n)))return;const o=async function(s,...l){const c=this.transaction(s,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&c.done]))[0]};return op.set(e,o),o}Ek(t=>({...t,get:(e,n,r)=>Ay(e,n)||t.get(e,n,r),has:(e,n)=>!!Ay(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Rk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Rk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const D1="@firebase/app",Ty="0.10.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=new Tm("@firebase/app"),Nk="@firebase/app-compat",Pk="@firebase/analytics-compat",Lk="@firebase/analytics",Mk="@firebase/app-check-compat",Ok="@firebase/app-check",Dk="@firebase/auth",Vk="@firebase/auth-compat",Uk="@firebase/database",Fk="@firebase/data-connect",Bk="@firebase/database-compat",jk="@firebase/functions",$k="@firebase/functions-compat",zk="@firebase/installations",Hk="@firebase/installations-compat",qk="@firebase/messaging",Wk="@firebase/messaging-compat",Gk="@firebase/performance",Yk="@firebase/performance-compat",Kk="@firebase/remote-config",Xk="@firebase/remote-config-compat",Qk="@firebase/storage",Jk="@firebase/storage-compat",Zk="@firebase/firestore",eR="@firebase/vertexai-preview",tR="@firebase/firestore-compat",nR="firebase",rR="10.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="[DEFAULT]",iR={[D1]:"fire-core",[Nk]:"fire-core-compat",[Lk]:"fire-analytics",[Pk]:"fire-analytics-compat",[Ok]:"fire-app-check",[Mk]:"fire-app-check-compat",[Dk]:"fire-auth",[Vk]:"fire-auth-compat",[Uk]:"fire-rtdb",[Fk]:"fire-data-connect",[Bk]:"fire-rtdb-compat",[jk]:"fire-fn",[$k]:"fire-fn-compat",[zk]:"fire-iid",[Hk]:"fire-iid-compat",[qk]:"fire-fcm",[Wk]:"fire-fcm-compat",[Gk]:"fire-perf",[Yk]:"fire-perf-compat",[Kk]:"fire-rc",[Xk]:"fire-rc-compat",[Qk]:"fire-gcs",[Jk]:"fire-gcs-compat",[Zk]:"fire-fst",[tR]:"fire-fst-compat",[eR]:"fire-vertex","fire-js":"fire-js",[nR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=new Map,oR=new Map,U1=new Map;function ky(t,e){try{t.container.addComponent(e)}catch(n){ai.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fo(t){const e=t.name;if(U1.has(e))return ai.debug(`There were multiple attempts to register component ${e}.`),!1;U1.set(e,t);for(const n of wd.values())ky(n,t);for(const n of oR.values())ky(n,t);return!0}function xf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Yr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hi=new tc("app","Firebase",sR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ji("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=rR;function yw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:V1,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Hi.create("bad-app-name",{appName:String(i)});if(n||(n=hw()),!n)throw Hi.create("no-options");const o=wd.get(i);if(o){if(bd(n,o.options)&&bd(r,o.config))return o;throw Hi.create("duplicate-app",{appName:i})}const s=new hk(i);for(const c of U1.values())s.addComponent(c);const l=new aR(n,r,s);return wd.set(i,l),l}function Rm(t=V1){const e=wd.get(t);if(!e&&t===V1&&hw())return yw();if(!e)throw Hi.create("no-app",{appName:t});return e}function kr(t,e,n){var r;let i=(r=iR[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const l=[`Unable to register library "${i}" with version "${e}":`];o&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&l.push("and"),s&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ai.warn(l.join(" "));return}Fo(new Ji(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR="firebase-heartbeat-database",cR=1,Dl="firebase-heartbeat-store";let sp=null;function _w(){return sp||(sp=Ck(lR,cR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Dl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Hi.create("idb-open",{originalErrorMessage:t.message})})),sp}async function uR(t){try{const n=(await _w()).transaction(Dl),r=await n.objectStore(Dl).get(bw(t));return await n.done,r}catch(e){if(e instanceof Ur)ai.warn(e.message);else{const n=Hi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ai.warn(n.message)}}}async function Ry(t,e){try{const r=(await _w()).transaction(Dl,"readwrite");await r.objectStore(Dl).put(e,bw(t)),await r.done}catch(n){if(n instanceof Ur)ai.warn(n.message);else{const r=Hi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ai.warn(r.message)}}}function bw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=1024,fR=30*24*60*60*1e3;class hR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Ny();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const l=new Date(s.date).valueOf();return Date.now()-l<=fR}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ai.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ny(),{heartbeatsToSend:r,unsentEntries:i}=pR(this._heartbeatsCache.heartbeats),o=_d(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ai.warn(n),""}}}function Ny(){return new Date().toISOString().substring(0,10)}function pR(t,e=dR){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Py(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Py(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class mR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tk()?nk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await uR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ry(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ry(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Py(t){return _d(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(t){Fo(new Ji("platform-logger",e=>new kk(e),"PRIVATE")),Fo(new Ji("heartbeat",e=>new hR(e),"PRIVATE")),kr(D1,Ty,t),kr(D1,Ty,"esm2017"),kr("fire-js","")}gR("");var vR="firebase",yR="10.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kr(vR,yR,"app");function ww(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _R=ww,xw=new tc("auth","Firebase",ww());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=new Tm("@firebase/auth");function bR(t,...e){xd.logLevel<=Le.WARN&&xd.warn(`Auth (${Ko}): ${t}`,...e)}function Cu(t,...e){xd.logLevel<=Le.ERROR&&xd.error(`Auth (${Ko}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(t,...e){throw Pm(t,...e)}function ur(t,...e){return Pm(t,...e)}function Nm(t,e,n){const r=Object.assign(Object.assign({},_R()),{[e]:n});return new tc("auth","Firebase",r).create(e,{appName:t.name})}function To(t){return Nm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wR(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Or(t,"argument-error"),Nm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xw.create(t,...e)}function _e(t,e,...n){if(!t)throw Pm(e,...n)}function Kr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Cu(e),new Error(e)}function li(t,e){t||Kr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function xR(){return Ly()==="http:"||Ly()==="https:"}function Ly(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xR()||QT()||"connection"in navigator)?navigator.onLine:!0}function SR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n){this.shortDelay=e,this.longDelay=n,li(n>e,"Short delay should be less than long delay!"),this.isMobile=YT()||JT()}get(){return ER()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(t,e){li(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=new rc(3e4,6e4);function Mm(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ma(t,e,n,r,i={}){return Sw(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const l=nc(Object.assign({key:t.config.apiKey},s)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},o);return XT()||(d.referrerPolicy="no-referrer"),Ew.fetch()(Iw(t,t.config.apiHost,n,l),d)})}async function Sw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},IR),e);try{const i=new TR(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw Jc(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const l=o.ok?s.errorMessage:s.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jc(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Jc(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw Jc(t,"user-disabled",s);const u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Nm(t,u,d);Or(t,u)}}catch(i){if(i instanceof Ur)throw i;Or(t,"network-request-failed",{message:String(i)})}}async function AR(t,e,n,r,i={}){const o=await ma(t,e,n,r,i);return"mfaPendingCredential"in o&&Or(t,"multi-factor-auth-required",{_serverResponse:o}),o}function Iw(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Lm(t.config,i):`${t.config.apiScheme}://${i}`}class TR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ur(this.auth,"network-request-failed")),CR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ur(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kR(t,e){return ma(t,"POST","/v1/accounts:delete",e)}async function Cw(t,e){return ma(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RR(t,e=!1){const n=_t(t),r=await n.getIdToken(e),i=Om(r);_e(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:ul(ap(i.auth_time)),issuedAtTime:ul(ap(i.iat)),expirationTime:ul(ap(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function ap(t){return Number(t)*1e3}function Om(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Cu("JWT malformed, contained fewer than 3 sections"),null;try{const i=uw(n);return i?JSON.parse(i):(Cu("Failed to decode base64 JWT payload"),null)}catch(i){return Cu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function My(t){const e=Om(t);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ur&&NR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function NR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ul(this.lastLoginAt),this.creationTime=ul(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ed(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Vl(t,Cw(n,{idToken:r}));_e(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?Aw(o.providerUserInfo):[],l=MR(t.providerData,s),c=t.isAnonymous,d=!(t.email&&o.passwordHash)&&!(l!=null&&l.length),u=c?d:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new B1(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function LR(t){const e=_t(t);await Ed(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function MR(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Aw(t){return t.map(e=>{var{providerId:n}=e,r=Zl(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(t,e){const n=await Sw(t,{},async()=>{const r=nc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=Iw(t,i,"/v1/token",`key=${o}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Ew.fetch()(s,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function DR(t,e){return ma(t,"POST","/v2/accounts:revokeToken",Mm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):My(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const n=My(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await OR(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Us;return r&&(_e(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(_e(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(_e(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Us,this.toJSON())}_performRefresh(){return Kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(t,e){_e(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Zl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new PR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new B1(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Vl(this,this.stsTokenManager.getToken(this.auth,e));return _e(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return RR(this,e)}reload(){return LR(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ed(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yr(this.auth.app))return Promise.reject(To(this.auth));const e=await this.getIdToken();return await Vl(this,kR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,l,c,d,u;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,p=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,v=(s=n.photoURL)!==null&&s!==void 0?s:void 0,y=(l=n.tenantId)!==null&&l!==void 0?l:void 0,w=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,g=(d=n.createdAt)!==null&&d!==void 0?d:void 0,b=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:_,emailVerified:E,isAnonymous:A,providerData:k,stsTokenManager:I}=n;_e(_&&I,e,"internal-error");const x=Us.fromJSON(this.name,I);_e(typeof _=="string",e,"internal-error"),xi(f,e.name),xi(h,e.name),_e(typeof E=="boolean",e,"internal-error"),_e(typeof A=="boolean",e,"internal-error"),xi(p,e.name),xi(v,e.name),xi(y,e.name),xi(w,e.name),xi(g,e.name),xi(b,e.name);const S=new Xr({uid:_,auth:e,email:h,emailVerified:E,displayName:f,isAnonymous:A,photoURL:v,phoneNumber:p,tenantId:y,stsTokenManager:x,createdAt:g,lastLoginAt:b});return k&&Array.isArray(k)&&(S.providerData=k.map(R=>Object.assign({},R))),w&&(S._redirectEventId=w),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Us;i.updateFromServerResponse(n);const o=new Xr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ed(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];_e(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?Aw(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),l=new Us;l.updateFromIdToken(r);const c=new Xr({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new B1(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy=new Map;function Qr(t){li(t instanceof Function,"Expected a class definition");let e=Oy.get(t);return e?(li(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Oy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Tw.type="NONE";const Dy=Tw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t,e,n){return`firebase:${t}:${e}:${n}`}class Fs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Au(this.userKey,i.apiKey,o),this.fullPersistenceKey=Au("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Xr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Fs(Qr(Dy),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=i[0]||Qr(Dy);const s=Au(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const u=await d._get(s);if(u){const f=Xr._fromJSON(e,u);d!==o&&(l=f),o=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new Fs(o,e,r):(o=c[0],l&&await o._set(s,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==o)try{await d._remove(s)}catch{}})),new Fs(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Pw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Mw(e))return"Blackberry";if(Ow(e))return"Webos";if(Rw(e))return"Safari";if((e.includes("chrome/")||Nw(e))&&!e.includes("edge/"))return"Chrome";if(Lw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function kw(t=cn()){return/firefox\//i.test(t)}function Rw(t=cn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Nw(t=cn()){return/crios\//i.test(t)}function Pw(t=cn()){return/iemobile/i.test(t)}function Lw(t=cn()){return/android/i.test(t)}function Mw(t=cn()){return/blackberry/i.test(t)}function Ow(t=cn()){return/webos/i.test(t)}function Dm(t=cn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function VR(t=cn()){var e;return Dm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function UR(){return ZT()&&document.documentMode===10}function Dw(t=cn()){return Dm(t)||Lw(t)||Ow(t)||Mw(t)||/windows phone/i.test(t)||Pw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(t,e=[]){let n;switch(t){case"Browser":n=Vy(cn());break;case"Worker":n=`${Vy(cn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ko}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,l)=>{try{const c=e(o);s(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BR(t,e={}){return ma(t,"GET","/v2/passwordPolicy",Mm(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=6;class $R{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:jR,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Uy(this),this.idTokenSubscription=new Uy(this),this.beforeStateQueue=new FR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Fs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Cw(this,{idToken:e}),r=await Xr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Yr(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===l)&&(c!=null&&c.user)&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ed(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yr(this.app))return Promise.reject(To(this));const n=e?_t(e):null;return n&&_e(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yr(this.app)?Promise.reject(To(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yr(this.app)?Promise.reject(To(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await BR(this),n=new $R(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new tc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await DR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qr(e)||this._popupRedirectResolver;_e(n,this,"argument-error"),this.redirectPersistenceManager=await Fs.create(this,[Qr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(l,this,"internal-error"),l.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Vw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&bR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ef(t){return _t(t)}class Uy{constructor(e){this.auth=e,this.observer=null,this.addObserver=ak(n=>this.observer=n)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HR(t){Vm=t}function qR(t){return Vm.loadJS(t)}function WR(){return Vm.gapiScript}function GR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t,e){const n=xf(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(bd(o,e??{}))return i;Or(i,"already-initialized")}return n.initialize({options:e})}function KR(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Qr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function XR(t,e,n){const r=Ef(t);_e(r._canInitEmulator,r,"emulator-config-failed"),_e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=Uw(e),{host:s,port:l}=QR(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${o}//${s}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),JR()}function Uw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function QR(t){const e=Uw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Fy(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:Fy(s)}}}function Fy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function JR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Kr("not implemented")}_getIdTokenResponse(e){return Kr("not implemented")}_linkToIdToken(e,n){return Kr("not implemented")}_getReauthenticationResolver(e){return Kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bs(t,e){return AR(t,"POST","/v1/accounts:signInWithIdp",Mm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="http://localhost";class Bo extends Fw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Bo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Or("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=Zl(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Bo(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Bs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Bs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bs(e,n)}buildRequest(){const e={requestUri:ZR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=nc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic extends Um{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends ic{constructor(){super("facebook.com")}static credential(e){return Bo._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ti.credential(e.oauthAccessToken)}catch{return null}}}Ti.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ti.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends ic{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Bo._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return qr.credential(n,r)}catch{return null}}}qr.GOOGLE_SIGN_IN_METHOD="google.com";qr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends ic{constructor(){super("github.com")}static credential(e){return Bo._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.GITHUB_SIGN_IN_METHOD="github.com";ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends ic{constructor(){super("twitter.com")}static credential(e,n){return Bo._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ri.credential(n,r)}catch{return null}}}Ri.TWITTER_SIGN_IN_METHOD="twitter.com";Ri.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await Xr._fromIdTokenResponse(e,r,i),s=By(r);return new Qs({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=By(r);return new Qs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function By(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd extends Ur{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Sd.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Sd(e,n,r,i)}}function Bw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Sd._fromErrorAndOperation(t,o,e,r):o})}async function eN(t,e,n=!1){const r=await Vl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Qs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(t,e,n=!1){const{auth:r}=t;if(Yr(r.app))return Promise.reject(To(r));const i="reauthenticate";try{const o=await Vl(t,Bw(r,i,e,t),n);_e(o.idToken,r,"internal-error");const s=Om(o.idToken);_e(s,r,"internal-error");const{sub:l}=s;return _e(t.uid===l,r,"user-mismatch"),Qs._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Or(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(t,e,n=!1){if(Yr(t.app))return Promise.reject(To(t));const r="signIn",i=await Bw(t,r,e),o=await Qs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function rN(t,e,n,r){return _t(t).onIdTokenChanged(e,n,r)}function iN(t,e,n){return _t(t).beforeAuthStateChanged(e,n)}function oN(t,e,n,r){return _t(t).onAuthStateChanged(e,n,r)}const Id="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Id,"1"),this.storage.removeItem(Id),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=1e3,aN=10;class $w extends jw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Dw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,l,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);UR()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,aN):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},sN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}$w.type="LOCAL";const lN=$w;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw extends jw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}zw.type="SESSION";const Hw=zw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Sf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(s).map(async d=>d(n.origin,o)),c=await cN(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((l,c)=>{const d=Fm("",20);i.port1.start();const u=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){const h=f;if(h.data.eventId===d)switch(h.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(h.data.response);break;default:clearTimeout(u),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(){return window}function dN(t){Rr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(){return typeof Rr().WorkerGlobalScope<"u"&&typeof Rr().importScripts=="function"}async function fN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function pN(){return qw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="firebaseLocalStorageDb",mN=1,Cd="firebaseLocalStorage",Gw="fbase_key";class oc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function If(t,e){return t.transaction([Cd],e?"readwrite":"readonly").objectStore(Cd)}function gN(){const t=indexedDB.deleteDatabase(Ww);return new oc(t).toPromise()}function j1(){const t=indexedDB.open(Ww,mN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Cd,{keyPath:Gw})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Cd)?e(r):(r.close(),await gN(),e(await j1()))})})}async function jy(t,e,n){const r=If(t,!0).put({[Gw]:e,value:n});return new oc(r).toPromise()}async function vN(t,e){const n=If(t,!1).get(e),r=await new oc(n).toPromise();return r===void 0?null:r.value}function $y(t,e){const n=If(t,!0).delete(e);return new oc(n).toPromise()}const yN=800,_N=3;class Yw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await j1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>_N)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sf._getInstance(pN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await fN(),!this.activeServiceWorker)return;this.sender=new uN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await j1();return await jy(e,Id,"1"),await $y(e,Id),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>jy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>vN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$y(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=If(i,!1).getAll();return new oc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Yw.type="LOCAL";const bN=Yw;new rc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(t,e){return e?Qr(e):(_e(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm extends Fw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function wN(t){return nN(t.auth,new Bm(t),t.bypassAuthState)}function xN(t){const{auth:e,user:n}=t;return _e(n,e,"internal-error"),tN(n,new Bm(t),t.bypassAuthState)}async function EN(t){const{auth:e,user:n}=t;return _e(n,e,"internal-error"),eN(n,new Bm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:l}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wN;case"linkViaPopup":case"linkViaRedirect":return EN;case"reauthViaPopup":case"reauthViaRedirect":return xN;default:Or(this.auth,"internal-error")}}resolve(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=new rc(2e3,1e4);async function IN(t,e,n){if(Yr(t.app))return Promise.reject(ur(t,"operation-not-supported-in-this-environment"));const r=Ef(t);wR(t,e,Um);const i=Kw(r,n);return new wo(r,"signInViaPopup",e,i).executeNotNull()}class wo extends Xw{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,wo.currentPopupAction&&wo.currentPopupAction.cancel(),wo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){li(this.filter.length===1,"Popup operations only handle one event");const e=Fm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ur(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ur(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ur(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,SN.get())};e()}}wo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN="pendingRedirect",Tu=new Map;class AN extends Xw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Tu.get(this.auth._key());if(!e){try{const r=await TN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Tu.set(this.auth._key(),e)}return this.bypassAuthState||Tu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TN(t,e){const n=NN(e),r=RN(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function kN(t,e){Tu.set(t._key(),e)}function RN(t){return Qr(t._redirectPersistence)}function NN(t){return Au(CN,t.config.apiKey,t.name)}async function PN(t,e,n=!1){if(Yr(t.app))return Promise.reject(To(t));const r=Ef(t),i=Kw(r,e),s=await new AN(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=10*60*1e3;class MN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ON(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Qw(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ur(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LN&&this.cachedEventUids.clear(),this.cachedEventUids.has(zy(e))}saveEventToCache(e){this.cachedEventUids.add(zy(e)),this.lastProcessedEventTime=Date.now()}}function zy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Qw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ON(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(t,e={}){return ma(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UN=/^https?/;async function FN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await DN(t);for(const n of e)try{if(BN(n))return}catch{}Or(t,"unauthorized-domain")}function BN(t){const e=F1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!UN.test(n))return!1;if(VN.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=new rc(3e4,6e4);function Hy(){const t=Rr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function $N(t){return new Promise((e,n)=>{var r,i,o;function s(){Hy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hy(),n(ur(t,"network-request-failed"))},timeout:jN.get()})}if(!((i=(r=Rr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Rr().gapi)===null||o===void 0)&&o.load)s();else{const l=GR("iframefcb");return Rr()[l]=()=>{gapi.load?s():n(ur(t,"network-request-failed"))},qR(`${WR()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw ku=null,e})}let ku=null;function zN(t){return ku=ku||$N(t),ku}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=new rc(5e3,15e3),qN="__/auth/iframe",WN="emulator/auth/iframe",GN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KN(t){const e=t.config;_e(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Lm(e,WN):`https://${t.config.authDomain}/${qN}`,r={apiKey:e.apiKey,appName:t.name,v:Ko},i=YN.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${nc(r).slice(1)}`}async function XN(t){const e=await zN(t),n=Rr().gapi;return _e(n,t,"internal-error"),e.open({where:document.body,url:KN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GN,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=ur(t,"network-request-failed"),l=Rr().setTimeout(()=>{o(s)},HN.get());function c(){Rr().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JN=500,ZN=600,eP="_blank",tP="http://localhost";class qy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nP(t,e,n,r=JN,i=ZN){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},QN),{width:r.toString(),height:i.toString(),top:o,left:s}),d=cn().toLowerCase();n&&(l=Nw(d)?eP:n),kw(d)&&(e=e||tP,c.scrollbars="yes");const u=Object.entries(c).reduce((h,[p,v])=>`${h}${p}=${v},`,"");if(VR(d)&&l!=="_self")return rP(e||"",l),new qy(null);const f=window.open(e||"",l,u);_e(f,t,"popup-blocked");try{f.focus()}catch{}return new qy(f)}function rP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP="__/auth/handler",oP="emulator/auth/handler",sP=encodeURIComponent("fac");async function Wy(t,e,n,r,i,o){_e(t.config.authDomain,t,"auth-domain-config-required"),_e(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ko,eventId:i};if(e instanceof Um){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",sk(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,f]of Object.entries({}))s[u]=f}if(e instanceof ic){const u=e.getScopes().filter(f=>f!=="");u.length>0&&(s.scopes=u.join(","))}t.tenantId&&(s.tid=t.tenantId);const l=s;for(const u of Object.keys(l))l[u]===void 0&&delete l[u];const c=await t._getAppCheckToken(),d=c?`#${sP}=${encodeURIComponent(c)}`:"";return`${aP(t)}?${nc(l).slice(1)}${d}`}function aP({config:t}){return t.emulator?Lm(t,oP):`https://${t.authDomain}/${iP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="webStorageSupport";class lP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hw,this._completeRedirectFn=PN,this._overrideRedirectResult=kN}async _openPopup(e,n,r,i){var o;li((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await Wy(e,n,r,F1(),i);return nP(e,s,Fm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await Wy(e,n,r,F1(),i);return dN(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(li(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await XN(e),r=new MN(e);return n.register("authEvent",i=>(_e(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(lp,{type:lp},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[lp];s!==void 0&&n(!!s),Or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=FN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Dw()||Rw()||Dm()}}const cP=lP;var Gy="@firebase/auth",Yy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fP(t){Fo(new Ji("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:l}=r.options;_e(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vw(t)},d=new zR(r,i,o,c);return KR(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Fo(new Ji("auth-internal",e=>{const n=Ef(e.getProvider("auth").getImmediate());return(r=>new uP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),kr(Gy,Yy,dP(t)),kr(Gy,Yy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=5*60,pP=pw("authIdTokenMaxAge")||hP;let Ky=null;const mP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>pP)return;const i=n==null?void 0:n.token;Ky!==i&&(Ky=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function gP(t=Rm()){const e=xf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=YR(t,{popupRedirectResolver:cP,persistence:[bN,lN,Hw]}),r=pw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=mP(o.toString());iN(n,s,()=>s(n.currentUser)),rN(n,l=>s(l))}}const i=dw("auth");return i&&XR(n,`http://${i}`),n}function vP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}HR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=ur("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",vP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fP("Browser");var Xy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ko,Jw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,x){function S(){}S.prototype=x.prototype,I.D=x.prototype,I.prototype=new S,I.prototype.constructor=I,I.C=function(R,T,N){for(var P=Array(arguments.length-2),V=2;V<arguments.length;V++)P[V-2]=arguments[V];return x.prototype[T].apply(R,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,x,S){S||(S=0);var R=Array(16);if(typeof x=="string")for(var T=0;16>T;++T)R[T]=x.charCodeAt(S++)|x.charCodeAt(S++)<<8|x.charCodeAt(S++)<<16|x.charCodeAt(S++)<<24;else for(T=0;16>T;++T)R[T]=x[S++]|x[S++]<<8|x[S++]<<16|x[S++]<<24;x=I.g[0],S=I.g[1],T=I.g[2];var N=I.g[3],P=x+(N^S&(T^N))+R[0]+3614090360&4294967295;x=S+(P<<7&4294967295|P>>>25),P=N+(T^x&(S^T))+R[1]+3905402710&4294967295,N=x+(P<<12&4294967295|P>>>20),P=T+(S^N&(x^S))+R[2]+606105819&4294967295,T=N+(P<<17&4294967295|P>>>15),P=S+(x^T&(N^x))+R[3]+3250441966&4294967295,S=T+(P<<22&4294967295|P>>>10),P=x+(N^S&(T^N))+R[4]+4118548399&4294967295,x=S+(P<<7&4294967295|P>>>25),P=N+(T^x&(S^T))+R[5]+1200080426&4294967295,N=x+(P<<12&4294967295|P>>>20),P=T+(S^N&(x^S))+R[6]+2821735955&4294967295,T=N+(P<<17&4294967295|P>>>15),P=S+(x^T&(N^x))+R[7]+4249261313&4294967295,S=T+(P<<22&4294967295|P>>>10),P=x+(N^S&(T^N))+R[8]+1770035416&4294967295,x=S+(P<<7&4294967295|P>>>25),P=N+(T^x&(S^T))+R[9]+2336552879&4294967295,N=x+(P<<12&4294967295|P>>>20),P=T+(S^N&(x^S))+R[10]+4294925233&4294967295,T=N+(P<<17&4294967295|P>>>15),P=S+(x^T&(N^x))+R[11]+2304563134&4294967295,S=T+(P<<22&4294967295|P>>>10),P=x+(N^S&(T^N))+R[12]+1804603682&4294967295,x=S+(P<<7&4294967295|P>>>25),P=N+(T^x&(S^T))+R[13]+4254626195&4294967295,N=x+(P<<12&4294967295|P>>>20),P=T+(S^N&(x^S))+R[14]+2792965006&4294967295,T=N+(P<<17&4294967295|P>>>15),P=S+(x^T&(N^x))+R[15]+1236535329&4294967295,S=T+(P<<22&4294967295|P>>>10),P=x+(T^N&(S^T))+R[1]+4129170786&4294967295,x=S+(P<<5&4294967295|P>>>27),P=N+(S^T&(x^S))+R[6]+3225465664&4294967295,N=x+(P<<9&4294967295|P>>>23),P=T+(x^S&(N^x))+R[11]+643717713&4294967295,T=N+(P<<14&4294967295|P>>>18),P=S+(N^x&(T^N))+R[0]+3921069994&4294967295,S=T+(P<<20&4294967295|P>>>12),P=x+(T^N&(S^T))+R[5]+3593408605&4294967295,x=S+(P<<5&4294967295|P>>>27),P=N+(S^T&(x^S))+R[10]+38016083&4294967295,N=x+(P<<9&4294967295|P>>>23),P=T+(x^S&(N^x))+R[15]+3634488961&4294967295,T=N+(P<<14&4294967295|P>>>18),P=S+(N^x&(T^N))+R[4]+3889429448&4294967295,S=T+(P<<20&4294967295|P>>>12),P=x+(T^N&(S^T))+R[9]+568446438&4294967295,x=S+(P<<5&4294967295|P>>>27),P=N+(S^T&(x^S))+R[14]+3275163606&4294967295,N=x+(P<<9&4294967295|P>>>23),P=T+(x^S&(N^x))+R[3]+4107603335&4294967295,T=N+(P<<14&4294967295|P>>>18),P=S+(N^x&(T^N))+R[8]+1163531501&4294967295,S=T+(P<<20&4294967295|P>>>12),P=x+(T^N&(S^T))+R[13]+2850285829&4294967295,x=S+(P<<5&4294967295|P>>>27),P=N+(S^T&(x^S))+R[2]+4243563512&4294967295,N=x+(P<<9&4294967295|P>>>23),P=T+(x^S&(N^x))+R[7]+1735328473&4294967295,T=N+(P<<14&4294967295|P>>>18),P=S+(N^x&(T^N))+R[12]+2368359562&4294967295,S=T+(P<<20&4294967295|P>>>12),P=x+(S^T^N)+R[5]+4294588738&4294967295,x=S+(P<<4&4294967295|P>>>28),P=N+(x^S^T)+R[8]+2272392833&4294967295,N=x+(P<<11&4294967295|P>>>21),P=T+(N^x^S)+R[11]+1839030562&4294967295,T=N+(P<<16&4294967295|P>>>16),P=S+(T^N^x)+R[14]+4259657740&4294967295,S=T+(P<<23&4294967295|P>>>9),P=x+(S^T^N)+R[1]+2763975236&4294967295,x=S+(P<<4&4294967295|P>>>28),P=N+(x^S^T)+R[4]+1272893353&4294967295,N=x+(P<<11&4294967295|P>>>21),P=T+(N^x^S)+R[7]+4139469664&4294967295,T=N+(P<<16&4294967295|P>>>16),P=S+(T^N^x)+R[10]+3200236656&4294967295,S=T+(P<<23&4294967295|P>>>9),P=x+(S^T^N)+R[13]+681279174&4294967295,x=S+(P<<4&4294967295|P>>>28),P=N+(x^S^T)+R[0]+3936430074&4294967295,N=x+(P<<11&4294967295|P>>>21),P=T+(N^x^S)+R[3]+3572445317&4294967295,T=N+(P<<16&4294967295|P>>>16),P=S+(T^N^x)+R[6]+76029189&4294967295,S=T+(P<<23&4294967295|P>>>9),P=x+(S^T^N)+R[9]+3654602809&4294967295,x=S+(P<<4&4294967295|P>>>28),P=N+(x^S^T)+R[12]+3873151461&4294967295,N=x+(P<<11&4294967295|P>>>21),P=T+(N^x^S)+R[15]+530742520&4294967295,T=N+(P<<16&4294967295|P>>>16),P=S+(T^N^x)+R[2]+3299628645&4294967295,S=T+(P<<23&4294967295|P>>>9),P=x+(T^(S|~N))+R[0]+4096336452&4294967295,x=S+(P<<6&4294967295|P>>>26),P=N+(S^(x|~T))+R[7]+1126891415&4294967295,N=x+(P<<10&4294967295|P>>>22),P=T+(x^(N|~S))+R[14]+2878612391&4294967295,T=N+(P<<15&4294967295|P>>>17),P=S+(N^(T|~x))+R[5]+4237533241&4294967295,S=T+(P<<21&4294967295|P>>>11),P=x+(T^(S|~N))+R[12]+1700485571&4294967295,x=S+(P<<6&4294967295|P>>>26),P=N+(S^(x|~T))+R[3]+2399980690&4294967295,N=x+(P<<10&4294967295|P>>>22),P=T+(x^(N|~S))+R[10]+4293915773&4294967295,T=N+(P<<15&4294967295|P>>>17),P=S+(N^(T|~x))+R[1]+2240044497&4294967295,S=T+(P<<21&4294967295|P>>>11),P=x+(T^(S|~N))+R[8]+1873313359&4294967295,x=S+(P<<6&4294967295|P>>>26),P=N+(S^(x|~T))+R[15]+4264355552&4294967295,N=x+(P<<10&4294967295|P>>>22),P=T+(x^(N|~S))+R[6]+2734768916&4294967295,T=N+(P<<15&4294967295|P>>>17),P=S+(N^(T|~x))+R[13]+1309151649&4294967295,S=T+(P<<21&4294967295|P>>>11),P=x+(T^(S|~N))+R[4]+4149444226&4294967295,x=S+(P<<6&4294967295|P>>>26),P=N+(S^(x|~T))+R[11]+3174756917&4294967295,N=x+(P<<10&4294967295|P>>>22),P=T+(x^(N|~S))+R[2]+718787259&4294967295,T=N+(P<<15&4294967295|P>>>17),P=S+(N^(T|~x))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+x&4294967295,I.g[1]=I.g[1]+(T+(P<<21&4294967295|P>>>11))&4294967295,I.g[2]=I.g[2]+T&4294967295,I.g[3]=I.g[3]+N&4294967295}r.prototype.u=function(I,x){x===void 0&&(x=I.length);for(var S=x-this.blockSize,R=this.B,T=this.h,N=0;N<x;){if(T==0)for(;N<=S;)i(this,I,N),N+=this.blockSize;if(typeof I=="string"){for(;N<x;)if(R[T++]=I.charCodeAt(N++),T==this.blockSize){i(this,R),T=0;break}}else for(;N<x;)if(R[T++]=I[N++],T==this.blockSize){i(this,R),T=0;break}}this.h=T,this.o+=x},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var x=1;x<I.length-8;++x)I[x]=0;var S=8*this.o;for(x=I.length-8;x<I.length;++x)I[x]=S&255,S/=256;for(this.u(I),I=Array(16),x=S=0;4>x;++x)for(var R=0;32>R;R+=8)I[S++]=this.g[x]>>>R&255;return I};function o(I,x){var S=l;return Object.prototype.hasOwnProperty.call(S,I)?S[I]:S[I]=x(I)}function s(I,x){this.h=x;for(var S=[],R=!0,T=I.length-1;0<=T;T--){var N=I[T]|0;R&&N==x||(S[T]=N,R=!1)}this.g=S}var l={};function c(I){return-128<=I&&128>I?o(I,function(x){return new s([x|0],0>x?-1:0)}):new s([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return w(d(-I));for(var x=[],S=1,R=0;I>=S;R++)x[R]=I/S|0,S*=4294967296;return new s(x,0)}function u(I,x){if(I.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(I.charAt(0)=="-")return w(u(I.substring(1),x));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=d(Math.pow(x,8)),R=f,T=0;T<I.length;T+=8){var N=Math.min(8,I.length-T),P=parseInt(I.substring(T,T+N),x);8>N?(N=d(Math.pow(x,N)),R=R.j(N).add(d(P))):(R=R.j(S),R=R.add(d(P)))}return R}var f=c(0),h=c(1),p=c(16777216);t=s.prototype,t.m=function(){if(y(this))return-w(this).m();for(var I=0,x=1,S=0;S<this.g.length;S++){var R=this.i(S);I+=(0<=R?R:4294967296+R)*x,x*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(v(this))return"0";if(y(this))return"-"+w(this).toString(I);for(var x=d(Math.pow(I,6)),S=this,R="";;){var T=E(S,x).g;S=g(S,T.j(x));var N=((0<S.g.length?S.g[0]:S.h)>>>0).toString(I);if(S=T,v(S))return N+R;for(;6>N.length;)N="0"+N;R=N+R}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function v(I){if(I.h!=0)return!1;for(var x=0;x<I.g.length;x++)if(I.g[x]!=0)return!1;return!0}function y(I){return I.h==-1}t.l=function(I){return I=g(this,I),y(I)?-1:v(I)?0:1};function w(I){for(var x=I.g.length,S=[],R=0;R<x;R++)S[R]=~I.g[R];return new s(S,~I.h).add(h)}t.abs=function(){return y(this)?w(this):this},t.add=function(I){for(var x=Math.max(this.g.length,I.g.length),S=[],R=0,T=0;T<=x;T++){var N=R+(this.i(T)&65535)+(I.i(T)&65535),P=(N>>>16)+(this.i(T)>>>16)+(I.i(T)>>>16);R=P>>>16,N&=65535,P&=65535,S[T]=P<<16|N}return new s(S,S[S.length-1]&-2147483648?-1:0)};function g(I,x){return I.add(w(x))}t.j=function(I){if(v(this)||v(I))return f;if(y(this))return y(I)?w(this).j(w(I)):w(w(this).j(I));if(y(I))return w(this.j(w(I)));if(0>this.l(p)&&0>I.l(p))return d(this.m()*I.m());for(var x=this.g.length+I.g.length,S=[],R=0;R<2*x;R++)S[R]=0;for(R=0;R<this.g.length;R++)for(var T=0;T<I.g.length;T++){var N=this.i(R)>>>16,P=this.i(R)&65535,V=I.i(T)>>>16,$=I.i(T)&65535;S[2*R+2*T]+=P*$,b(S,2*R+2*T),S[2*R+2*T+1]+=N*$,b(S,2*R+2*T+1),S[2*R+2*T+1]+=P*V,b(S,2*R+2*T+1),S[2*R+2*T+2]+=N*V,b(S,2*R+2*T+2)}for(R=0;R<x;R++)S[R]=S[2*R+1]<<16|S[2*R];for(R=x;R<2*x;R++)S[R]=0;return new s(S,0)};function b(I,x){for(;(I[x]&65535)!=I[x];)I[x+1]+=I[x]>>>16,I[x]&=65535,x++}function _(I,x){this.g=I,this.h=x}function E(I,x){if(v(x))throw Error("division by zero");if(v(I))return new _(f,f);if(y(I))return x=E(w(I),x),new _(w(x.g),w(x.h));if(y(x))return x=E(I,w(x)),new _(w(x.g),x.h);if(30<I.g.length){if(y(I)||y(x))throw Error("slowDivide_ only works with positive integers.");for(var S=h,R=x;0>=R.l(I);)S=A(S),R=A(R);var T=k(S,1),N=k(R,1);for(R=k(R,2),S=k(S,2);!v(R);){var P=N.add(R);0>=P.l(I)&&(T=T.add(S),N=P),R=k(R,1),S=k(S,1)}return x=g(I,T.j(x)),new _(T,x)}for(T=f;0<=I.l(x);){for(S=Math.max(1,Math.floor(I.m()/x.m())),R=Math.ceil(Math.log(S)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),N=d(S),P=N.j(x);y(P)||0<P.l(I);)S-=R,N=d(S),P=N.j(x);v(N)&&(N=h),T=T.add(N),I=g(I,P)}return new _(T,I)}t.A=function(I){return E(this,I).h},t.and=function(I){for(var x=Math.max(this.g.length,I.g.length),S=[],R=0;R<x;R++)S[R]=this.i(R)&I.i(R);return new s(S,this.h&I.h)},t.or=function(I){for(var x=Math.max(this.g.length,I.g.length),S=[],R=0;R<x;R++)S[R]=this.i(R)|I.i(R);return new s(S,this.h|I.h)},t.xor=function(I){for(var x=Math.max(this.g.length,I.g.length),S=[],R=0;R<x;R++)S[R]=this.i(R)^I.i(R);return new s(S,this.h^I.h)};function A(I){for(var x=I.g.length+1,S=[],R=0;R<x;R++)S[R]=I.i(R)<<1|I.i(R-1)>>>31;return new s(S,I.h)}function k(I,x){var S=x>>5;x%=32;for(var R=I.g.length-S,T=[],N=0;N<R;N++)T[N]=0<x?I.i(N+S)>>>x|I.i(N+S+1)<<32-x:I.i(N+S);return new s(T,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Jw=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=u,ko=s}).apply(typeof Xy<"u"?Xy:typeof self<"u"?self:typeof window<"u"?window:{});var Zc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zw,Xa,e6,Ru,$1,t6,n6,r6;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,C,L){return m==Array.prototype||m==Object.prototype||(m[C]=L.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zc=="object"&&Zc];for(var C=0;C<m.length;++C){var L=m[C];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var r=n(this);function i(m,C){if(C)e:{var L=r;m=m.split(".");for(var U=0;U<m.length-1;U++){var K=m[U];if(!(K in L))break e;L=L[K]}m=m[m.length-1],U=L[m],C=C(U),C!=U&&C!=null&&e(L,m,{configurable:!0,writable:!0,value:C})}}function o(m,C){m instanceof String&&(m+="");var L=0,U=!1,K={next:function(){if(!U&&L<m.length){var X=L++;return{value:C(X,m[X]),done:!1}}return U=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}i("Array.prototype.values",function(m){return m||function(){return o(this,function(C,L){return L})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},l=this||self;function c(m){var C=typeof m;return C=C!="object"?C:m?Array.isArray(m)?"array":C:"null",C=="array"||C=="object"&&typeof m.length=="number"}function d(m){var C=typeof m;return C=="object"&&m!=null||C=="function"}function u(m,C,L){return m.call.apply(m.bind,arguments)}function f(m,C,L){if(!m)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,U),m.apply(C,K)}}return function(){return m.apply(C,arguments)}}function h(m,C,L){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,h.apply(null,arguments)}function p(m,C){var L=Array.prototype.slice.call(arguments,1);return function(){var U=L.slice();return U.push.apply(U,arguments),m.apply(this,U)}}function v(m,C){function L(){}L.prototype=C.prototype,m.aa=C.prototype,m.prototype=new L,m.prototype.constructor=m,m.Qb=function(U,K,X){for(var re=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)re[Je-2]=arguments[Je];return C.prototype[K].apply(U,re)}}function y(m){const C=m.length;if(0<C){const L=Array(C);for(let U=0;U<C;U++)L[U]=m[U];return L}return[]}function w(m,C){for(let L=1;L<arguments.length;L++){const U=arguments[L];if(c(U)){const K=m.length||0,X=U.length||0;m.length=K+X;for(let re=0;re<X;re++)m[K+re]=U[re]}else m.push(U)}}class g{constructor(C,L){this.i=C,this.j=L,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function b(m){return/^[\s\xa0]*$/.test(m)}function _(){var m=l.navigator;return m&&(m=m.userAgent)?m:""}function E(m){return E[" "](m),m}E[" "]=function(){};var A=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function k(m,C,L){for(const U in m)C.call(L,m[U],U,m)}function I(m,C){for(const L in m)C.call(void 0,m[L],L,m)}function x(m){const C={};for(const L in m)C[L]=m[L];return C}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(m,C){let L,U;for(let K=1;K<arguments.length;K++){U=arguments[K];for(L in U)m[L]=U[L];for(let X=0;X<S.length;X++)L=S[X],Object.prototype.hasOwnProperty.call(U,L)&&(m[L]=U[L])}}function T(m){var C=1;m=m.split(":");const L=[];for(;0<C&&m.length;)L.push(m.shift()),C--;return m.length&&L.push(m.join(":")),L}function N(m){l.setTimeout(()=>{throw m},0)}function P(){var m=j;let C=null;return m.g&&(C=m.g,m.g=m.g.next,m.g||(m.h=null),C.next=null),C}class V{constructor(){this.h=this.g=null}add(C,L){const U=$.get();U.set(C,L),this.h?this.h.next=U:this.g=U,this.h=U}}var $=new g(()=>new D,m=>m.reset());class D{constructor(){this.next=this.g=this.h=null}set(C,L){this.h=C,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let O,B=!1,j=new V,z=()=>{const m=l.Promise.resolve(void 0);O=()=>{m.then(W)}};var W=()=>{for(var m;m=P();){try{m.h.call(m.g)}catch(L){N(L)}var C=$;C.j(m),100>C.h&&(C.h++,m.next=C.g,C.g=m)}B=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(m,C){this.type=m,this.g=this.target=C,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var m=!1,C=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const L=()=>{};l.addEventListener("test",L,C),l.removeEventListener("test",L,C)}catch{}return m}();function q(m,C){if(H.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var L=this.type=m.type,U=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=C,C=m.relatedTarget){if(A){e:{try{E(C.nodeName);var K=!0;break e}catch{}K=!1}K||(C=null)}}else L=="mouseover"?C=m.fromElement:L=="mouseout"&&(C=m.toElement);this.relatedTarget=C,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Q[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&q.aa.h.call(this)}}v(q,H);var Q={2:"touch",3:"pen",4:"mouse"};q.prototype.h=function(){q.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var J="closure_listenable_"+(1e6*Math.random()|0),ne=0;function oe(m,C,L,U,K){this.listener=m,this.proxy=null,this.src=C,this.type=L,this.capture=!!U,this.ha=K,this.key=++ne,this.da=this.fa=!1}function se(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function ae(m){this.src=m,this.g={},this.h=0}ae.prototype.add=function(m,C,L,U,K){var X=m.toString();m=this.g[X],m||(m=this.g[X]=[],this.h++);var re=we(m,C,U,K);return-1<re?(C=m[re],L||(C.fa=!1)):(C=new oe(C,this.src,X,!!U,K),C.fa=L,m.push(C)),C};function ie(m,C){var L=C.type;if(L in m.g){var U=m.g[L],K=Array.prototype.indexOf.call(U,C,void 0),X;(X=0<=K)&&Array.prototype.splice.call(U,K,1),X&&(se(C),m.g[L].length==0&&(delete m.g[L],m.h--))}}function we(m,C,L,U){for(var K=0;K<m.length;++K){var X=m[K];if(!X.da&&X.listener==C&&X.capture==!!L&&X.ha==U)return K}return-1}var Te="closure_lm_"+(1e6*Math.random()|0),ye={};function Fe(m,C,L,U,K){if(Array.isArray(C)){for(var X=0;X<C.length;X++)Fe(m,C[X],L,U,K);return null}return L=mt(L),m&&m[J]?m.K(C,L,d(U)?!!U.capture:!!U,K):Ce(m,C,L,!1,U,K)}function Ce(m,C,L,U,K,X){if(!C)throw Error("Invalid event type");var re=d(K)?!!K.capture:!!K,Je=De(m);if(Je||(m[Te]=Je=new ae(m)),L=Je.add(C,L,U,re,X),L.proxy)return L;if(U=Ae(),L.proxy=U,U.src=m,U.listener=L,m.addEventListener)Y||(K=re),K===void 0&&(K=!1),m.addEventListener(C.toString(),U,K);else if(m.attachEvent)m.attachEvent(de(C.toString()),U);else if(m.addListener&&m.removeListener)m.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return L}function Ae(){function m(L){return C.call(m.src,m.listener,L)}const C=nt;return m}function fe(m,C,L,U,K){if(Array.isArray(C))for(var X=0;X<C.length;X++)fe(m,C[X],L,U,K);else U=d(U)?!!U.capture:!!U,L=mt(L),m&&m[J]?(m=m.i,C=String(C).toString(),C in m.g&&(X=m.g[C],L=we(X,L,U,K),-1<L&&(se(X[L]),Array.prototype.splice.call(X,L,1),X.length==0&&(delete m.g[C],m.h--)))):m&&(m=De(m))&&(C=m.g[C.toString()],m=-1,C&&(m=we(C,L,U,K)),(L=-1<m?C[m]:null)&&Ne(L))}function Ne(m){if(typeof m!="number"&&m&&!m.da){var C=m.src;if(C&&C[J])ie(C.i,m);else{var L=m.type,U=m.proxy;C.removeEventListener?C.removeEventListener(L,U,m.capture):C.detachEvent?C.detachEvent(de(L),U):C.addListener&&C.removeListener&&C.removeListener(U),(L=De(C))?(ie(L,m),L.h==0&&(L.src=null,C[Te]=null)):se(m)}}}function de(m){return m in ye?ye[m]:ye[m]="on"+m}function nt(m,C){if(m.da)m=!0;else{C=new q(C,this);var L=m.listener,U=m.ha||m.src;m.fa&&Ne(m),m=L.call(U,C)}return m}function De(m){return m=m[Te],m instanceof ae?m:null}var Ve="__closure_events_fn_"+(1e9*Math.random()>>>0);function mt(m){return typeof m=="function"?m:(m[Ve]||(m[Ve]=function(C){return m.handleEvent(C)}),m[Ve])}function Se(){G.call(this),this.i=new ae(this),this.M=this,this.F=null}v(Se,G),Se.prototype[J]=!0,Se.prototype.removeEventListener=function(m,C,L,U){fe(this,m,C,L,U)};function ke(m,C){var L,U=m.F;if(U)for(L=[];U;U=U.F)L.push(U);if(m=m.M,U=C.type||C,typeof C=="string")C=new H(C,m);else if(C instanceof H)C.target=C.target||m;else{var K=C;C=new H(U,m),R(C,K)}if(K=!0,L)for(var X=L.length-1;0<=X;X--){var re=C.g=L[X];K=Be(re,U,!0,C)&&K}if(re=C.g=m,K=Be(re,U,!0,C)&&K,K=Be(re,U,!1,C)&&K,L)for(X=0;X<L.length;X++)re=C.g=L[X],K=Be(re,U,!1,C)&&K}Se.prototype.N=function(){if(Se.aa.N.call(this),this.i){var m=this.i,C;for(C in m.g){for(var L=m.g[C],U=0;U<L.length;U++)se(L[U]);delete m.g[C],m.h--}}this.F=null},Se.prototype.K=function(m,C,L,U){return this.i.add(String(m),C,!1,L,U)},Se.prototype.L=function(m,C,L,U){return this.i.add(String(m),C,!0,L,U)};function Be(m,C,L,U){if(C=m.i.g[String(C)],!C)return!0;C=C.concat();for(var K=!0,X=0;X<C.length;++X){var re=C[X];if(re&&!re.da&&re.capture==L){var Je=re.listener,Bt=re.ha||re.src;re.fa&&ie(m.i,re),K=Je.call(Bt,U)!==!1&&K}}return K&&!U.defaultPrevented}function $e(m,C,L){if(typeof m=="function")L&&(m=h(m,L));else if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:l.setTimeout(m,C||0)}function Ze(m){m.g=$e(()=>{m.g=null,m.i&&(m.i=!1,Ze(m))},m.l);const C=m.h;m.h=null,m.m.apply(null,C)}class ge extends G{constructor(C,L){super(),this.m=C,this.l=L,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:Ze(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qe(m){G.call(this),this.h=m,this.g={}}v(Qe,G);var St=[];function It(m){k(m.g,function(C,L){this.g.hasOwnProperty(L)&&Ne(C)},m),m.g={}}Qe.prototype.N=function(){Qe.aa.N.call(this),It(this)},Qe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ct=l.JSON.stringify,Tn=l.JSON.parse,ba=class{stringify(m){return l.JSON.stringify(m,void 0)}parse(m){return l.JSON.parse(m,void 0)}};function er(){}er.prototype.h=null;function pi(m){return m.h||(m.h=m.i())}function lt(){}var kn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hn(){H.call(this,"d")}v(Hn,H);function qn(){H.call(this,"c")}v(qn,H);var gn={},mi=null;function uo(){return mi=mi||new Se}gn.La="serverreachability";function gr(m){H.call(this,gn.La,m)}v(gr,H);function Rn(m){const C=uo();ke(C,new gr(C))}gn.STAT_EVENT="statevent";function nv(m,C){H.call(this,gn.STAT_EVENT,m),this.stat=C}v(nv,H);function un(m){const C=uo();ke(C,new nv(C,m))}gn.Ma="timingevent";function rv(m,C){H.call(this,gn.Ma,m),this.size=C}v(rv,H);function wa(m,C){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){m()},C)}function xa(){this.g=!0}xa.prototype.xa=function(){this.g=!1};function j8(m,C,L,U,K,X){m.info(function(){if(m.g)if(X)for(var re="",Je=X.split("&"),Bt=0;Bt<Je.length;Bt++){var ze=Je[Bt].split("=");if(1<ze.length){var Xt=ze[0];ze=ze[1];var Qt=Xt.split("_");re=2<=Qt.length&&Qt[1]=="type"?re+(Xt+"="+ze+"&"):re+(Xt+"=redacted&")}}else re=null;else re=X;return"XMLHTTP REQ ("+U+") [attempt "+K+"]: "+C+`
`+L+`
`+re})}function $8(m,C,L,U,K,X,re){m.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+K+"]: "+C+`
`+L+`
`+X+" "+re})}function es(m,C,L,U){m.info(function(){return"XMLHTTP TEXT ("+C+"): "+H8(m,L)+(U?" "+U:"")})}function z8(m,C){m.info(function(){return"TIMEOUT: "+C})}xa.prototype.info=function(){};function H8(m,C){if(!m.g)return C;if(!C)return null;try{var L=JSON.parse(C);if(L){for(m=0;m<L.length;m++)if(Array.isArray(L[m])){var U=L[m];if(!(2>U.length)){var K=U[1];if(Array.isArray(K)&&!(1>K.length)){var X=K[0];if(X!="noop"&&X!="stop"&&X!="close")for(var re=1;re<K.length;re++)K[re]=""}}}}return Ct(L)}catch{return C}}var gc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},iv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},lh;function vc(){}v(vc,er),vc.prototype.g=function(){return new XMLHttpRequest},vc.prototype.i=function(){return{}},lh=new vc;function gi(m,C,L,U){this.j=m,this.i=C,this.l=L,this.R=U||1,this.U=new Qe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ov}function ov(){this.i=null,this.g="",this.h=!1}var sv={},ch={};function uh(m,C,L){m.L=1,m.v=wc(Fr(C)),m.m=L,m.P=!0,av(m,null)}function av(m,C){m.F=Date.now(),yc(m),m.A=Fr(m.v);var L=m.A,U=m.R;Array.isArray(U)||(U=[String(U)]),wv(L.i,"t",U),m.C=0,L=m.j.J,m.h=new ov,m.g=Fv(m.j,L?C:null,!m.m),0<m.O&&(m.M=new ge(h(m.Y,m,m.g),m.O)),C=m.U,L=m.g,U=m.ca;var K="readystatechange";Array.isArray(K)||(K&&(St[0]=K.toString()),K=St);for(var X=0;X<K.length;X++){var re=Fe(L,K[X],U||C.handleEvent,!1,C.h||C);if(!re)break;C.g[re.key]=re}C=m.H?x(m.H):{},m.m?(m.u||(m.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,C)):(m.u="GET",m.g.ea(m.A,m.u,null,C)),Rn(),j8(m.i,m.u,m.A,m.l,m.R,m.m)}gi.prototype.ca=function(m){m=m.target;const C=this.M;C&&Br(m)==3?C.j():this.Y(m)},gi.prototype.Y=function(m){try{if(m==this.g)e:{const Qt=Br(this.g);var C=this.g.Ba();const rs=this.g.Z();if(!(3>Qt)&&(Qt!=3||this.g&&(this.h.h||this.g.oa()||Tv(this.g)))){this.J||Qt!=4||C==7||(C==8||0>=rs?Rn(3):Rn(2)),dh(this);var L=this.g.Z();this.X=L;t:if(lv(this)){var U=Tv(this.g);m="";var K=U.length,X=Br(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fo(this),Ea(this);var re="";break t}this.h.i=new l.TextDecoder}for(C=0;C<K;C++)this.h.h=!0,m+=this.h.i.decode(U[C],{stream:!(X&&C==K-1)});U.length=0,this.h.g+=m,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=L==200,$8(this.i,this.u,this.A,this.l,this.R,Qt,L),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,Bt=this.g;if((Je=Bt.g?Bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Je)){var ze=Je;break t}}ze=null}if(L=ze)es(this.i,this.l,L,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fh(this,L);else{this.o=!1,this.s=3,un(12),fo(this),Ea(this);break e}}if(this.P){L=!0;let tr;for(;!this.J&&this.C<re.length;)if(tr=q8(this,re),tr==ch){Qt==4&&(this.s=4,un(14),L=!1),es(this.i,this.l,null,"[Incomplete Response]");break}else if(tr==sv){this.s=4,un(15),es(this.i,this.l,re,"[Invalid Chunk]"),L=!1;break}else es(this.i,this.l,tr,null),fh(this,tr);if(lv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||re.length!=0||this.h.h||(this.s=1,un(16),L=!1),this.o=this.o&&L,!L)es(this.i,this.l,re,"[Invalid Chunked Response]"),fo(this),Ea(this);else if(0<re.length&&!this.W){this.W=!0;var Xt=this.j;Xt.g==this&&Xt.ba&&!Xt.M&&(Xt.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),yh(Xt),Xt.M=!0,un(11))}}else es(this.i,this.l,re,null),fh(this,re);Qt==4&&fo(this),this.o&&!this.J&&(Qt==4?Ov(this.j,this):(this.o=!1,yc(this)))}else l9(this.g),L==400&&0<re.indexOf("Unknown SID")?(this.s=3,un(12)):(this.s=0,un(13)),fo(this),Ea(this)}}}catch{}finally{}};function lv(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function q8(m,C){var L=m.C,U=C.indexOf(`
`,L);return U==-1?ch:(L=Number(C.substring(L,U)),isNaN(L)?sv:(U+=1,U+L>C.length?ch:(C=C.slice(U,U+L),m.C=U+L,C)))}gi.prototype.cancel=function(){this.J=!0,fo(this)};function yc(m){m.S=Date.now()+m.I,cv(m,m.I)}function cv(m,C){if(m.B!=null)throw Error("WatchDog timer not null");m.B=wa(h(m.ba,m),C)}function dh(m){m.B&&(l.clearTimeout(m.B),m.B=null)}gi.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(z8(this.i,this.A),this.L!=2&&(Rn(),un(17)),fo(this),this.s=2,Ea(this)):cv(this,this.S-m)};function Ea(m){m.j.G==0||m.J||Ov(m.j,m)}function fo(m){dh(m);var C=m.M;C&&typeof C.ma=="function"&&C.ma(),m.M=null,It(m.U),m.g&&(C=m.g,m.g=null,C.abort(),C.ma())}function fh(m,C){try{var L=m.j;if(L.G!=0&&(L.g==m||hh(L.h,m))){if(!m.K&&hh(L.h,m)&&L.G==3){try{var U=L.Da.g.parse(C)}catch{U=null}if(Array.isArray(U)&&U.length==3){var K=U;if(K[0]==0){e:if(!L.u){if(L.g)if(L.g.F+3e3<m.F)Ac(L),Ic(L);else break e;vh(L),un(18)}}else L.za=K[1],0<L.za-L.T&&37500>K[2]&&L.F&&L.v==0&&!L.C&&(L.C=wa(h(L.Za,L),6e3));if(1>=fv(L.h)&&L.ca){try{L.ca()}catch{}L.ca=void 0}}else po(L,11)}else if((m.K||L.g==m)&&Ac(L),!b(C))for(K=L.Da.g.parse(C),C=0;C<K.length;C++){let ze=K[C];if(L.T=ze[0],ze=ze[1],L.G==2)if(ze[0]=="c"){L.K=ze[1],L.ia=ze[2];const Xt=ze[3];Xt!=null&&(L.la=Xt,L.j.info("VER="+L.la));const Qt=ze[4];Qt!=null&&(L.Aa=Qt,L.j.info("SVER="+L.Aa));const rs=ze[5];rs!=null&&typeof rs=="number"&&0<rs&&(U=1.5*rs,L.L=U,L.j.info("backChannelRequestTimeoutMs_="+U)),U=L;const tr=m.g;if(tr){const kc=tr.g?tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kc){var X=U.h;X.g||kc.indexOf("spdy")==-1&&kc.indexOf("quic")==-1&&kc.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(ph(X,X.h),X.h=null))}if(U.D){const _h=tr.g?tr.g.getResponseHeader("X-HTTP-Session-Id"):null;_h&&(U.ya=_h,rt(U.I,U.D,_h))}}L.G=3,L.l&&L.l.ua(),L.ba&&(L.R=Date.now()-m.F,L.j.info("Handshake RTT: "+L.R+"ms")),U=L;var re=m;if(U.qa=Uv(U,U.J?U.ia:null,U.W),re.K){hv(U.h,re);var Je=re,Bt=U.L;Bt&&(Je.I=Bt),Je.B&&(dh(Je),yc(Je)),U.g=re}else Lv(U);0<L.i.length&&Cc(L)}else ze[0]!="stop"&&ze[0]!="close"||po(L,7);else L.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?po(L,7):gh(L):ze[0]!="noop"&&L.l&&L.l.ta(ze),L.v=0)}}Rn(4)}catch{}}var W8=class{constructor(m,C){this.g=m,this.map=C}};function uv(m){this.l=m||10,l.PerformanceNavigationTiming?(m=l.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dv(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function fv(m){return m.h?1:m.g?m.g.size:0}function hh(m,C){return m.h?m.h==C:m.g?m.g.has(C):!1}function ph(m,C){m.g?m.g.add(C):m.h=C}function hv(m,C){m.h&&m.h==C?m.h=null:m.g&&m.g.has(C)&&m.g.delete(C)}uv.prototype.cancel=function(){if(this.i=pv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function pv(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let C=m.i;for(const L of m.g.values())C=C.concat(L.D);return C}return y(m.i)}function G8(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(c(m)){for(var C=[],L=m.length,U=0;U<L;U++)C.push(m[U]);return C}C=[],L=0;for(U in m)C[L++]=m[U];return C}function Y8(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(c(m)||typeof m=="string"){var C=[];m=m.length;for(var L=0;L<m;L++)C.push(L);return C}C=[],L=0;for(const U in m)C[L++]=U;return C}}}function mv(m,C){if(m.forEach&&typeof m.forEach=="function")m.forEach(C,void 0);else if(c(m)||typeof m=="string")Array.prototype.forEach.call(m,C,void 0);else for(var L=Y8(m),U=G8(m),K=U.length,X=0;X<K;X++)C.call(void 0,U[X],L&&L[X],m)}var gv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function K8(m,C){if(m){m=m.split("&");for(var L=0;L<m.length;L++){var U=m[L].indexOf("="),K=null;if(0<=U){var X=m[L].substring(0,U);K=m[L].substring(U+1)}else X=m[L];C(X,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function ho(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof ho){this.h=m.h,_c(this,m.j),this.o=m.o,this.g=m.g,bc(this,m.s),this.l=m.l;var C=m.i,L=new Ca;L.i=C.i,C.g&&(L.g=new Map(C.g),L.h=C.h),vv(this,L),this.m=m.m}else m&&(C=String(m).match(gv))?(this.h=!1,_c(this,C[1]||"",!0),this.o=Sa(C[2]||""),this.g=Sa(C[3]||"",!0),bc(this,C[4]),this.l=Sa(C[5]||"",!0),vv(this,C[6]||"",!0),this.m=Sa(C[7]||"")):(this.h=!1,this.i=new Ca(null,this.h))}ho.prototype.toString=function(){var m=[],C=this.j;C&&m.push(Ia(C,yv,!0),":");var L=this.g;return(L||C=="file")&&(m.push("//"),(C=this.o)&&m.push(Ia(C,yv,!0),"@"),m.push(encodeURIComponent(String(L)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.s,L!=null&&m.push(":",String(L))),(L=this.l)&&(this.g&&L.charAt(0)!="/"&&m.push("/"),m.push(Ia(L,L.charAt(0)=="/"?J8:Q8,!0))),(L=this.i.toString())&&m.push("?",L),(L=this.m)&&m.push("#",Ia(L,e9)),m.join("")};function Fr(m){return new ho(m)}function _c(m,C,L){m.j=L?Sa(C,!0):C,m.j&&(m.j=m.j.replace(/:$/,""))}function bc(m,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);m.s=C}else m.s=null}function vv(m,C,L){C instanceof Ca?(m.i=C,t9(m.i,m.h)):(L||(C=Ia(C,Z8)),m.i=new Ca(C,m.h))}function rt(m,C,L){m.i.set(C,L)}function wc(m){return rt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Sa(m,C){return m?C?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Ia(m,C,L){return typeof m=="string"?(m=encodeURI(m).replace(C,X8),L&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function X8(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var yv=/[#\/\?@]/g,Q8=/[#\?:]/g,J8=/[#\?]/g,Z8=/[#\?@]/g,e9=/#/g;function Ca(m,C){this.h=this.g=null,this.i=m||null,this.j=!!C}function vi(m){m.g||(m.g=new Map,m.h=0,m.i&&K8(m.i,function(C,L){m.add(decodeURIComponent(C.replace(/\+/g," ")),L)}))}t=Ca.prototype,t.add=function(m,C){vi(this),this.i=null,m=ts(this,m);var L=this.g.get(m);return L||this.g.set(m,L=[]),L.push(C),this.h+=1,this};function _v(m,C){vi(m),C=ts(m,C),m.g.has(C)&&(m.i=null,m.h-=m.g.get(C).length,m.g.delete(C))}function bv(m,C){return vi(m),C=ts(m,C),m.g.has(C)}t.forEach=function(m,C){vi(this),this.g.forEach(function(L,U){L.forEach(function(K){m.call(C,K,U,this)},this)},this)},t.na=function(){vi(this);const m=Array.from(this.g.values()),C=Array.from(this.g.keys()),L=[];for(let U=0;U<C.length;U++){const K=m[U];for(let X=0;X<K.length;X++)L.push(C[U])}return L},t.V=function(m){vi(this);let C=[];if(typeof m=="string")bv(this,m)&&(C=C.concat(this.g.get(ts(this,m))));else{m=Array.from(this.g.values());for(let L=0;L<m.length;L++)C=C.concat(m[L])}return C},t.set=function(m,C){return vi(this),this.i=null,m=ts(this,m),bv(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[C]),this.h+=1,this},t.get=function(m,C){return m?(m=this.V(m),0<m.length?String(m[0]):C):C};function wv(m,C,L){_v(m,C),0<L.length&&(m.i=null,m.g.set(ts(m,C),y(L)),m.h+=L.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],C=Array.from(this.g.keys());for(var L=0;L<C.length;L++){var U=C[L];const X=encodeURIComponent(String(U)),re=this.V(U);for(U=0;U<re.length;U++){var K=X;re[U]!==""&&(K+="="+encodeURIComponent(String(re[U]))),m.push(K)}}return this.i=m.join("&")};function ts(m,C){return C=String(C),m.j&&(C=C.toLowerCase()),C}function t9(m,C){C&&!m.j&&(vi(m),m.i=null,m.g.forEach(function(L,U){var K=U.toLowerCase();U!=K&&(_v(this,U),wv(this,K,L))},m)),m.j=C}function n9(m,C){const L=new xa;if(l.Image){const U=new Image;U.onload=p(yi,L,"TestLoadImage: loaded",!0,C,U),U.onerror=p(yi,L,"TestLoadImage: error",!1,C,U),U.onabort=p(yi,L,"TestLoadImage: abort",!1,C,U),U.ontimeout=p(yi,L,"TestLoadImage: timeout",!1,C,U),l.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=m}else C(!1)}function r9(m,C){const L=new xa,U=new AbortController,K=setTimeout(()=>{U.abort(),yi(L,"TestPingServer: timeout",!1,C)},1e4);fetch(m,{signal:U.signal}).then(X=>{clearTimeout(K),X.ok?yi(L,"TestPingServer: ok",!0,C):yi(L,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(K),yi(L,"TestPingServer: error",!1,C)})}function yi(m,C,L,U,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),U(L)}catch{}}function i9(){this.g=new ba}function o9(m,C,L){const U=L||"";try{mv(m,function(K,X){let re=K;d(K)&&(re=Ct(K)),C.push(U+X+"="+encodeURIComponent(re))})}catch(K){throw C.push(U+"type="+encodeURIComponent("_badmap")),K}}function xc(m){this.l=m.Ub||null,this.j=m.eb||!1}v(xc,er),xc.prototype.g=function(){return new Ec(this.l,this.j)},xc.prototype.i=function(m){return function(){return m}}({});function Ec(m,C){Se.call(this),this.D=m,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Ec,Se),t=Ec.prototype,t.open=function(m,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=C,this.readyState=1,Ta(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(C.body=m),(this.D||l).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Aa(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ta(this)),this.g&&(this.readyState=3,Ta(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xv(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function xv(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var C=m.value?m.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!m.done}))&&(this.response=this.responseText+=C)}m.done?Aa(this):Ta(this),this.readyState==3&&xv(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,Aa(this))},t.Qa=function(m){this.g&&(this.response=m,Aa(this))},t.ga=function(){this.g&&Aa(this)};function Aa(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Ta(m)}t.setRequestHeader=function(m,C){this.u.append(m,C)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],C=this.h.entries();for(var L=C.next();!L.done;)L=L.value,m.push(L[0]+": "+L[1]),L=C.next();return m.join(`\r
`)};function Ta(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Ec.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Ev(m){let C="";return k(m,function(L,U){C+=U,C+=":",C+=L,C+=`\r
`}),C}function mh(m,C,L){e:{for(U in L){var U=!1;break e}U=!0}U||(L=Ev(L),typeof m=="string"?L!=null&&encodeURIComponent(String(L)):rt(m,C,L))}function gt(m){Se.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(gt,Se);var s9=/^https?$/i,a9=["POST","PUT"];t=gt.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,C,L,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);C=C?C.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():lh.g(),this.v=this.o?pi(this.o):pi(lh),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(C,String(m),!0),this.B=!1}catch(X){Sv(this,X);return}if(m=L||"",L=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var K in U)L.set(K,U[K]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const X of U.keys())L.set(X,U.get(X));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(L.keys()).find(X=>X.toLowerCase()=="content-type"),K=l.FormData&&m instanceof l.FormData,!(0<=Array.prototype.indexOf.call(a9,C,void 0))||U||K||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,re]of L)this.g.setRequestHeader(X,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Av(this),this.u=!0,this.g.send(m),this.u=!1}catch(X){Sv(this,X)}};function Sv(m,C){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=C,m.m=5,Iv(m),Sc(m)}function Iv(m){m.A||(m.A=!0,ke(m,"complete"),ke(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,ke(this,"complete"),ke(this,"abort"),Sc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sc(this,!0)),gt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Cv(this):this.bb())},t.bb=function(){Cv(this)};function Cv(m){if(m.h&&typeof s<"u"&&(!m.v[1]||Br(m)!=4||m.Z()!=2)){if(m.u&&Br(m)==4)$e(m.Ea,0,m);else if(ke(m,"readystatechange"),Br(m)==4){m.h=!1;try{const re=m.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var L;if(!(L=C)){var U;if(U=re===0){var K=String(m.D).match(gv)[1]||null;!K&&l.self&&l.self.location&&(K=l.self.location.protocol.slice(0,-1)),U=!s9.test(K?K.toLowerCase():"")}L=U}if(L)ke(m,"complete"),ke(m,"success");else{m.m=6;try{var X=2<Br(m)?m.g.statusText:""}catch{X=""}m.l=X+" ["+m.Z()+"]",Iv(m)}}finally{Sc(m)}}}}function Sc(m,C){if(m.g){Av(m);const L=m.g,U=m.v[0]?()=>{}:null;m.g=null,m.v=null,C||ke(m,"ready");try{L.onreadystatechange=U}catch{}}}function Av(m){m.I&&(l.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function Br(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<Br(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var C=this.g.responseText;return m&&C.indexOf(m)==0&&(C=C.substring(m.length)),Tn(C)}};function Tv(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function l9(m){const C={};m=(m.g&&2<=Br(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<m.length;U++){if(b(m[U]))continue;var L=T(m[U]);const K=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const X=C[K]||[];C[K]=X,X.push(L)}I(C,function(U){return U.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ka(m,C,L){return L&&L.internalChannelParams&&L.internalChannelParams[m]||C}function kv(m){this.Aa=0,this.i=[],this.j=new xa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ka("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ka("baseRetryDelayMs",5e3,m),this.cb=ka("retryDelaySeedMs",1e4,m),this.Wa=ka("forwardChannelMaxRetries",2,m),this.wa=ka("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new uv(m&&m.concurrentRequestLimit),this.Da=new i9,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=kv.prototype,t.la=8,t.G=1,t.connect=function(m,C,L,U){un(0),this.W=m,this.H=C||{},L&&U!==void 0&&(this.H.OSID=L,this.H.OAID=U),this.F=this.X,this.I=Uv(this,null,this.W),Cc(this)};function gh(m){if(Rv(m),m.G==3){var C=m.U++,L=Fr(m.I);if(rt(L,"SID",m.K),rt(L,"RID",C),rt(L,"TYPE","terminate"),Ra(m,L),C=new gi(m,m.j,C),C.L=2,C.v=wc(Fr(L)),L=!1,l.navigator&&l.navigator.sendBeacon)try{L=l.navigator.sendBeacon(C.v.toString(),"")}catch{}!L&&l.Image&&(new Image().src=C.v,L=!0),L||(C.g=Fv(C.j,null),C.g.ea(C.v)),C.F=Date.now(),yc(C)}Vv(m)}function Ic(m){m.g&&(yh(m),m.g.cancel(),m.g=null)}function Rv(m){Ic(m),m.u&&(l.clearTimeout(m.u),m.u=null),Ac(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&l.clearTimeout(m.s),m.s=null)}function Cc(m){if(!dv(m.h)&&!m.s){m.s=!0;var C=m.Ga;O||z(),B||(O(),B=!0),j.add(C,m),m.B=0}}function c9(m,C){return fv(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=C.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=wa(h(m.Ga,m,C),Dv(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const K=new gi(this,this.j,m);let X=this.o;if(this.S&&(X?(X=x(X),R(X,this.S)):X=this.S),this.m!==null||this.O||(K.H=X,X=null),this.P)e:{for(var C=0,L=0;L<this.i.length;L++){t:{var U=this.i[L];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(C+=U,4096<C){C=L;break e}if(C===4096||L===this.i.length-1){C=L+1;break e}}C=1e3}else C=1e3;C=Pv(this,K,C),L=Fr(this.I),rt(L,"RID",m),rt(L,"CVER",22),this.D&&rt(L,"X-HTTP-Session-Id",this.D),Ra(this,L),X&&(this.O?C="headers="+encodeURIComponent(String(Ev(X)))+"&"+C:this.m&&mh(L,this.m,X)),ph(this.h,K),this.Ua&&rt(L,"TYPE","init"),this.P?(rt(L,"$req",C),rt(L,"SID","null"),K.T=!0,uh(K,L,null)):uh(K,L,C),this.G=2}}else this.G==3&&(m?Nv(this,m):this.i.length==0||dv(this.h)||Nv(this))};function Nv(m,C){var L;C?L=C.l:L=m.U++;const U=Fr(m.I);rt(U,"SID",m.K),rt(U,"RID",L),rt(U,"AID",m.T),Ra(m,U),m.m&&m.o&&mh(U,m.m,m.o),L=new gi(m,m.j,L,m.B+1),m.m===null&&(L.H=m.o),C&&(m.i=C.D.concat(m.i)),C=Pv(m,L,1e3),L.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),ph(m.h,L),uh(L,U,C)}function Ra(m,C){m.H&&k(m.H,function(L,U){rt(C,U,L)}),m.l&&mv({},function(L,U){rt(C,U,L)})}function Pv(m,C,L){L=Math.min(m.i.length,L);var U=m.l?h(m.l.Na,m.l,m):null;e:{var K=m.i;let X=-1;for(;;){const re=["count="+L];X==-1?0<L?(X=K[0].g,re.push("ofs="+X)):X=0:re.push("ofs="+X);let Je=!0;for(let Bt=0;Bt<L;Bt++){let ze=K[Bt].g;const Xt=K[Bt].map;if(ze-=X,0>ze)X=Math.max(0,K[Bt].g-100),Je=!1;else try{o9(Xt,re,"req"+ze+"_")}catch{U&&U(Xt)}}if(Je){U=re.join("&");break e}}}return m=m.i.splice(0,L),C.D=m,U}function Lv(m){if(!m.g&&!m.u){m.Y=1;var C=m.Fa;O||z(),B||(O(),B=!0),j.add(C,m),m.v=0}}function vh(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=wa(h(m.Fa,m),Dv(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,Mv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=wa(h(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,un(10),Ic(this),Mv(this))};function yh(m){m.A!=null&&(l.clearTimeout(m.A),m.A=null)}function Mv(m){m.g=new gi(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var C=Fr(m.qa);rt(C,"RID","rpc"),rt(C,"SID",m.K),rt(C,"AID",m.T),rt(C,"CI",m.F?"0":"1"),!m.F&&m.ja&&rt(C,"TO",m.ja),rt(C,"TYPE","xmlhttp"),Ra(m,C),m.m&&m.o&&mh(C,m.m,m.o),m.L&&(m.g.I=m.L);var L=m.g;m=m.ia,L.L=1,L.v=wc(Fr(C)),L.m=null,L.P=!0,av(L,m)}t.Za=function(){this.C!=null&&(this.C=null,Ic(this),vh(this),un(19))};function Ac(m){m.C!=null&&(l.clearTimeout(m.C),m.C=null)}function Ov(m,C){var L=null;if(m.g==C){Ac(m),yh(m),m.g=null;var U=2}else if(hh(m.h,C))L=C.D,hv(m.h,C),U=1;else return;if(m.G!=0){if(C.o)if(U==1){L=C.m?C.m.length:0,C=Date.now()-C.F;var K=m.B;U=uo(),ke(U,new rv(U,L)),Cc(m)}else Lv(m);else if(K=C.s,K==3||K==0&&0<C.X||!(U==1&&c9(m,C)||U==2&&vh(m)))switch(L&&0<L.length&&(C=m.h,C.i=C.i.concat(L)),K){case 1:po(m,5);break;case 4:po(m,10);break;case 3:po(m,6);break;default:po(m,2)}}}function Dv(m,C){let L=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(L*=2),L*C}function po(m,C){if(m.j.info("Error code "+C),C==2){var L=h(m.fb,m),U=m.Xa;const K=!U;U=new ho(U||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||_c(U,"https"),wc(U),K?n9(U.toString(),L):r9(U.toString(),L)}else un(2);m.G=0,m.l&&m.l.sa(C),Vv(m),Rv(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),un(2)):(this.j.info("Failed to ping google.com"),un(1))};function Vv(m){if(m.G=0,m.ka=[],m.l){const C=pv(m.h);(C.length!=0||m.i.length!=0)&&(w(m.ka,C),w(m.ka,m.i),m.h.i.length=0,y(m.i),m.i.length=0),m.l.ra()}}function Uv(m,C,L){var U=L instanceof ho?Fr(L):new ho(L);if(U.g!="")C&&(U.g=C+"."+U.g),bc(U,U.s);else{var K=l.location;U=K.protocol,C=C?C+"."+K.hostname:K.hostname,K=+K.port;var X=new ho(null);U&&_c(X,U),C&&(X.g=C),K&&bc(X,K),L&&(X.l=L),U=X}return L=m.D,C=m.ya,L&&C&&rt(U,L,C),rt(U,"VER",m.la),Ra(m,U),U}function Fv(m,C,L){if(C&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=m.Ca&&!m.pa?new gt(new xc({eb:L})):new gt(m.pa),C.Ha(m.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bv(){}t=Bv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tc(){}Tc.prototype.g=function(m,C){return new Nn(m,C)};function Nn(m,C){Se.call(this),this.g=new kv(C),this.l=m,this.h=C&&C.messageUrlParams||null,m=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(m?m["X-WebChannel-Content-Type"]=C.messageContentType:m={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(m?m["X-WebChannel-Client-Profile"]=C.va:m={"X-WebChannel-Client-Profile":C.va}),this.g.S=m,(m=C&&C.Sb)&&!b(m)&&(this.g.m=m),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!b(C)&&(this.g.D=C,m=this.h,m!==null&&C in m&&(m=this.h,C in m&&delete m[C])),this.j=new ns(this)}v(Nn,Se),Nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){gh(this.g)},Nn.prototype.o=function(m){var C=this.g;if(typeof m=="string"){var L={};L.__data__=m,m=L}else this.u&&(L={},L.__data__=Ct(m),m=L);C.i.push(new W8(C.Ya++,m)),C.G==3&&Cc(C)},Nn.prototype.N=function(){this.g.l=null,delete this.j,gh(this.g),delete this.g,Nn.aa.N.call(this)};function jv(m){Hn.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var C=m.__sm__;if(C){e:{for(const L in C){m=L;break e}m=void 0}(this.i=m)&&(m=this.i,C=C!==null&&m in C?C[m]:void 0),this.data=C}else this.data=m}v(jv,Hn);function $v(){qn.call(this),this.status=1}v($v,qn);function ns(m){this.g=m}v(ns,Bv),ns.prototype.ua=function(){ke(this.g,"a")},ns.prototype.ta=function(m){ke(this.g,new jv(m))},ns.prototype.sa=function(m){ke(this.g,new $v)},ns.prototype.ra=function(){ke(this.g,"b")},Tc.prototype.createWebChannel=Tc.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,r6=function(){return new Tc},n6=function(){return uo()},t6=gn,$1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gc.NO_ERROR=0,gc.TIMEOUT=8,gc.HTTP_ERROR=6,Ru=gc,iv.COMPLETE="complete",e6=iv,lt.EventType=kn,kn.OPEN="a",kn.CLOSE="b",kn.ERROR="c",kn.MESSAGE="d",Se.prototype.listen=Se.prototype.K,Xa=lt,gt.prototype.listenOnce=gt.prototype.L,gt.prototype.getLastError=gt.prototype.Ka,gt.prototype.getLastErrorCode=gt.prototype.Ba,gt.prototype.getStatus=gt.prototype.Z,gt.prototype.getResponseJson=gt.prototype.Oa,gt.prototype.getResponseText=gt.prototype.oa,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Ha,Zw=gt}).apply(typeof Zc<"u"?Zc:typeof self<"u"?self:typeof window<"u"?window:{});const Qy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ga="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=new Tm("@firebase/firestore");function ja(){return jo.logLevel}function ue(t,...e){if(jo.logLevel<=Le.DEBUG){const n=e.map(jm);jo.debug(`Firestore (${ga}): ${t}`,...n)}}function ci(t,...e){if(jo.logLevel<=Le.ERROR){const n=e.map(jm);jo.error(`Firestore (${ga}): ${t}`,...n)}}function Js(t,...e){if(jo.logLevel<=Le.WARN){const n=e.map(jm);jo.warn(`Firestore (${ga}): ${t}`,...n)}}function jm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(t="Unexpected state"){const e=`FIRESTORE (${ga}) INTERNAL ASSERTION FAILED: `+t;throw ci(e),new Error(e)}function Ye(t,e){t||be()}function Ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends Ur{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(rn.UNAUTHENTICATED))}shutdown(){}}class _P{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class bP{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ye(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let o=new Zr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Zr,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Zr)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ye(typeof r.accessToken=="string"),new i6(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string"),new rn(e)}}class wP{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class xP{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new wP(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class EP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SP{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ye(this.o===void 0);const r=o=>{o.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,ue("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ye(typeof n.token=="string"),this.R=n.token,new EP(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=IP(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function He(t,e){return t<e?-1:t>e?1:0}function Zs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ce(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mt.fromMillis(Date.now())}static fromDate(e){return Mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Mt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xe(e)}static min(){return new xe(new Mt(0,0))}static max(){return new xe(new Mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n,r){n===void 0?n=0:n>e.length&&be(),r===void 0?r=e.length-n:r>e.length-n&&be(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ul.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ul?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class st extends Ul{construct(e,n,r){return new st(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ce(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new st(n)}static emptyPath(){return new st([])}}const CP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qt extends Ul{construct(e,n,r){return new qt(e,n,r)}static isValidIdentifier(e){return CP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new qt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new ce(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new ce(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ce(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(r+=l,i++):(o(),i++)}if(o(),s)throw new ce(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qt(n)}static emptyPath(){return new qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(st.fromString(e))}static fromName(e){return new he(st.fromString(e).popFirst(5))}static empty(){return new he(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return st.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new st(e.slice()))}}function AP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=xe.fromTimestamp(r===1e9?new Mt(n+1,0):new Mt(n,r));return new Zi(i,he.empty(),e)}function TP(t){return new Zi(t.readTime,t.key,-1)}class Zi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Zi(xe.min(),he.empty(),-1)}static max(){return new Zi(xe.max(),he.empty(),-1)}}function kP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:He(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sc(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==RP)throw t;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ee((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ee?n:ee.resolve(n)}catch(n){return ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.reject(n)}static resolve(e){return new ee((n,r)=>{n(e)})}static reject(e){return new ee((n,r)=>{r(e)})}static waitFor(e){return new ee((n,r)=>{let i=0,o=0,s=!1;e.forEach(l=>{++i,l.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=ee.resolve(!1);for(const r of e)n=n.next(i=>i?ee.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new ee((r,i)=>{const o=e.length,s=new Array(o);let l=0;for(let c=0;c<o;c++){const d=c;n(e[d]).next(u=>{s[d]=u,++l,l===o&&r(s)},u=>i(u))}})}static doWhile(e,n){return new ee((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function PP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ac(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}$m.oe=-1;function Cf(t){return t==null}function Ad(t){return t===0&&1/t==-1/0}function LP(t){return typeof t=="number"&&Number.isInteger(t)&&!Ad(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function s6(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){this.comparator=e,this.root=n||zt.EMPTY}insert(e,n){return new pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eu(this.root,e,this.comparator,!1)}getReverseIterator(){return new eu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eu(this.root,e,this.comparator,!0)}}class eu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??zt.RED,this.left=i??zt.EMPTY,this.right=o??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new zt(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return zt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw be();const e=this.left.check();if(e!==this.right.check())throw be();return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw be()}get value(){throw be()}get color(){throw be()}get left(){throw be()}get right(){throw be()}copy(e,n,r,i,o){return this}insert(e,n,r){return new zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zy(this.data.getIterator())}getIteratorFrom(e){return new Zy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Gt(this.comparator);return n.data=e,n}}class Zy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.fields=e,e.sort(qt.comparator)}static empty(){return new On([])}unionWith(e){let n=new Gt(qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new On(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new a6("Invalid base64 string: "+o):o}}(e);return new Kt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const MP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eo(t){if(Ye(!!t),typeof t=="string"){let e=0;const n=MP.exec(t);if(Ye(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xt(t.seconds),nanos:xt(t.nanos)}}function xt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $o(t){return typeof t=="string"?Kt.fromBase64String(t):Kt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Hm(t){const e=t.mapValue.fields.__previous_value__;return zm(e)?Hm(e):e}function Fl(t){const e=eo(t.mapValue.fields.__local_write_time__.timestampValue);return new Mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,n,r,i,o,s,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d}}class Bl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Bl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Bl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function zo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zm(t)?4:VP(t)?9007199254740991:DP(t)?10:11:be()}function Dr(t,e){if(t===e)return!0;const n=zo(t);if(n!==zo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fl(t).isEqual(Fl(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=eo(i.timestampValue),l=eo(o.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return $o(i.bytesValue).isEqual($o(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return xt(i.geoPointValue.latitude)===xt(o.geoPointValue.latitude)&&xt(i.geoPointValue.longitude)===xt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return xt(i.integerValue)===xt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=xt(i.doubleValue),l=xt(o.doubleValue);return s===l?Ad(s)===Ad(l):isNaN(s)&&isNaN(l)}return!1}(t,e);case 9:return Zs(t.arrayValue.values||[],e.arrayValue.values||[],Dr);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},l=o.mapValue.fields||{};if(Jy(s)!==Jy(l))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(l[c]===void 0||!Dr(s[c],l[c])))return!1;return!0}(t,e);default:return be()}}function jl(t,e){return(t.values||[]).find(n=>Dr(n,e))!==void 0}function ea(t,e){if(t===e)return 0;const n=zo(t),r=zo(e);if(n!==r)return He(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return He(t.booleanValue,e.booleanValue);case 2:return function(o,s){const l=xt(o.integerValue||o.doubleValue),c=xt(s.integerValue||s.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return e3(t.timestampValue,e.timestampValue);case 4:return e3(Fl(t),Fl(e));case 5:return He(t.stringValue,e.stringValue);case 6:return function(o,s){const l=$o(o),c=$o(s);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const l=o.split("/"),c=s.split("/");for(let d=0;d<l.length&&d<c.length;d++){const u=He(l[d],c[d]);if(u!==0)return u}return He(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const l=He(xt(o.latitude),xt(s.latitude));return l!==0?l:He(xt(o.longitude),xt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return t3(t.arrayValue,e.arrayValue);case 10:return function(o,s){var l,c,d,u;const f=o.fields||{},h=s.fields||{},p=(l=f.value)===null||l===void 0?void 0:l.arrayValue,v=(c=h.value)===null||c===void 0?void 0:c.arrayValue,y=He(((d=p==null?void 0:p.values)===null||d===void 0?void 0:d.length)||0,((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0);return y!==0?y:t3(p,v)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===tu.mapValue&&s===tu.mapValue)return 0;if(o===tu.mapValue)return 1;if(s===tu.mapValue)return-1;const l=o.fields||{},c=Object.keys(l),d=s.fields||{},u=Object.keys(d);c.sort(),u.sort();for(let f=0;f<c.length&&f<u.length;++f){const h=He(c[f],u[f]);if(h!==0)return h;const p=ea(l[c[f]],d[u[f]]);if(p!==0)return p}return He(c.length,u.length)}(t.mapValue,e.mapValue);default:throw be()}}function e3(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return He(t,e);const n=eo(t),r=eo(e),i=He(n.seconds,r.seconds);return i!==0?i:He(n.nanos,r.nanos)}function t3(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=ea(n[i],r[i]);if(o)return o}return He(n.length,r.length)}function ta(t){return z1(t)}function z1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=eo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return $o(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=z1(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${z1(n.fields[s])}`;return i+"}"}(t.mapValue):be()}function n3(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function H1(t){return!!t&&"integerValue"in t}function qm(t){return!!t&&"arrayValue"in t}function r3(t){return!!t&&"nullValue"in t}function i3(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Nu(t){return!!t&&"mapValue"in t}function DP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function dl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Xo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=dl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=dl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function VP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Nu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=dl(n)}setAll(e){let n=qt.emptyPath(),r={},i=[];e.forEach((s,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}s?r[l.lastSegment()]=dl(s):i.push(l.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Nu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Nu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Xo(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new _n(dl(this.value))}}function l6(t){const e=[];return Xo(t.fields,(n,r)=>{const i=new qt([n]);if(Nu(r)){const o=l6(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new On(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n,r,i,o,s,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=l}static newInvalidDocument(e){return new sn(e,0,xe.min(),xe.min(),xe.min(),_n.empty(),0)}static newFoundDocument(e,n,r,i){return new sn(e,1,n,xe.min(),r,i,0)}static newNoDocument(e,n){return new sn(e,2,n,xe.min(),xe.min(),_n.empty(),0)}static newUnknownDocument(e,n){return new sn(e,3,n,xe.min(),xe.min(),_n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n){this.position=e,this.inclusive=n}}function o3(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=he.comparator(he.fromName(s.referenceValue),n.key):r=ea(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function s3(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Dr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,n="asc"){this.field=e,this.dir=n}}function UP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{}class Rt extends c6{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new BP(e,n,r):n==="array-contains"?new zP(e,r):n==="in"?new HP(e,r):n==="not-in"?new qP(e,r):n==="array-contains-any"?new WP(e,r):new Rt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jP(e,r):new $P(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ea(n,this.value)):n!==null&&zo(this.value)===zo(n)&&this.matchesComparison(ea(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pr extends c6{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new pr(e,n)}matches(e){return u6(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function u6(t){return t.op==="and"}function d6(t){return FP(t)&&u6(t)}function FP(t){for(const e of t.filters)if(e instanceof pr)return!1;return!0}function q1(t){if(t instanceof Rt)return t.field.canonicalString()+t.op.toString()+ta(t.value);if(d6(t))return t.filters.map(e=>q1(e)).join(",");{const e=t.filters.map(n=>q1(n)).join(",");return`${t.op}(${e})`}}function f6(t,e){return t instanceof Rt?function(r,i){return i instanceof Rt&&r.op===i.op&&r.field.isEqual(i.field)&&Dr(r.value,i.value)}(t,e):t instanceof pr?function(r,i){return i instanceof pr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,l)=>o&&f6(s,i.filters[l]),!0):!1}(t,e):void be()}function h6(t){return t instanceof Rt?function(n){return`${n.field.canonicalString()} ${n.op} ${ta(n.value)}`}(t):t instanceof pr?function(n){return n.op.toString()+" {"+n.getFilters().map(h6).join(" ,")+"}"}(t):"Filter"}class BP extends Rt{constructor(e,n,r){super(e,n,r),this.key=he.fromName(r.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class jP extends Rt{constructor(e,n){super(e,"in",n),this.keys=p6("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class $P extends Rt{constructor(e,n){super(e,"not-in",n),this.keys=p6("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function p6(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>he.fromName(r.referenceValue))}class zP extends Rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qm(n)&&jl(n.arrayValue,this.value)}}class HP extends Rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&jl(this.value.arrayValue,n)}}class qP extends Rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!jl(this.value.arrayValue,n)}}class WP extends Rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>jl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e,n=null,r=[],i=[],o=null,s=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=l,this.ue=null}}function a3(t,e=null,n=[],r=[],i=null,o=null,s=null){return new GP(t,e,n,r,i,o,s)}function Wm(t){const e=Ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>q1(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Cf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ta(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ta(r)).join(",")),e.ue=n}return e.ue}function Gm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!UP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!f6(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!s3(t.startAt,e.startAt)&&s3(t.endAt,e.endAt)}function W1(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n=null,r=[],i=[],o=null,s="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function YP(t,e,n,r,i,o,s,l){return new lc(t,e,n,r,i,o,s,l)}function Af(t){return new lc(t)}function l3(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function m6(t){return t.collectionGroup!==null}function fl(t){const e=Ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new Gt(qt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new kd(o,r))}),n.has(qt.keyField().canonicalString())||e.ce.push(new kd(qt.keyField(),r))}return e.ce}function Nr(t){const e=Ee(t);return e.le||(e.le=KP(e,fl(t))),e.le}function KP(t,e){if(t.limitType==="F")return a3(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new kd(i.field,o)});const n=t.endAt?new Td(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Td(t.startAt.position,t.startAt.inclusive):null;return a3(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function G1(t,e){const n=t.filters.concat([e]);return new lc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Y1(t,e,n){return new lc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Tf(t,e){return Gm(Nr(t),Nr(e))&&t.limitType===e.limitType}function g6(t){return`${Wm(Nr(t))}|lt:${t.limitType}`}function cs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>h6(i)).join(", ")}]`),Cf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ta(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ta(i)).join(",")),`Target(${r})`}(Nr(t))}; limitType=${t.limitType})`}function kf(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):he.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of fl(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,l,c){const d=o3(s,l,c);return s.inclusive?d<=0:d<0}(r.startAt,fl(r),i)||r.endAt&&!function(s,l,c){const d=o3(s,l,c);return s.inclusive?d>=0:d>0}(r.endAt,fl(r),i))}(t,e)}function XP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function v6(t){return(e,n)=>{let r=!1;for(const i of fl(t)){const o=QP(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function QP(t,e,n){const r=t.field.isKeyField()?he.comparator(e.key,n.key):function(o,s,l){const c=s.data.field(o),d=l.data.field(o);return c!==null&&d!==null?ea(c,d):be()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return be()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Xo(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return s6(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=new pt(he.comparator);function ui(){return JP}const y6=new pt(he.comparator);function Qa(...t){let e=y6;for(const n of t)e=e.insert(n.key,n);return e}function _6(t){let e=y6;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function xo(){return hl()}function b6(){return hl()}function hl(){return new va(t=>t.toString(),(t,e)=>t.isEqual(e))}const ZP=new pt(he.comparator),eL=new Gt(he.comparator);function Pe(...t){let e=eL;for(const n of t)e=e.add(n);return e}const tL=new Gt(He);function nL(){return tL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ad(e)?"-0":e}}function w6(t){return{integerValue:""+t}}function rL(t,e){return LP(e)?w6(e):Ym(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(){this._=void 0}}function iL(t,e,n){return t instanceof Rd?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&zm(o)&&(o=Hm(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof $l?E6(t,e):t instanceof zl?S6(t,e):function(i,o){const s=x6(i,o),l=c3(s)+c3(i.Pe);return H1(s)&&H1(i.Pe)?w6(l):Ym(i.serializer,l)}(t,e)}function oL(t,e,n){return t instanceof $l?E6(t,e):t instanceof zl?S6(t,e):n}function x6(t,e){return t instanceof Nd?function(r){return H1(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Rd extends Rf{}class $l extends Rf{constructor(e){super(),this.elements=e}}function E6(t,e){const n=I6(e);for(const r of t.elements)n.some(i=>Dr(i,r))||n.push(r);return{arrayValue:{values:n}}}class zl extends Rf{constructor(e){super(),this.elements=e}}function S6(t,e){let n=I6(e);for(const r of t.elements)n=n.filter(i=>!Dr(i,r));return{arrayValue:{values:n}}}class Nd extends Rf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function c3(t){return xt(t.integerValue||t.doubleValue)}function I6(t){return qm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function sL(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof $l&&i instanceof $l||r instanceof zl&&i instanceof zl?Zs(r.elements,i.elements,Dr):r instanceof Nd&&i instanceof Nd?Dr(r.Pe,i.Pe):r instanceof Rd&&i instanceof Rd}(t.transform,e.transform)}class aL{constructor(e,n){this.version=e,this.transformResults=n}}class Qn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nf{}function C6(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Km(t.key,Qn.none()):new cc(t.key,t.data,Qn.none());{const n=t.data,r=_n.empty();let i=new Gt(qt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new co(t.key,r,new On(i.toArray()),Qn.none())}}function lL(t,e,n){t instanceof cc?function(i,o,s){const l=i.value.clone(),c=d3(i.fieldTransforms,o,s.transformResults);l.setAll(c),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):t instanceof co?function(i,o,s){if(!Pu(i.precondition,o))return void o.convertToUnknownDocument(s.version);const l=d3(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(A6(i)),c.setAll(l),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function pl(t,e,n,r){return t instanceof cc?function(o,s,l,c){if(!Pu(o.precondition,s))return l;const d=o.value.clone(),u=f3(o.fieldTransforms,c,s);return d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof co?function(o,s,l,c){if(!Pu(o.precondition,s))return l;const d=f3(o.fieldTransforms,c,s),u=s.data;return u.setAll(A6(o)),u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(o,s,l){return Pu(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l}(t,e,n)}function cL(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=x6(r.transform,i||null);o!=null&&(n===null&&(n=_n.empty()),n.set(r.field,o))}return n||null}function u3(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Zs(r,i,(o,s)=>sL(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class cc extends Nf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class co extends Nf{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function A6(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function d3(t,e,n){const r=new Map;Ye(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,l=e.data.field(o.field);r.set(o.field,oL(s,l,n[i]))}return r}function f3(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,iL(o,s,e))}return r}class Km extends Nf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uL extends Nf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&lL(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=pl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=pl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=b6();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let l=this.applyToLocalView(s,o.mutatedFields);l=n.has(i.key)?null:l;const c=C6(s,l);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&Zs(this.mutations,e.mutations,(n,r)=>u3(n,r))&&Zs(this.baseMutations,e.baseMutations,(n,r)=>u3(n,r))}}class Xm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ye(e.mutations.length===r.length);let i=function(){return ZP}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new Xm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fL=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At,Ue;function pL(t){switch(t){default:return be();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0}}function T6(t){if(t===void 0)return ci("GRPC error has no .code"),Z.UNKNOWN;switch(t){case At.OK:return Z.OK;case At.CANCELLED:return Z.CANCELLED;case At.UNKNOWN:return Z.UNKNOWN;case At.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case At.INTERNAL:return Z.INTERNAL;case At.UNAVAILABLE:return Z.UNAVAILABLE;case At.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case At.NOT_FOUND:return Z.NOT_FOUND;case At.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case At.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case At.ABORTED:return Z.ABORTED;case At.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case At.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case At.DATA_LOSS:return Z.DATA_LOSS;default:return be()}}(Ue=At||(At={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=new ko([4294967295,4294967295],0);function h3(t){const e=mL().encode(t),n=new Jw;return n.update(e),new Uint8Array(n.digest())}function p3(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ko([n,r],0),new ko([i,o],0)]}class Qm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ja(`Invalid padding: ${n}`);if(r<0)throw new Ja(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ja(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ja(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ko.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ko.fromNumber(r)));return i.compare(gL)===1&&(i=new ko([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=h3(e),[r,i]=p3(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new Qm(o,i,n);return r.forEach(l=>s.insert(l)),s}insert(e){if(this.Ie===0)return;const n=h3(e),[r,i]=p3(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ja extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,uc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Pf(xe.min(),i,new pt(He),ui(),Pe())}}class uc{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new uc(r,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class k6{constructor(e,n){this.targetId=e,this.me=n}}class R6{constructor(e,n,r=Kt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class m3{constructor(){this.fe=0,this.ge=v3(),this.pe=Kt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Pe(),n=Pe(),r=Pe();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:be()}}),new uc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=v3()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class vL{constructor(e){this.Le=e,this.Be=new Map,this.ke=ui(),this.qe=g3(),this.Qe=new pt(He)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:be()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(W1(o))if(r===0){const s=new he(o.path);this.Ue(n,s,sn.newNoDocument(s,xe.min()))}else Ye(r===1);else{const s=this.Ye(n);if(s!==r){const l=this.Ze(e),c=l?this.Xe(l,e,s):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,l;try{s=$o(r).toUint8Array()}catch(c){if(c instanceof a6)return Js("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Qm(s,i,o)}catch(c){return Js(c instanceof Ja?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.tt(),l=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,s)=>{const l=this.Je(s);if(l){if(o.current&&W1(l.target)){const c=new he(l.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,sn.newNoDocument(c,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=Pe();this.qe.forEach((o,s)=>{let l=!0;s.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new Pf(e,n,this.Qe,this.ke,r);return this.ke=ui(),this.qe=g3(),this.Qe=new pt(He),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new m3,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Gt(He),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new m3),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function g3(){return new pt(he.comparator)}function v3(){return new pt(he.comparator)}const yL={asc:"ASCENDING",desc:"DESCENDING"},_L={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bL={and:"AND",or:"OR"};class wL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function K1(t,e){return t.useProto3Json||Cf(e)?e:{value:e}}function Pd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function N6(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xL(t,e){return Pd(t,e.toTimestamp())}function Pr(t){return Ye(!!t),xe.fromTimestamp(function(n){const r=eo(n);return new Mt(r.seconds,r.nanos)}(t))}function Jm(t,e){return X1(t,e).canonicalString()}function X1(t,e){const n=function(i){return new st(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function P6(t){const e=st.fromString(t);return Ye(V6(e)),e}function Q1(t,e){return Jm(t.databaseId,e.path)}function cp(t,e){const n=P6(e);if(n.get(1)!==t.databaseId.projectId)throw new ce(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ce(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(M6(n))}function L6(t,e){return Jm(t.databaseId,e)}function EL(t){const e=P6(t);return e.length===4?st.emptyPath():M6(e)}function J1(t){return new st(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function M6(t){return Ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function y3(t,e,n){return{name:Q1(t,e),fields:n.value.mapValue.fields}}function SL(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:be()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,u){return d.useProto3Json?(Ye(u===void 0||typeof u=="string"),Kt.fromBase64String(u||"")):(Ye(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Kt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&function(d){const u=d.code===void 0?Z.UNKNOWN:T6(d.code);return new ce(u,d.message||"")}(s);n=new R6(r,i,o,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=cp(t,r.document.name),o=Pr(r.document.updateTime),s=r.document.createTime?Pr(r.document.createTime):xe.min(),l=new _n({mapValue:{fields:r.document.fields}}),c=sn.newFoundDocument(i,o,s,l),d=r.targetIds||[],u=r.removedTargetIds||[];n=new Lu(d,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=cp(t,r.document),o=r.readTime?Pr(r.readTime):xe.min(),s=sn.newNoDocument(i,o),l=r.removedTargetIds||[];n=new Lu([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=cp(t,r.document),o=r.removedTargetIds||[];n=new Lu([],o,i,null)}else{if(!("filter"in e))return be();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new hL(i,o),l=r.targetId;n=new k6(l,s)}}return n}function IL(t,e){let n;if(e instanceof cc)n={update:y3(t,e.key,e.value)};else if(e instanceof Km)n={delete:Q1(t,e.key)};else if(e instanceof co)n={update:y3(t,e.key,e.data),updateMask:ML(e.fieldMask)};else{if(!(e instanceof uL))return be();n={verify:Q1(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const l=s.transform;if(l instanceof Rd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof $l)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof zl)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Nd)return{fieldPath:s.field.canonicalString(),increment:l.Pe};throw be()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:xL(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:be()}(t,e.precondition)),n}function CL(t,e){return t&&t.length>0?(Ye(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Pr(i.updateTime):Pr(o);return s.isEqual(xe.min())&&(s=Pr(o)),new aL(s,i.transformResults||[])}(n,e))):[]}function AL(t,e){return{documents:[L6(t,e.path)]}}function TL(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=L6(t,i);const o=function(d){if(d.length!==0)return D6(pr.create(d,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(d){if(d.length!==0)return d.map(u=>function(h){return{field:us(h.field),direction:NL(h.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const l=K1(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i}}function kL(t){let e=EL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ye(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];n.where&&(o=function(f){const h=O6(f);return h instanceof pr&&d6(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(f){return f.map(h=>function(v){return new kd(ds(v.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(h))}(n.orderBy));let l=null;n.limit&&(l=function(f){let h;return h=typeof f=="object"?f.value:f,Cf(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(f){const h=!!f.before,p=f.values||[];return new Td(p,h)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const h=!f.before,p=f.values||[];return new Td(p,h)}(n.endAt)),YP(e,i,s,o,l,"F",c,d)}function RL(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function O6(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ds(n.unaryFilter.field);return Rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ds(n.unaryFilter.field);return Rt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ds(n.unaryFilter.field);return Rt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=ds(n.unaryFilter.field);return Rt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return be()}}(t):t.fieldFilter!==void 0?function(n){return Rt.create(ds(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return be()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return pr.create(n.compositeFilter.filters.map(r=>O6(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return be()}}(n.compositeFilter.op))}(t):be()}function NL(t){return yL[t]}function PL(t){return _L[t]}function LL(t){return bL[t]}function us(t){return{fieldPath:t.canonicalString()}}function ds(t){return qt.fromServerFormat(t.fieldPath)}function D6(t){return t instanceof Rt?function(n){if(n.op==="=="){if(i3(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NAN"}};if(r3(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(i3(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NOT_NAN"}};if(r3(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:us(n.field),op:PL(n.op),value:n.value}}}(t):t instanceof pr?function(n){const r=n.getFilters().map(i=>D6(i));return r.length===1?r[0]:{compositeFilter:{op:LL(n.op),filters:r}}}(t):be()}function ML(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function V6(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,n,r,i,o=xe.min(),s=xe.min(),l=Kt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Mi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e){this.ct=e}}function DL(t){const e=kL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Y1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(){this.un=new UL}addToCollectionParentIndex(e,n){return this.un.add(n),ee.resolve()}getCollectionParents(e,n){return ee.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ee.resolve()}deleteFieldIndex(e,n){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,n){return ee.resolve()}getDocumentsMatchingTarget(e,n){return ee.resolve(null)}getIndexType(e,n){return ee.resolve(0)}getFieldIndexes(e,n){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,n){return ee.resolve(Zi.min())}getMinOffsetFromCollectionGroup(e,n){return ee.resolve(Zi.min())}updateCollectionGroup(e,n,r){return ee.resolve()}updateIndexEntries(e,n){return ee.resolve()}}class UL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Gt(st.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Gt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new na(0)}static kn(){return new na(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(){this.changes=new va(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ee.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&pl(r.mutation,i,On.empty(),Mt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Pe()){const i=xo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Qa();return o.forEach((l,c)=>{s=s.insert(l,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=xo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Pe()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,l)=>{n.set(s,l)})})}computeViews(e,n,r,i){let o=ui();const s=hl(),l=function(){return hl()}();return n.forEach((c,d)=>{const u=r.get(d.key);i.has(d.key)&&(u===void 0||u.mutation instanceof co)?o=o.insert(d.key,d):u!==void 0?(s.set(d.key,u.mutation.getFieldMask()),pl(u.mutation,d,u.mutation.getFieldMask(),Mt.now())):s.set(d.key,On.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((d,u)=>s.set(d,u)),n.forEach((d,u)=>{var f;return l.set(d,new BL(u,(f=s.get(d))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,n){const r=hl();let i=new pt((s,l)=>s-l),o=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const l of s)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let u=r.get(c)||On.empty();u=l.applyToLocalView(d,u),r.set(c,u);const f=(i.get(l.batchId)||Pe()).add(c);i=i.insert(l.batchId,f)})}).next(()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,u=c.value,f=b6();u.forEach(h=>{if(!o.has(h)){const p=C6(n.get(h),r.get(h));p!==null&&f.set(h,p),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,f))}return ee.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return he.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):m6(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):ee.resolve(xo());let l=-1,c=o;return s.next(d=>ee.forEach(d,(u,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),o.get(u)?ee.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,c,d,Pe())).next(u=>({batchId:l,changes:_6(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(r=>{let i=Qa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=Qa();return this.indexManager.getCollectionParents(e,o).next(l=>ee.forEach(l,c=>{const d=function(f,h){return new lc(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(u=>{u.forEach((f,h)=>{s=s.insert(f,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,d)=>{const u=d.getKey();s.get(u)===null&&(s=s.insert(u,sn.newInvalidDocument(u)))});let l=Qa();return s.forEach((c,d)=>{const u=o.get(c);u!==void 0&&pl(u.mutation,d,On.empty(),Mt.now()),kf(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ee.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Pr(i.createTime)}}(n)),ee.resolve()}getNamedQuery(e,n){return ee.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:DL(i.bundledQuery),readTime:Pr(i.readTime)}}(n)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(){this.overlays=new pt(he.comparator),this.Ir=new Map}getOverlay(e,n){return ee.resolve(this.overlays.get(n))}getOverlays(e,n){const r=xo();return ee.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),ee.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),ee.resolve()}getOverlaysForCollection(e,n,r){const i=xo(),o=n.length+1,s=new he(n.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return ee.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new pt((d,u)=>d-u);const s=this.overlays.getIterator();for(;s.hasNext();){const d=s.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let u=o.get(d.largestBatchId);u===null&&(u=xo(),o=o.insert(d.largestBatchId,u)),u.set(d.getKey(),d)}}const l=xo(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,u)=>l.set(d,u)),!(l.size()>=i)););return ee.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new fL(n,r));let o=this.Ir.get(n);o===void 0&&(o=Pe(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(){this.Tr=new Gt(Ot.Er),this.dr=new Gt(Ot.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ot(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ot(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new he(new st([])),r=new Ot(n,e),i=new Ot(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new he(new st([])),r=new Ot(n,e),i=new Ot(n,e+1);let o=Pe();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Ot(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ot{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return he.comparator(e.key,n.key)||He(e.wr,n.wr)}static Ar(e,n){return He(e.wr,n.wr)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Gt(Ot.Er)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new dL(o,n,r,i);this.mutationQueue.push(s);for(const l of i)this.br=this.br.add(new Ot(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ee.resolve(s)}lookupMutationBatch(e,n){return ee.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),o=i<0?0:i;return ee.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ot(n,0),i=new Ot(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{const l=this.Dr(s.wr);o.push(l)}),ee.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Gt(He);return n.forEach(i=>{const o=new Ot(i,0),s=new Ot(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],l=>{r=r.add(l.wr)})}),ee.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;he.isDocumentKey(o)||(o=o.child(""));const s=new Ot(new he(o),0);let l=new Gt(He);return this.br.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(c.wr)),!0)},s),ee.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ye(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ee.forEach(n.mutations,i=>{const o=new Ot(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ot(n,0),i=this.br.firstAfterOrEqual(r);return ee.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e){this.Mr=e,this.docs=function(){return new pt(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ee.resolve(r?r.document.mutableCopy():sn.newInvalidDocument(n))}getEntries(e,n){let r=ui();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():sn.newInvalidDocument(i))}),ee.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=ui();const s=n.path,l=new he(s.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:u}}=c.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||kP(TP(u),r)<=0||(i.has(u.key)||kf(n,u))&&(o=o.insert(u.key,u.mutableCopy()))}return ee.resolve(o)}getAllFromCollectionGroup(e,n,r,i){be()}Or(e,n){return ee.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new GL(this)}getSize(e){return ee.resolve(this.size)}}class GL extends FL{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),ee.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e){this.persistence=e,this.Nr=new va(n=>Wm(n),Gm),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Zm,this.targetCount=0,this.kr=na.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),ee.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new na(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ee.resolve()}updateTargetData(e,n){return this.Kn(n),ee.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((s,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),ee.waitFor(o).next(()=>i)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return ee.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),ee.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),ee.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ee.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return ee.resolve(r)}containsKey(e,n){return ee.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e,n){this.qr={},this.overlays={},this.Qr=new $m(0),this.Kr=!1,this.Kr=!0,this.$r=new HL,this.referenceDelegate=e(this),this.Ur=new YL(this),this.indexManager=new VL,this.remoteDocumentCache=function(i){return new WL(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new OL(n),this.Gr=new $L(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new zL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new qL(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ue("MemoryPersistence","Starting transaction:",e);const i=new XL(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return ee.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class XL extends NP{constructor(e){super(),this.currentSequenceNumber=e}}class eg{constructor(e){this.persistence=e,this.Jr=new Zm,this.Yr=null}static Zr(e){return new eg(e)}get Xr(){if(this.Yr)return this.Yr;throw be()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),ee.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ee.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.Xr,r=>{const i=he.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,xe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ee.or([()=>ee.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Pe(),i=Pe();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new tg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ek()?8:PP(cn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new QL;return this.Xi(e,n,s).next(l=>{if(o.result=l,this.zi)return this.es(e,n,s,l.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ja()<=Le.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",cs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ee.resolve()):(ja()<=Le.DEBUG&&ue("QueryEngine","Query:",cs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ja()<=Le.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",cs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nr(n))):ee.resolve())}Yi(e,n){if(l3(n))return ee.resolve(null);let r=Nr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Y1(n,null,"F"),r=Nr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=Pe(...o);return this.Ji.getDocuments(e,s).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.ts(n,l);return this.ns(n,d,s,c.readTime)?this.Yi(e,Y1(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,r,i){return l3(n)||i.isEqual(xe.min())?ee.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const s=this.ts(n,o);return this.ns(n,s,r,i)?ee.resolve(null):(ja()<=Le.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),cs(n)),this.rs(e,s,n,AP(i,-1)).next(l=>l))})}ts(e,n){let r=new Gt(v6(e));return n.forEach((i,o)=>{kf(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return ja()<=Le.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",cs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Zi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new pt(He),this._s=new va(o=>Wm(o),Gm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jL(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function eM(t,e,n,r){return new ZL(t,e,n,r)}async function U6(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],l=[];let c=Pe();for(const d of i){s.push(d.batchId);for(const u of d.mutations)c=c.add(u.key)}for(const d of o){l.push(d.batchId);for(const u of d.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:s,addedBatchIds:l}))})})}function tM(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,d,u){const f=d.batch,h=f.keys();let p=ee.resolve();return h.forEach(v=>{p=p.next(()=>u.getEntry(c,v)).next(y=>{const w=d.docVersions.get(v);Ye(w!==null),y.version.compareTo(w)<0&&(f.applyToRemoteDocument(y,d),y.isValidDocument()&&(y.setReadTime(d.commitVersion),u.addEntry(y)))})}),p.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Pe();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function F6(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function nM(t,e){const n=Ee(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((u,f)=>{const h=i.get(f);if(!h)return;l.push(n.Ur.removeMatchingKeys(o,u.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(o,u.addedDocuments,f)));let p=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(Kt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),i=i.insert(f,p),function(y,w,g){return y.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(h,p,u)&&l.push(n.Ur.updateTargetData(o,p))});let c=ui(),d=Pe();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(o,u))}),l.push(rM(o,s,e.documentUpdates).next(u=>{c=u.Ps,d=u.Is})),!r.isEqual(xe.min())){const u=n.Ur.getLastRemoteSnapshotVersion(o).next(f=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));l.push(u)}return ee.waitFor(l).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,d)).next(()=>c)}).then(o=>(n.os=i,o))}function rM(t,e,n){let r=Pe(),i=Pe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=ui();return n.forEach((l,c)=>{const d=o.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(xe.min())?(e.removeEntry(l,c.readTime),s=s.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),s=s.insert(l,c)):ue("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function iM(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oM(t,e){const n=Ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,ee.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new Mi(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Z1(t,e,n){const r=Ee(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!ac(s))throw s;ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function _3(t,e,n){const r=Ee(t);let i=xe.min(),o=Pe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,d,u){const f=Ee(c),h=f._s.get(u);return h!==void 0?ee.resolve(f.os.get(h)):f.Ur.getTargetData(d,u)}(r,s,Nr(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,l.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:xe.min(),n?o:Pe())).next(l=>(sM(r,XP(e),l),{documents:l,Ts:o})))}function sM(t,e,n){let r=t.us.get(e)||xe.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}class b3{constructor(){this.activeTargetIds=nL()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aM{constructor(){this.so=new b3,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new b3,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nu=null;function up(){return nu===null?nu=function(){return 268435456+Math.round(2147483648*Math.random())}():nu++,"0x"+nu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class dM extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){const l=up(),c=this.xo(n,r.toUriEncodedString());ue("RestConnection",`Sending RPC '${n}' ${l}:`,c,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,o,s),this.No(n,c,d,i).then(u=>(ue("RestConnection",`Received RPC '${n}' ${l}: `,u),u),u=>{throw Js("RestConnection",`RPC '${n}' ${l} failed with error: `,u,"url: ",c,"request:",i),u})}Lo(n,r,i,o,s,l){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ga}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){const i=cM[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=up();return new Promise((s,l)=>{const c=new Zw;c.setWithCredentials(!0),c.listenOnce(e6.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ru.NO_ERROR:const u=c.getResponseJson();ue(en,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(u)),s(u);break;case Ru.TIMEOUT:ue(en,`RPC '${e}' ${o} timed out`),l(new ce(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Ru.HTTP_ERROR:const f=c.getStatus();if(ue(en,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);const p=h==null?void 0:h.error;if(p&&p.status&&p.message){const v=function(w){const g=w.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(g)>=0?g:Z.UNKNOWN}(p.status);l(new ce(v,p.message))}else l(new ce(Z.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new ce(Z.UNAVAILABLE,"Connection failed."));break;default:be()}}finally{ue(en,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);ue(en,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",d,r,15)})}Bo(e,n,r){const i=up(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=r6(),l=n6(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const u=o.join("");ue(en,`Creating RPC '${e}' stream ${i}: ${u}`,c);const f=s.createWebChannel(u,c);let h=!1,p=!1;const v=new uM({Io:w=>{p?ue(en,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(h||(ue(en,`Opening RPC '${e}' stream ${i} transport.`),f.open(),h=!0),ue(en,`RPC '${e}' stream ${i} sending:`,w),f.send(w))},To:()=>f.close()}),y=(w,g,b)=>{w.listen(g,_=>{try{b(_)}catch(E){setTimeout(()=>{throw E},0)}})};return y(f,Xa.EventType.OPEN,()=>{p||(ue(en,`RPC '${e}' stream ${i} transport opened.`),v.yo())}),y(f,Xa.EventType.CLOSE,()=>{p||(p=!0,ue(en,`RPC '${e}' stream ${i} transport closed`),v.So())}),y(f,Xa.EventType.ERROR,w=>{p||(p=!0,Js(en,`RPC '${e}' stream ${i} transport errored:`,w),v.So(new ce(Z.UNAVAILABLE,"The operation could not be completed")))}),y(f,Xa.EventType.MESSAGE,w=>{var g;if(!p){const b=w.data[0];Ye(!!b);const _=b,E=_.error||((g=_[0])===null||g===void 0?void 0:g.error);if(E){ue(en,`RPC '${e}' stream ${i} received error:`,E);const A=E.status;let k=function(S){const R=At[S];if(R!==void 0)return T6(R)}(A),I=E.message;k===void 0&&(k=Z.INTERNAL,I="Unknown error status: "+A+" with message "+E.message),p=!0,v.So(new ce(k,I)),f.close()}else ue(en,`RPC '${e}' stream ${i} received:`,b),v.bo(b)}}),y(l,t6.STAT_EVENT,w=>{w.stat===$1.PROXY?ue(en,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===$1.NOPROXY&&ue(en,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}function dp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(t){return new wL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,n,r,i,o,s,l,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new B6(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(ci(n.toString()),ci("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ce(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fM extends j6{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=SL(this.serializer,e),r=function(o){if(!("targetChange"in o))return xe.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?xe.min():s.readTime?Pr(s.readTime):xe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=J1(this.serializer),n.addTarget=function(o,s){let l;const c=s.target;if(l=W1(c)?{documents:AL(o,c)}:{query:TL(o,c)._t},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=N6(o,s.resumeToken);const d=K1(o,s.expectedCount);d!==null&&(l.expectedCount=d)}else if(s.snapshotVersion.compareTo(xe.min())>0){l.readTime=Pd(o,s.snapshotVersion.toTimestamp());const d=K1(o,s.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=RL(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=J1(this.serializer),n.removeTarget=e,this.a_(n)}}class hM extends j6{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ye(!!e.streamToken),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=CL(e.writeResults,e.commitTime),r=Pr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=J1(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>IL(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ce(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,X1(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(Z.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.Lo(e,X1(n,r),i,s,l,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ce(Z.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class mM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ci(n),this.D_=!1):ue("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(async()=>{Qo(this)&&(ue("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=Ee(c);d.L_.add(4),await dc(d),d.q_.set("Unknown"),d.L_.delete(4),await Mf(d)}(this))})}),this.q_=new mM(r,i)}}async function Mf(t){if(Qo(t))for(const e of t.B_)await e(!0)}async function dc(t){for(const e of t.B_)await e(!1)}function $6(t,e){const n=Ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),og(n)?ig(n):ya(n).r_()&&rg(n,e))}function ng(t,e){const n=Ee(t),r=ya(n);n.N_.delete(e),r.r_()&&z6(n,e),n.N_.size===0&&(r.r_()?r.o_():Qo(n)&&n.q_.set("Unknown"))}function rg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ya(t).A_(e)}function z6(t,e){t.Q_.xe(e),ya(t).R_(e)}function ig(t){t.Q_=new vL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ya(t).start(),t.q_.v_()}function og(t){return Qo(t)&&!ya(t).n_()&&t.N_.size>0}function Qo(t){return Ee(t).L_.size===0}function H6(t){t.Q_=void 0}async function vM(t){t.q_.set("Online")}async function yM(t){t.N_.forEach((e,n)=>{rg(t,e)})}async function _M(t,e){H6(t),og(t)?(t.q_.M_(e),ig(t)):t.q_.set("Unknown")}async function bM(t,e,n){if(t.q_.set("Online"),e instanceof R6&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const l of o.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ld(t,r)}else if(e instanceof Lu?t.Q_.Ke(e):e instanceof k6?t.Q_.He(e):t.Q_.We(e),!n.isEqual(xe.min()))try{const r=await F6(t.localStore);n.compareTo(r)>=0&&await function(o,s){const l=o.Q_.rt(s);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const u=o.N_.get(d);u&&o.N_.set(d,u.withResumeToken(c.resumeToken,s))}}),l.targetMismatches.forEach((c,d)=>{const u=o.N_.get(c);if(!u)return;o.N_.set(c,u.withResumeToken(Kt.EMPTY_BYTE_STRING,u.snapshotVersion)),z6(o,c);const f=new Mi(u.target,c,d,u.sequenceNumber);rg(o,f)}),o.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){ue("RemoteStore","Failed to raise snapshot:",r),await Ld(t,r)}}async function Ld(t,e,n){if(!ac(e))throw e;t.L_.add(1),await dc(t),t.q_.set("Offline"),n||(n=()=>F6(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ue("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Mf(t)})}function q6(t,e){return e().catch(n=>Ld(t,n,e))}async function Of(t){const e=Ee(t),n=to(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;wM(e);)try{const i=await iM(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,xM(e,i)}catch(i){await Ld(e,i)}W6(e)&&G6(e)}function wM(t){return Qo(t)&&t.O_.length<10}function xM(t,e){t.O_.push(e);const n=to(t);n.r_()&&n.V_&&n.m_(e.mutations)}function W6(t){return Qo(t)&&!to(t).n_()&&t.O_.length>0}function G6(t){to(t).start()}async function EM(t){to(t).p_()}async function SM(t){const e=to(t);for(const n of t.O_)e.m_(n.mutations)}async function IM(t,e,n){const r=t.O_.shift(),i=Xm.from(r,e,n);await q6(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Of(t)}async function CM(t,e){e&&to(t).V_&&await async function(r,i){if(function(s){return pL(s)&&s!==Z.ABORTED}(i.code)){const o=r.O_.shift();to(r).s_(),await q6(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Of(r)}}(t,e),W6(t)&&G6(t)}async function x3(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),ue("RemoteStore","RemoteStore received new credentials");const r=Qo(n);n.L_.add(3),await dc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Mf(n)}async function AM(t,e){const n=Ee(t);e?(n.L_.delete(2),await Mf(n)):e||(n.L_.add(2),await dc(n),n.q_.set("Unknown"))}function ya(t){return t.K_||(t.K_=function(n,r,i){const o=Ee(n);return o.w_(),new fM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:vM.bind(null,t),Ro:yM.bind(null,t),mo:_M.bind(null,t),d_:bM.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),og(t)?ig(t):t.q_.set("Unknown")):(await t.K_.stop(),H6(t))})),t.K_}function to(t){return t.U_||(t.U_=function(n,r,i){const o=Ee(n);return o.w_(),new hM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:EM.bind(null,t),mo:CM.bind(null,t),f_:SM.bind(null,t),g_:IM.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Of(t)):(await t.U_.stop(),t.O_.length>0&&(ue("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,l=new sg(e,n,s,i,o);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ag(t,e){if(ci("AsyncQueue",`${e}: ${t}`),ac(t))return new ce(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this.comparator=e?(n,r)=>e(n,r)||he.comparator(n.key,r.key):(n,r)=>he.comparator(n.key,r.key),this.keyedMap=Qa(),this.sortedSet=new pt(this.comparator)}static emptySet(e){return new js(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof js)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new js;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(){this.W_=new pt(he.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):be():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ra{constructor(e,n,r,i,o,s,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(l=>{s.push({type:0,doc:l})}),new ra(e,n,js.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class kM{constructor(){this.queries=S3(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Ee(n),o=i.queries;i.queries=S3(),o.forEach((s,l)=>{for(const c of l.j_)c.onError(r)})})(this,new ce(Z.ABORTED,"Firestore shutting down"))}}function S3(){return new va(t=>g6(t),Tf)}async function lg(t,e){const n=Ee(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new TM,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const l=ag(s,`Initialization of query '${cs(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&ug(n)}async function cg(t,e){const n=Ee(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function RM(t,e){const n=Ee(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const l of s.j_)l.X_(i)&&(r=!0);s.z_=i}}r&&ug(n)}function NM(t,e,n){const r=Ee(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function ug(t){t.Y_.forEach(e=>{e.next()})}var e0,I3;(I3=e0||(e0={})).ea="default",I3.Cache="cache";class dg{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ra(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==e0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e){this.key=e}}class K6{constructor(e){this.key=e}}class PM{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Pe(),this.mutatedKeys=Pe(),this.Aa=v6(e),this.Ra=new js(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new E3,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,f)=>{const h=i.get(u),p=kf(this.query,f)?f:null,v=!!h&&this.mutatedKeys.has(h.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let w=!1;h&&p?h.data.isEqual(p.data)?v!==y&&(r.track({type:3,doc:p}),w=!0):this.ga(h,p)||(r.track({type:2,doc:p}),w=!0,(c&&this.Aa(p,c)>0||d&&this.Aa(p,d)<0)&&(l=!0)):!h&&p?(r.track({type:0,doc:p}),w=!0):h&&!p&&(r.track({type:1,doc:h}),w=!0,(c||d)&&(l=!0)),w&&(p?(s=s.add(p),o=y?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),r.track({type:1,doc:u})}return{Ra:s,fa:r,ns:l,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((u,f)=>function(p,v){const y=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be()}};return y(p)-y(v)}(u.type,f.type)||this.Aa(u.doc,f.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,d=c!==this.Ea;return this.Ea=c,s.length!==0||d?{snapshot:new ra(this.query,e.Ra,o,s,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new E3,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new K6(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Y6(r))}),n}ba(e){this.Ta=e.Ts,this.da=Pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ra.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class LM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class MM{constructor(e){this.key=e,this.va=!1}}class OM{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new va(l=>g6(l),Tf),this.Ma=new Map,this.xa=new Set,this.Oa=new pt(he.comparator),this.Na=new Map,this.La=new Zm,this.Ba={},this.ka=new Map,this.qa=na.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function DM(t,e,n=!0){const r=tx(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await X6(r,e,n,!0),i}async function VM(t,e){const n=tx(t);await X6(n,e,!0,!1)}async function X6(t,e,n,r){const i=await oM(t.localStore,Nr(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let l;return r&&(l=await UM(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&$6(t.remoteStore,i),l}async function UM(t,e,n,r,i){t.Ka=(f,h,p)=>async function(y,w,g,b){let _=w.view.ma(g);_.ns&&(_=await _3(y.localStore,w.query,!1).then(({documents:I})=>w.view.ma(I,_)));const E=b&&b.targetChanges.get(w.targetId),A=b&&b.targetMismatches.get(w.targetId)!=null,k=w.view.applyChanges(_,y.isPrimaryClient,E,A);return A3(y,w.targetId,k.wa),k.snapshot}(t,f,h,p);const o=await _3(t.localStore,e,!0),s=new PM(e,o.Ts),l=s.ma(o.documents),c=uc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=s.applyChanges(l,t.isPrimaryClient,c);A3(t,n,d.wa);const u=new LM(e,n,s);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function FM(t,e,n){const r=Ee(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Tf(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Z1(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ng(r.remoteStore,i.targetId),t0(r,i.targetId)}).catch(sc)):(t0(r,i.targetId),await Z1(r.localStore,i.targetId,!0))}async function BM(t,e){const n=Ee(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ng(n.remoteStore,r.targetId))}async function jM(t,e,n){const r=YM(t);try{const i=await function(s,l){const c=Ee(s),d=Mt.now(),u=l.reduce((p,v)=>p.add(v.key),Pe());let f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let v=ui(),y=Pe();return c.cs.getEntries(p,u).next(w=>{v=w,v.forEach((g,b)=>{b.isValidDocument()||(y=y.add(g))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,v)).next(w=>{f=w;const g=[];for(const b of l){const _=cL(b,f.get(b.key).overlayedDocument);_!=null&&g.push(new co(b.key,_,l6(_.value.mapValue),Qn.exists(!0)))}return c.mutationQueue.addMutationBatch(p,d,g,l)}).next(w=>{h=w;const g=w.applyToLocalDocumentSet(f,y);return c.documentOverlayCache.saveOverlays(p,w.batchId,g)})}).then(()=>({batchId:h.batchId,changes:_6(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,c){let d=s.Ba[s.currentUser.toKey()];d||(d=new pt(He)),d=d.insert(l,c),s.Ba[s.currentUser.toKey()]=d}(r,i.batchId,n),await fc(r,i.changes),await Of(r.remoteStore)}catch(i){const o=ag(i,"Failed to persist write");n.reject(o)}}async function Q6(t,e){const n=Ee(t);try{const r=await nM(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Na.get(o);s&&(Ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Ye(s.va):i.removedDocuments.size>0&&(Ye(s.va),s.va=!1))}),await fc(n,r,e)}catch(r){await sc(r)}}function C3(t,e,n){const r=Ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((o,s)=>{const l=s.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(s,l){const c=Ee(s);c.onlineState=l;let d=!1;c.queries.forEach((u,f)=>{for(const h of f.j_)h.Z_(l)&&(d=!0)}),d&&ug(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $M(t,e,n){const r=Ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let s=new pt(he.comparator);s=s.insert(o,sn.newNoDocument(o,xe.min()));const l=Pe().add(o),c=new Pf(xe.min(),new Map,new pt(He),s,l);await Q6(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),fg(r)}else await Z1(r.localStore,e,!1).then(()=>t0(r,e,n)).catch(sc)}async function zM(t,e){const n=Ee(t),r=e.batch.batchId;try{const i=await tM(n.localStore,e);Z6(n,r,null),J6(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fc(n,i)}catch(i){await sc(i)}}async function HM(t,e,n){const r=Ee(t);try{const i=await function(s,l){const c=Ee(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let u;return c.mutationQueue.lookupMutationBatch(d,l).next(f=>(Ye(f!==null),u=f.keys(),c.mutationQueue.removeMutationBatch(d,f))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,u,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,u)).next(()=>c.localDocuments.getDocuments(d,u))})}(r.localStore,e);Z6(r,e,n),J6(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await fc(r,i)}catch(i){await sc(i)}}function J6(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Z6(t,e,n){const r=Ee(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function t0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||ex(t,r)})}function ex(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(ng(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),fg(t))}function A3(t,e,n){for(const r of n)r instanceof Y6?(t.La.addReference(r.key,e),qM(t,r)):r instanceof K6?(ue("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||ex(t,r.key)):be()}function qM(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ue("SyncEngine","New document in limbo: "+n),t.xa.add(r),fg(t))}function fg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new he(st.fromString(e)),r=t.qa.next();t.Na.set(r,new MM(n)),t.Oa=t.Oa.insert(n,r),$6(t.remoteStore,new Mi(Nr(Af(n.path)),r,"TargetPurposeLimboResolution",$m.oe))}}async function fc(t,e,n){const r=Ee(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{s.push(r.Ka(c,e,n).then(d=>{var u;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(u=n==null?void 0:n.targetChanges.get(c.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(d){i.push(d);const f=tg.Wi(c.targetId,d);o.push(f)}}))}),await Promise.all(s),r.Ca.d_(i),await async function(c,d){const u=Ee(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>ee.forEach(d,h=>ee.forEach(h.$i,p=>u.persistence.referenceDelegate.addReference(f,h.targetId,p)).next(()=>ee.forEach(h.Ui,p=>u.persistence.referenceDelegate.removeReference(f,h.targetId,p)))))}catch(f){if(!ac(f))throw f;ue("LocalStore","Failed to update sequence numbers: "+f)}for(const f of d){const h=f.targetId;if(!f.fromCache){const p=u.os.get(h),v=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(v);u.os=u.os.insert(h,y)}}}(r.localStore,o))}async function WM(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){ue("SyncEngine","User change. New user:",e.toKey());const r=await U6(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(l=>{l.forEach(c=>{c.reject(new ce(Z.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fc(n,r.hs)}}function GM(t,e){const n=Ee(t),r=n.Na.get(e);if(r&&r.va)return Pe().add(r.key);{let i=Pe();const o=n.Ma.get(e);if(!o)return i;for(const s of o){const l=n.Fa.get(s);i=i.unionWith(l.view.Va)}return i}}function tx(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Q6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$M.bind(null,e),e.Ca.d_=RM.bind(null,e.eventManager),e.Ca.$a=NM.bind(null,e.eventManager),e}function YM(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HM.bind(null,e),e}class Md{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return eM(this.persistence,new JL,e.initialUser,this.serializer)}Ga(e){return new KL(eg.Zr,this.serializer)}Wa(e){return new aM}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Md.provider={build:()=>new Md};class n0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>C3(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=WM.bind(null,this.syncEngine),await AM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kM}()}createDatastore(e){const n=Lf(e.databaseInfo.databaseId),r=function(o){return new dM(o)}(e.databaseInfo);return function(o,s,l,c){return new pM(o,s,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,l){return new gM(r,i,o,s,l)}(this.localStore,this.datastore,e.asyncQueue,n=>C3(this.syncEngine,n,0),function(){return w3.D()?new w3:new lM}())}createSyncEngine(e,n){return function(i,o,s,l,c,d,u){const f=new OM(i,o,s,l,c,d);return u&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=Ee(i);ue("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await dc(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}n0.provider={build:()=>new n0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ci("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=rn.UNAUTHENTICATED,this.clientId=o6.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{ue("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ue("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ag(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function fp(t,e){t.asyncQueue.verifyOperationInProgress(),ue("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await U6(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function T3(t,e){t.asyncQueue.verifyOperationInProgress();const n=await XM(t);ue("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>x3(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>x3(e.remoteStore,i)),t._onlineComponents=e}async function XM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ue("FirestoreClient","Using user provided OfflineComponentProvider");try{await fp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Js("Error using user provided cache. Falling back to memory cache: "+n),await fp(t,new Md)}}else ue("FirestoreClient","Using default OfflineComponentProvider"),await fp(t,new Md);return t._offlineComponents}async function nx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ue("FirestoreClient","Using user provided OnlineComponentProvider"),await T3(t,t._uninitializedComponentsProvider._online)):(ue("FirestoreClient","Using default OnlineComponentProvider"),await T3(t,new n0))),t._onlineComponents}function QM(t){return nx(t).then(e=>e.syncEngine)}async function Od(t){const e=await nx(t),n=e.eventManager;return n.onListen=DM.bind(null,e.syncEngine),n.onUnlisten=FM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=VM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BM.bind(null,e.syncEngine),n}function JM(t,e,n={}){const r=new Zr;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,l,c,d){const u=new hg({next:h=>{u.Za(),s.enqueueAndForget(()=>cg(o,f));const p=h.docs.has(l);!p&&h.fromCache?d.reject(new ce(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&c&&c.source==="server"?d.reject(new ce(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(h)},error:h=>d.reject(h)}),f=new dg(Af(l.path),u,{includeMetadataChanges:!0,_a:!0});return lg(o,f)}(await Od(t),t.asyncQueue,e,n,r)),r.promise}function ZM(t,e,n={}){const r=new Zr;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,l,c,d){const u=new hg({next:h=>{u.Za(),s.enqueueAndForget(()=>cg(o,f)),h.fromCache&&c.source==="server"?d.reject(new ce(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(h)},error:h=>d.reject(h)}),f=new dg(l,u,{includeMetadataChanges:!0,_a:!0});return lg(o,f)}(await Od(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t,e,n){if(!n)throw new ce(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function eO(t,e,n,r){if(e===!0&&r===!0)throw new ce(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function R3(t){if(!he.isDocumentKey(t))throw new ce(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function N3(t){if(he.isDocumentKey(t))throw new ce(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Df(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":be()}function In(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ce(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Df(t);throw new ce(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ce(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ce(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ce(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ce(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new P3({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new P3(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yP;switch(r.type){case"firstParty":return new xP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=k3.get(n);r&&(ue("ComponentProvider","Removing Datastore"),k3.delete(n),r.terminate())}(this),Promise.resolve()}}function tO(t,e,n,r={}){var i;const o=(t=In(t,Vf))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Js("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=rn.MOCK_USER;else{l=mw(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new ce(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new rn(d)}t._authCredentials=new _P(new i6(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Jo(this.firestore,e,this._query)}}class an{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}}class qi extends Jo{constructor(e,n,r){super(e,n,Af(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new he(e))}withConverter(e){return new qi(this.firestore,e,this._path)}}function bn(t,e,...n){if(t=_t(t),ix("collection","path",e),t instanceof Vf){const r=st.fromString(e,...n);return N3(r),new qi(t,null,r)}{if(!(t instanceof an||t instanceof qi))throw new ce(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(st.fromString(e,...n));return N3(r),new qi(t.firestore,null,r)}}function Zo(t,e,...n){if(t=_t(t),arguments.length===1&&(e=o6.newId()),ix("doc","path",e),t instanceof Vf){const r=st.fromString(e,...n);return R3(r),new an(t,null,new he(r))}{if(!(t instanceof an||t instanceof qi))throw new ce(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(st.fromString(e,...n));return R3(r),new an(t.firestore,t instanceof qi?t.converter:null,new he(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new B6(this,"async_queue_retry"),this.Vu=()=>{const r=dp();r&&ue("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=dp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=dp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Zr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ac(e))throw e;ue("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),l}(r);throw ci("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=sg.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&be()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function M3(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class di extends Vf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new L3,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new L3(e),this._firestoreClient=void 0,await e}}}function nO(t,e){const n=typeof t=="object"?t:Rm(),r=typeof t=="string"?t:"(default)",i=xf(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=fw("firestore");o&&tO(i,...o)}return i}function Uf(t){if(t._terminated)throw new ce(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||rO(t),t._firestoreClient}function rO(t){var e,n,r;const i=t._freezeSettings(),o=function(l,c,d,u){return new OP(l,c,d,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,rx(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new KM(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ia(Kt.fromBase64String(e))}catch(n){throw new ce(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ia(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO=/^__.*__$/;class oO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new co(e,this.data,this.fieldMask,n,this.fieldTransforms):new cc(e,this.data,n,this.fieldTransforms)}}class ox{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new co(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function sx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be()}}class vg{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new vg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Dd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(sx(this.Cu)&&iO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class sO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Lf(e)}Qu(e,n,r,i=!1){return new vg({Cu:e,methodName:n,qu:r,path:qt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bf(t){const e=t._freezeSettings(),n=Lf(t._databaseId);return new sO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ax(t,e,n,r,i,o={}){const s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);yg("Data must be an object, but it was:",s,r);const l=lx(r,s);let c,d;if(o.merge)c=new On(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){const u=[];for(const f of o.mergeFields){const h=r0(e,f,n);if(!s.contains(h))throw new ce(Z.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);ux(u,h)||u.push(h)}c=new On(u),d=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,d=s.fieldTransforms;return new oO(new _n(l),c,d)}class jf extends pg{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jf}}function aO(t,e,n,r){const i=t.Qu(1,e,n);yg("Data must be an object, but it was:",i,r);const o=[],s=_n.empty();Xo(r,(c,d)=>{const u=_g(e,c,n);d=_t(d);const f=i.Nu(u);if(d instanceof jf)o.push(u);else{const h=hc(d,f);h!=null&&(o.push(u),s.set(u,h))}});const l=new On(o);return new ox(s,l,i.fieldTransforms)}function lO(t,e,n,r,i,o){const s=t.Qu(1,e,n),l=[r0(e,r,n)],c=[i];if(o.length%2!=0)throw new ce(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)l.push(r0(e,o[h])),c.push(o[h+1]);const d=[],u=_n.empty();for(let h=l.length-1;h>=0;--h)if(!ux(d,l[h])){const p=l[h];let v=c[h];v=_t(v);const y=s.Nu(p);if(v instanceof jf)d.push(p);else{const w=hc(v,y);w!=null&&(d.push(p),u.set(p,w))}}const f=new On(d);return new ox(u,f,s.fieldTransforms)}function cO(t,e,n,r=!1){return hc(n,t.Qu(r?4:3,e))}function hc(t,e){if(cx(t=_t(t)))return yg("Unsupported field value:",e,t),lx(t,e);if(t instanceof pg)return function(r,i){if(!sx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const l of r){let c=hc(l,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=_t(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Mt.fromDate(r);return{timestampValue:Pd(i.serializer,o)}}if(r instanceof Mt){const o=new Mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Pd(i.serializer,o)}}if(r instanceof mg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ia)return{bytesValue:N6(i.serializer,r._byteString)};if(r instanceof an){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Jm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof gg)return function(s,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return Ym(l.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Df(r)}`)}(t,e)}function lx(t,e){const n={};return s6(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xo(t,(r,i)=>{const o=hc(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function cx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Mt||t instanceof mg||t instanceof ia||t instanceof an||t instanceof pg||t instanceof gg)}function yg(t,e,n){if(!cx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Df(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function r0(t,e,n){if((e=_t(e))instanceof Ff)return e._internalPath;if(typeof e=="string")return _g(t,e);throw Dd("Field path arguments must be of type string or ",t,!1,void 0,n)}const uO=new RegExp("[~\\*/\\[\\]]");function _g(t,e,n){if(e.search(uO)>=0)throw Dd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ff(...e.split("."))._internalPath}catch{throw Dd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Dd(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new ce(Z.INVALID_ARGUMENT,l+t+c)}function ux(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(bg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dO extends dx{data(){return super.data()}}function bg(t,e){return typeof e=="string"?_g(t,e):e instanceof Ff?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ce(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wg{}class fO extends wg{}function oa(t,e,...n){let r=[];e instanceof wg&&r.push(e),r=r.concat(n),function(o){const s=o.filter(c=>c instanceof xg).length,l=o.filter(c=>c instanceof $f).length;if(s>1||s>0&&l>0)throw new ce(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class $f extends fO{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new $f(e,n,r)}_apply(e){const n=this._parse(e);return hx(e._query,n),new Jo(e.firestore,e.converter,G1(e._query,n))}_parse(e){const n=Bf(e.firestore);return function(o,s,l,c,d,u,f){let h;if(d.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ce(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){D3(f,u);const p=[];for(const v of f)p.push(O3(c,o,v));h={arrayValue:{values:p}}}else h=O3(c,o,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||D3(f,u),h=cO(l,s,f,u==="in"||u==="not-in");return Rt.create(d,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function sa(t,e,n){const r=e,i=bg("where",t);return $f._create(i,r,n)}class xg extends wg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:pr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i;const l=o.getFlattenedFilters();for(const c of l)hx(s,c),s=G1(s,c)}(e._query,n),new Jo(e.firestore,e.converter,G1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function O3(t,e,n){if(typeof(n=_t(n))=="string"){if(n==="")throw new ce(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!m6(e)&&n.indexOf("/")!==-1)throw new ce(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(st.fromString(n));if(!he.isDocumentKey(r))throw new ce(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return n3(t,new he(r))}if(n instanceof an)return n3(t,n._key);throw new ce(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Df(n)}.`)}function D3(t,e){if(!Array.isArray(t)||t.length===0)throw new ce(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hx(t,e){const n=function(i,o){for(const s of i)for(const l of s.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ce(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class hO{convertValue(e,n="none"){switch(zo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($o(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw be()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Xo(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>xt(s.doubleValue));return new gg(o)}convertGeoPoint(e){return new mg(xt(e.latitude),xt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Hm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fl(e));default:return null}}convertTimestamp(e){const n=eo(e);return new Mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=st.fromString(e);Ye(V6(r));const i=new Bl(r.get(1),r.get(3)),o=new he(r.popFirst(5));return i.isEqual(n)||ci(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mx extends dx{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Mu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(bg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Mu extends mx{data(e={}){return super.data(e)}}class gx{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Za(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Mu(this._firestore,this._userDataWriter,r.key,r,new Za(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>{const c=new Mu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Za(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const c=new Mu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Za(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,u=-1;return l.type!==0&&(d=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),u=s.indexOf(l.doc.key)),{type:pO(l.type),doc:c,oldIndex:d,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function pO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(t){t=In(t,an);const e=In(t.firestore,di);return JM(Uf(e),t._key).then(n=>_x(e,t,n))}class Eg extends hO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ia(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,n)}}function Kn(t){t=In(t,Jo);const e=In(t.firestore,di),n=Uf(e),r=new Eg(e);return fx(t._query),ZM(n,t._query).then(i=>new gx(e,r,t,i))}function gO(t,e,n){t=In(t,an);const r=In(t.firestore,di),i=px(t.converter,e);return zf(r,[ax(Bf(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Qn.none())])}function Sg(t,e,n,...r){t=In(t,an);const i=In(t.firestore,di),o=Bf(i);let s;return s=typeof(e=_t(e))=="string"||e instanceof Ff?lO(o,"updateDoc",t._key,e,n,r):aO(o,"updateDoc",t._key,e),zf(i,[s.toMutation(t._key,Qn.exists(!0))])}function vx(t){return zf(In(t.firestore,di),[new Km(t._key,Qn.none())])}function yx(t,e){const n=In(t.firestore,di),r=Zo(t),i=px(t.converter,e);return zf(n,[ax(Bf(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Qn.exists(!1))]).then(()=>r)}function vO(t,...e){var n,r,i;t=_t(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||M3(e[s])||(o=e[s],s++);const l={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(M3(e[s])){const f=e[s];e[s]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,d,u;if(t instanceof an)d=In(t.firestore,di),u=Af(t._key.path),c={next:f=>{e[s]&&e[s](_x(d,t,f))},error:e[s+1],complete:e[s+2]};else{const f=In(t,Jo);d=In(f.firestore,di),u=f._query;const h=new Eg(d);c={next:p=>{e[s]&&e[s](new gx(d,h,f,p))},error:e[s+1],complete:e[s+2]},fx(t._query)}return function(h,p,v,y){const w=new hg(y),g=new dg(p,w,v);return h.asyncQueue.enqueueAndForget(async()=>lg(await Od(h),g)),()=>{w.Za(),h.asyncQueue.enqueueAndForget(async()=>cg(await Od(h),g))}}(Uf(d),u,l,c)}function zf(t,e){return function(r,i){const o=new Zr;return r.asyncQueue.enqueueAndForget(async()=>jM(await QM(r),i,o)),o.promise}(Uf(t),e)}function _x(t,e,n){const r=n.docs.get(e._key),i=new Eg(t);return new mx(t,i,e._key,r,new Za(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){ga=i})(Ko),Fo(new Ji("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),l=new di(new bP(r.getProvider("auth-internal")),new SP(r.getProvider("app-check-internal")),function(d,u){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ce(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bl(d.options.projectId,u)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),kr(Qy,"4.7.3",e),kr(Qy,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="firebasestorage.googleapis.com",wx="storageBucket",yO=2*60*1e3,_O=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt extends Ur{constructor(e,n,r=0){super(hp(e),`Firebase Storage: ${n} (${hp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return hp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var bt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(bt||(bt={}));function hp(t){return"storage/"+t}function Ig(){const t="An unknown error occurred, please check the error payload for server response.";return new wt(bt.UNKNOWN,t)}function bO(t){return new wt(bt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function wO(t){return new wt(bt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function xO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new wt(bt.UNAUTHENTICATED,t)}function EO(){return new wt(bt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function SO(t){return new wt(bt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function IO(){return new wt(bt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function CO(){return new wt(bt.CANCELED,"User canceled the upload/download.")}function AO(t){return new wt(bt.INVALID_URL,"Invalid URL '"+t+"'.")}function TO(t){return new wt(bt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function kO(){return new wt(bt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+wx+"' property when initializing the app?")}function RO(){return new wt(bt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function NO(){return new wt(bt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function PO(t){return new wt(bt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function i0(t){return new wt(bt.INVALID_ARGUMENT,t)}function xx(){return new wt(bt.APP_DELETED,"The Firebase app was deleted.")}function LO(t){return new wt(bt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ml(t,e){return new wt(bt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function $a(t){throw new wt(bt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Dn.makeFromUrl(e,n)}catch{return new Dn(e,"")}if(r.path==="")return r;throw TO(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const s="(/(.*))?$",l=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function d(E){E.path_=decodeURIComponent(E.path)}const u="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${u}/b/${i}/o${h}`,"i"),v={bucket:1,path:3},y=n===bx?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",g=new RegExp(`^https?://${y}/${i}/${w}`,"i"),_=[{regex:l,indices:c,postModify:o},{regex:p,indices:v,postModify:d},{regex:g,indices:{bucket:1,path:2},postModify:d}];for(let E=0;E<_.length;E++){const A=_[E],k=A.regex.exec(e);if(k){const I=k[A.indices.bucket];let x=k[A.indices.path];x||(x=""),r=new Dn(I,x),A.postModify(r);break}}if(r==null)throw AO(e);return r}}class MO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(t,e,n){let r=1,i=null,o=null,s=!1,l=0;function c(){return l===2}let d=!1;function u(...w){d||(d=!0,e.apply(null,w))}function f(w){i=setTimeout(()=>{i=null,t(p,c())},w)}function h(){o&&clearTimeout(o)}function p(w,...g){if(d){h();return}if(w){h(),u.call(null,w,...g);return}if(c()||s){h(),u.call(null,w,...g);return}r<64&&(r*=2);let _;l===1?(l=2,_=0):_=(r+Math.random())*1e3,f(_)}let v=!1;function y(w){v||(v=!0,h(),!d&&(i!==null?(w||(l=2),clearTimeout(i),f(0)):w||(l=1)))}return f(0),o=setTimeout(()=>{s=!0,y(!0)},n),y}function DO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(t){return t!==void 0}function UO(t){return typeof t=="object"&&!Array.isArray(t)}function Cg(t){return typeof t=="string"||t instanceof String}function V3(t){return Ag()&&t instanceof Blob}function Ag(){return typeof Blob<"u"}function U3(t,e,n,r){if(r<e)throw i0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw i0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Ex(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ro;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ro||(Ro={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e,n,r,i,o,s,l,c,d,u,f,h=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=u,this.connectionFactory_=f,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,v)=>{this.resolve_=p,this.reject_=v,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new ru(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const l=o.getErrorCode()===Ro.NO_ERROR,c=o.getStatus();if(!l||FO(c,this.additionalRetryCodes_)&&this.retry){const u=o.getErrorCode()===Ro.ABORT;r(!1,new ru(!1,null,u));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new ru(d,o))})},n=(r,i)=>{const o=this.resolve_,s=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());VO(c)?o(c):o()}catch(c){s(c)}else if(l!==null){const c=Ig();c.serverResponse=l.getErrorText(),this.errorCallback_?s(this.errorCallback_(l,c)):s(c)}else if(i.canceled){const c=this.appDelete_?xx():CO();s(c)}else{const c=IO();s(c)}};this.canceled_?n(!1,new ru(!1,null,!0)):this.backoffId_=OO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&DO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ru{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function jO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function $O(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function zO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function HO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function qO(t,e,n,r,i,o,s=!0){const l=Ex(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return zO(d,e),jO(d,n),$O(d,o),HO(d,r),new BO(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function GO(...t){const e=WO();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Ag())return new Blob(t);throw new wt(bt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function YO(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(t){if(typeof atob>"u")throw PO("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class pp{constructor(e,n){this.data=e,this.contentType=n||null}}function XO(t,e){switch(t){case Cr.RAW:return new pp(Sx(e));case Cr.BASE64:case Cr.BASE64URL:return new pp(Ix(t,e));case Cr.DATA_URL:return new pp(JO(e),ZO(e))}throw Ig()}function Sx(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function QO(t){let e;try{e=decodeURIComponent(t)}catch{throw ml(Cr.DATA_URL,"Malformed data URL.")}return Sx(e)}function Ix(t,e){switch(t){case Cr.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw ml(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Cr.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw ml(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=KO(e)}catch(i){throw i.message.includes("polyfill")?i:ml(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Cx{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ml(Cr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=eD(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function JO(t){const e=new Cx(t);return e.base64?Ix(Cr.BASE64,e.rest):QO(e.rest)}function ZO(t){return new Cx(t).contentType}function eD(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n){let r=0,i="";V3(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(V3(this.data_)){const r=this.data_,i=YO(r,e,n);return i===null?null:new Ni(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ni(r,!0)}}static getBlob(...e){if(Ag()){const n=e.map(r=>r instanceof Ni?r.data_:r);return new Ni(GO.apply(null,n))}else{const n=e.map(s=>Cg(s)?XO(Cr.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let l=0;l<s.length;l++)i[o++]=s[l]}),new Ni(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(t){let e;try{e=JSON.parse(t)}catch{return null}return UO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function nD(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Tx(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(t,e){return e}class dn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||rD}}let iu=null;function iD(t){return!Cg(t)||t.length<2?t:Tx(t)}function kx(){if(iu)return iu;const t=[];t.push(new dn("bucket")),t.push(new dn("generation")),t.push(new dn("metageneration")),t.push(new dn("name","fullPath",!0));function e(o,s){return iD(s)}const n=new dn("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}const i=new dn("size");return i.xform=r,t.push(i),t.push(new dn("timeCreated")),t.push(new dn("updated")),t.push(new dn("md5Hash",null,!0)),t.push(new dn("cacheControl",null,!0)),t.push(new dn("contentDisposition",null,!0)),t.push(new dn("contentEncoding",null,!0)),t.push(new dn("contentLanguage",null,!0)),t.push(new dn("contentType",null,!0)),t.push(new dn("metadata","customMetadata",!0)),iu=t,iu}function oD(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new Dn(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function sD(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,e[s.server])}return oD(r,t),r}function Rx(t,e,n){const r=Ax(e);return r===null?null:sD(t,r,n)}function aD(t,e,n,r){const i=Ax(e);if(i===null||!Cg(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(d=>{const u=t.bucket,f=t.fullPath,h="/b/"+s(u)+"/o/"+s(f),p=Hf(h,n,r),v=Ex({alt:"media",token:d});return p+v})[0]}function lD(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class Tg{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(t){if(!t)throw Ig()}function cD(t,e){function n(r,i){const o=Rx(t,i,e);return Nx(o!==null),o}return n}function uD(t,e){function n(r,i){const o=Rx(t,i,e);return Nx(o!==null),aD(o,i,t.host,t._protocol)}return n}function Px(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=EO():i=xO():n.getStatus()===402?i=wO(t.bucket):n.getStatus()===403?i=SO(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Lx(t){const e=Px(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=bO(t.path)),o.serverResponse=i.serverResponse,o}return n}function dD(t,e,n){const r=e.fullServerUrl(),i=Hf(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,l=new Tg(i,o,uD(t,n),s);return l.errorHandler=Lx(e),l}function fD(t,e){const n=e.fullServerUrl(),r=Hf(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function s(c,d){}const l=new Tg(r,i,s,o);return l.successCodes=[200,204],l.errorHandler=Lx(e),l}function hD(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function pD(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=hD(null,e)),r}function mD(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function l(){let _="";for(let E=0;E<2;E++)_=_+Math.random().toString().slice(2);return _}const c=l();s["Content-Type"]="multipart/related; boundary="+c;const d=pD(e,r,i),u=lD(d,n),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,h=`\r
--`+c+"--",p=Ni.getBlob(f,r,h);if(p===null)throw RO();const v={name:d.fullPath},y=Hf(o,t.host,t._protocol),w="POST",g=t.maxUploadRetryTime,b=new Tg(y,w,cD(t,n),g);return b.urlParams=v,b.headers=s,b.body=p.uploadData(),b.errorHandler=Px(e),b}class gD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ro.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ro.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ro.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw $a("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $a("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $a("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $a("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $a("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class vD extends gD{initXhr(){this.xhr_.responseType="text"}}function kg(){return new vD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n){this._service=e,n instanceof Dn?this._location=n:this._location=Dn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ho(e,n)}get root(){const e=new Dn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Tx(this._location.path)}get storage(){return this._service}get parent(){const e=tD(this._location.path);if(e===null)return null;const n=new Dn(this._location.bucket,e);return new Ho(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw LO(e)}}function yD(t,e,n){t._throwIfRoot("uploadBytes");const r=mD(t.storage,t._location,kx(),new Ni(e,!0),n);return t.storage.makeRequestWithTokens(r,kg).then(i=>({metadata:i,ref:t}))}function _D(t){t._throwIfRoot("getDownloadURL");const e=dD(t.storage,t._location,kx());return t.storage.makeRequestWithTokens(e,kg).then(n=>{if(n===null)throw NO();return n})}function bD(t){t._throwIfRoot("deleteObject");const e=fD(t.storage,t._location);return t.storage.makeRequestWithTokens(e,kg)}function wD(t,e){const n=nD(t._location.path,e),r=new Dn(t._location.bucket,n);return new Ho(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t){return/^[A-Za-z]+:\/\//.test(t)}function ED(t,e){return new Ho(t,e)}function Mx(t,e){if(t instanceof Rg){const n=t;if(n._bucket==null)throw kO();const r=new Ho(n,n._bucket);return e!=null?Mx(r,e):r}else return e!==void 0?wD(t,e):t}function SD(t,e){if(e&&xD(e)){if(t instanceof Rg)return ED(t,e);throw i0("To use ref(service, url), the first argument must be a Storage instance.")}else return Mx(t,e)}function F3(t,e){const n=e==null?void 0:e[wx];return n==null?null:Dn.makeFromBucketSpec(n,t)}function ID(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:mw(i,t.app.options.projectId))}class Rg{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=bx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=yO,this._maxUploadRetryTime=_O,this._requests=new Set,i!=null?this._bucket=Dn.makeFromBucketSpec(i,this._host):this._bucket=F3(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Dn.makeFromBucketSpec(this._url,e):this._bucket=F3(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){U3("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){U3("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ho(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new MO(xx());{const s=qO(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const B3="@firebase/storage",j3="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="storage";function Dx(t,e,n){return t=_t(t),yD(t,e,n)}function Vx(t){return t=_t(t),_D(t)}function CD(t){return t=_t(t),bD(t)}function Ng(t,e){return t=_t(t),SD(t,e)}function AD(t=Rm(),e){t=_t(t);const r=xf(t,Ox).getImmediate({identifier:e}),i=fw("storage");return i&&TD(r,...i),r}function TD(t,e,n,r={}){ID(t,e,n,r)}function kD(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Rg(n,r,i,e,Ko)}function RD(){Fo(new Ji(Ox,kD,"PUBLIC").setMultipleInstances(!0)),kr(B3,j3,""),kr(B3,j3,"esm2017")}RD();const ND={apiKey:"AIzaSyCQEJIzVg_iszxMN31UqG5UpfYkSDzjO-s",authDomain:"family-tree-1efb3.firebaseapp.com",projectId:"family-tree-1efb3",storageBucket:"family-tree-1efb3.appspot.com",messagingSenderId:"86253009427",appId:"1:86253009427:web:0ad04b323ac3f97f429de6",measurementId:"G-P7Q5JJ3JX8"},Pg=yw(ND),Pt=nO(Pg),Lg=AD(Pg),mp=gP(Pg),PD=async t=>{try{const e=Ng(Lg,`images/${Date.now()}_${t.name}`);return await Dx(e,t),await Vx(e)}catch(e){throw console.error("Error uploading image: ",e),e}},LD=async(t,e)=>{let n="";if(e){const i=Ng(Lg,`images/${Date.now()}_${e.name}`);await Dx(i,e),console.log("Image uploaded"),n=await Vx(i),console.log("Image URL: ",n)}const r={name:t.name,gender:t.gender,phone:t.phone,dob:t.dob,img:n||null,treename:t.treename};t.fid&&t.fid.length&&(r.fid=t.fid),t.mid&&t.mid.length&&(r.mid=t.mid),t.pids&&t.pids.length&&(r.pids=t.pids);try{const i=await yx(bn(Pt,"familyMembersTest"),r);return t.pids&&t.pids.length&&await Ou(t.pids[0],{pids:[i.id]}),{...r,id:i.id}}catch(i){throw console.error("Error adding document: ",i),i}},MD=async()=>{try{const t=bn(Pt,"familyMembersTest"),n=(await Kn(t)).docs.map(r=>r.data().treename);return[...new Set(n)]}catch(t){console.error("Error getting tree names:",t)}},OD=async t=>{try{const e=bn(Pt,"rootFamilyMembers"),n=oa(e,sa("treeName","==",t)),r=await Kn(n);r.empty||await vx(Zo(Pt,"rootFamilyMembers",r.docs[0].id));const i=bn(Pt,"familyMembersTest");(await Kn(i)).forEach(async s=>{s.data().treename===t&&await Ux(s.id)})}catch(e){console.error("Error deleting tree:",e)}},DD=async()=>{try{const t=bn(Pt,"familyMembersTest"),n=(await Kn(t)).docs.map(d=>d.data()),o=[...new Set(n.map(d=>d.treename))].map(d=>{const f=n.filter(h=>h.treename===d).map(h=>h.name);return[d,...f]}).map(d=>d.join(`
`)).join(`

`),s=new Blob([o],{type:"text/plain"}),l=URL.createObjectURL(s),c=document.createElement("a");c.href=l,c.download="familyMembers.txt",c.click()}catch(t){console.error("Error downloading family members to CSV: ",t)}},Ou=async(t,e)=>{try{const n=Zo(Pt,"familyMembersTest",t),i=(await mO(n)).data();e.pids&&(e.pids=[...i.pids||[],...e.pids]),await Sg(n,e)}catch(n){throw console.error("Error updating document: ",n),n}},gp=async(t,e)=>{try{const n=Zo(Pt,"familyMembersTest",t);await Sg(n,e)}catch(n){throw console.error("Error setting document: ",n),n}},Ux=async t=>{var e;try{const n=Zo(Pt,"familyMembersTest",t),i=(e=(await Kn(bn(Pt,"familyMembersTest"))).docs.find(o=>o.id===t))==null?void 0:e.data();if(i.img)try{const o=Ng(Lg,i.img);await CD(o)}catch(o){console.error("Error removing image: ",o)}await vx(n),await Fx()}catch(n){throw console.error("Error removing document: ",n),n}},Fx=async()=>{try{(await Kn(bn(Pt,"familyMembersTest"))).forEach(async e=>{var r,i,o;const n=e.data();if((r=n.fid)!=null&&r.length&&((await Kn(bn(Pt,"familyMembersTest"))).docs.find(l=>l.id===n.fid[0])||await gp(e.id,{fid:[]})),(i=n.mid)!=null&&i.length){const s=oa(bn(Pt,"familyMembersTest"),sa("capital","==",!0));(await Kn(bn(Pt,"familyMembersTest"))).docs.find(c=>c.id===n.mid[0])||await gp(e.id,{mid:[]})}if((o=n.pids)!=null&&o.length){const s=await Kn(bn(Pt,"familyMembersTest")),l=n.pids.filter(d=>s.docs.find(u=>u.id===d)),c=[...new Set(l)];if(l.length===c.length)return;console.log("Unique partners: ",c),await gp(e.id,{pids:c})}})}catch(t){throw console.error("Error clearing no existant data: ",t),t}},VD=async(t,e)=>{try{const n=bn(Pt,"rootFamilyMembers"),r=oa(n,sa("treeName","==",e)),i=await Kn(r);if(i.empty)await yx(n,{treeName:e,rootMemberId:t});else{const o=Zo(Pt,"rootFamilyMembers",i.docs[0].id);await Sg(o,{rootMemberId:t})}}catch(n){throw console.error("Error setting root family member: ",n),n}},UD=async t=>{try{const e=bn(Pt,"rootFamilyMembers"),n=oa(e,sa("treeName","==",t)),r=await Kn(n);return r.empty?null:r.docs[0].data().rootMemberId}catch(e){throw console.error("Error getting root family member: ",e),e}};function FD(t,e){var d,u;const n=t.find(f=>f.id===e);if(console.log(n),!n)return{error:"User not found"};const r=f=>t.find(h=>h.id===f);let i=[];console.log(n.pids),n.pids&&(i=n.pids.map(r).filter(Boolean));let o;n.mid&&(o=n.mid[0]);let s;n.fid&&(s=n.fid[0]);const l=t.filter(f=>f.fid[0]===n.id||f.mid[0]===n.id),c=l.map(f=>t.filter(h=>h.fid[0]===f.id||h.mid[0]===f.id)).flat();return{user:n.name,partners:i.map(f=>f==null?void 0:f.name),children:l.map(f=>f.name),grandchildren:c.map(f=>f.name),parents:{mother:o?(d=r(o))==null?void 0:d.name:void 0,father:s?(u=r(s))==null?void 0:u.name:void 0}}}function BD(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function Bx(t,e){return new Promise(function(n,r){let i;return jD(t).then(function(o){try{return i=o,n(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(s){return r(s)}},r)})}const jD=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const o=new DataView(i);let s=0;if(o.getUint16(s)!==65496)return n("not a valid JPEG");for(s+=2;;){const l=o.getUint16(s);if(l===65498)break;const c=o.getUint16(s+2);if(l===65505&&o.getUint32(s+4)===1165519206){const d=s+10;let u;switch(o.getUint16(d)){case 18761:u=!0;break;case 19789:u=!1;break;default:return n("TIFF header contains invalid endian")}if(o.getUint16(d+2,u)!==42)return n("TIFF header contains invalid version");const f=o.getUint32(d+4,u),h=d+f+2+12*o.getUint16(d+f,u);for(let p=d+f+2;p<h;p+=12)if(o.getUint16(p,u)==274){if(o.getUint16(p+2,u)!==3)return n("Orientation data type is invalid");if(o.getUint32(p+4,u)!==1)return n("Orientation data count is invalid");o.setUint16(p+8,1,u);break}return e(i.slice(s,s+2+c))}s+=2+c}return e(new Blob)}),r.readAsArrayBuffer(t)});var Vd={},$D={get exports(){return Vd},set exports(t){Vd=t}};(function(t){var e,n,r={};$D.exports=r,r.parse=function(i,o){for(var s=r.bin.readUshort,l=r.bin.readUint,c=0,d={},u=new Uint8Array(i),f=u.length-4;l(u,f)!=101010256;)f--;c=f,c+=4;var h=s(u,c+=4);s(u,c+=2);var p=l(u,c+=2),v=l(u,c+=4);c+=4,c=v;for(var y=0;y<h;y++){l(u,c),c+=4,c+=4,c+=4,l(u,c+=4),p=l(u,c+=4);var w=l(u,c+=4),g=s(u,c+=4),b=s(u,c+2),_=s(u,c+4);c+=6;var E=l(u,c+=8);c+=4,c+=g+b+_,r._readLocal(u,E,d,p,w,o)}return d},r._readLocal=function(i,o,s,l,c,d){var u=r.bin.readUshort,f=r.bin.readUint;f(i,o),u(i,o+=4),u(i,o+=2);var h=u(i,o+=2);f(i,o+=2),f(i,o+=4),o+=4;var p=u(i,o+=8),v=u(i,o+=2);o+=2;var y=r.bin.readUTF8(i,o,p);if(o+=p,o+=v,d)s[y]={size:c,csize:l};else{var w=new Uint8Array(i.buffer,o);if(h==0)s[y]=new Uint8Array(w.buffer.slice(o,o+l));else{if(h!=8)throw"unknown compression method: "+h;var g=new Uint8Array(c);r.inflateRaw(w,g),s[y]=g}}},r.inflateRaw=function(i,o){return r.F.inflate(i,o)},r.inflate=function(i,o){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),o)},r.deflate=function(i,o){o==null&&(o={level:6});var s=0,l=new Uint8Array(50+Math.floor(1.1*i.length));l[s]=120,l[s+1]=156,s+=2,s=r.F.deflateRaw(i,l,s,o.level);var c=r.adler(i,0,i.length);return l[s+0]=c>>>24&255,l[s+1]=c>>>16&255,l[s+2]=c>>>8&255,l[s+3]=c>>>0&255,new Uint8Array(l.buffer,0,s+4)},r.deflateRaw=function(i,o){o==null&&(o={level:6});var s=new Uint8Array(50+Math.floor(1.1*i.length)),l=r.F.deflateRaw(i,s,l,o.level);return new Uint8Array(s.buffer,0,l)},r.encode=function(i,o){o==null&&(o=!1);var s=0,l=r.bin.writeUint,c=r.bin.writeUshort,d={};for(var u in i){var f=!r._noNeed(u)&&!o,h=i[u],p=r.crc.crc(h,0,h.length);d[u]={cpr:f,usize:h.length,crc:p,file:f?r.deflateRaw(h):h}}for(var u in d)s+=d[u].file.length+30+46+2*r.bin.sizeUTF8(u);s+=22;var v=new Uint8Array(s),y=0,w=[];for(var u in d){var g=d[u];w.push(y),y=r._writeHeader(v,y,u,g,0)}var b=0,_=y;for(var u in d)g=d[u],w.push(y),y=r._writeHeader(v,y,u,g,1,w[b++]);var E=y-_;return l(v,y,101010256),y+=4,c(v,y+=4,b),c(v,y+=2,b),l(v,y+=2,E),l(v,y+=4,_),y+=4,y+=2,v.buffer},r._noNeed=function(i){var o=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},r._writeHeader=function(i,o,s,l,c,d){var u=r.bin.writeUint,f=r.bin.writeUshort,h=l.file;return u(i,o,c==0?67324752:33639248),o+=4,c==1&&(o+=2),f(i,o,20),f(i,o+=2,0),f(i,o+=2,l.cpr?8:0),u(i,o+=2,0),u(i,o+=4,l.crc),u(i,o+=4,h.length),u(i,o+=4,l.usize),f(i,o+=4,r.bin.sizeUTF8(s)),f(i,o+=2,0),o+=2,c==1&&(o+=2,o+=2,u(i,o+=6,d),o+=4),o+=r.bin.writeUTF8(i,o,s),c==0&&(i.set(h,o),o+=h.length),o},r.crc={table:function(){for(var i=new Uint32Array(256),o=0;o<256;o++){for(var s=o,l=0;l<8;l++)1&s?s=3988292384^s>>>1:s>>>=1;i[o]=s}return i}(),update:function(i,o,s,l){for(var c=0;c<l;c++)i=r.crc.table[255&(i^o[s+c])]^i>>>8;return i},crc:function(i,o,s){return 4294967295^r.crc.update(4294967295,i,o,s)}},r.adler=function(i,o,s){for(var l=1,c=0,d=o,u=o+s;d<u;){for(var f=Math.min(d+5552,u);d<f;)c+=l+=i[d++];l%=65521,c%=65521}return c<<16|l},r.bin={readUshort:function(i,o){return i[o]|i[o+1]<<8},writeUshort:function(i,o,s){i[o]=255&s,i[o+1]=s>>8&255},readUint:function(i,o){return 16777216*i[o+3]+(i[o+2]<<16|i[o+1]<<8|i[o])},writeUint:function(i,o,s){i[o]=255&s,i[o+1]=s>>8&255,i[o+2]=s>>16&255,i[o+3]=s>>24&255},readASCII:function(i,o,s){for(var l="",c=0;c<s;c++)l+=String.fromCharCode(i[o+c]);return l},writeASCII:function(i,o,s){for(var l=0;l<s.length;l++)i[o+l]=s.charCodeAt(l)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,o,s){for(var l,c="",d=0;d<s;d++)c+="%"+r.bin.pad(i[o+d].toString(16));try{l=decodeURIComponent(c)}catch{return r.bin.readASCII(i,o,s)}return l},writeUTF8:function(i,o,s){for(var l=s.length,c=0,d=0;d<l;d++){var u=s.charCodeAt(d);if(!(4294967168&u))i[o+c]=u,c++;else if(!(4294965248&u))i[o+c]=192|u>>6,i[o+c+1]=128|u>>0&63,c+=2;else if(!(4294901760&u))i[o+c]=224|u>>12,i[o+c+1]=128|u>>6&63,i[o+c+2]=128|u>>0&63,c+=3;else{if(4292870144&u)throw"e";i[o+c]=240|u>>18,i[o+c+1]=128|u>>12&63,i[o+c+2]=128|u>>6&63,i[o+c+3]=128|u>>0&63,c+=4}}return c},sizeUTF8:function(i){for(var o=i.length,s=0,l=0;l<o;l++){var c=i.charCodeAt(l);if(!(4294967168&c))s++;else if(!(4294965248&c))s+=2;else if(!(4294901760&c))s+=3;else{if(4292870144&c)throw"e";s+=4}}return s}},r.F={},r.F.deflateRaw=function(i,o,s,l){var c=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][l],d=r.F.U,u=r.F._goodIndex;r.F._hash;var f=r.F._putsE,h=0,p=s<<3,v=0,y=i.length;if(l==0){for(;h<y;)f(o,p,h+(T=Math.min(65535,y-h))==y?1:0),p=r.F._copyExact(i,h,T,o,p+8),h+=T;return p>>>3}var w=d.lits,g=d.strt,b=d.prev,_=0,E=0,A=0,k=0,I=0,x=0;for(y>2&&(g[x=r.F._hash(i,0)]=0),h=0;h<y;h++){if(I=x,h+1<y-2){x=r.F._hash(i,h+1);var S=h+1&32767;b[S]=g[x],g[x]=S}if(v<=h){(_>14e3||E>26697)&&y-h>100&&(v<h&&(w[_]=h-v,_+=2,v=h),p=r.F._writeBlock(h==y-1||v==y?1:0,w,_,k,i,A,h-A,o,p),_=E=k=0,A=h);var R=0;h<y-2&&(R=r.F._bestMatch(i,h,b,I,Math.min(c[2],y-h),c[3]));var T=R>>>16,N=65535&R;if(R!=0){N=65535&R;var P=u(T=R>>>16,d.of0);d.lhst[257+P]++;var V=u(N,d.df0);d.dhst[V]++,k+=d.exb[P]+d.dxb[V],w[_]=T<<23|h-v,w[_+1]=N<<16|P<<8|V,_+=2,v=h+T}else d.lhst[i[h]]++;E++}}for(A==h&&i.length!=0||(v<h&&(w[_]=h-v,_+=2,v=h),p=r.F._writeBlock(1,w,_,k,i,A,h-A,o,p),_=0,E=0,_=E=k=0,A=h);7&p;)p++;return p>>>3},r.F._bestMatch=function(i,o,s,l,c,d){var u=32767&o,f=s[u],h=u-f+32768&32767;if(f==u||l!=r.F._hash(i,o-h))return 0;for(var p=0,v=0,y=Math.min(32767,o);h<=y&&--d!=0&&f!=u;){if(p==0||i[o+p]==i[o+p-h]){var w=r.F._howLong(i,o,h);if(w>p){if(v=h,(p=w)>=c)break;h+2<w&&(w=h+2);for(var g=0,b=0;b<w-2;b++){var _=o-h+b+32768&32767,E=_-s[_]+32768&32767;E>g&&(g=E,f=_)}}}h+=(u=f)-(f=s[u])+32768&32767}return p<<16|v},r.F._howLong=function(i,o,s){if(i[o]!=i[o-s]||i[o+1]!=i[o+1-s]||i[o+2]!=i[o+2-s])return 0;var l=o,c=Math.min(i.length,o+258);for(o+=3;o<c&&i[o]==i[o-s];)o++;return o-l},r.F._hash=function(i,o){return(i[o]<<8|i[o+1])+(i[o+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,o,s,l,c,d,u,f,h){var p,v,y,w,g,b,_,E,A,k=r.F.U,I=r.F._putsF,x=r.F._putsE;k.lhst[256]++,v=(p=r.F.getTrees())[0],y=p[1],w=p[2],g=p[3],b=p[4],_=p[5],E=p[6],A=p[7];var S=32+(h+3&7?8-(h+3&7):0)+(u<<3),R=l+r.F.contSize(k.fltree,k.lhst)+r.F.contSize(k.fdtree,k.dhst),T=l+r.F.contSize(k.ltree,k.lhst)+r.F.contSize(k.dtree,k.dhst);T+=14+3*_+r.F.contSize(k.itree,k.ihst)+(2*k.ihst[16]+3*k.ihst[17]+7*k.ihst[18]);for(var N=0;N<286;N++)k.lhst[N]=0;for(N=0;N<30;N++)k.dhst[N]=0;for(N=0;N<19;N++)k.ihst[N]=0;var P=S<R&&S<T?0:R<T?1:2;if(I(f,h,i),I(f,h+1,P),h+=3,P==0){for(;7&h;)h++;h=r.F._copyExact(c,d,u,f,h)}else{var V,$;if(P==1&&(V=k.fltree,$=k.fdtree),P==2){r.F.makeCodes(k.ltree,v),r.F.revCodes(k.ltree,v),r.F.makeCodes(k.dtree,y),r.F.revCodes(k.dtree,y),r.F.makeCodes(k.itree,w),r.F.revCodes(k.itree,w),V=k.ltree,$=k.dtree,x(f,h,g-257),x(f,h+=5,b-1),x(f,h+=5,_-4),h+=4;for(var D=0;D<_;D++)x(f,h+3*D,k.itree[1+(k.ordr[D]<<1)]);h+=3*_,h=r.F._codeTiny(E,k.itree,f,h),h=r.F._codeTiny(A,k.itree,f,h)}for(var O=d,B=0;B<s;B+=2){for(var j=o[B],z=j>>>23,W=O+(8388607&j);O<W;)h=r.F._writeLit(c[O++],V,f,h);if(z!=0){var G=o[B+1],H=G>>16,Y=G>>8&255,q=255&G;x(f,h=r.F._writeLit(257+Y,V,f,h),z-k.of0[Y]),h+=k.exb[Y],I(f,h=r.F._writeLit(q,$,f,h),H-k.df0[q]),h+=k.dxb[q],O+=z}}h=r.F._writeLit(256,V,f,h)}return h},r.F._copyExact=function(i,o,s,l,c){var d=c>>>3;return l[d]=s,l[d+1]=s>>>8,l[d+2]=255-l[d],l[d+3]=255-l[d+1],d+=4,l.set(new Uint8Array(i.buffer,o,s),d),c+(s+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,o=r.F._hufTree(i.lhst,i.ltree,15),s=r.F._hufTree(i.dhst,i.dtree,15),l=[],c=r.F._lenCodes(i.ltree,l),d=[],u=r.F._lenCodes(i.dtree,d),f=0;f<l.length;f+=2)i.ihst[l[f]]++;for(f=0;f<d.length;f+=2)i.ihst[d[f]]++;for(var h=r.F._hufTree(i.ihst,i.itree,7),p=19;p>4&&i.itree[1+(i.ordr[p-1]<<1)]==0;)p--;return[o,s,h,c,u,p,l,d]},r.F.getSecond=function(i){for(var o=[],s=0;s<i.length;s+=2)o.push(i[s+1]);return o},r.F.nonZero=function(i){for(var o="",s=0;s<i.length;s+=2)i[s+1]!=0&&(o+=(s>>1)+",");return o},r.F.contSize=function(i,o){for(var s=0,l=0;l<o.length;l++)s+=o[l]*i[1+(l<<1)];return s},r.F._codeTiny=function(i,o,s,l){for(var c=0;c<i.length;c+=2){var d=i[c],u=i[c+1];l=r.F._writeLit(d,o,s,l);var f=d==16?2:d==17?3:7;d>15&&(r.F._putsE(s,l,u,f),l+=f)}return l},r.F._lenCodes=function(i,o){for(var s=i.length;s!=2&&i[s-1]==0;)s-=2;for(var l=0;l<s;l+=2){var c=i[l+1],d=l+3<s?i[l+3]:-1,u=l+5<s?i[l+5]:-1,f=l==0?-1:i[l-1];if(c==0&&d==c&&u==c){for(var h=l+5;h+2<s&&i[h+2]==c;)h+=2;(p=Math.min(h+1-l>>>1,138))<11?o.push(17,p-3):o.push(18,p-11),l+=2*p-2}else if(c==f&&d==c&&u==c){for(h=l+5;h+2<s&&i[h+2]==c;)h+=2;var p=Math.min(h+1-l>>>1,6);o.push(16,p-3),l+=2*p-2}else o.push(c,0)}return s>>>1},r.F._hufTree=function(i,o,s){var l=[],c=i.length,d=o.length,u=0;for(u=0;u<d;u+=2)o[u]=0,o[u+1]=0;for(u=0;u<c;u++)i[u]!=0&&l.push({lit:u,f:i[u]});var f=l.length,h=l.slice(0);if(f==0)return 0;if(f==1){var p=l[0].lit;return h=p==0?1:0,o[1+(p<<1)]=1,o[1+(h<<1)]=1,1}l.sort(function(E,A){return E.f-A.f});var v=l[0],y=l[1],w=0,g=1,b=2;for(l[0]={lit:-1,f:v.f+y.f,l:v,r:y,d:0};g!=f-1;)v=w!=g&&(b==f||l[w].f<l[b].f)?l[w++]:l[b++],y=w!=g&&(b==f||l[w].f<l[b].f)?l[w++]:l[b++],l[g++]={lit:-1,f:v.f+y.f,l:v,r:y};var _=r.F.setDepth(l[g-1],0);for(_>s&&(r.F.restrictDepth(h,s,_),_=s),u=0;u<f;u++)o[1+(h[u].lit<<1)]=h[u].d;return _},r.F.setDepth=function(i,o){return i.lit!=-1?(i.d=o,o):Math.max(r.F.setDepth(i.l,o+1),r.F.setDepth(i.r,o+1))},r.F.restrictDepth=function(i,o,s){var l=0,c=1<<s-o,d=0;for(i.sort(function(f,h){return h.d==f.d?f.f-h.f:h.d-f.d}),l=0;l<i.length&&i[l].d>o;l++){var u=i[l].d;i[l].d=o,d+=c-(1<<s-u)}for(d>>>=s-o;d>0;)(u=i[l].d)<o?(i[l].d++,d-=1<<o-u-1):l++;for(;l>=0;l--)i[l].d==o&&d<0&&(i[l].d--,d++);d!=0&&console.log("debt left")},r.F._goodIndex=function(i,o){var s=0;return o[16|s]<=i&&(s|=16),o[8|s]<=i&&(s|=8),o[4|s]<=i&&(s|=4),o[2|s]<=i&&(s|=2),o[1|s]<=i&&(s|=1),s},r.F._writeLit=function(i,o,s,l){return r.F._putsF(s,l,o[i<<1]),l+o[1+(i<<1)]},r.F.inflate=function(i,o){var s=Uint8Array;if(i[0]==3&&i[1]==0)return o||new s(0);var l=r.F,c=l._bitsF,d=l._bitsE,u=l._decodeTiny,f=l.makeCodes,h=l.codes2map,p=l._get17,v=l.U,y=o==null;y&&(o=new s(i.length>>>2<<3));for(var w,g,b=0,_=0,E=0,A=0,k=0,I=0,x=0,S=0,R=0;b==0;)if(b=c(i,R,1),_=c(i,R+1,2),R+=3,_!=0){if(y&&(o=r.F._check(o,S+(1<<17))),_==1&&(w=v.flmap,g=v.fdmap,I=511,x=31),_==2){E=d(i,R,5)+257,A=d(i,R+5,5)+1,k=d(i,R+10,4)+4,R+=14;for(var T=0;T<38;T+=2)v.itree[T]=0,v.itree[T+1]=0;var N=1;for(T=0;T<k;T++){var P=d(i,R+3*T,3);v.itree[1+(v.ordr[T]<<1)]=P,P>N&&(N=P)}R+=3*k,f(v.itree,N),h(v.itree,N,v.imap),w=v.lmap,g=v.dmap,R=u(v.imap,(1<<N)-1,E+A,i,R,v.ttree);var V=l._copyOut(v.ttree,0,E,v.ltree);I=(1<<V)-1;var $=l._copyOut(v.ttree,E,A,v.dtree);x=(1<<$)-1,f(v.ltree,V),h(v.ltree,V,w),f(v.dtree,$),h(v.dtree,$,g)}for(;;){var D=w[p(i,R)&I];R+=15&D;var O=D>>>4;if(!(O>>>8))o[S++]=O;else{if(O==256)break;var B=S+O-254;if(O>264){var j=v.ldef[O-257];B=S+(j>>>3)+d(i,R,7&j),R+=7&j}var z=g[p(i,R)&x];R+=15&z;var W=z>>>4,G=v.ddef[W],H=(G>>>4)+c(i,R,15&G);for(R+=15&G,y&&(o=r.F._check(o,S+(1<<17)));S<B;)o[S]=o[S++-H],o[S]=o[S++-H],o[S]=o[S++-H],o[S]=o[S++-H];S=B}}}else{7&R&&(R+=8-(7&R));var Y=4+(R>>>3),q=i[Y-4]|i[Y-3]<<8;y&&(o=r.F._check(o,S+q)),o.set(new s(i.buffer,i.byteOffset+Y,q),S),R=Y+q<<3,S+=q}return o.length==S?o:o.slice(0,S)},r.F._check=function(i,o){var s=i.length;if(o<=s)return i;var l=new Uint8Array(Math.max(s<<1,o));return l.set(i,0),l},r.F._decodeTiny=function(i,o,s,l,c,d){for(var u=r.F._bitsE,f=r.F._get17,h=0;h<s;){var p=i[f(l,c)&o];c+=15&p;var v=p>>>4;if(v<=15)d[h]=v,h++;else{var y=0,w=0;v==16?(w=3+u(l,c,2),c+=2,y=d[h-1]):v==17?(w=3+u(l,c,3),c+=3):v==18&&(w=11+u(l,c,7),c+=7);for(var g=h+w;h<g;)d[h]=y,h++}}return c},r.F._copyOut=function(i,o,s,l){for(var c=0,d=0,u=l.length>>>1;d<s;){var f=i[d+o];l[d<<1]=0,l[1+(d<<1)]=f,f>c&&(c=f),d++}for(;d<u;)l[d<<1]=0,l[1+(d<<1)]=0,d++;return c},r.F.makeCodes=function(i,o){for(var s,l,c,d,u=r.F.U,f=i.length,h=u.bl_count,p=0;p<=o;p++)h[p]=0;for(p=1;p<f;p+=2)h[i[p]]++;var v=u.next_code;for(s=0,h[0]=0,l=1;l<=o;l++)s=s+h[l-1]<<1,v[l]=s;for(c=0;c<f;c+=2)(d=i[c+1])!=0&&(i[c]=v[d],v[d]++)},r.F.codes2map=function(i,o,s){for(var l=i.length,c=r.F.U.rev15,d=0;d<l;d+=2)if(i[d+1]!=0)for(var u=d>>1,f=i[d+1],h=u<<4|f,p=o-f,v=i[d]<<p,y=v+(1<<p);v!=y;)s[c[v]>>>15-o]=h,v++},r.F.revCodes=function(i,o){for(var s=r.F.U.rev15,l=15-o,c=0;c<i.length;c+=2){var d=i[c]<<o-i[c+1];i[c]=s[d]>>>l}},r.F._putsE=function(i,o,s){s<<=7&o;var l=o>>>3;i[l]|=s,i[l+1]|=s>>>8},r.F._putsF=function(i,o,s){s<<=7&o;var l=o>>>3;i[l]|=s,i[l+1]|=s>>>8,i[l+2]|=s>>>16},r.F._bitsE=function(i,o,s){return(i[o>>>3]|i[1+(o>>>3)]<<8)>>>(7&o)&(1<<s)-1},r.F._bitsF=function(i,o,s){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16)>>>(7&o)&(1<<s)-1},r.F._get17=function(i,o){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16)>>>(7&o)},r.F._get25=function(i,o){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16|i[3+(o>>>3)]<<24)>>>(7&o)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,o=0;o<32768;o++){var s=o;s=(4278255360&(s=(4042322160&(s=(3435973836&(s=(2863311530&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,i.rev15[o]=(s>>>16|s<<16)>>>17}function l(c,d,u){for(;d--!=0;)c.push(0,u)}for(o=0;o<32;o++)i.ldef[o]=i.of0[o]<<3|i.exb[o],i.ddef[o]=i.df0[o]<<4|i.dxb[o];l(i.fltree,144,8),l(i.fltree,112,9),l(i.fltree,24,7),l(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),l(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),l(i.itree,19,0),l(i.ltree,286,0),l(i.dtree,30,0),l(i.ttree,320,0)}()})();var zD=BD({__proto__:null,default:Vd},[Vd]);const rr=function(){var t={nextZero(u,f){for(;u[f]!=0;)f++;return f},readUshort:(u,f)=>u[f]<<8|u[f+1],writeUshort(u,f,h){u[f]=h>>8&255,u[f+1]=255&h},readUint:(u,f)=>16777216*u[f]+(u[f+1]<<16|u[f+2]<<8|u[f+3]),writeUint(u,f,h){u[f]=h>>24&255,u[f+1]=h>>16&255,u[f+2]=h>>8&255,u[f+3]=255&h},readASCII(u,f,h){let p="";for(let v=0;v<h;v++)p+=String.fromCharCode(u[f+v]);return p},writeASCII(u,f,h){for(let p=0;p<h.length;p++)u[f+p]=h.charCodeAt(p)},readBytes(u,f,h){const p=[];for(let v=0;v<h;v++)p.push(u[f+v]);return p},pad:u=>u.length<2?`0${u}`:u,readUTF8(u,f,h){let p,v="";for(let y=0;y<h;y++)v+=`%${t.pad(u[f+y].toString(16))}`;try{p=decodeURIComponent(v)}catch{return t.readASCII(u,f,h)}return p}};function e(u,f,h,p){const v=f*h,y=o(p),w=Math.ceil(f*y/8),g=new Uint8Array(4*v),b=new Uint32Array(g.buffer),{ctype:_}=p,{depth:E}=p,A=t.readUshort;if(_==6){const j=v<<2;if(E==8)for(var k=0;k<j;k+=4)g[k]=u[k],g[k+1]=u[k+1],g[k+2]=u[k+2],g[k+3]=u[k+3];if(E==16)for(k=0;k<j;k++)g[k]=u[k<<1]}else if(_==2){const j=p.tabs.tRNS;if(j==null){if(E==8)for(k=0;k<v;k++){var I=3*k;b[k]=255<<24|u[I+2]<<16|u[I+1]<<8|u[I]}if(E==16)for(k=0;k<v;k++)I=6*k,b[k]=255<<24|u[I+4]<<16|u[I+2]<<8|u[I]}else{var x=j[0];const z=j[1],W=j[2];if(E==8)for(k=0;k<v;k++){var S=k<<2;I=3*k,b[k]=255<<24|u[I+2]<<16|u[I+1]<<8|u[I],u[I]==x&&u[I+1]==z&&u[I+2]==W&&(g[S+3]=0)}if(E==16)for(k=0;k<v;k++)S=k<<2,I=6*k,b[k]=255<<24|u[I+4]<<16|u[I+2]<<8|u[I],A(u,I)==x&&A(u,I+2)==z&&A(u,I+4)==W&&(g[S+3]=0)}}else if(_==3){const j=p.tabs.PLTE,z=p.tabs.tRNS,W=z?z.length:0;if(E==1)for(var R=0;R<h;R++){var T=R*w,N=R*f;for(k=0;k<f;k++){S=N+k<<2;var P=3*(V=u[T+(k>>3)]>>7-((7&k)<<0)&1);g[S]=j[P],g[S+1]=j[P+1],g[S+2]=j[P+2],g[S+3]=V<W?z[V]:255}}if(E==2)for(R=0;R<h;R++)for(T=R*w,N=R*f,k=0;k<f;k++)S=N+k<<2,P=3*(V=u[T+(k>>2)]>>6-((3&k)<<1)&3),g[S]=j[P],g[S+1]=j[P+1],g[S+2]=j[P+2],g[S+3]=V<W?z[V]:255;if(E==4)for(R=0;R<h;R++)for(T=R*w,N=R*f,k=0;k<f;k++)S=N+k<<2,P=3*(V=u[T+(k>>1)]>>4-((1&k)<<2)&15),g[S]=j[P],g[S+1]=j[P+1],g[S+2]=j[P+2],g[S+3]=V<W?z[V]:255;if(E==8)for(k=0;k<v;k++){var V;S=k<<2,P=3*(V=u[k]),g[S]=j[P],g[S+1]=j[P+1],g[S+2]=j[P+2],g[S+3]=V<W?z[V]:255}}else if(_==4){if(E==8)for(k=0;k<v;k++){S=k<<2;var $=u[D=k<<1];g[S]=$,g[S+1]=$,g[S+2]=$,g[S+3]=u[D+1]}if(E==16)for(k=0;k<v;k++){var D;S=k<<2,$=u[D=k<<2],g[S]=$,g[S+1]=$,g[S+2]=$,g[S+3]=u[D+2]}}else if(_==0)for(x=p.tabs.tRNS?p.tabs.tRNS:-1,R=0;R<h;R++){const j=R*w,z=R*f;if(E==1)for(var O=0;O<f;O++){var B=($=255*(u[j+(O>>>3)]>>>7-(7&O)&1))==255*x?0:255;b[z+O]=B<<24|$<<16|$<<8|$}else if(E==2)for(O=0;O<f;O++)B=($=85*(u[j+(O>>>2)]>>>6-((3&O)<<1)&3))==85*x?0:255,b[z+O]=B<<24|$<<16|$<<8|$;else if(E==4)for(O=0;O<f;O++)B=($=17*(u[j+(O>>>1)]>>>4-((1&O)<<2)&15))==17*x?0:255,b[z+O]=B<<24|$<<16|$<<8|$;else if(E==8)for(O=0;O<f;O++)B=($=u[j+O])==x?0:255,b[z+O]=B<<24|$<<16|$<<8|$;else if(E==16)for(O=0;O<f;O++)$=u[j+(O<<1)],B=A(u,j+(O<<1))==x?0:255,b[z+O]=B<<24|$<<16|$<<8|$}return g}function n(u,f,h,p){const v=o(u),y=Math.ceil(h*v/8),w=new Uint8Array((y+1+u.interlace)*p);return f=u.tabs.CgBI?i(f,w):r(f,w),u.interlace==0?f=s(f,u,0,h,p):u.interlace==1&&(f=function(b,_){const E=_.width,A=_.height,k=o(_),I=k>>3,x=Math.ceil(E*k/8),S=new Uint8Array(A*x);let R=0;const T=[0,0,4,0,2,0,1],N=[0,4,0,2,0,1,0],P=[8,8,8,4,4,2,2],V=[8,8,4,4,2,2,1];let $=0;for(;$<7;){const O=P[$],B=V[$];let j=0,z=0,W=T[$];for(;W<A;)W+=O,z++;let G=N[$];for(;G<E;)G+=B,j++;const H=Math.ceil(j*k/8);s(b,_,R,j,z);let Y=0,q=T[$];for(;q<A;){let Q=N[$],J=R+Y*H<<3;for(;Q<E;){var D;if(k==1&&(D=(D=b[J>>3])>>7-(7&J)&1,S[q*x+(Q>>3)]|=D<<7-((7&Q)<<0)),k==2&&(D=(D=b[J>>3])>>6-(7&J)&3,S[q*x+(Q>>2)]|=D<<6-((3&Q)<<1)),k==4&&(D=(D=b[J>>3])>>4-(7&J)&15,S[q*x+(Q>>1)]|=D<<4-((1&Q)<<2)),k>=8){const ne=q*x+Q*I;for(let oe=0;oe<I;oe++)S[ne+oe]=b[(J>>3)+oe]}J+=k,Q+=B}Y++,q+=O}j*z!=0&&(R+=z*(1+H)),$+=1}return S}(f,u)),f}function r(u,f){return i(new Uint8Array(u.buffer,2,u.length-6),f)}var i=function(){const u={H:{}};return u.H.N=function(f,h){const p=Uint8Array;let v,y,w=0,g=0,b=0,_=0,E=0,A=0,k=0,I=0,x=0;if(f[0]==3&&f[1]==0)return h||new p(0);const S=u.H,R=S.b,T=S.e,N=S.R,P=S.n,V=S.A,$=S.Z,D=S.m,O=h==null;for(O&&(h=new p(f.length>>>2<<5));w==0;)if(w=R(f,x,1),g=R(f,x+1,2),x+=3,g!=0){if(O&&(h=u.H.W(h,I+(1<<17))),g==1&&(v=D.J,y=D.h,A=511,k=31),g==2){b=T(f,x,5)+257,_=T(f,x+5,5)+1,E=T(f,x+10,4)+4,x+=14;let j=1;for(var B=0;B<38;B+=2)D.Q[B]=0,D.Q[B+1]=0;for(B=0;B<E;B++){const G=T(f,x+3*B,3);D.Q[1+(D.X[B]<<1)]=G,G>j&&(j=G)}x+=3*E,P(D.Q,j),V(D.Q,j,D.u),v=D.w,y=D.d,x=N(D.u,(1<<j)-1,b+_,f,x,D.v);const z=S.V(D.v,0,b,D.C);A=(1<<z)-1;const W=S.V(D.v,b,_,D.D);k=(1<<W)-1,P(D.C,z),V(D.C,z,v),P(D.D,W),V(D.D,W,y)}for(;;){const j=v[$(f,x)&A];x+=15&j;const z=j>>>4;if(!(z>>>8))h[I++]=z;else{if(z==256)break;{let W=I+z-254;if(z>264){const Q=D.q[z-257];W=I+(Q>>>3)+T(f,x,7&Q),x+=7&Q}const G=y[$(f,x)&k];x+=15&G;const H=G>>>4,Y=D.c[H],q=(Y>>>4)+R(f,x,15&Y);for(x+=15&Y;I<W;)h[I]=h[I++-q],h[I]=h[I++-q],h[I]=h[I++-q],h[I]=h[I++-q];I=W}}}}else{7&x&&(x+=8-(7&x));const j=4+(x>>>3),z=f[j-4]|f[j-3]<<8;O&&(h=u.H.W(h,I+z)),h.set(new p(f.buffer,f.byteOffset+j,z),I),x=j+z<<3,I+=z}return h.length==I?h:h.slice(0,I)},u.H.W=function(f,h){const p=f.length;if(h<=p)return f;const v=new Uint8Array(p<<1);return v.set(f,0),v},u.H.R=function(f,h,p,v,y,w){const g=u.H.e,b=u.H.Z;let _=0;for(;_<p;){const E=f[b(v,y)&h];y+=15&E;const A=E>>>4;if(A<=15)w[_]=A,_++;else{let k=0,I=0;A==16?(I=3+g(v,y,2),y+=2,k=w[_-1]):A==17?(I=3+g(v,y,3),y+=3):A==18&&(I=11+g(v,y,7),y+=7);const x=_+I;for(;_<x;)w[_]=k,_++}}return y},u.H.V=function(f,h,p,v){let y=0,w=0;const g=v.length>>>1;for(;w<p;){const b=f[w+h];v[w<<1]=0,v[1+(w<<1)]=b,b>y&&(y=b),w++}for(;w<g;)v[w<<1]=0,v[1+(w<<1)]=0,w++;return y},u.H.n=function(f,h){const p=u.H.m,v=f.length;let y,w,g,b;const _=p.j;for(var E=0;E<=h;E++)_[E]=0;for(E=1;E<v;E+=2)_[f[E]]++;const A=p.K;for(y=0,_[0]=0,w=1;w<=h;w++)y=y+_[w-1]<<1,A[w]=y;for(g=0;g<v;g+=2)b=f[g+1],b!=0&&(f[g]=A[b],A[b]++)},u.H.A=function(f,h,p){const v=f.length,y=u.H.m.r;for(let w=0;w<v;w+=2)if(f[w+1]!=0){const g=w>>1,b=f[w+1],_=g<<4|b,E=h-b;let A=f[w]<<E;const k=A+(1<<E);for(;A!=k;)p[y[A]>>>15-h]=_,A++}},u.H.l=function(f,h){const p=u.H.m.r,v=15-h;for(let y=0;y<f.length;y+=2){const w=f[y]<<h-f[y+1];f[y]=p[w]>>>v}},u.H.M=function(f,h,p){p<<=7&h;const v=h>>>3;f[v]|=p,f[v+1]|=p>>>8},u.H.I=function(f,h,p){p<<=7&h;const v=h>>>3;f[v]|=p,f[v+1]|=p>>>8,f[v+2]|=p>>>16},u.H.e=function(f,h,p){return(f[h>>>3]|f[1+(h>>>3)]<<8)>>>(7&h)&(1<<p)-1},u.H.b=function(f,h,p){return(f[h>>>3]|f[1+(h>>>3)]<<8|f[2+(h>>>3)]<<16)>>>(7&h)&(1<<p)-1},u.H.Z=function(f,h){return(f[h>>>3]|f[1+(h>>>3)]<<8|f[2+(h>>>3)]<<16)>>>(7&h)},u.H.i=function(f,h){return(f[h>>>3]|f[1+(h>>>3)]<<8|f[2+(h>>>3)]<<16|f[3+(h>>>3)]<<24)>>>(7&h)},u.H.m=function(){const f=Uint16Array,h=Uint32Array;return{K:new f(16),j:new f(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new f(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new h(32),J:new f(512),_:[],h:new f(32),$:[],w:new f(32768),C:[],v:[],d:new f(32768),D:[],u:new f(512),Q:[],r:new f(32768),s:new h(286),Y:new h(30),a:new h(19),t:new h(15e3),k:new f(65536),g:new f(32768)}}(),function(){const f=u.H.m;for(var h=0;h<32768;h++){let v=h;v=(2863311530&v)>>>1|(1431655765&v)<<1,v=(3435973836&v)>>>2|(858993459&v)<<2,v=(4042322160&v)>>>4|(252645135&v)<<4,v=(4278255360&v)>>>8|(16711935&v)<<8,f.r[h]=(v>>>16|v<<16)>>>17}function p(v,y,w){for(;y--!=0;)v.push(0,w)}for(h=0;h<32;h++)f.q[h]=f.S[h]<<3|f.T[h],f.c[h]=f.p[h]<<4|f.z[h];p(f._,144,8),p(f._,112,9),p(f._,24,7),p(f._,8,8),u.H.n(f._,9),u.H.A(f._,9,f.J),u.H.l(f._,9),p(f.$,32,5),u.H.n(f.$,5),u.H.A(f.$,5,f.h),u.H.l(f.$,5),p(f.Q,19,0),p(f.C,286,0),p(f.D,30,0),p(f.v,320,0)}(),u.H.N}();function o(u){return[1,null,3,1,2,null,4][u.ctype]*u.depth}function s(u,f,h,p,v){let y=o(f);const w=Math.ceil(p*y/8);let g,b;y=Math.ceil(y/8);let _=u[h],E=0;if(_>1&&(u[h]=[0,0,1][_-2]),_==3)for(E=y;E<w;E++)u[E+1]=u[E+1]+(u[E+1-y]>>>1)&255;for(let A=0;A<v;A++)if(g=h+A*w,b=g+A+1,_=u[b-1],E=0,_==0)for(;E<w;E++)u[g+E]=u[b+E];else if(_==1){for(;E<y;E++)u[g+E]=u[b+E];for(;E<w;E++)u[g+E]=u[b+E]+u[g+E-y]}else if(_==2)for(;E<w;E++)u[g+E]=u[b+E]+u[g+E-w];else if(_==3){for(;E<y;E++)u[g+E]=u[b+E]+(u[g+E-w]>>>1);for(;E<w;E++)u[g+E]=u[b+E]+(u[g+E-w]+u[g+E-y]>>>1)}else{for(;E<y;E++)u[g+E]=u[b+E]+l(0,u[g+E-w],0);for(;E<w;E++)u[g+E]=u[b+E]+l(u[g+E-y],u[g+E-w],u[g+E-y-w])}return u}function l(u,f,h){const p=u+f-h,v=p-u,y=p-f,w=p-h;return v*v<=y*y&&v*v<=w*w?u:y*y<=w*w?f:h}function c(u,f,h){h.width=t.readUint(u,f),f+=4,h.height=t.readUint(u,f),f+=4,h.depth=u[f],f++,h.ctype=u[f],f++,h.compress=u[f],f++,h.filter=u[f],f++,h.interlace=u[f],f++}function d(u,f,h,p,v,y,w,g,b){const _=Math.min(f,v),E=Math.min(h,y);let A=0,k=0;for(let $=0;$<E;$++)for(let D=0;D<_;D++)if(w>=0&&g>=0?(A=$*f+D<<2,k=(g+$)*v+w+D<<2):(A=(-g+$)*f-w+D<<2,k=$*v+D<<2),b==0)p[k]=u[A],p[k+1]=u[A+1],p[k+2]=u[A+2],p[k+3]=u[A+3];else if(b==1){var I=u[A+3]*.00392156862745098,x=u[A]*I,S=u[A+1]*I,R=u[A+2]*I,T=p[k+3]*(1/255),N=p[k]*T,P=p[k+1]*T,V=p[k+2]*T;const O=1-I,B=I+T*O,j=B==0?0:1/B;p[k+3]=255*B,p[k+0]=(x+N*O)*j,p[k+1]=(S+P*O)*j,p[k+2]=(R+V*O)*j}else if(b==2)I=u[A+3],x=u[A],S=u[A+1],R=u[A+2],T=p[k+3],N=p[k],P=p[k+1],V=p[k+2],I==T&&x==N&&S==P&&R==V?(p[k]=0,p[k+1]=0,p[k+2]=0,p[k+3]=0):(p[k]=x,p[k+1]=S,p[k+2]=R,p[k+3]=I);else if(b==3){if(I=u[A+3],x=u[A],S=u[A+1],R=u[A+2],T=p[k+3],N=p[k],P=p[k+1],V=p[k+2],I==T&&x==N&&S==P&&R==V)continue;if(I<220&&T>20)return!1}return!0}return{decode:function(f){const h=new Uint8Array(f);let p=8;const v=t,y=v.readUshort,w=v.readUint,g={tabs:{},frames:[]},b=new Uint8Array(h.length);let _,E=0,A=0;const k=[137,80,78,71,13,10,26,10];for(var I=0;I<8;I++)if(h[I]!=k[I])throw"The input is not a PNG file!";for(;p<h.length;){const $=v.readUint(h,p);p+=4;const D=v.readASCII(h,p,4);if(p+=4,D=="IHDR")c(h,p,g);else if(D=="iCCP"){for(var x=p;h[x]!=0;)x++;v.readASCII(h,p,x-p),h[x+1];const O=h.slice(x+2,p+$);let B=null;try{B=r(O)}catch{B=i(O)}g.tabs[D]=B}else if(D=="CgBI")g.tabs[D]=h.slice(p,p+4);else if(D=="IDAT"){for(I=0;I<$;I++)b[E+I]=h[p+I];E+=$}else if(D=="acTL")g.tabs[D]={num_frames:w(h,p),num_plays:w(h,p+4)},_=new Uint8Array(h.length);else if(D=="fcTL"){A!=0&&((V=g.frames[g.frames.length-1]).data=n(g,_.slice(0,A),V.rect.width,V.rect.height),A=0);const O={x:w(h,p+12),y:w(h,p+16),width:w(h,p+4),height:w(h,p+8)};let B=y(h,p+22);B=y(h,p+20)/(B==0?100:B);const j={rect:O,delay:Math.round(1e3*B),dispose:h[p+24],blend:h[p+25]};g.frames.push(j)}else if(D=="fdAT"){for(I=0;I<$-4;I++)_[A+I]=h[p+I+4];A+=$-4}else if(D=="pHYs")g.tabs[D]=[v.readUint(h,p),v.readUint(h,p+4),h[p+8]];else if(D=="cHRM")for(g.tabs[D]=[],I=0;I<8;I++)g.tabs[D].push(v.readUint(h,p+4*I));else if(D=="tEXt"||D=="zTXt"){g.tabs[D]==null&&(g.tabs[D]={});var S=v.nextZero(h,p),R=v.readASCII(h,p,S-p),T=p+$-S-1;if(D=="tEXt")P=v.readASCII(h,S+1,T);else{var N=r(h.slice(S+2,S+2+T));P=v.readUTF8(N,0,N.length)}g.tabs[D][R]=P}else if(D=="iTXt"){g.tabs[D]==null&&(g.tabs[D]={}),S=0,x=p,S=v.nextZero(h,x),R=v.readASCII(h,x,S-x);const O=h[x=S+1];var P;h[x+1],x+=2,S=v.nextZero(h,x),v.readASCII(h,x,S-x),x=S+1,S=v.nextZero(h,x),v.readUTF8(h,x,S-x),T=$-((x=S+1)-p),O==0?P=v.readUTF8(h,x,T):(N=r(h.slice(x,x+T)),P=v.readUTF8(N,0,N.length)),g.tabs[D][R]=P}else if(D=="PLTE")g.tabs[D]=v.readBytes(h,p,$);else if(D=="hIST"){const O=g.tabs.PLTE.length/3;for(g.tabs[D]=[],I=0;I<O;I++)g.tabs[D].push(y(h,p+2*I))}else if(D=="tRNS")g.ctype==3?g.tabs[D]=v.readBytes(h,p,$):g.ctype==0?g.tabs[D]=y(h,p):g.ctype==2&&(g.tabs[D]=[y(h,p),y(h,p+2),y(h,p+4)]);else if(D=="gAMA")g.tabs[D]=v.readUint(h,p)/1e5;else if(D=="sRGB")g.tabs[D]=h[p];else if(D=="bKGD")g.ctype==0||g.ctype==4?g.tabs[D]=[y(h,p)]:g.ctype==2||g.ctype==6?g.tabs[D]=[y(h,p),y(h,p+2),y(h,p+4)]:g.ctype==3&&(g.tabs[D]=h[p]);else if(D=="IEND")break;p+=$,v.readUint(h,p),p+=4}var V;return A!=0&&((V=g.frames[g.frames.length-1]).data=n(g,_.slice(0,A),V.rect.width,V.rect.height)),g.data=n(g,b,g.width,g.height),delete g.compress,delete g.interlace,delete g.filter,g},toRGBA8:function(f){const h=f.width,p=f.height;if(f.tabs.acTL==null)return[e(f.data,h,p,f).buffer];const v=[];f.frames[0].data==null&&(f.frames[0].data=f.data);const y=h*p*4,w=new Uint8Array(y),g=new Uint8Array(y),b=new Uint8Array(y);for(let E=0;E<f.frames.length;E++){const A=f.frames[E],k=A.rect.x,I=A.rect.y,x=A.rect.width,S=A.rect.height,R=e(A.data,x,S,f);if(E!=0)for(var _=0;_<y;_++)b[_]=w[_];if(A.blend==0?d(R,x,S,w,h,p,k,I,0):A.blend==1&&d(R,x,S,w,h,p,k,I,1),v.push(w.buffer.slice(0)),A.dispose!=0){if(A.dispose==1)d(g,x,S,w,h,p,k,I,0);else if(A.dispose==2)for(_=0;_<y;_++)w[_]=b[_]}}return v},_paeth:l,_copyTile:d,_bin:t}}();(function(){const{_copyTile:t}=rr,{_bin:e}=rr,n=rr._paeth;var r={table:function(){const x=new Uint32Array(256);for(let S=0;S<256;S++){let R=S;for(let T=0;T<8;T++)1&R?R=3988292384^R>>>1:R>>>=1;x[S]=R}return x}(),update(x,S,R,T){for(let N=0;N<T;N++)x=r.table[255&(x^S[R+N])]^x>>>8;return x},crc:(x,S,R)=>4294967295^r.update(4294967295,x,S,R)};function i(x,S,R,T){S[R]+=x[0]*T>>4,S[R+1]+=x[1]*T>>4,S[R+2]+=x[2]*T>>4,S[R+3]+=x[3]*T>>4}function o(x){return Math.max(0,Math.min(255,x))}function s(x,S){const R=x[0]-S[0],T=x[1]-S[1],N=x[2]-S[2],P=x[3]-S[3];return R*R+T*T+N*N+P*P}function l(x,S,R,T,N,P,V){V==null&&(V=1);const $=T.length,D=[];for(var O=0;O<$;O++){const q=T[O];D.push([q>>>0&255,q>>>8&255,q>>>16&255,q>>>24&255])}for(O=0;O<$;O++){let q=4294967295;for(var B=0,j=0;j<$;j++){var z=s(D[O],D[j]);j!=O&&z<q&&(q=z,B=j)}}const W=new Uint32Array(N.buffer),G=new Int16Array(S*R*4),H=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(O=0;O<H.length;O++)H[O]=255*((H[O]+.5)/16-.5);for(let q=0;q<R;q++)for(let Q=0;Q<S;Q++){var Y;O=4*(q*S+Q),V!=2?Y=[o(x[O]+G[O]),o(x[O+1]+G[O+1]),o(x[O+2]+G[O+2]),o(x[O+3]+G[O+3])]:(z=H[4*(3&q)+(3&Q)],Y=[o(x[O]+z),o(x[O+1]+z),o(x[O+2]+z),o(x[O+3]+z)]),B=0;let J=16777215;for(j=0;j<$;j++){const se=s(Y,D[j]);se<J&&(J=se,B=j)}const ne=D[B],oe=[Y[0]-ne[0],Y[1]-ne[1],Y[2]-ne[2],Y[3]-ne[3]];V==1&&(Q!=S-1&&i(oe,G,O+4,7),q!=R-1&&(Q!=0&&i(oe,G,O+4*S-4,3),i(oe,G,O+4*S,5),Q!=S-1&&i(oe,G,O+4*S+4,1))),P[O>>2]=B,W[O>>2]=T[B]}}function c(x,S,R,T,N){N==null&&(N={});const{crc:P}=r,V=e.writeUint,$=e.writeUshort,D=e.writeASCII;let O=8;const B=x.frames.length>1;let j,z=!1,W=33+(B?20:0);if(N.sRGB!=null&&(W+=13),N.pHYs!=null&&(W+=21),N.iCCP!=null&&(j=pako.deflate(N.iCCP),W+=21+j.length+4),x.ctype==3){for(var G=x.plte.length,H=0;H<G;H++)x.plte[H]>>>24!=255&&(z=!0);W+=8+3*G+4+(z?8+1*G+4:0)}for(var Y=0;Y<x.frames.length;Y++)B&&(W+=38),W+=(ne=x.frames[Y]).cimg.length+12,Y!=0&&(W+=4);W+=12;const q=new Uint8Array(W),Q=[137,80,78,71,13,10,26,10];for(H=0;H<8;H++)q[H]=Q[H];if(V(q,O,13),O+=4,D(q,O,"IHDR"),O+=4,V(q,O,S),O+=4,V(q,O,R),O+=4,q[O]=x.depth,O++,q[O]=x.ctype,O++,q[O]=0,O++,q[O]=0,O++,q[O]=0,O++,V(q,O,P(q,O-17,17)),O+=4,N.sRGB!=null&&(V(q,O,1),O+=4,D(q,O,"sRGB"),O+=4,q[O]=N.sRGB,O++,V(q,O,P(q,O-5,5)),O+=4),N.iCCP!=null){const oe=13+j.length;V(q,O,oe),O+=4,D(q,O,"iCCP"),O+=4,D(q,O,"ICC profile"),O+=11,O+=2,q.set(j,O),O+=j.length,V(q,O,P(q,O-(oe+4),oe+4)),O+=4}if(N.pHYs!=null&&(V(q,O,9),O+=4,D(q,O,"pHYs"),O+=4,V(q,O,N.pHYs[0]),O+=4,V(q,O,N.pHYs[1]),O+=4,q[O]=N.pHYs[2],O++,V(q,O,P(q,O-13,13)),O+=4),B&&(V(q,O,8),O+=4,D(q,O,"acTL"),O+=4,V(q,O,x.frames.length),O+=4,V(q,O,N.loop!=null?N.loop:0),O+=4,V(q,O,P(q,O-12,12)),O+=4),x.ctype==3){for(V(q,O,3*(G=x.plte.length)),O+=4,D(q,O,"PLTE"),O+=4,H=0;H<G;H++){const oe=3*H,se=x.plte[H],ae=255&se,ie=se>>>8&255,we=se>>>16&255;q[O+oe+0]=ae,q[O+oe+1]=ie,q[O+oe+2]=we}if(O+=3*G,V(q,O,P(q,O-3*G-4,3*G+4)),O+=4,z){for(V(q,O,G),O+=4,D(q,O,"tRNS"),O+=4,H=0;H<G;H++)q[O+H]=x.plte[H]>>>24&255;O+=G,V(q,O,P(q,O-G-4,G+4)),O+=4}}let J=0;for(Y=0;Y<x.frames.length;Y++){var ne=x.frames[Y];B&&(V(q,O,26),O+=4,D(q,O,"fcTL"),O+=4,V(q,O,J++),O+=4,V(q,O,ne.rect.width),O+=4,V(q,O,ne.rect.height),O+=4,V(q,O,ne.rect.x),O+=4,V(q,O,ne.rect.y),O+=4,$(q,O,T[Y]),O+=2,$(q,O,1e3),O+=2,q[O]=ne.dispose,O++,q[O]=ne.blend,O++,V(q,O,P(q,O-30,30)),O+=4);const oe=ne.cimg;V(q,O,(G=oe.length)+(Y==0?0:4)),O+=4;const se=O;D(q,O,Y==0?"IDAT":"fdAT"),O+=4,Y!=0&&(V(q,O,J++),O+=4),q.set(oe,O),O+=G,V(q,O,P(q,se,O-se)),O+=4}return V(q,O,0),O+=4,D(q,O,"IEND"),O+=4,V(q,O,P(q,O-4,4)),O+=4,q.buffer}function d(x,S,R){for(let T=0;T<x.frames.length;T++){const N=x.frames[T];N.rect.width;const P=N.rect.height,V=new Uint8Array(P*N.bpl+P);N.cimg=p(N.img,P,N.bpp,N.bpl,V,S,R)}}function u(x,S,R,T,N){const P=N[0],V=N[1],$=N[2],D=N[3],O=N[4],B=N[5];let j=6,z=8,W=255;for(var G=0;G<x.length;G++){const Fe=new Uint8Array(x[G]);for(var H=Fe.length,Y=0;Y<H;Y+=4)W&=Fe[Y+3]}const q=W!=255,Q=function(Ce,Ae,fe,Ne,de,nt){const De=[];for(var Ve=0;Ve<Ce.length;Ve++){const Ze=new Uint8Array(Ce[Ve]),ge=new Uint32Array(Ze.buffer);var mt;let Qe=0,St=0,It=Ae,Ct=fe,Tn=Ne?1:0;if(Ve!=0){const ba=nt||Ne||Ve==1||De[Ve-2].dispose!=0?1:2;let er=0,pi=1e9;for(let lt=0;lt<ba;lt++){var Se=new Uint8Array(Ce[Ve-1-lt]);const kn=new Uint32Array(Ce[Ve-1-lt]);let Hn=Ae,qn=fe,gn=-1,mi=-1;for(let gr=0;gr<fe;gr++)for(let Rn=0;Rn<Ae;Rn++)ge[Be=gr*Ae+Rn]!=kn[Be]&&(Rn<Hn&&(Hn=Rn),Rn>gn&&(gn=Rn),gr<qn&&(qn=gr),gr>mi&&(mi=gr));gn==-1&&(Hn=qn=gn=mi=0),de&&((1&Hn)==1&&Hn--,(1&qn)==1&&qn--);const uo=(gn-Hn+1)*(mi-qn+1);uo<pi&&(pi=uo,er=lt,Qe=Hn,St=qn,It=gn-Hn+1,Ct=mi-qn+1)}Se=new Uint8Array(Ce[Ve-1-er]),er==1&&(De[Ve-1].dispose=2),mt=new Uint8Array(It*Ct*4),t(Se,Ae,fe,mt,It,Ct,-Qe,-St,0),Tn=t(Ze,Ae,fe,mt,It,Ct,-Qe,-St,3)?1:0,Tn==1?h(Ze,Ae,fe,mt,{x:Qe,y:St,width:It,height:Ct}):t(Ze,Ae,fe,mt,It,Ct,-Qe,-St,0)}else mt=Ze.slice(0);De.push({rect:{x:Qe,y:St,width:It,height:Ct},img:mt,blend:Tn,dispose:0})}if(Ne)for(Ve=0;Ve<De.length;Ve++){if(($e=De[Ve]).blend==1)continue;const Ze=$e.rect,ge=De[Ve-1].rect,Qe=Math.min(Ze.x,ge.x),St=Math.min(Ze.y,ge.y),It={x:Qe,y:St,width:Math.max(Ze.x+Ze.width,ge.x+ge.width)-Qe,height:Math.max(Ze.y+Ze.height,ge.y+ge.height)-St};De[Ve-1].dispose=1,Ve-1!=0&&f(Ce,Ae,fe,De,Ve-1,It,de),f(Ce,Ae,fe,De,Ve,It,de)}let ke=0;if(Ce.length!=1)for(var Be=0;Be<De.length;Be++){var $e;ke+=($e=De[Be]).rect.width*$e.rect.height}return De}(x,S,R,P,V,$),J={},ne=[],oe=[];if(T!=0){const Fe=[];for(Y=0;Y<Q.length;Y++)Fe.push(Q[Y].img.buffer);const Ce=function(de){let nt=0;for(var De=0;De<de.length;De++)nt+=de[De].byteLength;const Ve=new Uint8Array(nt);let mt=0;for(De=0;De<de.length;De++){const Se=new Uint8Array(de[De]),ke=Se.length;for(let Be=0;Be<ke;Be+=4){let $e=Se[Be],Ze=Se[Be+1],ge=Se[Be+2];const Qe=Se[Be+3];Qe==0&&($e=Ze=ge=0),Ve[mt+Be]=$e,Ve[mt+Be+1]=Ze,Ve[mt+Be+2]=ge,Ve[mt+Be+3]=Qe}mt+=ke}return Ve.buffer}(Fe),Ae=y(Ce,T);for(Y=0;Y<Ae.plte.length;Y++)ne.push(Ae.plte[Y].est.rgba);let fe=0;for(Y=0;Y<Q.length;Y++){const Ne=(ae=Q[Y]).img.length;var se=new Uint8Array(Ae.inds.buffer,fe>>2,Ne>>2);oe.push(se);const de=new Uint8Array(Ae.abuf,fe,Ne);B&&l(ae.img,ae.rect.width,ae.rect.height,ne,de,se),ae.img.set(de),fe+=Ne}}else for(G=0;G<Q.length;G++){var ae=Q[G];const Fe=new Uint32Array(ae.img.buffer);var ie=ae.rect.width;for(H=Fe.length,se=new Uint8Array(H),oe.push(se),Y=0;Y<H;Y++){const Ce=Fe[Y];if(Y!=0&&Ce==Fe[Y-1])se[Y]=se[Y-1];else if(Y>ie&&Ce==Fe[Y-ie])se[Y]=se[Y-ie];else{let Ae=J[Ce];if(Ae==null&&(J[Ce]=Ae=ne.length,ne.push(Ce),ne.length>=300))break;se[Y]=Ae}}}const we=ne.length;for(we<=256&&O==0&&(z=we<=2?1:we<=4?2:we<=16?4:8,z=Math.max(z,D)),G=0;G<Q.length;G++){(ae=Q[G]).rect.x,ae.rect.y,ie=ae.rect.width;const Fe=ae.rect.height;let Ce=ae.img;new Uint32Array(Ce.buffer);let Ae=4*ie,fe=4;if(we<=256&&O==0){Ae=Math.ceil(z*ie/8);var Te=new Uint8Array(Ae*Fe);const Ne=oe[G];for(let de=0;de<Fe;de++){Y=de*Ae;const nt=de*ie;if(z==8)for(var ye=0;ye<ie;ye++)Te[Y+ye]=Ne[nt+ye];else if(z==4)for(ye=0;ye<ie;ye++)Te[Y+(ye>>1)]|=Ne[nt+ye]<<4-4*(1&ye);else if(z==2)for(ye=0;ye<ie;ye++)Te[Y+(ye>>2)]|=Ne[nt+ye]<<6-2*(3&ye);else if(z==1)for(ye=0;ye<ie;ye++)Te[Y+(ye>>3)]|=Ne[nt+ye]<<7-1*(7&ye)}Ce=Te,j=3,fe=1}else if(q==0&&Q.length==1){Te=new Uint8Array(ie*Fe*3);const Ne=ie*Fe;for(Y=0;Y<Ne;Y++){const de=3*Y,nt=4*Y;Te[de]=Ce[nt],Te[de+1]=Ce[nt+1],Te[de+2]=Ce[nt+2]}Ce=Te,j=2,fe=3,Ae=3*ie}ae.img=Ce,ae.bpl=Ae,ae.bpp=fe}return{ctype:j,depth:z,plte:ne,frames:Q}}function f(x,S,R,T,N,P,V){const $=Uint8Array,D=Uint32Array,O=new $(x[N-1]),B=new D(x[N-1]),j=N+1<x.length?new $(x[N+1]):null,z=new $(x[N]),W=new D(z.buffer);let G=S,H=R,Y=-1,q=-1;for(let J=0;J<P.height;J++)for(let ne=0;ne<P.width;ne++){const oe=P.x+ne,se=P.y+J,ae=se*S+oe,ie=W[ae];ie==0||T[N-1].dispose==0&&B[ae]==ie&&(j==null||j[4*ae+3]!=0)||(oe<G&&(G=oe),oe>Y&&(Y=oe),se<H&&(H=se),se>q&&(q=se))}Y==-1&&(G=H=Y=q=0),V&&((1&G)==1&&G--,(1&H)==1&&H--),P={x:G,y:H,width:Y-G+1,height:q-H+1};const Q=T[N];Q.rect=P,Q.blend=1,Q.img=new Uint8Array(P.width*P.height*4),T[N-1].dispose==0?(t(O,S,R,Q.img,P.width,P.height,-P.x,-P.y,0),h(z,S,R,Q.img,P)):t(z,S,R,Q.img,P.width,P.height,-P.x,-P.y,0)}function h(x,S,R,T,N){t(x,S,R,T,N.width,N.height,-N.x,-N.y,2)}function p(x,S,R,T,N,P,V){const $=[];let D,O=[0,1,2,3,4];P!=-1?O=[P]:(S*T>5e5||R==1)&&(O=[0]),V&&(D={level:0});const B=zD;for(var j=0;j<O.length;j++){for(let G=0;G<S;G++)v(N,x,G,T,R,O[j]);$.push(B.deflate(N,D))}let z,W=1e9;for(j=0;j<$.length;j++)$[j].length<W&&(z=j,W=$[j].length);return $[z]}function v(x,S,R,T,N,P){const V=R*T;let $=V+R;if(x[$]=P,$++,P==0)if(T<500)for(var D=0;D<T;D++)x[$+D]=S[V+D];else x.set(new Uint8Array(S.buffer,V,T),$);else if(P==1){for(D=0;D<N;D++)x[$+D]=S[V+D];for(D=N;D<T;D++)x[$+D]=S[V+D]-S[V+D-N]+256&255}else if(R==0){for(D=0;D<N;D++)x[$+D]=S[V+D];if(P==2)for(D=N;D<T;D++)x[$+D]=S[V+D];if(P==3)for(D=N;D<T;D++)x[$+D]=S[V+D]-(S[V+D-N]>>1)+256&255;if(P==4)for(D=N;D<T;D++)x[$+D]=S[V+D]-n(S[V+D-N],0,0)+256&255}else{if(P==2)for(D=0;D<T;D++)x[$+D]=S[V+D]+256-S[V+D-T]&255;if(P==3){for(D=0;D<N;D++)x[$+D]=S[V+D]+256-(S[V+D-T]>>1)&255;for(D=N;D<T;D++)x[$+D]=S[V+D]+256-(S[V+D-T]+S[V+D-N]>>1)&255}if(P==4){for(D=0;D<N;D++)x[$+D]=S[V+D]+256-n(0,S[V+D-T],0)&255;for(D=N;D<T;D++)x[$+D]=S[V+D]+256-n(S[V+D-N],S[V+D-T],S[V+D-N-T])&255}}}function y(x,S){const R=new Uint8Array(x),T=R.slice(0),N=new Uint32Array(T.buffer),P=w(T,S),V=P[0],$=P[1],D=R.length,O=new Uint8Array(D>>2);let B;if(R.length<2e7)for(var j=0;j<D;j+=4)B=g(V,z=R[j]*(1/255),W=R[j+1]*(1/255),G=R[j+2]*(1/255),H=R[j+3]*(1/255)),O[j>>2]=B.ind,N[j>>2]=B.est.rgba;else for(j=0;j<D;j+=4){var z=R[j]*.00392156862745098,W=R[j+1]*(1/255),G=R[j+2]*(1/255),H=R[j+3]*(1/255);for(B=V;B.left;)B=b(B.est,z,W,G,H)<=0?B.left:B.right;O[j>>2]=B.ind,N[j>>2]=B.est.rgba}return{abuf:T.buffer,inds:O,plte:$}}function w(x,S,R){R==null&&(R=1e-4);const T=new Uint32Array(x.buffer),N={i0:0,i1:x.length,bst:null,est:null,tdst:0,left:null,right:null};N.bst=A(x,N.i0,N.i1),N.est=k(N.bst);const P=[N];for(;P.length<S;){let $=0,D=0;for(var V=0;V<P.length;V++)P[V].est.L>$&&($=P[V].est.L,D=V);if($<R)break;const O=P[D],B=_(x,T,O.i0,O.i1,O.est.e,O.est.eMq255);if(O.i0>=B||O.i1<=B){O.est.L=0;continue}const j={i0:O.i0,i1:B,bst:null,est:null,tdst:0,left:null,right:null};j.bst=A(x,j.i0,j.i1),j.est=k(j.bst);const z={i0:B,i1:O.i1,bst:null,est:null,tdst:0,left:null,right:null};for(z.bst={R:[],m:[],N:O.bst.N-j.bst.N},V=0;V<16;V++)z.bst.R[V]=O.bst.R[V]-j.bst.R[V];for(V=0;V<4;V++)z.bst.m[V]=O.bst.m[V]-j.bst.m[V];z.est=k(z.bst),O.left=j,O.right=z,P[D]=j,P.push(z)}for(P.sort(($,D)=>D.bst.N-$.bst.N),V=0;V<P.length;V++)P[V].ind=V;return[N,P]}function g(x,S,R,T,N){if(x.left==null)return x.tdst=function(j,z,W,G,H){const Y=z-j[0],q=W-j[1],Q=G-j[2],J=H-j[3];return Y*Y+q*q+Q*Q+J*J}(x.est.q,S,R,T,N),x;const P=b(x.est,S,R,T,N);let V=x.left,$=x.right;P>0&&(V=x.right,$=x.left);const D=g(V,S,R,T,N);if(D.tdst<=P*P)return D;const O=g($,S,R,T,N);return O.tdst<D.tdst?O:D}function b(x,S,R,T,N){const{e:P}=x;return P[0]*S+P[1]*R+P[2]*T+P[3]*N-x.eMq}function _(x,S,R,T,N,P){for(T-=4;R<T;){for(;E(x,R,N)<=P;)R+=4;for(;E(x,T,N)>P;)T-=4;if(R>=T)break;const V=S[R>>2];S[R>>2]=S[T>>2],S[T>>2]=V,R+=4,T-=4}for(;E(x,R,N)>P;)R-=4;return R+4}function E(x,S,R){return x[S]*R[0]+x[S+1]*R[1]+x[S+2]*R[2]+x[S+3]*R[3]}function A(x,S,R){const T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],N=[0,0,0,0],P=R-S>>2;for(let V=S;V<R;V+=4){const $=x[V]*.00392156862745098,D=x[V+1]*(1/255),O=x[V+2]*(1/255),B=x[V+3]*(1/255);N[0]+=$,N[1]+=D,N[2]+=O,N[3]+=B,T[0]+=$*$,T[1]+=$*D,T[2]+=$*O,T[3]+=$*B,T[5]+=D*D,T[6]+=D*O,T[7]+=D*B,T[10]+=O*O,T[11]+=O*B,T[15]+=B*B}return T[4]=T[1],T[8]=T[2],T[9]=T[6],T[12]=T[3],T[13]=T[7],T[14]=T[11],{R:T,m:N,N:P}}function k(x){const{R:S}=x,{m:R}=x,{N:T}=x,N=R[0],P=R[1],V=R[2],$=R[3],D=T==0?0:1/T,O=[S[0]-N*N*D,S[1]-N*P*D,S[2]-N*V*D,S[3]-N*$*D,S[4]-P*N*D,S[5]-P*P*D,S[6]-P*V*D,S[7]-P*$*D,S[8]-V*N*D,S[9]-V*P*D,S[10]-V*V*D,S[11]-V*$*D,S[12]-$*N*D,S[13]-$*P*D,S[14]-$*V*D,S[15]-$*$*D],B=O,j=I;let z=[Math.random(),Math.random(),Math.random(),Math.random()],W=0,G=0;if(T!=0)for(let Y=0;Y<16&&(z=j.multVec(B,z),G=Math.sqrt(j.dot(z,z)),z=j.sml(1/G,z),!(Y!=0&&Math.abs(G-W)<1e-9));Y++)W=G;const H=[N*D,P*D,V*D,$*D];return{Cov:O,q:H,e:z,L:W,eMq255:j.dot(j.sml(255,H),z),eMq:j.dot(z,H),rgba:(Math.round(255*H[3])<<24|Math.round(255*H[2])<<16|Math.round(255*H[1])<<8|Math.round(255*H[0])<<0)>>>0}}var I={multVec:(x,S)=>[x[0]*S[0]+x[1]*S[1]+x[2]*S[2]+x[3]*S[3],x[4]*S[0]+x[5]*S[1]+x[6]*S[2]+x[7]*S[3],x[8]*S[0]+x[9]*S[1]+x[10]*S[2]+x[11]*S[3],x[12]*S[0]+x[13]*S[1]+x[14]*S[2]+x[15]*S[3]],dot:(x,S)=>x[0]*S[0]+x[1]*S[1]+x[2]*S[2]+x[3]*S[3],sml:(x,S)=>[x*S[0],x*S[1],x*S[2],x*S[3]]};rr.encode=function(S,R,T,N,P,V,$){N==null&&(N=0),$==null&&($=!1);const D=u(S,R,T,N,[!1,!1,!1,0,$,!1]);return d(D,-1),c(D,R,T,P,V)},rr.encodeLL=function(S,R,T,N,P,V,$,D){const O={ctype:0+(N==1?0:2)+(P==0?0:4),depth:V,frames:[]},B=(N+P)*V,j=B*R;for(let z=0;z<S.length;z++)O.frames.push({rect:{x:0,y:0,width:R,height:T},img:new Uint8Array(S[z]),blend:0,dispose:1,bpp:Math.ceil(B/8),bpl:Math.ceil(j/8)});return d(O,0,!0),c(O,R,T,$,D)},rr.encode.compress=u,rr.encode.dither=l,rr.quantize=y,rr.quantize.getKDtree=w,rr.quantize.getNearest=g})();const jx={toArrayBuffer(t,e){const n=t.width,r=t.height,i=n<<2,o=t.getContext("2d").getImageData(0,0,n,r),s=new Uint32Array(o.data.buffer),l=(32*n+31)/32<<2,c=l*r,d=122+c,u=new ArrayBuffer(d),f=new DataView(u),h=1<<20;let p,v,y,w,g=h,b=0,_=0,E=0;function A(x){f.setUint16(_,x,!0),_+=2}function k(x){f.setUint32(_,x,!0),_+=4}function I(x){_+=x}A(19778),k(d),I(4),k(122),k(108),k(n),k(-r>>>0),A(1),A(32),k(3),k(c),k(2835),k(2835),I(8),k(16711680),k(65280),k(255),k(4278190080),k(1466527264),function x(){for(;b<r&&g>0;){for(w=122+b*l,p=0;p<i;)g--,v=s[E++],y=v>>>24,f.setUint32(w+p,v<<8|y),p+=4;b++}E<s.length?(g=h,setTimeout(x,jx._dly)):e(u)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var yn={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},HD={[yn.CHROME]:16384,[yn.FIREFOX]:11180,[yn.DESKTOP_SAFARI]:16384,[yn.IE]:8192,[yn.IOS]:4096,[yn.ETC]:8192};const Mg=typeof window<"u",$x=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Ud=Mg&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),qD=(Mg||$x)&&(Ud&&Ud.getOriginalSymbol(window,"File")||typeof File<"u"&&File),zx=(Mg||$x)&&(Ud&&Ud.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Og(t,e,n=Date.now()){return new Promise(r=>{const i=t.split(","),o=i[0].match(/:(.*?);/)[1],s=globalThis.atob(i[1]);let l=s.length;const c=new Uint8Array(l);for(;l--;)c[l]=s.charCodeAt(l);const d=new Blob([c],{type:o});d.name=e,d.lastModified=n,r(d)})}function Hx(t){return new Promise((e,n)=>{const r=new zx;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)})}function qx(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.src=t})}function Eo(){if(Eo.cachedResult!==void 0)return Eo.cachedResult;let t=yn.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=yn.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=yn.IOS:/Safari/i.test(e)?t=yn.DESKTOP_SAFARI:/Firefox/i.test(e)?t=yn.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=yn.IE),Eo.cachedResult=t,Eo.cachedResult}function Wx(t,e){const n=Eo(),r=HD[n];let i=t,o=e,s=i*o;const l=i>o?o/i:i/o;for(;s>r*r;){const c=(r+i)/2,d=(r+o)/2;c<d?(o=d,i=d*l):(o=c*l,i=c),s=i*o}return{width:i,height:o}}function qf(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function Gx(t,e){const{width:n,height:r}=Wx(t.width,t.height),[i,o]=qf(n,r);return e&&/jpe?g/.test(e)&&(o.fillStyle="white",o.fillRect(0,0,i.width,i.height)),o.drawImage(t,0,0,i.width,i.height),i}function Du(){return Du.cachedResult!==void 0||(Du.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Du.cachedResult}function Fd(t,e={}){return new Promise(function(n,r){let i,o;var s=function(){try{return o=Gx(i,e.fileType||t.type),n([i,o])}catch(c){return r(c)}},l=function(c){try{var d=function(u){try{throw u}catch(f){return r(f)}};try{let u;return Hx(t).then(function(f){try{return u=f,qx(u).then(function(h){try{return i=h,function(){try{return s()}catch(p){return r(p)}}()}catch(p){return d(p)}},d)}catch(h){return d(h)}},d)}catch(u){d(u)}}catch(u){return r(u)}};try{if(Du()||[yn.DESKTOP_SAFARI,yn.MOBILE_SAFARI].includes(Eo()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(c){try{return i=c,s()}catch{return l()}},l)}catch{l()}})}function Bd(t,e,n,r,i=1){return new Promise(function(o,s){let l;if(e==="image/png"){let f,h,p;return f=t.getContext("2d"),{data:h}=f.getImageData(0,0,t.width,t.height),p=rr.encode([h.buffer],t.width,t.height,4096*i),l=new Blob([p],{type:e}),l.name=n,l.lastModified=r,c.call(this)}{let f=function(){return c.call(this)};var d=f;if(e==="image/bmp")return new Promise(h=>jx.toBlob(t,h)).then((function(h){try{return l=h,l.name=n,l.lastModified=r,f.call(this)}catch(p){return s(p)}}).bind(this),s);{let h=function(){return f.call(this)};var u=h;if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then((function(p){try{return l=p,l.name=n,l.lastModified=r,h.call(this)}catch(v){return s(v)}}).bind(this),s);{let p;return p=t.toDataURL(e,i),Og(p,n,r).then((function(v){try{return l=v,h.call(this)}catch(y){return s(y)}}).bind(this),s)}}}function c(){return o(l)}})}function wr(t){t.width=0,t.height=0}function Is(){return new Promise(function(t,e){let n,r,i,o;return Is.cachedResult!==void 0?t(Is.cachedResult):Og("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(s){try{return n=s,Fd(n).then(function(l){try{return r=l[1],Bd(r,n.type,n.name,n.lastModified).then(function(c){try{return i=c,wr(r),Fd(i).then(function(d){try{return o=d[0],Is.cachedResult=o.width===1&&o.height===2,t(Is.cachedResult)}catch(u){return e(u)}},e)}catch(d){return e(d)}},e)}catch(c){return e(c)}},e)}catch(l){return e(l)}},e)})}function Yx(t){return new Promise((e,n)=>{const r=new zx;r.onload=i=>{const o=new DataView(i.target.result);if(o.getUint16(0,!1)!=65496)return e(-2);const s=o.byteLength;let l=2;for(;l<s;){if(o.getUint16(l+2,!1)<=8)return e(-1);const c=o.getUint16(l,!1);if(l+=2,c==65505){if(o.getUint32(l+=2,!1)!=1165519206)return e(-1);const d=o.getUint16(l+=6,!1)==18761;l+=o.getUint32(l+4,d);const u=o.getUint16(l,d);l+=2;for(let f=0;f<u;f++)if(o.getUint16(l+12*f,d)==274)return e(o.getUint16(l+12*f+8,d))}else{if((65280&c)!=65280)break;l+=o.getUint16(l,!1)}}return e(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(t)})}function Kx(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:i}=e;let o,s=t;return isFinite(i)&&(n>i||r>i)&&([s,o]=qf(n,r),n>r?(s.width=i,s.height=r/n*i):(s.width=n/r*i,s.height=i),o.drawImage(t,0,0,s.width,s.height),wr(t)),s}function Xx(t,e){const{width:n}=t,{height:r}=t,[i,o]=qf(n,r);switch(e>4&&e<9?(i.width=r,i.height=n):(i.width=n,i.height=r),e){case 2:o.transform(-1,0,0,1,n,0);break;case 3:o.transform(-1,0,0,-1,n,r);break;case 4:o.transform(1,0,0,-1,0,r);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,r,0);break;case 7:o.transform(0,-1,-1,0,r,n);break;case 8:o.transform(0,-1,1,0,0,n)}return o.drawImage(t,0,0,n,r),wr(t),i}function $3(t,e,n=0){return new Promise(function(r,i){let o,s,l,c,d,u,f,h,p,v,y,w,g,b,_,E,A,k,I,x;function S(T=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;o+=T,e.onProgress(Math.min(o,100))}function R(T){if(e.signal&&e.signal.aborted)throw e.signal.reason;o=Math.min(Math.max(T,o),100),e.onProgress(o)}return o=n,s=e.maxIteration||10,l=1024*e.maxSizeMB*1024,S(),Fd(t,e).then((function(T){try{return[,c]=T,S(),d=Kx(c,e),S(),new Promise(function(N,P){var V;if(!(V=e.exifOrientation))return Yx(t).then((function(D){try{return V=D,$.call(this)}catch(O){return P(O)}}).bind(this),P);function $(){return N(V)}return $.call(this)}).then((function(N){try{return u=N,S(),Is().then((function(P){try{return f=P?d:Xx(d,u),S(),h=e.initialQuality||1,p=e.fileType||t.type,Bd(f,p,t.name,t.lastModified,h).then((function(V){try{{let B=function(){if(s--&&(_>l||_>g)){let z,W;return z=x?.95*I.width:I.width,W=x?.95*I.height:I.height,[A,k]=qf(z,W),k.drawImage(I,0,0,z,W),h*=p==="image/png"?.85:.95,Bd(A,p,t.name,t.lastModified,h).then(function(G){try{return E=G,wr(I),I=A,_=E.size,R(Math.min(99,Math.floor((b-_)/(b-l)*100))),B}catch(H){return i(H)}},i)}return[1]},j=function(){return wr(I),wr(A),wr(d),wr(f),wr(c),R(100),r(E)};var D=B,O=j;if(v=V,S(),y=v.size>l,w=v.size>t.size,!y&&!w)return R(100),r(v);var $;return g=t.size,b=v.size,_=b,I=f,x=!e.alwaysKeepResolution&&y,($=(function(z){for(;z;){if(z.then)return void z.then($,i);try{if(z.pop){if(z.length)return z.pop()?j.call(this):z;z=B}else z=z.call(this)}catch(W){return i(W)}}}).bind(this))(B)}}catch(B){return i(B)}}).bind(this),i)}catch(V){return i(V)}}).bind(this),i)}catch(P){return i(P)}}).bind(this),i)}catch(N){return i(N)}}).bind(this),i)})}const WD=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let vp;function GD(t,e){return new Promise((n,r)=>{vp||(vp=function(s){const l=[];return l.push(s),URL.createObjectURL(new Blob(l))}(WD));const i=new Worker(vp);i.addEventListener("message",function(s){if(e.signal&&e.signal.aborted)i.terminate();else if(s.data.progress===void 0){if(s.data.error)return r(new Error(s.data.error)),void i.terminate();n(s.data.file),i.terminate()}else e.onProgress(s.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function jt(t,e){return new Promise(function(n,r){let i,o,s,l,c,d;if(i={...e},s=0,{onProgress:l}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,c=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=p=>{s=p,typeof l=="function"&&l(s)},!(t instanceof Blob||t instanceof qD))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(d=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!c||typeof Worker!="function"||d)return $3(t,i).then((function(p){try{return o=p,h.call(this)}catch(v){return r(v)}}).bind(this),r);var u=(function(){try{return h.call(this)}catch(p){return r(p)}}).bind(this),f=function(p){try{return $3(t,i).then(function(v){try{return o=v,u()}catch(y){return r(y)}},r)}catch(v){return r(v)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",GD(t,i).then(function(p){try{return o=p,u()}catch{return f()}},f)}catch{f()}function h(){try{o.name=t.name,o.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(o=Bx(t,o))}catch{}return n(o)}})}jt.getDataUrlFromFile=Hx,jt.getFilefromDataUrl=Og,jt.loadImage=qx,jt.drawImageInCanvas=Gx,jt.drawFileInCanvas=Fd,jt.canvasToFile=Bd,jt.getExifOrientation=Yx,jt.handleMaxWidthOrHeight=Kx,jt.followExifOrientation=Xx,jt.cleanupCanvasMemory=wr,jt.isAutoOrientationInBrowser=Is,jt.approximateBelowMaximumCanvasSizeOfBrowser=Wx,jt.copyExifWithoutOrientation=Bx,jt.getBrowserName=Eo,jt.version="2.0.2";const YD=1,KD=1e6;let yp=0;function XD(){return yp=(yp+1)%Number.MAX_SAFE_INTEGER,yp.toString()}const _p=new Map,z3=t=>{if(_p.has(t))return;const e=setTimeout(()=>{_p.delete(t),gl({type:"REMOVE_TOAST",toastId:t})},KD);_p.set(t,e)},QD=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,YD)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?z3(n):t.toasts.forEach(r=>{z3(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Vu=[];let Uu={toasts:[]};function gl(t){Uu=QD(Uu,t),Vu.forEach(e=>{e(Uu)})}function JD({...t}){const e=XD(),n=i=>gl({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>gl({type:"DISMISS_TOAST",toastId:e});return gl({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function Dg(){const[t,e]=M.useState(Uu);return M.useEffect(()=>(Vu.push(e),()=>{const n=Vu.indexOf(e);n>-1&&Vu.splice(n,1)}),[t]),{...t,toast:JD,dismiss:n=>gl({type:"DISMISS_TOAST",toastId:n})}}function qo(t){"@babel/helpers - typeof";return qo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qo(t)}function ZD(t,e){if(qo(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qo(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qx(t){var e=ZD(t,"string");return qo(e)=="symbol"?e:e+""}function el(t,e,n){return(e=Qx(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function me(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H3(Object(n),!0).forEach(function(r){el(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eV(t){if(Array.isArray(t))return t}function tV(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,l=[],c=!0,d=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return l}}function o0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Jx(t,e){if(t){if(typeof t=="string")return o0(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o0(t,e):void 0}}function nV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ei(t,e){return eV(t)||tV(t,e)||Jx(t,e)||nV()}function rV(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function hi(t,e){if(t==null)return{};var n,r,i=rV(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var iV=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function oV(t){var e=t.defaultInputValue,n=e===void 0?"":e,r=t.defaultMenuIsOpen,i=r===void 0?!1:r,o=t.defaultValue,s=o===void 0?null:o,l=t.inputValue,c=t.menuIsOpen,d=t.onChange,u=t.onInputChange,f=t.onMenuClose,h=t.onMenuOpen,p=t.value,v=hi(t,iV),y=M.useState(l!==void 0?l:n),w=ei(y,2),g=w[0],b=w[1],_=M.useState(c!==void 0?c:i),E=ei(_,2),A=E[0],k=E[1],I=M.useState(p!==void 0?p:s),x=ei(I,2),S=x[0],R=x[1],T=M.useCallback(function(B,j){typeof d=="function"&&d(B,j),R(B)},[d]),N=M.useCallback(function(B,j){var z;typeof u=="function"&&(z=u(B,j)),b(z!==void 0?z:B)},[u]),P=M.useCallback(function(){typeof h=="function"&&h(),k(!0)},[h]),V=M.useCallback(function(){typeof f=="function"&&f(),k(!1)},[f]),$=l!==void 0?l:g,D=c!==void 0?c:A,O=p!==void 0?p:S;return me(me({},v),{},{inputValue:$,menuIsOpen:D,onChange:T,onInputChange:N,onMenuClose:V,onMenuOpen:P,value:O})}function ve(){return ve=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ve.apply(null,arguments)}function sV(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Qx(r.key),r)}}function aV(t,e,n){return e&&q3(t.prototype,e),n&&q3(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s0(t,e){return s0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},s0(t,e)}function lV(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s0(t,e)}function jd(t){return jd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jd(t)}function Zx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zx=function(){return!!t})()}function cV(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uV(t,e){if(e&&(qo(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cV(t)}function dV(t){var e=Zx();return function(){var n,r=jd(t);if(e){var i=jd(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return uV(this,n)}}function fV(t){if(Array.isArray(t))return o0(t)}function hV(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vg(t){return fV(t)||hV(t)||Jx(t)||pV()}var mV=!1;function gV(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function vV(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var yV=function(){function t(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!mV:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(vV(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=gV(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),tn="-ms-",$d="-moz-",qe="-webkit-",e7="comm",Ug="rule",Fg="decl",_V="@import",t7="@keyframes",bV="@layer",wV=Math.abs,Wf=String.fromCharCode,xV=Object.assign;function EV(t,e){return Ht(t,0)^45?(((e<<2^Ht(t,0))<<2^Ht(t,1))<<2^Ht(t,2))<<2^Ht(t,3):0}function n7(t){return t.trim()}function SV(t,e){return(t=e.exec(t))?t[0]:t}function We(t,e,n){return t.replace(e,n)}function a0(t,e){return t.indexOf(e)}function Ht(t,e){return t.charCodeAt(e)|0}function Hl(t,e,n){return t.slice(e,n)}function xr(t){return t.length}function Bg(t){return t.length}function ou(t,e){return e.push(t),t}function IV(t,e){return t.map(e).join("")}var Gf=1,aa=1,r7=0,An=0,Tt=0,_a="";function Yf(t,e,n,r,i,o,s){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:Gf,column:aa,length:s,return:""}}function za(t,e){return xV(Yf("",null,null,"",null,null,0),t,{length:-t.length},e)}function CV(){return Tt}function AV(){return Tt=An>0?Ht(_a,--An):0,aa--,Tt===10&&(aa=1,Gf--),Tt}function Fn(){return Tt=An<r7?Ht(_a,An++):0,aa++,Tt===10&&(aa=1,Gf++),Tt}function Lr(){return Ht(_a,An)}function Fu(){return An}function pc(t,e){return Hl(_a,t,e)}function ql(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function i7(t){return Gf=aa=1,r7=xr(_a=t),An=0,[]}function o7(t){return _a="",t}function Bu(t){return n7(pc(An-1,l0(t===91?t+2:t===40?t+1:t)))}function TV(t){for(;(Tt=Lr())&&Tt<33;)Fn();return ql(t)>2||ql(Tt)>3?"":" "}function kV(t,e){for(;--e&&Fn()&&!(Tt<48||Tt>102||Tt>57&&Tt<65||Tt>70&&Tt<97););return pc(t,Fu()+(e<6&&Lr()==32&&Fn()==32))}function l0(t){for(;Fn();)switch(Tt){case t:return An;case 34:case 39:t!==34&&t!==39&&l0(Tt);break;case 40:t===41&&l0(t);break;case 92:Fn();break}return An}function RV(t,e){for(;Fn()&&t+Tt!==57;)if(t+Tt===84&&Lr()===47)break;return"/*"+pc(e,An-1)+"*"+Wf(t===47?t:Fn())}function NV(t){for(;!ql(Lr());)Fn();return pc(t,An)}function PV(t){return o7(ju("",null,null,null,[""],t=i7(t),0,[0],t))}function ju(t,e,n,r,i,o,s,l,c){for(var d=0,u=0,f=s,h=0,p=0,v=0,y=1,w=1,g=1,b=0,_="",E=i,A=o,k=r,I=_;w;)switch(v=b,b=Fn()){case 40:if(v!=108&&Ht(I,f-1)==58){a0(I+=We(Bu(b),"&","&\f"),"&\f")!=-1&&(g=-1);break}case 34:case 39:case 91:I+=Bu(b);break;case 9:case 10:case 13:case 32:I+=TV(v);break;case 92:I+=kV(Fu()-1,7);continue;case 47:switch(Lr()){case 42:case 47:ou(LV(RV(Fn(),Fu()),e,n),c);break;default:I+="/"}break;case 123*y:l[d++]=xr(I)*g;case 125*y:case 59:case 0:switch(b){case 0:case 125:w=0;case 59+u:g==-1&&(I=We(I,/\f/g,"")),p>0&&xr(I)-f&&ou(p>32?G3(I+";",r,n,f-1):G3(We(I," ","")+";",r,n,f-2),c);break;case 59:I+=";";default:if(ou(k=W3(I,e,n,d,u,i,l,_,E=[],A=[],f),o),b===123)if(u===0)ju(I,e,k,k,E,o,f,l,A);else switch(h===99&&Ht(I,3)===110?100:h){case 100:case 108:case 109:case 115:ju(t,k,k,r&&ou(W3(t,k,k,0,0,i,l,_,i,E=[],f),A),i,A,f,l,r?E:A);break;default:ju(I,k,k,k,[""],A,0,l,A)}}d=u=p=0,y=g=1,_=I="",f=s;break;case 58:f=1+xr(I),p=v;default:if(y<1){if(b==123)--y;else if(b==125&&y++==0&&AV()==125)continue}switch(I+=Wf(b),b*y){case 38:g=u>0?1:(I+="\f",-1);break;case 44:l[d++]=(xr(I)-1)*g,g=1;break;case 64:Lr()===45&&(I+=Bu(Fn())),h=Lr(),u=f=xr(_=I+=NV(Fu())),b++;break;case 45:v===45&&xr(I)==2&&(y=0)}}return o}function W3(t,e,n,r,i,o,s,l,c,d,u){for(var f=i-1,h=i===0?o:[""],p=Bg(h),v=0,y=0,w=0;v<r;++v)for(var g=0,b=Hl(t,f+1,f=wV(y=s[v])),_=t;g<p;++g)(_=n7(y>0?h[g]+" "+b:We(b,/&\f/g,h[g])))&&(c[w++]=_);return Yf(t,e,n,i===0?Ug:l,c,d,u)}function LV(t,e,n){return Yf(t,e,n,e7,Wf(CV()),Hl(t,2,-2),0)}function G3(t,e,n,r){return Yf(t,e,n,Fg,Hl(t,0,r),Hl(t,r+1,-1),r)}function $s(t,e){for(var n="",r=Bg(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function MV(t,e,n,r){switch(t.type){case bV:if(t.children.length)break;case _V:case Fg:return t.return=t.return||t.value;case e7:return"";case t7:return t.return=t.value+"{"+$s(t.children,r)+"}";case Ug:t.value=t.props.join(",")}return xr(n=$s(t.children,r))?t.return=t.value+"{"+n+"}":""}function OV(t){var e=Bg(t);return function(n,r,i,o){for(var s="",l=0;l<e;l++)s+=t[l](n,r,i,o)||"";return s}}function DV(t){return function(e){e.root||(e=e.return)&&t(e)}}function VV(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var UV=function(e,n,r){for(var i=0,o=0;i=o,o=Lr(),i===38&&o===12&&(n[r]=1),!ql(o);)Fn();return pc(e,An)},FV=function(e,n){var r=-1,i=44;do switch(ql(i)){case 0:i===38&&Lr()===12&&(n[r]=1),e[r]+=UV(An-1,n,r);break;case 2:e[r]+=Bu(i);break;case 4:if(i===44){e[++r]=Lr()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=Wf(i)}while(i=Fn());return e},BV=function(e,n){return o7(FV(i7(e),n))},Y3=new WeakMap,jV=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!Y3.get(r))&&!i){Y3.set(e,!0);for(var o=[],s=BV(n,o),l=r.props,c=0,d=0;c<s.length;c++)for(var u=0;u<l.length;u++,d++)e.props[d]=o[c]?s[c].replace(/&\f/g,l[u]):l[u]+" "+s[c]}}},$V=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function s7(t,e){switch(EV(t,e)){case 5103:return qe+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return qe+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return qe+t+$d+t+tn+t+t;case 6828:case 4268:return qe+t+tn+t+t;case 6165:return qe+t+tn+"flex-"+t+t;case 5187:return qe+t+We(t,/(\w+).+(:[^]+)/,qe+"box-$1$2"+tn+"flex-$1$2")+t;case 5443:return qe+t+tn+"flex-item-"+We(t,/flex-|-self/,"")+t;case 4675:return qe+t+tn+"flex-line-pack"+We(t,/align-content|flex-|-self/,"")+t;case 5548:return qe+t+tn+We(t,"shrink","negative")+t;case 5292:return qe+t+tn+We(t,"basis","preferred-size")+t;case 6060:return qe+"box-"+We(t,"-grow","")+qe+t+tn+We(t,"grow","positive")+t;case 4554:return qe+We(t,/([^-])(transform)/g,"$1"+qe+"$2")+t;case 6187:return We(We(We(t,/(zoom-|grab)/,qe+"$1"),/(image-set)/,qe+"$1"),t,"")+t;case 5495:case 3959:return We(t,/(image-set\([^]*)/,qe+"$1$`$1");case 4968:return We(We(t,/(.+:)(flex-)?(.*)/,qe+"box-pack:$3"+tn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+qe+t+t;case 4095:case 3583:case 4068:case 2532:return We(t,/(.+)-inline(.+)/,qe+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(xr(t)-1-e>6)switch(Ht(t,e+1)){case 109:if(Ht(t,e+4)!==45)break;case 102:return We(t,/(.+:)(.+)-([^]+)/,"$1"+qe+"$2-$3$1"+$d+(Ht(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~a0(t,"stretch")?s7(We(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Ht(t,e+1)!==115)break;case 6444:switch(Ht(t,xr(t)-3-(~a0(t,"!important")&&10))){case 107:return We(t,":",":"+qe)+t;case 101:return We(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+qe+(Ht(t,14)===45?"inline-":"")+"box$3$1"+qe+"$2$3$1"+tn+"$2box$3")+t}break;case 5936:switch(Ht(t,e+11)){case 114:return qe+t+tn+We(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return qe+t+tn+We(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return qe+t+tn+We(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return qe+t+tn+t+t}return t}var zV=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case Fg:e.return=s7(e.value,e.length);break;case t7:return $s([za(e,{value:We(e.value,"@","@"+qe)})],i);case Ug:if(e.length)return IV(e.props,function(o){switch(SV(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return $s([za(e,{props:[We(o,/:(read-\w+)/,":"+$d+"$1")]})],i);case"::placeholder":return $s([za(e,{props:[We(o,/:(plac\w+)/,":"+qe+"input-$1")]}),za(e,{props:[We(o,/:(plac\w+)/,":"+$d+"$1")]}),za(e,{props:[We(o,/:(plac\w+)/,tn+"input-$1")]})],i)}return""})}},HV=[zV],qV=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){var w=y.getAttribute("data-emotion");w.indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var i=e.stylisPlugins||HV,o={},s,l=[];s=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(y){for(var w=y.getAttribute("data-emotion").split(" "),g=1;g<w.length;g++)o[w[g]]=!0;l.push(y)});var c,d=[jV,$V];{var u,f=[MV,DV(function(y){u.insert(y)})],h=OV(d.concat(i,f)),p=function(w){return $s(PV(w),h)};c=function(w,g,b,_){u=b,p(w?w+"{"+g.styles+"}":g.styles),_&&(v.inserted[g.name]=!0)}}var v={key:n,sheet:new yV({key:n,container:s,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:c};return v.sheet.hydrate(l),v},a7={exports:{}},Ke={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ft=typeof Symbol=="function"&&Symbol.for,jg=Ft?Symbol.for("react.element"):60103,$g=Ft?Symbol.for("react.portal"):60106,Kf=Ft?Symbol.for("react.fragment"):60107,Xf=Ft?Symbol.for("react.strict_mode"):60108,Qf=Ft?Symbol.for("react.profiler"):60114,Jf=Ft?Symbol.for("react.provider"):60109,Zf=Ft?Symbol.for("react.context"):60110,zg=Ft?Symbol.for("react.async_mode"):60111,eh=Ft?Symbol.for("react.concurrent_mode"):60111,th=Ft?Symbol.for("react.forward_ref"):60112,nh=Ft?Symbol.for("react.suspense"):60113,WV=Ft?Symbol.for("react.suspense_list"):60120,rh=Ft?Symbol.for("react.memo"):60115,ih=Ft?Symbol.for("react.lazy"):60116,GV=Ft?Symbol.for("react.block"):60121,YV=Ft?Symbol.for("react.fundamental"):60117,KV=Ft?Symbol.for("react.responder"):60118,XV=Ft?Symbol.for("react.scope"):60119;function zn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case jg:switch(t=t.type,t){case zg:case eh:case Kf:case Qf:case Xf:case nh:return t;default:switch(t=t&&t.$$typeof,t){case Zf:case th:case ih:case rh:case Jf:return t;default:return e}}case $g:return e}}}function l7(t){return zn(t)===eh}Ke.AsyncMode=zg;Ke.ConcurrentMode=eh;Ke.ContextConsumer=Zf;Ke.ContextProvider=Jf;Ke.Element=jg;Ke.ForwardRef=th;Ke.Fragment=Kf;Ke.Lazy=ih;Ke.Memo=rh;Ke.Portal=$g;Ke.Profiler=Qf;Ke.StrictMode=Xf;Ke.Suspense=nh;Ke.isAsyncMode=function(t){return l7(t)||zn(t)===zg};Ke.isConcurrentMode=l7;Ke.isContextConsumer=function(t){return zn(t)===Zf};Ke.isContextProvider=function(t){return zn(t)===Jf};Ke.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===jg};Ke.isForwardRef=function(t){return zn(t)===th};Ke.isFragment=function(t){return zn(t)===Kf};Ke.isLazy=function(t){return zn(t)===ih};Ke.isMemo=function(t){return zn(t)===rh};Ke.isPortal=function(t){return zn(t)===$g};Ke.isProfiler=function(t){return zn(t)===Qf};Ke.isStrictMode=function(t){return zn(t)===Xf};Ke.isSuspense=function(t){return zn(t)===nh};Ke.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Kf||t===eh||t===Qf||t===Xf||t===nh||t===WV||typeof t=="object"&&t!==null&&(t.$$typeof===ih||t.$$typeof===rh||t.$$typeof===Jf||t.$$typeof===Zf||t.$$typeof===th||t.$$typeof===YV||t.$$typeof===KV||t.$$typeof===XV||t.$$typeof===GV)};Ke.typeOf=zn;a7.exports=Ke;var QV=a7.exports,c7=QV,JV={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ZV={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u7={};u7[c7.ForwardRef]=JV;u7[c7.Memo]=ZV;var eU=!0;function tU(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var d7=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||eU===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},nU=function(e,n,r){d7(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var o=n;do e.insert(n===o?"."+i:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function rU(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var iU={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},oU=!1,sU=/[A-Z]|^ms/g,aU=/_EMO_([^_]+?)_([^]*?)_EMO_/g,f7=function(e){return e.charCodeAt(1)===45},K3=function(e){return e!=null&&typeof e!="boolean"},bp=VV(function(t){return f7(t)?t:t.replace(sU,"-$&").toLowerCase()}),X3=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(aU,function(r,i,o){return Er={name:i,styles:o,next:Er},i})}return iU[e]!==1&&!f7(e)&&typeof n=="number"&&n!==0?n+"px":n},lU="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Wl(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Er={name:i.name,styles:i.styles,next:Er},i.name;var o=n;if(o.styles!==void 0){var s=o.next;if(s!==void 0)for(;s!==void 0;)Er={name:s.name,styles:s.styles,next:Er},s=s.next;var l=o.styles+";";return l}return cU(t,e,n)}case"function":{if(t!==void 0){var c=Er,d=n(t);return Er=c,Wl(t,e,d)}break}}var u=n;return u}function cU(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Wl(t,e,n[i])+";";else for(var o in n){var s=n[o];if(typeof s!="object"){var l=s;K3(l)&&(r+=bp(o)+":"+X3(o,l)+";")}else{if(o==="NO_COMPONENT_SELECTOR"&&oU)throw new Error(lU);if(Array.isArray(s)&&typeof s[0]=="string"&&e==null)for(var c=0;c<s.length;c++)K3(s[c])&&(r+=bp(o)+":"+X3(o,s[c])+";");else{var d=Wl(t,e,s);switch(o){case"animation":case"animationName":{r+=bp(o)+":"+d+";";break}default:r+=o+"{"+d+"}"}}}}return r}var Q3=/label:\s*([^\s;{]+)\s*(;|$)/g,Er;function h7(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";Er=void 0;var o=t[0];if(o==null||o.raw===void 0)r=!1,i+=Wl(n,e,o);else{var s=o;i+=s[0]}for(var l=1;l<t.length;l++)if(i+=Wl(n,e,t[l]),r){var c=o;i+=c[l]}Q3.lastIndex=0;for(var d="",u;(u=Q3.exec(i))!==null;)d+="-"+u[1];var f=rU(i)+d;return{name:f,styles:i,next:Er}}var uU=function(e){return e()},dU=Tp.useInsertionEffect?Tp.useInsertionEffect:!1,fU=dU||uU,hU=!1,p7=M.createContext(typeof HTMLElement<"u"?qV({key:"css"}):null);p7.Provider;var pU=function(e){return M.forwardRef(function(n,r){var i=M.useContext(p7);return e(n,i,r)})},mU=M.createContext({}),Hg={}.hasOwnProperty,c0="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",gU=function(e,n){var r={};for(var i in n)Hg.call(n,i)&&(r[i]=n[i]);return r[c0]=e,r},vU=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return d7(n,r,i),fU(function(){return nU(n,r,i)}),null},yU=pU(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=t[c0],o=[r],s="";typeof t.className=="string"?s=tU(e.registered,o,t.className):t.className!=null&&(s=t.className+" ");var l=h7(o,void 0,M.useContext(mU));s+=e.key+"-"+l.name;var c={};for(var d in t)Hg.call(t,d)&&d!=="css"&&d!==c0&&!hU&&(c[d]=t[d]);return c.className=s,n&&(c.ref=n),M.createElement(M.Fragment,null,M.createElement(vU,{cache:e,serialized:l,isStringTag:typeof i=="string"}),M.createElement(i,c))}),_U=yU,pe=function(e,n){var r=arguments;if(n==null||!Hg.call(n,"css"))return M.createElement.apply(void 0,r);var i=r.length,o=new Array(i);o[0]=_U,o[1]=gU(e,n);for(var s=2;s<i;s++)o[s]=r[s];return M.createElement.apply(null,o)};function qg(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return h7(e)}var bU=function(){var e=qg.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function wU(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var u0=M.useLayoutEffect,xU=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],zd=function(){};function EU(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function SU(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=[].concat(r);if(e&&t)for(var s in e)e.hasOwnProperty(s)&&e[s]&&o.push("".concat(EU(t,s)));return o.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var J3=function(e){return LU(e)?e.filter(Boolean):qo(e)==="object"&&e!==null?[e]:[]},m7=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=hi(e,xU);return me({},n)},yt=function(e,n,r){var i=e.cx,o=e.getStyles,s=e.getClassNames,l=e.className;return{css:o(n,e),className:i(r??{},s(n,e),l)}};function oh(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function IU(t){return oh(t)?window.innerHeight:t.clientHeight}function g7(t){return oh(t)?window.pageYOffset:t.scrollTop}function Hd(t,e){if(oh(t)){window.scrollTo(0,e);return}t.scrollTop=e}function CU(t){var e=getComputedStyle(t),n=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=t;i=i.parentElement;)if(e=getComputedStyle(i),!(n&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function AU(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e}function su(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:zd,i=g7(t),o=e-i,s=10,l=0;function c(){l+=s;var d=AU(l,i,o,n);Hd(t,d),l<n?window.requestAnimationFrame(c):r(t)}c()}function Z3(t,e){var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=e.offsetHeight/3;r.bottom+i>n.bottom?Hd(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+i,t.scrollHeight)):r.top-i<n.top&&Hd(t,Math.max(e.offsetTop-i,0))}function TU(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function e_(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function kU(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var v7=!1,RU={get passive(){return v7=!0}},au=typeof window<"u"?window:{};au.addEventListener&&au.removeEventListener&&(au.addEventListener("p",zd,RU),au.removeEventListener("p",zd,!1));var NU=v7;function PU(t){return t!=null}function LU(t){return Array.isArray(t)}function lu(t,e,n){return t?e:n}var MU=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=Object.entries(e).filter(function(s){var l=ei(s,1),c=l[0];return!r.includes(c)});return o.reduce(function(s,l){var c=ei(l,2),d=c[0],u=c[1];return s[d]=u,s},{})},OU=["children","innerProps"],DU=["children","innerProps"];function VU(t){var e=t.maxHeight,n=t.menuEl,r=t.minHeight,i=t.placement,o=t.shouldScroll,s=t.isFixedPosition,l=t.controlHeight,c=CU(n),d={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return d;var u=c.getBoundingClientRect(),f=u.height,h=n.getBoundingClientRect(),p=h.bottom,v=h.height,y=h.top,w=n.offsetParent.getBoundingClientRect(),g=w.top,b=s?window.innerHeight:IU(c),_=g7(c),E=parseInt(getComputedStyle(n).marginBottom,10),A=parseInt(getComputedStyle(n).marginTop,10),k=g-A,I=b-y,x=k+_,S=f-_-y,R=p-b+_+E,T=_+y-A,N=160;switch(i){case"auto":case"bottom":if(I>=v)return{placement:"bottom",maxHeight:e};if(S>=v&&!s)return o&&su(c,R,N),{placement:"bottom",maxHeight:e};if(!s&&S>=r||s&&I>=r){o&&su(c,R,N);var P=s?I-E:S-E;return{placement:"bottom",maxHeight:P}}if(i==="auto"||s){var V=e,$=s?k:x;return $>=r&&(V=Math.min($-E-l,e)),{placement:"top",maxHeight:V}}if(i==="bottom")return o&&Hd(c,R),{placement:"bottom",maxHeight:e};break;case"top":if(k>=v)return{placement:"top",maxHeight:e};if(x>=v&&!s)return o&&su(c,T,N),{placement:"top",maxHeight:e};if(!s&&x>=r||s&&k>=r){var D=e;return(!s&&x>=r||s&&k>=r)&&(D=s?k-A:x-A),o&&su(c,T,N),{placement:"top",maxHeight:D}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return d}function UU(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var y7=function(e){return e==="auto"?"bottom":e},FU=function(e,n){var r,i=e.placement,o=e.theme,s=o.borderRadius,l=o.spacing,c=o.colors;return me((r={label:"menu"},el(r,UU(i),"100%"),el(r,"position","absolute"),el(r,"width","100%"),el(r,"zIndex",1),r),n?{}:{backgroundColor:c.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:l.menuGutter,marginTop:l.menuGutter})},_7=M.createContext(null),BU=function(e){var n=e.children,r=e.minMenuHeight,i=e.maxMenuHeight,o=e.menuPlacement,s=e.menuPosition,l=e.menuShouldScrollIntoView,c=e.theme,d=M.useContext(_7)||{},u=d.setPortalPlacement,f=M.useRef(null),h=M.useState(i),p=ei(h,2),v=p[0],y=p[1],w=M.useState(null),g=ei(w,2),b=g[0],_=g[1],E=c.spacing.controlHeight;return u0(function(){var A=f.current;if(A){var k=s==="fixed",I=l&&!k,x=VU({maxHeight:i,menuEl:A,minHeight:r,placement:o,shouldScroll:I,isFixedPosition:k,controlHeight:E});y(x.maxHeight),_(x.placement),u==null||u(x.placement)}},[i,o,s,l,r,u,E]),n({ref:f,placerProps:me(me({},e),{},{placement:b||y7(o),maxHeight:v})})},jU=function(e){var n=e.children,r=e.innerRef,i=e.innerProps;return pe("div",ve({},yt(e,"menu",{menu:!0}),{ref:r},i),n)},$U=jU,zU=function(e,n){var r=e.maxHeight,i=e.theme.spacing.baseUnit;return me({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:i,paddingTop:i})},HU=function(e){var n=e.children,r=e.innerProps,i=e.innerRef,o=e.isMulti;return pe("div",ve({},yt(e,"menuList",{"menu-list":!0,"menu-list--is-multi":o}),{ref:i},r),n)},b7=function(e,n){var r=e.theme,i=r.spacing.baseUnit,o=r.colors;return me({textAlign:"center"},n?{}:{color:o.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},qU=b7,WU=b7,GU=function(e){var n=e.children,r=n===void 0?"No options":n,i=e.innerProps,o=hi(e,OU);return pe("div",ve({},yt(me(me({},o),{},{children:r,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),r)},YU=function(e){var n=e.children,r=n===void 0?"Loading...":n,i=e.innerProps,o=hi(e,DU);return pe("div",ve({},yt(me(me({},o),{},{children:r,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),r)},KU=function(e){var n=e.rect,r=e.offset,i=e.position;return{left:n.left,position:i,top:r,width:n.width,zIndex:1}},XU=function(e){var n=e.appendTo,r=e.children,i=e.controlElement,o=e.innerProps,s=e.menuPlacement,l=e.menuPosition,c=M.useRef(null),d=M.useRef(null),u=M.useState(y7(s)),f=ei(u,2),h=f[0],p=f[1],v=M.useMemo(function(){return{setPortalPlacement:p}},[]),y=M.useState(null),w=ei(y,2),g=w[0],b=w[1],_=M.useCallback(function(){if(i){var I=TU(i),x=l==="fixed"?0:window.pageYOffset,S=I[h]+x;(S!==(g==null?void 0:g.offset)||I.left!==(g==null?void 0:g.rect.left)||I.width!==(g==null?void 0:g.rect.width))&&b({offset:S,rect:I})}},[i,l,h,g==null?void 0:g.offset,g==null?void 0:g.rect.left,g==null?void 0:g.rect.width]);u0(function(){_()},[_]);var E=M.useCallback(function(){typeof d.current=="function"&&(d.current(),d.current=null),i&&c.current&&(d.current=i4(i,c.current,_,{elementResize:"ResizeObserver"in window}))},[i,_]);u0(function(){E()},[E]);var A=M.useCallback(function(I){c.current=I,E()},[E]);if(!n&&l!=="fixed"||!g)return null;var k=pe("div",ve({ref:A},yt(me(me({},e),{},{offset:g.offset,position:l,rect:g.rect}),"menuPortal",{"menu-portal":!0}),o),r);return pe(_7.Provider,{value:v},n?oo.createPortal(k,n):k)},QU=function(e){var n=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},JU=function(e){var n=e.children,r=e.innerProps,i=e.isDisabled,o=e.isRtl;return pe("div",ve({},yt(e,"container",{"--is-disabled":i,"--is-rtl":o}),r),n)},ZU=function(e,n){var r=e.theme.spacing,i=e.isMulti,o=e.hasValue,s=e.selectProps.controlShouldRenderValue;return me({alignItems:"center",display:i&&o&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},eF=function(e){var n=e.children,r=e.innerProps,i=e.isMulti,o=e.hasValue;return pe("div",ve({},yt(e,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":o}),r),n)},tF=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},nF=function(e){var n=e.children,r=e.innerProps;return pe("div",ve({},yt(e,"indicatorsContainer",{indicators:!0}),r),n)},t_,rF=["size"],iF=["innerProps","isRtl","size"],oF={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},w7=function(e){var n=e.size,r=hi(e,rF);return pe("svg",ve({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:oF},r))},Wg=function(e){return pe(w7,ve({size:20},e),pe("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},x7=function(e){return pe(w7,ve({size:20},e),pe("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},E7=function(e,n){var r=e.isFocused,i=e.theme,o=i.spacing.baseUnit,s=i.colors;return me({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:r?s.neutral60:s.neutral20,padding:o*2,":hover":{color:r?s.neutral80:s.neutral40}})},sF=E7,aF=function(e){var n=e.children,r=e.innerProps;return pe("div",ve({},yt(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),n||pe(x7,null))},lF=E7,cF=function(e){var n=e.children,r=e.innerProps;return pe("div",ve({},yt(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),n||pe(Wg,null))},uF=function(e,n){var r=e.isDisabled,i=e.theme,o=i.spacing.baseUnit,s=i.colors;return me({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:o*2,marginTop:o*2})},dF=function(e){var n=e.innerProps;return pe("span",ve({},n,yt(e,"indicatorSeparator",{"indicator-separator":!0})))},fF=bU(t_||(t_=wU([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),hF=function(e,n){var r=e.isFocused,i=e.size,o=e.theme,s=o.colors,l=o.spacing.baseUnit;return me({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},n?{}:{color:r?s.neutral60:s.neutral20,padding:l*2})},wp=function(e){var n=e.delay,r=e.offset;return pe("span",{css:qg({animation:"".concat(fF," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},pF=function(e){var n=e.innerProps,r=e.isRtl,i=e.size,o=i===void 0?4:i,s=hi(e,iF);return pe("div",ve({},yt(me(me({},s),{},{innerProps:n,isRtl:r,size:o}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),pe(wp,{delay:0,offset:r}),pe(wp,{delay:160,offset:!0}),pe(wp,{delay:320,offset:!r}))},mF=function(e,n){var r=e.isDisabled,i=e.isFocused,o=e.theme,s=o.colors,l=o.borderRadius,c=o.spacing;return me({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:c.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:i?s.primary:s.neutral20,borderRadius:l,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:i?s.primary:s.neutral30}})},gF=function(e){var n=e.children,r=e.isDisabled,i=e.isFocused,o=e.innerRef,s=e.innerProps,l=e.menuIsOpen;return pe("div",ve({ref:o},yt(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":i,"control--menu-is-open":l}),s,{"aria-disabled":r||void 0}),n)},vF=gF,yF=["data"],_F=function(e,n){var r=e.theme.spacing;return n?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},bF=function(e){var n=e.children,r=e.cx,i=e.getStyles,o=e.getClassNames,s=e.Heading,l=e.headingProps,c=e.innerProps,d=e.label,u=e.theme,f=e.selectProps;return pe("div",ve({},yt(e,"group",{group:!0}),c),pe(s,ve({},l,{selectProps:f,theme:u,getStyles:i,getClassNames:o,cx:r}),d),pe("div",null,n))},wF=function(e,n){var r=e.theme,i=r.colors,o=r.spacing;return me({label:"group",cursor:"default",display:"block"},n?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:o.baseUnit*3,paddingRight:o.baseUnit*3,textTransform:"uppercase"})},xF=function(e){var n=m7(e);n.data;var r=hi(n,yF);return pe("div",ve({},yt(e,"groupHeading",{"group-heading":!0}),r))},EF=bF,SF=["innerRef","isDisabled","isHidden","inputClassName"],IF=function(e,n){var r=e.isDisabled,i=e.value,o=e.theme,s=o.spacing,l=o.colors;return me(me({visibility:r?"hidden":"visible",transform:i?"translateZ(0)":""},CF),n?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:l.neutral80})},S7={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},CF={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":me({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},S7)},AF=function(e){return me({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},S7)},TF=function(e){var n=e.cx,r=e.value,i=m7(e),o=i.innerRef,s=i.isDisabled,l=i.isHidden,c=i.inputClassName,d=hi(i,SF);return pe("div",ve({},yt(e,"input",{"input-container":!0}),{"data-value":r||""}),pe("input",ve({className:n({input:!0},c),ref:o,style:AF(l),disabled:s},d)))},kF=TF,RF=function(e,n){var r=e.theme,i=r.spacing,o=r.borderRadius,s=r.colors;return me({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:s.neutral10,borderRadius:o/2,margin:i.baseUnit/2})},NF=function(e,n){var r=e.theme,i=r.borderRadius,o=r.colors,s=e.cropWithEllipsis;return me({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:i/2,color:o.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},PF=function(e,n){var r=e.theme,i=r.spacing,o=r.borderRadius,s=r.colors,l=e.isFocused;return me({alignItems:"center",display:"flex"},n?{}:{borderRadius:o/2,backgroundColor:l?s.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},I7=function(e){var n=e.children,r=e.innerProps;return pe("div",r,n)},LF=I7,MF=I7;function OF(t){var e=t.children,n=t.innerProps;return pe("div",ve({role:"button"},n),e||pe(Wg,{size:14}))}var DF=function(e){var n=e.children,r=e.components,i=e.data,o=e.innerProps,s=e.isDisabled,l=e.removeProps,c=e.selectProps,d=r.Container,u=r.Label,f=r.Remove;return pe(d,{data:i,innerProps:me(me({},yt(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),o),selectProps:c},pe(u,{data:i,innerProps:me({},yt(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:c},n),pe(f,{data:i,innerProps:me(me({},yt(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},l),selectProps:c}))},VF=DF,UF=function(e,n){var r=e.isDisabled,i=e.isFocused,o=e.isSelected,s=e.theme,l=s.spacing,c=s.colors;return me({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:o?c.primary:i?c.primary25:"transparent",color:r?c.neutral20:o?c.neutral0:"inherit",padding:"".concat(l.baseUnit*2,"px ").concat(l.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:o?c.primary:c.primary50}})},FF=function(e){var n=e.children,r=e.isDisabled,i=e.isFocused,o=e.isSelected,s=e.innerRef,l=e.innerProps;return pe("div",ve({},yt(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":i,"option--is-selected":o}),{ref:s,"aria-disabled":r},l),n)},BF=FF,jF=function(e,n){var r=e.theme,i=r.spacing,o=r.colors;return me({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:o.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},$F=function(e){var n=e.children,r=e.innerProps;return pe("div",ve({},yt(e,"placeholder",{placeholder:!0}),r),n)},zF=$F,HF=function(e,n){var r=e.isDisabled,i=e.theme,o=i.spacing,s=i.colors;return me({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:r?s.neutral40:s.neutral80,marginLeft:o.baseUnit/2,marginRight:o.baseUnit/2})},qF=function(e){var n=e.children,r=e.isDisabled,i=e.innerProps;return pe("div",ve({},yt(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),i),n)},WF=qF,GF={ClearIndicator:cF,Control:vF,DropdownIndicator:aF,DownChevron:x7,CrossIcon:Wg,Group:EF,GroupHeading:xF,IndicatorsContainer:nF,IndicatorSeparator:dF,Input:kF,LoadingIndicator:pF,Menu:$U,MenuList:HU,MenuPortal:XU,LoadingMessage:YU,NoOptionsMessage:GU,MultiValue:VF,MultiValueContainer:LF,MultiValueLabel:MF,MultiValueRemove:OF,Option:BF,Placeholder:zF,SelectContainer:JU,SingleValue:WF,ValueContainer:eF},YF=function(e){return me(me({},GF),e.components)},n_=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function KF(t,e){return!!(t===e||n_(t)&&n_(e))}function XF(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!KF(t[n],e[n]))return!1;return!0}function QF(t,e){e===void 0&&(e=XF);var n=null;function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var s=t.apply(this,i);return n={lastResult:s,lastArgs:i,lastThis:this},s}return r.clear=function(){n=null},r}var JF={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},ZF=function(e){return pe("span",ve({css:JF},e))},r_=ZF,eB={guidance:function(e){var n=e.isSearchable,r=e.isMulti,i=e.tabSelectsValue,o=e.context,s=e.isInitialFocus;switch(o){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,r=e.label,i=r===void 0?"":r,o=e.labels,s=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(o.length>1?"s":""," ").concat(o.join(","),", selected.");case"select-option":return s?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(e){var n=e.context,r=e.focused,i=e.options,o=e.label,s=o===void 0?"":o,l=e.selectValue,c=e.isDisabled,d=e.isSelected,u=e.isAppleDevice,f=function(y,w){return y&&y.length?"".concat(y.indexOf(w)+1," of ").concat(y.length):""};if(n==="value"&&l)return"value ".concat(s," focused, ").concat(f(l,r),".");if(n==="menu"&&u){var h=c?" disabled":"",p="".concat(d?" selected":"").concat(h);return"".concat(s).concat(p,", ").concat(f(i,r),".")}return""},onFilter:function(e){var n=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(n?" for search term "+n:"",".")}},tB=function(e){var n=e.ariaSelection,r=e.focusedOption,i=e.focusedValue,o=e.focusableOptions,s=e.isFocused,l=e.selectValue,c=e.selectProps,d=e.id,u=e.isAppleDevice,f=c.ariaLiveMessages,h=c.getOptionLabel,p=c.inputValue,v=c.isMulti,y=c.isOptionDisabled,w=c.isSearchable,g=c.menuIsOpen,b=c.options,_=c.screenReaderStatus,E=c.tabSelectsValue,A=c.isLoading,k=c["aria-label"],I=c["aria-live"],x=M.useMemo(function(){return me(me({},eB),f||{})},[f]),S=M.useMemo(function(){var $="";if(n&&x.onChange){var D=n.option,O=n.options,B=n.removedValue,j=n.removedValues,z=n.value,W=function(ne){return Array.isArray(ne)?null:ne},G=B||D||W(z),H=G?h(G):"",Y=O||j||void 0,q=Y?Y.map(h):[],Q=me({isDisabled:G&&y(G,l),label:H,labels:q},n);$=x.onChange(Q)}return $},[n,x,y,l,h]),R=M.useMemo(function(){var $="",D=r||i,O=!!(r&&l&&l.includes(r));if(D&&x.onFocus){var B={focused:D,label:h(D),isDisabled:y(D,l),isSelected:O,options:o,context:D===r?"menu":"value",selectValue:l,isAppleDevice:u};$=x.onFocus(B)}return $},[r,i,h,y,x,o,l,u]),T=M.useMemo(function(){var $="";if(g&&b.length&&!A&&x.onFilter){var D=_({count:o.length});$=x.onFilter({inputValue:p,resultsMessage:D})}return $},[o,p,g,x,b,_,A]),N=(n==null?void 0:n.action)==="initial-input-focus",P=M.useMemo(function(){var $="";if(x.guidance){var D=i?"value":g?"menu":"input";$=x.guidance({"aria-label":k,context:D,isDisabled:r&&y(r,l),isMulti:v,isSearchable:w,tabSelectsValue:E,isInitialFocus:N})}return $},[k,r,i,v,y,w,g,x,l,E,N]),V=pe(M.Fragment,null,pe("span",{id:"aria-selection"},S),pe("span",{id:"aria-focused"},R),pe("span",{id:"aria-results"},T),pe("span",{id:"aria-guidance"},P));return pe(M.Fragment,null,pe(r_,{id:d},N&&V),pe(r_,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!N&&V))},nB=tB,d0=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],rB=new RegExp("["+d0.map(function(t){return t.letters}).join("")+"]","g"),C7={};for(var xp=0;xp<d0.length;xp++)for(var Ep=d0[xp],Sp=0;Sp<Ep.letters.length;Sp++)C7[Ep.letters[Sp]]=Ep.base;var A7=function(e){return e.replace(rB,function(n){return C7[n]})},iB=QF(A7),i_=function(e){return e.replace(/^\s+|\s+$/g,"")},oB=function(e){return"".concat(e.label," ").concat(e.value)},sB=function(e){return function(n,r){if(n.data.__isNew__)return!0;var i=me({ignoreCase:!0,ignoreAccents:!0,stringify:oB,trim:!0,matchFrom:"any"},e),o=i.ignoreCase,s=i.ignoreAccents,l=i.stringify,c=i.trim,d=i.matchFrom,u=c?i_(r):r,f=c?i_(l(n)):l(n);return o&&(u=u.toLowerCase(),f=f.toLowerCase()),s&&(u=iB(u),f=A7(f)),d==="start"?f.substr(0,u.length)===u:f.indexOf(u)>-1}},aB=["innerRef"];function lB(t){var e=t.innerRef,n=hi(t,aB),r=MU(n,"onExited","in","enter","exit","appear");return pe("input",ve({ref:e},r,{css:qg({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var cB=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function uB(t){var e=t.isEnabled,n=t.onBottomArrive,r=t.onBottomLeave,i=t.onTopArrive,o=t.onTopLeave,s=M.useRef(!1),l=M.useRef(!1),c=M.useRef(0),d=M.useRef(null),u=M.useCallback(function(w,g){if(d.current!==null){var b=d.current,_=b.scrollTop,E=b.scrollHeight,A=b.clientHeight,k=d.current,I=g>0,x=E-A-_,S=!1;x>g&&s.current&&(r&&r(w),s.current=!1),I&&l.current&&(o&&o(w),l.current=!1),I&&g>x?(n&&!s.current&&n(w),k.scrollTop=E,S=!0,s.current=!0):!I&&-g>_&&(i&&!l.current&&i(w),k.scrollTop=0,S=!0,l.current=!0),S&&cB(w)}},[n,r,i,o]),f=M.useCallback(function(w){u(w,w.deltaY)},[u]),h=M.useCallback(function(w){c.current=w.changedTouches[0].clientY},[]),p=M.useCallback(function(w){var g=c.current-w.changedTouches[0].clientY;u(w,g)},[u]),v=M.useCallback(function(w){if(w){var g=NU?{passive:!1}:!1;w.addEventListener("wheel",f,g),w.addEventListener("touchstart",h,g),w.addEventListener("touchmove",p,g)}},[p,h,f]),y=M.useCallback(function(w){w&&(w.removeEventListener("wheel",f,!1),w.removeEventListener("touchstart",h,!1),w.removeEventListener("touchmove",p,!1))},[p,h,f]);return M.useEffect(function(){if(e){var w=d.current;return v(w),function(){y(w)}}},[e,v,y]),function(w){d.current=w}}var o_=["boxSizing","height","overflow","paddingRight","position"],s_={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function a_(t){t.preventDefault()}function l_(t){t.stopPropagation()}function c_(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function u_(){return"ontouchstart"in window||navigator.maxTouchPoints}var d_=!!(typeof window<"u"&&window.document&&window.document.createElement),Ha=0,ls={capture:!1,passive:!1};function dB(t){var e=t.isEnabled,n=t.accountForScrollbars,r=n===void 0?!0:n,i=M.useRef({}),o=M.useRef(null),s=M.useCallback(function(c){if(d_){var d=document.body,u=d&&d.style;if(r&&o_.forEach(function(v){var y=u&&u[v];i.current[v]=y}),r&&Ha<1){var f=parseInt(i.current.paddingRight,10)||0,h=document.body?document.body.clientWidth:0,p=window.innerWidth-h+f||0;Object.keys(s_).forEach(function(v){var y=s_[v];u&&(u[v]=y)}),u&&(u.paddingRight="".concat(p,"px"))}d&&u_()&&(d.addEventListener("touchmove",a_,ls),c&&(c.addEventListener("touchstart",c_,ls),c.addEventListener("touchmove",l_,ls))),Ha+=1}},[r]),l=M.useCallback(function(c){if(d_){var d=document.body,u=d&&d.style;Ha=Math.max(Ha-1,0),r&&Ha<1&&o_.forEach(function(f){var h=i.current[f];u&&(u[f]=h)}),d&&u_()&&(d.removeEventListener("touchmove",a_,ls),c&&(c.removeEventListener("touchstart",c_,ls),c.removeEventListener("touchmove",l_,ls)))}},[r]);return M.useEffect(function(){if(e){var c=o.current;return s(c),function(){l(c)}}},[e,s,l]),function(c){o.current=c}}var fB=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},hB={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function pB(t){var e=t.children,n=t.lockEnabled,r=t.captureEnabled,i=r===void 0?!0:r,o=t.onBottomArrive,s=t.onBottomLeave,l=t.onTopArrive,c=t.onTopLeave,d=uB({isEnabled:i,onBottomArrive:o,onBottomLeave:s,onTopArrive:l,onTopLeave:c}),u=dB({isEnabled:n}),f=function(p){d(p),u(p)};return pe(M.Fragment,null,n&&pe("div",{onClick:fB,css:hB}),e(f))}var mB={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},gB=function(e){var n=e.name,r=e.onFocus;return pe("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:mB,value:"",onChange:function(){}})},vB=gB;function Gg(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function yB(){return Gg(/^iPhone/i)}function T7(){return Gg(/^Mac/i)}function _B(){return Gg(/^iPad/i)||T7()&&navigator.maxTouchPoints>1}function bB(){return yB()||_B()}function wB(){return T7()||bB()}var xB=function(e){return e.label},EB=function(e){return e.label},SB=function(e){return e.value},IB=function(e){return!!e.isDisabled},CB={clearIndicator:lF,container:QU,control:mF,dropdownIndicator:sF,group:_F,groupHeading:wF,indicatorsContainer:tF,indicatorSeparator:uF,input:IF,loadingIndicator:hF,loadingMessage:WU,menu:FU,menuList:zU,menuPortal:KU,multiValue:RF,multiValueLabel:NF,multiValueRemove:PF,noOptionsMessage:qU,option:UF,placeholder:jF,singleValue:HF,valueContainer:ZU},AB={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},TB=4,k7=4,kB=38,RB=k7*2,NB={baseUnit:k7,controlHeight:kB,menuGutter:RB},Ip={borderRadius:TB,colors:AB,spacing:NB},PB={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:e_(),captureMenuScroll:!e_(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:sB(),formatGroupLabel:xB,getOptionLabel:EB,getOptionValue:SB,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:IB,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!kU(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function f_(t,e,n,r){var i=P7(t,e,n),o=L7(t,e,n),s=N7(t,e),l=qd(t,e);return{type:"option",data:e,isDisabled:i,isSelected:o,label:s,value:l,index:r}}function $u(t,e){return t.options.map(function(n,r){if("options"in n){var i=n.options.map(function(s,l){return f_(t,s,e,l)}).filter(function(s){return p_(t,s)});return i.length>0?{type:"group",data:n,options:i,index:r}:void 0}var o=f_(t,n,e,r);return p_(t,o)?o:void 0}).filter(PU)}function R7(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,Vg(n.options.map(function(r){return r.data}))):e.push(n.data),e},[])}function h_(t,e){return t.reduce(function(n,r){return r.type==="group"?n.push.apply(n,Vg(r.options.map(function(i){return{data:i.data,id:"".concat(e,"-").concat(r.index,"-").concat(i.index)}}))):n.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),n},[])}function LB(t,e){return R7($u(t,e))}function p_(t,e){var n=t.inputValue,r=n===void 0?"":n,i=e.data,o=e.isSelected,s=e.label,l=e.value;return(!O7(t)||!o)&&M7(t,{label:s,value:l,data:i},r)}function MB(t,e){var n=t.focusedValue,r=t.selectValue,i=r.indexOf(n);if(i>-1){var o=e.indexOf(n);if(o>-1)return n;if(i<e.length)return e[i]}return null}function OB(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var Cp=function(e,n){var r,i=(r=e.find(function(o){return o.data===n}))===null||r===void 0?void 0:r.id;return i||null},N7=function(e,n){return e.getOptionLabel(n)},qd=function(e,n){return e.getOptionValue(n)};function P7(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function L7(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var r=qd(t,e);return n.some(function(i){return qd(t,i)===r})}function M7(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var O7=function(e){var n=e.hideSelectedOptions,r=e.isMulti;return n===void 0?r:n},DB=1,D7=function(t){lV(n,t);var e=dV(n);function n(r){var i;if(sV(this,n),i=e.call(this,r),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.isAppleDevice=wB(),i.controlRef=null,i.getControlRef=function(c){i.controlRef=c},i.focusedOptionRef=null,i.getFocusedOptionRef=function(c){i.focusedOptionRef=c},i.menuListRef=null,i.getMenuListRef=function(c){i.menuListRef=c},i.inputRef=null,i.getInputRef=function(c){i.inputRef=c},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(c,d){var u=i.props,f=u.onChange,h=u.name;d.name=h,i.ariaOnChange(c,d),f(c,d)},i.setValue=function(c,d,u){var f=i.props,h=f.closeMenuOnSelect,p=f.isMulti,v=f.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:v}),h&&(i.setState({inputIsHiddenAfterUpdate:!p}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(c,{action:d,option:u})},i.selectOption=function(c){var d=i.props,u=d.blurInputOnSelect,f=d.isMulti,h=d.name,p=i.state.selectValue,v=f&&i.isOptionSelected(c,p),y=i.isOptionDisabled(c,p);if(v){var w=i.getOptionValue(c);i.setValue(p.filter(function(g){return i.getOptionValue(g)!==w}),"deselect-option",c)}else if(!y)f?i.setValue([].concat(Vg(p),[c]),"select-option",c):i.setValue(c,"select-option");else{i.ariaOnChange(c,{action:"select-option",option:c,name:h});return}u&&i.blurInput()},i.removeValue=function(c){var d=i.props.isMulti,u=i.state.selectValue,f=i.getOptionValue(c),h=u.filter(function(v){return i.getOptionValue(v)!==f}),p=lu(d,h,h[0]||null);i.onChange(p,{action:"remove-value",removedValue:c}),i.focusInput()},i.clearValue=function(){var c=i.state.selectValue;i.onChange(lu(i.props.isMulti,[],null),{action:"clear",removedValues:c})},i.popValue=function(){var c=i.props.isMulti,d=i.state.selectValue,u=d[d.length-1],f=d.slice(0,d.length-1),h=lu(c,f,f[0]||null);u&&i.onChange(h,{action:"pop-value",removedValue:u})},i.getFocusedOptionId=function(c){return Cp(i.state.focusableOptionsWithIds,c)},i.getFocusableOptionsWithIds=function(){return h_($u(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var c=arguments.length,d=new Array(c),u=0;u<c;u++)d[u]=arguments[u];return SU.apply(void 0,[i.props.classNamePrefix].concat(d))},i.getOptionLabel=function(c){return N7(i.props,c)},i.getOptionValue=function(c){return qd(i.props,c)},i.getStyles=function(c,d){var u=i.props.unstyled,f=CB[c](d,u);f.boxSizing="border-box";var h=i.props.styles[c];return h?h(f,d):f},i.getClassNames=function(c,d){var u,f;return(u=(f=i.props.classNames)[c])===null||u===void 0?void 0:u.call(f,d)},i.getElementId=function(c){return"".concat(i.state.instancePrefix,"-").concat(c)},i.getComponents=function(){return YF(i.props)},i.buildCategorizedOptions=function(){return $u(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return R7(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(c,d){i.setState({ariaSelection:me({value:c},d)})},i.onMenuMouseDown=function(c){c.button===0&&(c.stopPropagation(),c.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(c){i.blockOptionHover=!1},i.onControlMouseDown=function(c){if(!c.defaultPrevented){var d=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&i.onMenuClose():d&&i.openMenu("first"):(d&&(i.openAfterFocus=!0),i.focusInput()),c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&c.preventDefault()}},i.onDropdownIndicatorMouseDown=function(c){if(!(c&&c.type==="mousedown"&&c.button!==0)&&!i.props.isDisabled){var d=i.props,u=d.isMulti,f=d.menuIsOpen;i.focusInput(),f?(i.setState({inputIsHiddenAfterUpdate:!u}),i.onMenuClose()):i.openMenu("first"),c.preventDefault()}},i.onClearIndicatorMouseDown=function(c){c&&c.type==="mousedown"&&c.button!==0||(i.clearValue(),c.preventDefault(),i.openAfterFocus=!1,c.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(c){typeof i.props.closeMenuOnScroll=="boolean"?c.target instanceof HTMLElement&&oh(c.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(c)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(c){var d=c.touches,u=d&&d.item(0);u&&(i.initialTouchX=u.clientX,i.initialTouchY=u.clientY,i.userIsDragging=!1)},i.onTouchMove=function(c){var d=c.touches,u=d&&d.item(0);if(u){var f=Math.abs(u.clientX-i.initialTouchX),h=Math.abs(u.clientY-i.initialTouchY),p=5;i.userIsDragging=f>p||h>p}},i.onTouchEnd=function(c){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(c.target)&&i.menuListRef&&!i.menuListRef.contains(c.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(c){i.userIsDragging||i.onControlMouseDown(c)},i.onClearIndicatorTouchEnd=function(c){i.userIsDragging||i.onClearIndicatorMouseDown(c)},i.onDropdownIndicatorTouchEnd=function(c){i.userIsDragging||i.onDropdownIndicatorMouseDown(c)},i.handleInputChange=function(c){var d=i.props.inputValue,u=c.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(u,{action:"input-change",prevInputValue:d}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(c){i.props.onFocus&&i.props.onFocus(c),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(c){var d=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(c),i.onInputChange("",{action:"input-blur",prevInputValue:d}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(c){if(!(i.blockOptionHover||i.state.focusedOption===c)){var d=i.getFocusableOptions(),u=d.indexOf(c);i.setState({focusedOption:c,focusedOptionId:u>-1?i.getFocusedOptionId(c):null})}},i.shouldHideSelectedOptions=function(){return O7(i.props)},i.onValueInputFocus=function(c){c.preventDefault(),c.stopPropagation(),i.focus()},i.onKeyDown=function(c){var d=i.props,u=d.isMulti,f=d.backspaceRemovesValue,h=d.escapeClearsValue,p=d.inputValue,v=d.isClearable,y=d.isDisabled,w=d.menuIsOpen,g=d.onKeyDown,b=d.tabSelectsValue,_=d.openMenuOnFocus,E=i.state,A=E.focusedOption,k=E.focusedValue,I=E.selectValue;if(!y&&!(typeof g=="function"&&(g(c),c.defaultPrevented))){switch(i.blockOptionHover=!0,c.key){case"ArrowLeft":if(!u||p)return;i.focusValue("previous");break;case"ArrowRight":if(!u||p)return;i.focusValue("next");break;case"Delete":case"Backspace":if(p)return;if(k)i.removeValue(k);else{if(!f)return;u?i.popValue():v&&i.clearValue()}break;case"Tab":if(i.isComposing||c.shiftKey||!w||!b||!A||_&&i.isOptionSelected(A,I))return;i.selectOption(A);break;case"Enter":if(c.keyCode===229)break;if(w){if(!A||i.isComposing)return;i.selectOption(A);break}return;case"Escape":w?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:p}),i.onMenuClose()):v&&h&&i.clearValue();break;case" ":if(p)return;if(!w){i.openMenu("first");break}if(!A)return;i.selectOption(A);break;case"ArrowUp":w?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":w?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!w)return;i.focusOption("pageup");break;case"PageDown":if(!w)return;i.focusOption("pagedown");break;case"Home":if(!w)return;i.focusOption("first");break;case"End":if(!w)return;i.focusOption("last");break;default:return}c.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++DB),i.state.selectValue=J3(r.value),r.menuIsOpen&&i.state.selectValue.length){var o=i.getFocusableOptionsWithIds(),s=i.buildFocusableOptions(),l=s.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=o,i.state.focusedOption=s[l],i.state.focusedOptionId=Cp(o,s[l])}return i}return aV(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Z3(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var o=this.props,s=o.isDisabled,l=o.menuIsOpen,c=this.state.isFocused;(c&&!s&&i.isDisabled||c&&l&&!i.menuIsOpen)&&this.focusInput(),c&&s&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!c&&!s&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Z3(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,o){this.props.onInputChange(i,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var o=this,s=this.state,l=s.selectValue,c=s.isFocused,d=this.buildFocusableOptions(),u=i==="first"?0:d.length-1;if(!this.props.isMulti){var f=d.indexOf(l[0]);f>-1&&(u=f)}this.scrollToFocusedOptionOnUpdate=!(c&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:d[u],focusedOptionId:this.getFocusedOptionId(d[u])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(i){var o=this.state,s=o.selectValue,l=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var c=s.indexOf(l);l||(c=-1);var d=s.length-1,u=-1;if(s.length){switch(i){case"previous":c===0?u=0:c===-1?u=d:u=c-1;break;case"next":c>-1&&c<d&&(u=c+1);break}this.setState({inputIsHidden:u!==-1,focusedValue:s[u]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,s=this.state.focusedOption,l=this.getFocusableOptions();if(l.length){var c=0,d=l.indexOf(s);s||(d=-1),i==="up"?c=d>0?d-1:l.length-1:i==="down"?c=(d+1)%l.length:i==="pageup"?(c=d-o,c<0&&(c=0)):i==="pagedown"?(c=d+o,c>l.length-1&&(c=l.length-1)):i==="last"&&(c=l.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:l[c],focusedValue:null,focusedOptionId:this.getFocusedOptionId(l[c])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Ip):me(me({},Ip),this.props.theme):Ip}},{key:"getCommonProps",value:function(){var i=this.clearValue,o=this.cx,s=this.getStyles,l=this.getClassNames,c=this.getValue,d=this.selectOption,u=this.setValue,f=this.props,h=f.isMulti,p=f.isRtl,v=f.options,y=this.hasValue();return{clearValue:i,cx:o,getStyles:s,getClassNames:l,getValue:c,hasValue:y,isMulti:h,isRtl:p,options:v,selectOption:d,selectProps:f,setValue:u,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,o=i.isClearable,s=i.isMulti;return o===void 0?s:o}},{key:"isOptionDisabled",value:function(i,o){return P7(this.props,i,o)}},{key:"isOptionSelected",value:function(i,o){return L7(this.props,i,o)}},{key:"filterOption",value:function(i,o){return M7(this.props,i,o)}},{key:"formatOptionLabel",value:function(i,o){if(typeof this.props.formatOptionLabel=="function"){var s=this.props.inputValue,l=this.state.selectValue;return this.props.formatOptionLabel(i,{context:o,inputValue:s,selectValue:l})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,o=i.isDisabled,s=i.isSearchable,l=i.inputId,c=i.inputValue,d=i.tabIndex,u=i.form,f=i.menuIsOpen,h=i.required,p=this.getComponents(),v=p.Input,y=this.state,w=y.inputIsHidden,g=y.ariaSelection,b=this.commonProps,_=l||this.getElementId("input"),E=me(me(me({"aria-autocomplete":"list","aria-expanded":f,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":h,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},f&&{"aria-controls":this.getElementId("listbox")}),!s&&{"aria-readonly":!0}),this.hasValue()?(g==null?void 0:g.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return s?M.createElement(v,ve({},b,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:_,innerRef:this.getInputRef,isDisabled:o,isHidden:w,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:d,form:u,type:"text",value:c},E)):M.createElement(lB,ve({id:_,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:zd,onFocus:this.onInputFocus,disabled:o,tabIndex:d,inputMode:"none",form:u,value:""},E))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,o=this.getComponents(),s=o.MultiValue,l=o.MultiValueContainer,c=o.MultiValueLabel,d=o.MultiValueRemove,u=o.SingleValue,f=o.Placeholder,h=this.commonProps,p=this.props,v=p.controlShouldRenderValue,y=p.isDisabled,w=p.isMulti,g=p.inputValue,b=p.placeholder,_=this.state,E=_.selectValue,A=_.focusedValue,k=_.isFocused;if(!this.hasValue()||!v)return g?null:M.createElement(f,ve({},h,{key:"placeholder",isDisabled:y,isFocused:k,innerProps:{id:this.getElementId("placeholder")}}),b);if(w)return E.map(function(x,S){var R=x===A,T="".concat(i.getOptionLabel(x),"-").concat(i.getOptionValue(x));return M.createElement(s,ve({},h,{components:{Container:l,Label:c,Remove:d},isFocused:R,isDisabled:y,key:T,index:S,removeProps:{onClick:function(){return i.removeValue(x)},onTouchEnd:function(){return i.removeValue(x)},onMouseDown:function(P){P.preventDefault()}},data:x}),i.formatOptionLabel(x,"value"))});if(g)return null;var I=E[0];return M.createElement(u,ve({},h,{data:I,isDisabled:y}),this.formatOptionLabel(I,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),o=i.ClearIndicator,s=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,u=this.state.isFocused;if(!this.isClearable()||!o||c||!this.hasValue()||d)return null;var f={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return M.createElement(o,ve({},s,{innerProps:f,isFocused:u}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),o=i.LoadingIndicator,s=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,u=this.state.isFocused;if(!o||!d)return null;var f={"aria-hidden":"true"};return M.createElement(o,ve({},s,{innerProps:f,isDisabled:c,isFocused:u}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator,s=i.IndicatorSeparator;if(!o||!s)return null;var l=this.commonProps,c=this.props.isDisabled,d=this.state.isFocused;return M.createElement(s,ve({},l,{isDisabled:c,isFocused:d}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator;if(!o)return null;var s=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return M.createElement(o,ve({},s,{innerProps:d,isDisabled:l,isFocused:c}))}},{key:"renderMenu",value:function(){var i=this,o=this.getComponents(),s=o.Group,l=o.GroupHeading,c=o.Menu,d=o.MenuList,u=o.MenuPortal,f=o.LoadingMessage,h=o.NoOptionsMessage,p=o.Option,v=this.commonProps,y=this.state.focusedOption,w=this.props,g=w.captureMenuScroll,b=w.inputValue,_=w.isLoading,E=w.loadingMessage,A=w.minMenuHeight,k=w.maxMenuHeight,I=w.menuIsOpen,x=w.menuPlacement,S=w.menuPosition,R=w.menuPortalTarget,T=w.menuShouldBlockScroll,N=w.menuShouldScrollIntoView,P=w.noOptionsMessage,V=w.onMenuScrollToTop,$=w.onMenuScrollToBottom;if(!I)return null;var D=function(H,Y){var q=H.type,Q=H.data,J=H.isDisabled,ne=H.isSelected,oe=H.label,se=H.value,ae=y===Q,ie=J?void 0:function(){return i.onOptionHover(Q)},we=J?void 0:function(){return i.selectOption(Q)},Te="".concat(i.getElementId("option"),"-").concat(Y),ye={id:Te,onClick:we,onMouseMove:ie,onMouseOver:ie,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:ne};return M.createElement(p,ve({},v,{innerProps:ye,data:Q,isDisabled:J,isSelected:ne,key:Te,label:oe,type:q,value:se,isFocused:ae,innerRef:ae?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(H.data,"menu"))},O;if(this.hasOptions())O=this.getCategorizedOptions().map(function(G){if(G.type==="group"){var H=G.data,Y=G.options,q=G.index,Q="".concat(i.getElementId("group"),"-").concat(q),J="".concat(Q,"-heading");return M.createElement(s,ve({},v,{key:Q,data:H,options:Y,Heading:l,headingProps:{id:J,data:G.data},label:i.formatGroupLabel(G.data)}),G.options.map(function(ne){return D(ne,"".concat(q,"-").concat(ne.index))}))}else if(G.type==="option")return D(G,"".concat(G.index))});else if(_){var B=E({inputValue:b});if(B===null)return null;O=M.createElement(f,v,B)}else{var j=P({inputValue:b});if(j===null)return null;O=M.createElement(h,v,j)}var z={minMenuHeight:A,maxMenuHeight:k,menuPlacement:x,menuPosition:S,menuShouldScrollIntoView:N},W=M.createElement(BU,ve({},v,z),function(G){var H=G.ref,Y=G.placerProps,q=Y.placement,Q=Y.maxHeight;return M.createElement(c,ve({},v,z,{innerRef:H,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:_,placement:q}),M.createElement(pB,{captureEnabled:g,onTopArrive:V,onBottomArrive:$,lockEnabled:T},function(J){return M.createElement(d,ve({},v,{innerRef:function(oe){i.getMenuListRef(oe),J(oe)},innerProps:{role:"listbox","aria-multiselectable":v.isMulti,id:i.getElementId("listbox")},isLoading:_,maxHeight:Q,focusedOption:y}),O)}))});return R||S==="fixed"?M.createElement(u,ve({},v,{appendTo:R,controlElement:this.controlRef,menuPlacement:x,menuPosition:S}),W):W}},{key:"renderFormField",value:function(){var i=this,o=this.props,s=o.delimiter,l=o.isDisabled,c=o.isMulti,d=o.name,u=o.required,f=this.state.selectValue;if(u&&!this.hasValue()&&!l)return M.createElement(vB,{name:d,onFocus:this.onValueInputFocus});if(!(!d||l))if(c)if(s){var h=f.map(function(y){return i.getOptionValue(y)}).join(s);return M.createElement("input",{name:d,type:"hidden",value:h})}else{var p=f.length>0?f.map(function(y,w){return M.createElement("input",{key:"i-".concat(w),name:d,type:"hidden",value:i.getOptionValue(y)})}):M.createElement("input",{name:d,type:"hidden",value:""});return M.createElement("div",null,p)}else{var v=f[0]?this.getOptionValue(f[0]):"";return M.createElement("input",{name:d,type:"hidden",value:v})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,o=this.state,s=o.ariaSelection,l=o.focusedOption,c=o.focusedValue,d=o.isFocused,u=o.selectValue,f=this.getFocusableOptions();return M.createElement(nB,ve({},i,{id:this.getElementId("live-region"),ariaSelection:s,focusedOption:l,focusedValue:c,isFocused:d,selectValue:u,focusableOptions:f,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),o=i.Control,s=i.IndicatorsContainer,l=i.SelectContainer,c=i.ValueContainer,d=this.props,u=d.className,f=d.id,h=d.isDisabled,p=d.menuIsOpen,v=this.state.isFocused,y=this.commonProps=this.getCommonProps();return M.createElement(l,ve({},y,{className:u,innerProps:{id:f,onKeyDown:this.onKeyDown},isDisabled:h,isFocused:v}),this.renderLiveRegion(),M.createElement(o,ve({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:h,isFocused:v,menuIsOpen:p}),M.createElement(c,ve({},y,{isDisabled:h}),this.renderPlaceholderOrValue(),this.renderInput()),M.createElement(s,ve({},y,{isDisabled:h}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,o){var s=o.prevProps,l=o.clearFocusValueOnUpdate,c=o.inputIsHiddenAfterUpdate,d=o.ariaSelection,u=o.isFocused,f=o.prevWasFocused,h=o.instancePrefix,p=i.options,v=i.value,y=i.menuIsOpen,w=i.inputValue,g=i.isMulti,b=J3(v),_={};if(s&&(v!==s.value||p!==s.options||y!==s.menuIsOpen||w!==s.inputValue)){var E=y?LB(i,b):[],A=y?h_($u(i,b),"".concat(h,"-option")):[],k=l?MB(o,b):null,I=OB(o,E),x=Cp(A,I);_={selectValue:b,focusedOption:I,focusedOptionId:x,focusableOptionsWithIds:A,focusedValue:k,clearFocusValueOnUpdate:!1}}var S=c!=null&&i!==s?{inputIsHidden:c,inputIsHiddenAfterUpdate:void 0}:{},R=d,T=u&&f;return u&&!T&&(R={value:lu(g,b,b[0]||null),options:b,action:"initial-input-focus"},T=!f),(d==null?void 0:d.action)==="initial-input-focus"&&(R=null),me(me(me({},_),S),{},{prevProps:i,ariaSelection:R,prevWasFocused:T})}}]),n}(M.Component);D7.defaultProps=PB;var VB=M.forwardRef(function(t,e){var n=oV(t);return M.createElement(D7,ve({ref:e},n))}),UB=VB;function FB({onSubmit:t,onCancel:e,existingNodes:n,currentTreeName:r}){const[i,o]=M.useState(""),[s,l]=M.useState(""),[c,d]=M.useState(null),[u,f]=M.useState(null),[h,p]=M.useState(null),[v,y]=M.useState(null),[w,g]=M.useState(null),[b,_]=M.useState([]),[E,A]=M.useState(!1),{toast:k}=Dg(),I=T=>{_(T?T.map(N=>N.value):[])},x=()=>{k({title:"Insufficient permissions",description:"please, contact admin",variant:"destructive"})},S=async T=>{if(T.preventDefault(),console.log("Form submitted"),!E){A(!0);try{const P=await LD({id:"",name:i,gender:s,phone:u,dob:h,pids:b,fid:v&&v!=="unassigned"?[v]:[],mid:w&&w!=="unassigned"?[w]:[],img:null,treename:r},c);t(P)}catch(N){N.code==="permission-denied"?x():(console.error("Error adding/updating family member: ",N),k({title:"Error",description:"Failed to add/update family member",variant:"destructive"}))}finally{A(!1)}}},R=async T=>{if(T&&T.target&&T.target&&T.target.files&&T.target.files.length>0){const N=T.target.files[0],P={maxSizeMB:.2,useWebWorker:!0};try{const V=await jt(N,P);console.log(V),d(V)}catch(V){console.error("Error compressing image: ",V),k({title:"Error",description:"Failed to compress image",variant:"destructive"})}}else d(null)};return F.jsxs("form",{onSubmit:S,className:"space-y-4 overflow-y-auto",children:[F.jsxs("div",{children:[F.jsx($r,{htmlFor:"name",children:"Name"}),F.jsx(Ss,{id:"name",value:i,onChange:T=>o(T.target.value),required:!0})]}),F.jsxs("div",{children:[F.jsx($r,{htmlFor:"gender",children:"Gender"}),F.jsxs(Ds,{onValueChange:l,value:s,children:[F.jsx(Co,{children:F.jsx(Vs,{placeholder:"Select gender"})}),F.jsxs(Ao,{children:[F.jsx(br,{value:"male",children:"Male"}),F.jsx(br,{value:"female",children:"Female"})]})]})]}),F.jsxs("div",{children:[F.jsx($r,{htmlFor:"phone",children:"Phone No."}),F.jsx(Ss,{id:"phone",value:u,onChange:T=>f(T.target.value)})]}),F.jsxs("div",{children:[F.jsx($r,{htmlFor:"dob",children:"Date of Birth"}),F.jsx(Ss,{id:"dob",type:"date",value:h,onChange:T=>p(T.target.value)})]}),F.jsxs("div",{children:[F.jsx($r,{htmlFor:"image",children:"Image"}),F.jsx(Ss,{id:"image",type:"file",accept:"image/*",onChange:R})]}),F.jsxs("div",{children:[F.jsx($r,{htmlFor:"fatherId",children:"Father"}),F.jsxs(Ds,{onValueChange:y,value:v||void 0,children:[F.jsx(Co,{children:F.jsx(Vs,{placeholder:"Select father"})}),F.jsxs(Ao,{children:[F.jsx(br,{value:"unassigned",children:"None"}),n.filter(T=>T.gender==="male").map(T=>F.jsx(br,{value:T.id,children:T.name},T.id))]})]})]}),F.jsxs("div",{children:[F.jsx($r,{htmlFor:"motherId",children:"Mother"}),F.jsxs(Ds,{onValueChange:g,value:w||void 0,children:[F.jsx(Co,{children:F.jsx(Vs,{placeholder:"Select mother"})}),F.jsxs(Ao,{children:[F.jsx(br,{value:"unassigned",children:"None"}),n.filter(T=>T.gender==="female").map(T=>F.jsx(br,{value:T.id,children:T.name},T.id))]})]})]}),F.jsxs("div",{children:[F.jsx($r,{htmlFor:"partnerIds",children:"Partners"}),F.jsx(UB,{isMulti:!0,name:"partners",options:n.map(T=>({value:T.id,label:T.name})),onChange:I})]}),F.jsxs("div",{className:"flex justify-between",children:[F.jsx(nn,{type:"submit",disabled:E,children:E?"Adding...":"Add Member"}),F.jsx(nn,{type:"button",variant:"outline",onClick:e,children:"Cancel"})]})]})}const BB=(t="Default Tree")=>{const[e,n]=M.useState([]),[r,i]=M.useState(!0),[o,s]=M.useState(null);t.length==0&&(t="Default Tree");const l=bn(Pt,"familyMembersTest");return M.useCallback(async()=>{try{const c=await Kn(oa(l,sa("treename","==",t)));if(console.log("Snapshot:",c),c.empty){const d=Zo(l);await gO(d,{name:"",treename:t,gender:"",dob:null,phone:null,fid:[],mid:[],pids:[]}),console.log("Root member document created.")}}catch(c){throw console.error("Error ensuring collection existence:",c),s("Failed to check or create the collection."),c}},[l,t]),M.useEffect(()=>{i(!0);const c=oa(l,sa("treename","==",t)),d=vO(c,u=>{const f=u.docs.map(h=>{const p=h.data();return{id:h.id,name:p.name||"",gender:p.gender||"",img:p.img||"",dob:p.dob||"",phone:p.phone||"",pids:p.pids||[],fid:p.fid||[],mid:p.mid||[],treename:p.treename||"",linkedTree:p.linkedTree||""}});n(f),console.log("Nodes:",f),i(!1)},u=>{console.error("Error fetching members:",u),s("Failed to fetch family members."),i(!1)});return()=>d()},[t]),{nodes:e,loading:r,error:o}},m_=t=>{let e;const n=new Set,r=(d,u)=>{const f=typeof d=="function"?d(e):d;if(!Object.is(f,e)){const h=e;e=u??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(p=>p(e,h))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:d=>(n.add(d),()=>n.delete(d))},c=e=t(r,i,l);return l},jB=t=>t?m_(t):m_,$B=t=>t;function zB(t,e=$B){const n=_r.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return _r.useDebugValue(n),n}const g_=t=>{const e=jB(t),n=r=>zB(e,r);return Object.assign(n,e),n},HB=t=>t?g_(t):g_,f0=HB(t=>({family:null,setFamily:e=>t(()=>({family:e})),isOpen:!1,setIsOpen:e=>t(()=>({isOpen:e})),user:null,setUser:e=>t(()=>({user:e}))}));function qB(t,e){return M.useReducer((n,r)=>e[n][r]??n,t)}var mc=t=>{const{present:e,children:n}=t,r=WB(e),i=typeof n=="function"?n({present:r.isPresent}):M.Children.only(n),o=ht(r.ref,GB(i));return typeof n=="function"||r.isPresent?M.cloneElement(i,{ref:o}):null};mc.displayName="Presence";function WB(t){const[e,n]=M.useState(),r=M.useRef({}),i=M.useRef(t),o=M.useRef("none"),s=t?"mounted":"unmounted",[l,c]=qB(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return M.useEffect(()=>{const d=cu(r.current);o.current=l==="mounted"?d:"none"},[l]),Ut(()=>{const d=r.current,u=i.current;if(u!==t){const h=o.current,p=cu(d);t?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&h!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),Ut(()=>{if(e){let d;const u=e.ownerDocument.defaultView??window,f=p=>{const y=cu(r.current).includes(p.animationName);if(p.target===e&&y&&(c("ANIMATION_END"),!i.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",d=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},h=p=>{p.target===e&&(o.current=cu(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{u.clearTimeout(d),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:M.useCallback(d=>{d&&(r.current=getComputedStyle(d)),n(d)},[])}}function cu(t){return(t==null?void 0:t.animationName)||"none"}function GB(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Yg="Dialog",[V7,Kj]=uf(Yg),[YB,mr]=V7(Yg),U7=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:s=!0}=t,l=M.useRef(null),c=M.useRef(null),[d=!1,u]=vd({prop:r,defaultProp:i,onChange:o});return F.jsx(YB,{scope:e,triggerRef:l,contentRef:c,contentId:Ls(),titleId:Ls(),descriptionId:Ls(),open:d,onOpenChange:u,onOpenToggle:M.useCallback(()=>u(f=>!f),[u]),modal:s,children:n})};U7.displayName=Yg;var F7="DialogTrigger",KB=M.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=mr(F7,n),o=ht(e,i.triggerRef);return F.jsx(Oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Qg(i.open),...r,ref:o,onClick:Me(t.onClick,i.onOpenToggle)})});KB.displayName=F7;var Kg="DialogPortal",[XB,B7]=V7(Kg,{forceMount:void 0}),j7=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,o=mr(Kg,e);return F.jsx(XB,{scope:e,forceMount:n,children:M.Children.map(r,s=>F.jsx(mc,{present:n||o.open,children:F.jsx(mf,{asChild:!0,container:i,children:s})}))})};j7.displayName=Kg;var Wd="DialogOverlay",$7=M.forwardRef((t,e)=>{const n=B7(Wd,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,o=mr(Wd,t.__scopeDialog);return o.modal?F.jsx(mc,{present:r||o.open,children:F.jsx(QB,{...i,ref:e})}):null});$7.displayName=Wd;var QB=M.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=mr(Wd,n);return F.jsx(Cm,{as:Do,allowPinchZoom:!0,shards:[i.contentRef],children:F.jsx(Oe.div,{"data-state":Qg(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Wo="DialogContent",z7=M.forwardRef((t,e)=>{const n=B7(Wo,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,o=mr(Wo,t.__scopeDialog);return F.jsx(mc,{present:r||o.open,children:o.modal?F.jsx(JB,{...i,ref:e}):F.jsx(ZB,{...i,ref:e})})});z7.displayName=Wo;var JB=M.forwardRef((t,e)=>{const n=mr(Wo,t.__scopeDialog),r=M.useRef(null),i=ht(e,n.contentRef,r);return M.useEffect(()=>{const o=r.current;if(o)return y4(o)},[]),F.jsx(H7,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Me(t.onCloseAutoFocus,o=>{var s;o.preventDefault(),(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:Me(t.onPointerDownOutside,o=>{const s=o.detail.originalEvent,l=s.button===0&&s.ctrlKey===!0;(s.button===2||l)&&o.preventDefault()}),onFocusOutside:Me(t.onFocusOutside,o=>o.preventDefault())})}),ZB=M.forwardRef((t,e)=>{const n=mr(Wo,t.__scopeDialog),r=M.useRef(!1),i=M.useRef(!1);return F.jsx(H7,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var s,l;(s=t.onCloseAutoFocus)==null||s.call(t,o),o.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const s=o.target;((d=n.triggerRef.current)==null?void 0:d.contains(s))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),H7=M.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...s}=t,l=mr(Wo,n),c=M.useRef(null),d=ht(e,c);return Kb(),F.jsxs(F.Fragment,{children:[F.jsx(vm,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:F.jsx(df,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Qg(l.open),...s,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),F.jsxs(F.Fragment,{children:[F.jsx(ej,{titleId:l.titleId}),F.jsx(nj,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Xg="DialogTitle",q7=M.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=mr(Xg,n);return F.jsx(Oe.h2,{id:i.titleId,...r,ref:e})});q7.displayName=Xg;var W7="DialogDescription",G7=M.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=mr(W7,n);return F.jsx(Oe.p,{id:i.descriptionId,...r,ref:e})});G7.displayName=W7;var Y7="DialogClose",K7=M.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=mr(Y7,n);return F.jsx(Oe.button,{type:"button",...r,ref:e,onClick:Me(t.onClick,()=>i.onOpenChange(!1))})});K7.displayName=Y7;function Qg(t){return t?"open":"closed"}var X7="DialogTitleWarning",[Xj,Q7]=HI(X7,{contentName:Wo,titleName:Xg,docsSlug:"dialog"}),ej=({titleId:t})=>{const e=Q7(X7),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return M.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},tj="DialogDescriptionWarning",nj=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Q7(tj).contentName}}.`;return M.useEffect(()=>{var o;const i=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},rj=U7,ij=j7,J7=$7,Z7=z7,e8=q7,t8=G7,oj=K7;const v_=rj,sj=ij,n8=M.forwardRef(({className:t,...e},n)=>F.jsx(J7,{ref:n,className:tt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));n8.displayName=J7.displayName;const h0=M.forwardRef(({className:t,children:e,...n},r)=>F.jsxs(sj,{children:[F.jsx(n8,{}),F.jsxs(Z7,{ref:r,className:tt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,F.jsxs(oj,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[F.jsx(Hb,{className:"h-4 w-4"}),F.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));h0.displayName=Z7.displayName;const p0=({className:t,...e})=>F.jsx("div",{className:tt("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});p0.displayName="DialogHeader";const m0=({className:t,...e})=>F.jsx("div",{className:tt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});m0.displayName="DialogFooter";const g0=M.forwardRef(({className:t,...e},n)=>F.jsx(e8,{ref:n,className:tt("text-lg font-semibold leading-none tracking-tight",t),...e}));g0.displayName=e8.displayName;const r8=M.forwardRef(({className:t,...e},n)=>F.jsx(t8,{ref:n,className:tt("text-sm text-muted-foreground",t),...e}));r8.displayName=t8.displayName;/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i8=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...l},c)=>M.createElement("svg",{ref:c,...lj,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:i8("lucide",i),...l},[...s.map(([d,u])=>M.createElement(d,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=(t,e)=>{const n=M.forwardRef(({className:r,...i},o)=>M.createElement(cj,{ref:o,iconNode:e,className:i8(`lucide-${aj(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=uj("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),fj=()=>{const t=M.useRef(null),e=M.useRef(null),[n,r]=M.useState(!1),{toast:i}=Dg();f0(W=>W.user);const[o,s]=M.useState(null),[l,c]=M.useState(!1),[d,u]=M.useState(""),[f,h]=M.useState([]),{nodes:p,loading:v,error:y}=BB(d),[w,g]=M.useState(!1),[b,_]=M.useState(""),[E,A]=M.useState(!1),[k,I]=M.useState(null),[x,S]=M.useState(""),[R,T]=M.useState(null);M.useEffect(()=>{async function W(){try{const G=await MD();h(G),G.length>0&&!d&&u(G[0])}catch(G){console.error("Error fetching tree names:",G)}}W()},[]),M.useEffect(()=>{async function W(){if(d){const G=await UD(d);s(G)}else s(null)}W(),document.addEventListener("click",G=>{const H=document.querySelector(".bft-search");if(H){const Y=H.lastElementChild;Y&&Y.querySelectorAll("tr").forEach(Q=>{Q.addEventListener("click",()=>{Y.innerHTML=""})})}})},[d]),M.useEffect(()=>{var W;if(t.current&&p.length>0&&!v){Fx();try{console.log(p);const G=p.map(Q=>{var oe,se;const J=FD(p,Q.id);console.log(J);const ne={id:Q.id,name:Q.name??"",gender:Q.gender??"",dob:Q.dob??"",phone:Q.phone??"",partner:(J==null?void 0:J.partners.join(", "))??"",children:(J==null?void 0:J.children.join(", "))??"",grandchildren:(J==null?void 0:J.grandchildren.join(", "))??""};return Q.img&&(ne.img=Q.img),((oe=Q.fid)==null?void 0:oe.length)>0&&(ne.fid=Q.fid),((se=Q.mid)==null?void 0:se.length)>0&&(ne.mid=Q.mid),Q.pids&&Q.pids.length>0&&(ne.pids=Q.pids),Q.linkedTree&&(ne.linkTree=`
              <div class="link-tree-btn" data-nodeid="${Q.id}" title="Go to linked tree" style="width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#039BE5;border:2px solid #fff;box-shadow:0 6px 12px rgba(3,155,229,0.18);cursor:pointer;">
                <button style="background:transparent;border:none;font-size:16px;line-height:1;color:#fff;cursor:pointer;padding:0;margin:0;" aria-label="Go to linked tree">🔗</button>
              </div>
            `),ne});console.log(G);const H=new Xe(t.current,{nodes:G,template:"atul",nodeBinding:{field_0:"name",field_1:"partner",field_2:"children",field_3:"grandchildren",field_4:"linkTree",img_0:"img"},searchFields:["name"],levelSeparation:100,siblingSeparation:50,subtreeSeparation:100,toolbar:{zoom:!0,fit:!0},roots:o?[o]:[],editForm:{elements:[{type:"textbox",label:"Full Name",binding:"name"},{type:"textbox",label:"Gender",binding:"gender"},{type:"textbox",label:"Photo Url",binding:"img",btn:"Upload"},[{type:"textbox",label:"Phone",binding:"phone"},{type:"date",label:"Date Of Birth",binding:"dob"}],{type:"select",label:"Link to Tree",binding:"linkToTree",options:[...new Set(f.filter(Q=>Q!==d))].map(Q=>({value:Q,text:Q}))}],buttons:{edit:{icon:Xe.icon.edit(24,24,"#fff"),text:"Edit",hideIfEditMode:!0,hideIfDetailsMode:!1},linkTree:{icon:Xe.icon.link(24,24,"#fff"),text:"Link with Tree",hideIfEditMode:!0,hideIfDetailsMode:!1}},addMore:""}});e.current=H,e.current.onUpdateNode(V);const Y=Q=>{const ne=Q.target.closest(".link-tree-btn");if(ne){const oe=ne.getAttribute("data-nodeid");oe&&P(oe)}};(W=t.current)==null||W.addEventListener("click",Y);const q=()=>{var Q;(Q=t.current)==null||Q.removeEventListener("click",Y)};return e.current.editUI.on("element-btn-click",function(Q,J){J.event.target.innerHTML=="Upload"&&Xe.fileUploadDialog(async function(ne){const oe={maxSizeMB:.2,useWebWorker:!0};try{i({title:"Uploading Image",description:"We are uploading your image, wait for a moment"});const se=await jt(ne,oe),ae=await PD(se);let ie=J.nodeId;Ou(ie,{img:ae}).then(()=>{i({title:"Success",description:"Image uploaded successfully"})})}catch(se){console.error("Error compressing image: ",se),i({title:"Error",description:"Failed to compress image",variant:"destructive"})}})}),e.current.editUI.on("button-click",function(Q,J){if(J.name==="linkTree"){const ne=p.find(ae=>ae.id===J.nodeId),oe=(ne==null?void 0:ne.linkedTree)||"",se=oe&&oe!==d?oe:"";I(J.nodeId),S(se),T(oe||null),A(!0)}}),()=>{q()}}catch(G){console.error("Error initializing family tree:",G)}}},[p,v]);const N=()=>{i({title:"Insufficient permissions",description:"Please contact admin",variant:"destructive"})},P=async W=>{try{const G=p.find(Y=>Y.id===W),H=G==null?void 0:G.linkedTree;if(!H){i({title:"Error",description:"No linked tree found for this member",variant:"destructive"});return}if(e.current){try{e.current.destroy()}catch{}e.current=null}u(H),s(null)}catch(G){console.error("Error switching to linked tree:",G),i({title:"Error",description:"Failed to switch tree",variant:"destructive"})}},V=async W=>{if(W.updateNodesData.length>0){const G=W.updateNodesData;for(const H of G)try{H.linkToTree&&H.linkToTree!==d&&await D(H.id,H.linkToTree),await Ou(H.id,{name:H.name,gender:H.gender,img:H.img,phone:H.phone,dob:H.dob})}catch(Y){Y.code==="permission-denied"?(console.error("Insufficient permissions to update the document."),N()):(console.error("Error updating document: ",Y),i({title:"Error",description:"Failed to update family member",variant:"destructive"}))}}if(W.removeNodeId!==null)try{return await Ux(W.removeNodeId.toString()),console.log("Document successfully removed!"),i({title:"Success",description:"Family member removed successfully"}),!0}catch(G){G.code==="permission-denied"?N():(console.error("Error removing document: ",G),i({title:"Error",description:"Failed to remove family member",variant:"destructive"}))}return!1},$=()=>{r(!0)},D=async(W,G)=>{if(!G||!W){i({title:"Error",description:"Please select a tree to link to",variant:"destructive"});return}try{const H=p.find(q=>q.id===W);if(((H==null?void 0:H.linkedTree)||"")===G){i({title:"Info",description:`Member already linked to ${G}`});return}await Ou(W,{linkedTree:G}),i({title:"Success",description:`Member linked to ${G} tree successfully`})}catch(H){console.error("Error linking member to tree:",H),i({title:"Error",description:"Failed to link member to tree",variant:"destructive"})}},O=async()=>{if(d)try{await OD(d),i({title:"Success",description:`Tree "${d}" deleted successfully`}),h(W=>W.filter(G=>G!==d)),u("")}catch(W){console.error("Error deleting tree:",W),i({title:"Error",description:"Failed to delete tree",variant:"destructive"})}},B=()=>{!e.current||!o||!d||VD(o,d).then(()=>{var W;!e.current||!o||(e.current.config.roots=[o],(W=e.current)==null||W.draw())}).catch(W=>{console.error("Error setting root family member: ",W)})},j=async()=>{r(!1)},z=()=>{if(b.trim()===""){i({title:"Error",description:"Please enter a name for the new tree",variant:"destructive"});return}h(W=>[...W,b]),u(b),_(""),g(!1),i({title:"Success",description:`New tree "${b}" created successfully`})};return v?F.jsx("div",{className:"flex items-center justify-center h-screen",children:F.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-primary"})}):y?F.jsxs("div",{className:"text-center text-red-500 p-4",children:["Error loading family tree data: ",y]}):F.jsxs("div",{className:"flex w-full h-screen",children:[F.jsxs("div",{className:`fixed top-0 left-0 w-full md:w-1/5 h-full bg-white shadow-lg p-4 transition-transform duration-300 ease-in-out z-50 ${l?"translate-x-0":"-translate-x-full"}`,children:[F.jsx("div",{className:"flex justify-between items-center mb-4",children:F.jsx(nn,{onClick:()=>c(!1),variant:"ghost",size:"icon",children:F.jsx(DI,{})})}),F.jsxs("div",{className:"space-y-4",children:[F.jsxs("div",{children:[F.jsx("label",{htmlFor:"treeSelect",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Tree:"}),F.jsxs("div",{className:"flex gap-2",children:[F.jsxs(Ds,{value:d,onValueChange:u,children:[F.jsx(Co,{children:F.jsx(Vs,{placeholder:"Select a tree"})}),F.jsx(Ao,{children:f.map(W=>F.jsx(br,{value:W,children:W},W))})]}),F.jsx(nn,{variant:"default",className:"w-12",size:"icon",onClick:O,children:F.jsx(jI,{})})]}),F.jsx(nn,{variant:"default",className:"absolute bottom-7 left-3 p-[10px]",size:"icon",onClick:()=>DD(),children:F.jsx(dj,{})})]}),F.jsx(nn,{onClick:()=>g(!0),className:"w-full",children:"Create New Tree"}),F.jsxs("div",{children:[F.jsx("label",{htmlFor:"rootNodeSelect",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Root Node:"}),F.jsx("select",{id:"rootNodeSelect",className:"w-full p-2 border border-gray-300 rounded",onChange:W=>s(W.target.value),value:o||"",children:p.map(W=>F.jsx("option",{value:W.id,children:W.name},W.id))})]}),F.jsx(nn,{onClick:B,className:"w-full",children:"Set as Root Node"}),F.jsx(nn,{onClick:$,className:"w-full",children:"Add Member"})]})]}),F.jsxs("div",{className:"flex-1 relative",children:[F.jsx("div",{className:"w-full h-full",style:{height:"90dvh"},ref:t}),!l&&F.jsx(nn,{className:"absolute bottom-7 left-3",onClick:()=>c(!0),variant:"default",size:"icon",children:F.jsx(FI,{})}),F.jsxs(Ds,{value:d,onValueChange:u,children:[F.jsx(Co,{className:"absolute bottom-7 right-3 w-48",children:F.jsx(Vs,{placeholder:"Select a tree"})}),F.jsx(Ao,{children:[...new Set(f)].map(W=>F.jsx(br,{value:W,children:W},W))})]})]}),n&&F.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 transition-transform duration-500 ease-in-out",children:F.jsx("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md ",children:F.jsx(FB,{onSubmit:j,onCancel:()=>r(!1),existingNodes:p,currentTreeName:d})})}),F.jsx(v_,{open:w,onOpenChange:g,children:F.jsxs(h0,{children:[F.jsx(p0,{children:F.jsx(g0,{children:"Create New Tree"})}),F.jsx("div",{className:"py-4",children:F.jsx(Ss,{type:"text",placeholder:"Enter tree name",value:b,onChange:W=>_(W.target.value)})}),F.jsxs(m0,{children:[F.jsx(nn,{onClick:()=>g(!1),variant:"outline",children:"Cancel"}),F.jsx(nn,{onClick:z,children:"Create"})]})]})}),F.jsx(v_,{open:E,onOpenChange:A,children:F.jsxs(h0,{children:[F.jsx(p0,{children:F.jsx(g0,{children:"Link Member with Tree"})}),F.jsx(r8,{children:"Select a target tree to link this member with. Existing links are shown below."}),F.jsxs("div",{className:"py-4 space-y-4",children:[F.jsxs("div",{children:[F.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currently linked trees:"}),F.jsx("div",{className:"text-sm text-muted-foreground",children:R!==null?R||"(none)":k&&(()=>{const W=p.find(H=>H.id===k),G=(W==null?void 0:W.linkedTree)||"";return G||"(none)"})()||"(none)"})]}),F.jsxs("div",{children:[F.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Tree to Link:"}),F.jsxs(Ds,{value:x,onValueChange:S,children:[F.jsx(Co,{children:F.jsx(Vs,{placeholder:"Select a tree"})}),F.jsx(Ao,{children:f.filter(W=>W!==d).map(W=>F.jsx(br,{value:W,children:W},W))})]})]})]}),F.jsxs(m0,{children:[F.jsx(nn,{onClick:()=>A(!1),variant:"outline",children:"Cancel"}),F.jsx(nn,{onClick:async()=>{if(k){if(!x){i({title:"Error",description:"Please select a tree",variant:"destructive"});return}await D(k,x),T(W=>W===x?W:x),A(!1)}},children:"Link with Tree"})]})]})})]})};var Jg="Avatar",[hj,Qj]=uf(Jg),[pj,o8]=hj(Jg),s8=M.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,o]=M.useState("idle");return F.jsx(pj,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:o,children:F.jsx(Oe.span,{...r,ref:e})})});s8.displayName=Jg;var a8="AvatarImage",l8=M.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...o}=t,s=o8(a8,n),l=mj(r,o.referrerPolicy),c=Cn(d=>{i(d),s.onImageLoadingStatusChange(d)});return Ut(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?F.jsx(Oe.img,{...o,ref:e,src:r}):null});l8.displayName=a8;var c8="AvatarFallback",u8=M.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,o=o8(c8,n),[s,l]=M.useState(r===void 0);return M.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),s&&o.imageLoadingStatus!=="loaded"?F.jsx(Oe.span,{...i,ref:e}):null});u8.displayName=c8;function mj(t,e){const[n,r]=M.useState("idle");return Ut(()=>{if(!t){r("error");return}let i=!0;const o=new window.Image,s=l=>()=>{i&&r(l)};return r("loading"),o.onload=s("loaded"),o.onerror=s("error"),o.src=t,e&&(o.referrerPolicy=e),()=>{i=!1}},[t,e]),n}var d8=s8,f8=l8,h8=u8;const p8=M.forwardRef(({className:t,...e},n)=>F.jsx(d8,{ref:n,className:tt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));p8.displayName=d8.displayName;const m8=M.forwardRef(({className:t,...e},n)=>F.jsx(f8,{ref:n,className:tt("aspect-square h-full w-full",t),...e}));m8.displayName=f8.displayName;const g8=M.forwardRef(({className:t,...e},n)=>F.jsx(h8,{ref:n,className:tt("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));g8.displayName=h8.displayName;const gj=new qr,vj=()=>{const t=f0(i=>i.user),e=f0(i=>i.setUser);M.useEffect(()=>{oN(mp,i=>{e(i),console.log("currentUser",i)})},[]);const n=async()=>{try{await IN(mp,gj)}catch(i){console.error("Error logging in: ",i)}},r=async()=>{try{await mp.signOut(),e(null)}catch(i){console.error("Error logging out: ",i)}};return F.jsx("div",{className:"absolute z-10 m-3 mt-6",children:t?F.jsxs("div",{children:[F.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[F.jsxs(p8,{children:[F.jsx(m8,{src:t.photoURL,alt:"user avatar"}),F.jsx(g8,{children:t.displayName[0]})]}),F.jsx("h5",{children:t.displayName})]}),F.jsx(nn,{onClick:r,children:"Logout"})]}):F.jsx(nn,{onClick:n,children:"Login with Google"})})};var Zg="ToastProvider",[ev,yj,_j]=qb("Toast"),[v8,Jj]=uf("Toast",[_j]),[bj,sh]=v8(Zg),y8=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:s}=t,[l,c]=M.useState(null),[d,u]=M.useState(0),f=M.useRef(!1),h=M.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Zg}\`. Expected non-empty \`string\`.`),F.jsx(ev.Provider,{scope:e,children:F.jsx(bj,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:o,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:M.useCallback(()=>u(p=>p+1),[]),onToastRemove:M.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:s})})};y8.displayName=Zg;var _8="ToastViewport",wj=["F8"],v0="toast.viewportPause",y0="toast.viewportResume",b8=M.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=wj,label:i="Notifications ({hotkey})",...o}=t,s=sh(_8,n),l=yj(n),c=M.useRef(null),d=M.useRef(null),u=M.useRef(null),f=M.useRef(null),h=ht(e,f,s.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=s.toastCount>0;M.useEffect(()=>{const w=g=>{var _;r.length!==0&&r.every(E=>g[E]||g.code===E)&&((_=f.current)==null||_.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),M.useEffect(()=>{const w=c.current,g=f.current;if(v&&w&&g){const b=()=>{if(!s.isClosePausedRef.current){const k=new CustomEvent(v0);g.dispatchEvent(k),s.isClosePausedRef.current=!0}},_=()=>{if(s.isClosePausedRef.current){const k=new CustomEvent(y0);g.dispatchEvent(k),s.isClosePausedRef.current=!1}},E=k=>{!w.contains(k.relatedTarget)&&_()},A=()=>{w.contains(document.activeElement)||_()};return w.addEventListener("focusin",b),w.addEventListener("focusout",E),w.addEventListener("pointermove",b),w.addEventListener("pointerleave",A),window.addEventListener("blur",b),window.addEventListener("focus",_),()=>{w.removeEventListener("focusin",b),w.removeEventListener("focusout",E),w.removeEventListener("pointermove",b),w.removeEventListener("pointerleave",A),window.removeEventListener("blur",b),window.removeEventListener("focus",_)}}},[v,s.isClosePausedRef]);const y=M.useCallback(({tabbingDirection:w})=>{const b=l().map(_=>{const E=_.ref.current,A=[E,...Mj(E)];return w==="forwards"?A:A.reverse()});return(w==="forwards"?b.reverse():b).flat()},[l]);return M.useEffect(()=>{const w=f.current;if(w){const g=b=>{var A,k,I;const _=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!_){const x=document.activeElement,S=b.shiftKey;if(b.target===w&&S){(A=d.current)==null||A.focus();return}const N=y({tabbingDirection:S?"backwards":"forwards"}),P=N.findIndex(V=>V===x);Ap(N.slice(P+1))?b.preventDefault():S?(k=d.current)==null||k.focus():(I=u.current)==null||I.focus()}};return w.addEventListener("keydown",g),()=>w.removeEventListener("keydown",g)}},[l,y]),F.jsxs(nC,{ref:c,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&F.jsx(_0,{ref:d,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"forwards"});Ap(w)}}),F.jsx(ev.Slot,{scope:n,children:F.jsx(Oe.ol,{tabIndex:-1,...o,ref:h})}),v&&F.jsx(_0,{ref:u,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"backwards"});Ap(w)}})]})});b8.displayName=_8;var w8="ToastFocusProxy",_0=M.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,o=sh(w8,n);return F.jsx(gf,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:s=>{var d;const l=s.relatedTarget;!((d=o.viewport)!=null&&d.contains(l))&&r()}})});_0.displayName=w8;var ah="Toast",xj="toast.swipeStart",Ej="toast.swipeMove",Sj="toast.swipeCancel",Ij="toast.swipeEnd",x8=M.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:o,...s}=t,[l=!0,c]=vd({prop:r,defaultProp:i,onChange:o});return F.jsx(mc,{present:n||l,children:F.jsx(Tj,{open:l,...s,ref:e,onClose:()=>c(!1),onPause:Cn(t.onPause),onResume:Cn(t.onResume),onSwipeStart:Me(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Me(t.onSwipeMove,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Me(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Me(t.onSwipeEnd,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});x8.displayName=ah;var[Cj,Aj]=v8(ah,{onClose(){}}),Tj=M.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:o,onClose:s,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:p,...v}=t,y=sh(ah,n),[w,g]=M.useState(null),b=ht(e,V=>g(V)),_=M.useRef(null),E=M.useRef(null),A=i||y.duration,k=M.useRef(0),I=M.useRef(A),x=M.useRef(0),{onToastAdd:S,onToastRemove:R}=y,T=Cn(()=>{var $;(w==null?void 0:w.contains(document.activeElement))&&(($=y.viewport)==null||$.focus()),s()}),N=M.useCallback(V=>{!V||V===1/0||(window.clearTimeout(x.current),k.current=new Date().getTime(),x.current=window.setTimeout(T,V))},[T]);M.useEffect(()=>{const V=y.viewport;if(V){const $=()=>{N(I.current),d==null||d()},D=()=>{const O=new Date().getTime()-k.current;I.current=I.current-O,window.clearTimeout(x.current),c==null||c()};return V.addEventListener(v0,D),V.addEventListener(y0,$),()=>{V.removeEventListener(v0,D),V.removeEventListener(y0,$)}}},[y.viewport,A,c,d,N]),M.useEffect(()=>{o&&!y.isClosePausedRef.current&&N(A)},[o,A,y.isClosePausedRef,N]),M.useEffect(()=>(S(),()=>R()),[S,R]);const P=M.useMemo(()=>w?k8(w):null,[w]);return y.viewport?F.jsxs(F.Fragment,{children:[P&&F.jsx(kj,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:P}),F.jsx(Cj,{scope:n,onClose:T,children:oo.createPortal(F.jsx(ev.ItemSlot,{scope:n,children:F.jsx(tC,{asChild:!0,onEscapeKeyDown:Me(l,()=>{y.isFocusedToastEscapeKeyDownRef.current||T(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:F.jsx(Oe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":y.swipeDirection,...v,ref:b,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Me(t.onKeyDown,V=>{V.key==="Escape"&&(l==null||l(V.nativeEvent),V.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:Me(t.onPointerDown,V=>{V.button===0&&(_.current={x:V.clientX,y:V.clientY})}),onPointerMove:Me(t.onPointerMove,V=>{if(!_.current)return;const $=V.clientX-_.current.x,D=V.clientY-_.current.y,O=!!E.current,B=["left","right"].includes(y.swipeDirection),j=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,z=B?j(0,$):0,W=B?0:j(0,D),G=V.pointerType==="touch"?10:2,H={x:z,y:W},Y={originalEvent:V,delta:H};O?(E.current=H,uu(Ej,f,Y,{discrete:!1})):y_(H,y.swipeDirection,G)?(E.current=H,uu(xj,u,Y,{discrete:!1}),V.target.setPointerCapture(V.pointerId)):(Math.abs($)>G||Math.abs(D)>G)&&(_.current=null)}),onPointerUp:Me(t.onPointerUp,V=>{const $=E.current,D=V.target;if(D.hasPointerCapture(V.pointerId)&&D.releasePointerCapture(V.pointerId),E.current=null,_.current=null,$){const O=V.currentTarget,B={originalEvent:V,delta:$};y_($,y.swipeDirection,y.swipeThreshold)?uu(Ij,p,B,{discrete:!0}):uu(Sj,h,B,{discrete:!0}),O.addEventListener("click",j=>j.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),kj=t=>{const{__scopeToast:e,children:n,...r}=t,i=sh(ah,e),[o,s]=M.useState(!1),[l,c]=M.useState(!1);return Pj(()=>s(!0)),M.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:F.jsx(mf,{asChild:!0,children:F.jsx(gf,{...r,children:o&&F.jsxs(F.Fragment,{children:[i.label," ",n]})})})},Rj="ToastTitle",E8=M.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return F.jsx(Oe.div,{...r,ref:e})});E8.displayName=Rj;var Nj="ToastDescription",S8=M.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return F.jsx(Oe.div,{...r,ref:e})});S8.displayName=Nj;var I8="ToastAction",C8=M.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?F.jsx(T8,{altText:n,asChild:!0,children:F.jsx(tv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${I8}\`. Expected non-empty \`string\`.`),null)});C8.displayName=I8;var A8="ToastClose",tv=M.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=Aj(A8,n);return F.jsx(T8,{asChild:!0,children:F.jsx(Oe.button,{type:"button",...r,ref:e,onClick:Me(t.onClick,i.onClose)})})});tv.displayName=A8;var T8=M.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return F.jsx(Oe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function k8(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Lj(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!i)if(o){const s=r.dataset.radixToastAnnounceAlt;s&&e.push(s)}else e.push(...k8(r))}}),e}function uu(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?jb(i,o):i.dispatchEvent(o)}var y_=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),o=r>i;return e==="left"||e==="right"?o&&r>n:!o&&i>n};function Pj(t=()=>{}){const e=Cn(t);Ut(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function Lj(t){return t.nodeType===t.ELEMENT_NODE}function Mj(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Ap(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Oj=y8,R8=b8,N8=x8,P8=E8,L8=S8,M8=C8,O8=tv;const Dj=Oj,D8=M.forwardRef(({className:t,...e},n)=>F.jsx(R8,{ref:n,className:tt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));D8.displayName=R8.displayName;const Vj=mm("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),V8=M.forwardRef(({className:t,variant:e,...n},r)=>F.jsx(N8,{ref:r,className:tt(Vj({variant:e}),t),...n}));V8.displayName=N8.displayName;const Uj=M.forwardRef(({className:t,...e},n)=>F.jsx(M8,{ref:n,className:tt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));Uj.displayName=M8.displayName;const U8=M.forwardRef(({className:t,...e},n)=>F.jsx(O8,{ref:n,className:tt("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:F.jsx(Hb,{className:"h-4 w-4"})}));U8.displayName=O8.displayName;const F8=M.forwardRef(({className:t,...e},n)=>F.jsx(P8,{ref:n,className:tt("text-sm font-semibold [&+div]:text-xs",t),...e}));F8.displayName=P8.displayName;const B8=M.forwardRef(({className:t,...e},n)=>F.jsx(L8,{ref:n,className:tt("text-sm opacity-90",t),...e}));B8.displayName=L8.displayName;function Fj(){const{toasts:t}=Dg();return F.jsxs(Dj,{children:[t.map(function({id:e,title:n,description:r,action:i,...o}){return F.jsxs(V8,{...o,children:[F.jsxs("div",{className:"grid gap-1",children:[n&&F.jsx(F8,{children:n}),r&&F.jsx(B8,{children:r})]}),i,F.jsx(U8,{})]},e)}),F.jsx(D8,{})]})}const Bj=()=>F.jsxs("div",{className:"App",children:[F.jsx(vj,{}),F.jsx(fj,{}),F.jsx(Fj,{})]});Pb(document.getElementById("root")).render(F.jsx(M.StrictMode,{children:F.jsx(Bj,{})}))});export default jj();
